 /*------------- Begin : 1angular.min.js-----------*/ 

/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK","angular.callbacks."+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),W.angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va),w(X).ready(function(){Xc(X,fc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');


 /*------------- End : 1angular.min.js-----------*/ 

 /*------------- Begin : angular-animate.min.js-----------*/ 

/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,e,O){'use strict';e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(G,s,g){g=g.ngAnimateChildren;e.isString(g)&&0===g.length?s.data("$$ngAnimateChildren",!0):G.$watch(g,function(e){s.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,s){return function(g){return e(function(){g()})}}]).config(["$provide","$animateProvider",function(G,s){function g(e){for(var g=0;g<e.length;g++){var l=e[g];if(l.nodeType==aa)return l}}
function B(l){return e.element(g(l))}var m=e.noop,u=e.forEach,P=s.$$selectors,aa=1,l="$$ngAnimateState",V="$$ngAnimateChildren",J="ng-animate",n={running:!0};G.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(z,F,$,R,E,H,O){function K(a){var b=a.data(l)||{};b.running=!0;a.data(l,b)}function L(a){if(a){var b=[],c={};a=a.substr(1).split(".");($.transitions||$.animations)&&b.push(F.get(P[""]));for(var d=0;d<a.length;d++){var f=
a[d],e=P[f];e&&!c[f]&&(b.push(F.get(e)),c[f]=!0)}return b}}function G(a,b,c){function d(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),n.push({event:b,fn:c}),h.push({event:b,fn:d}),!0}function f(b,d,e){var f=[];u(b,function(a){a.fn&&f.push(a)});var g=0;u(f,function(b,l){var C=function(){a:{if(d){(d[l]||m)();if(++g<f.length)break a;d=null}e()}};switch(b.event){case "setClass":d.push(b.fn(a,A,k,C));break;case "addClass":d.push(b.fn(a,A||c,
C));break;case "removeClass":d.push(b.fn(a,k||c,C));break;default:d.push(b.fn(a,C))}});d&&0===d.length&&e()}var g=a[0];if(g){var l="setClass"==b,p=l||"addClass"==b||"removeClass"==b,A,k;e.isArray(c)&&(A=c[0],k=c[1],c=A+" "+k);var x=a.attr("class")+" "+c;if(M(x)){var t=m,w=[],h=[],q=m,y=[],n=[],x=(" "+x).replace(/\s+/g,".");u(L(x),function(a){!d(a,b)&&l&&(d(a,"addClass"),d(a,"removeClass"))});return{node:g,event:b,className:c,isClassBased:p,isSetClassOperation:l,before:function(a){t=a;f(h,w,function(){t=
m;a()})},after:function(a){q=a;f(n,y,function(){q=m;a()})},cancel:function(){w&&(u(w,function(a){(a||m)(!0)}),t(!0));y&&(u(y,function(a){(a||m)(!0)}),q(!0))}}}}}function r(a,b,c,d,f,g,n){function p(d){var e="$animate:"+d;q&&(q[e]&&0<q[e].length)&&E(function(){c.triggerHandler(e,{event:a,className:b})})}function A(){p("before")}function m(){p("after")}function x(){p("close");n&&E(function(){n()})}function t(){t.hasBeenRun||(t.hasBeenRun=!0,g())}function w(){if(!w.hasBeenRun){w.hasBeenRun=!0;var d=
c.data(l);d&&(h&&h.isClassBased?k(c,b):(E(function(){var d=c.data(l)||{};r==d.index&&k(c,b,a)}),c.data(l,d)));x()}}var h=G(c,a,b);if(h){b=h.className;var q=e.element._data(h.node),q=q&&q.events;d||(d=f?f.parent():c.parent());var y=c.data(l)||{};f=y.active||{};var z=y.totalActive||0,C=y.last,D;h.isClassBased&&(D=y.running||y.disabled||C&&!C.isClassBased);if(D||N(c,d))t(),A(),m(),w();else{d=!1;if(0<z){D=[];if(h.isClassBased)"setClass"==C.event?(D.push(C),k(c,b)):f[b]&&(v=f[b],v.event==a?d=!0:(D.push(v),
k(c,b)));else if("leave"==a&&f["ng-leave"])d=!0;else{for(var v in f)D.push(f[v]),k(c,v);f={};z=0}0<D.length&&u(D,function(a){a.cancel()})}!h.isClassBased||(h.isSetClassOperation||d)||(d="addClass"==a==c.hasClass(b));if(d)t(),A(),m(),x();else{if("leave"==a)c.one("$destroy",function(a){a=e.element(this);var b=a.data(l);b&&(b=b.active["ng-leave"])&&(b.cancel(),k(a,"ng-leave"))});c.addClass(J);var r=Y++;z++;f[b]=h;c.data(l,{last:h,active:f,index:r,totalActive:z});A();h.before(function(d){var e=c.data(l);
d=d||!e||!e.active[b]||h.isClassBased&&e.active[b].event!=a;t();!0===d?w():(m(),h.after(w))})}}}else t(),A(),m(),w()}function T(a){if(a=g(a))a=e.isFunction(a.getElementsByClassName)?a.getElementsByClassName(J):a.querySelectorAll("."+J),u(a,function(a){a=e.element(a);(a=a.data(l))&&a.active&&u(a.active,function(a){a.cancel()})})}function k(a,b){if(g(a)==g(R))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data(l)||{},d=!0===b;!d&&(c.active&&c.active[b])&&(c.totalActive--,delete c.active[b]);
if(d||!c.totalActive)a.removeClass(J),a.removeData(l)}}function N(a,b){if(n.disabled)return!0;if(g(a)==g(R))return n.running;var c,d,f;do{if(0===b.length)break;var m=g(b)==g(R),k=m?n:b.data(l)||{};if(k.disabled)return!0;m&&(f=!0);!1!==c&&(m=b.data(V),e.isDefined(m)&&(c=m));d=d||k.running||k.last&&!k.last.isClassBased}while(b=b.parent());return!f||!c&&d}var Y=0;R.data(l,n);H.$$postDigest(function(){H.$$postDigest(function(){n.running=!1})});var Q=s.classNameFilter(),M=Q?function(a){return Q.test(a)}:
function(){return!0};return{enter:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);K(a);z.enter(a,b,c);H.$$postDigest(function(){a=B(a);r("enter","ng-enter",a,b,c,m,d)})},leave:function(a,b){a=e.element(a);T(a);K(a);H.$$postDigest(function(){r("leave","ng-leave",B(a),null,null,function(){z.leave(a)},b)})},move:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);T(a);K(a);z.move(a,b,c);H.$$postDigest(function(){a=B(a);r("move","ng-move",a,b,c,m,d)})},addClass:function(a,
b,c){a=e.element(a);a=B(a);r("addClass",b,a,null,null,function(){z.addClass(a,b)},c)},removeClass:function(a,b,c){a=e.element(a);a=B(a);r("removeClass",b,a,null,null,function(){z.removeClass(a,b)},c)},setClass:function(a,b,c,d){a=e.element(a);a=B(a);r("setClass",[b,c],a,null,null,function(){z.setClass(a,b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)k(b);else{var c=b.data(l)||{};c.disabled=!0;b.data(l,c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]);s.register("",
["$window","$sniffer","$timeout","$$animateReflow",function(l,n,s,B){function E(a,U){S&&S();W.push(U);S=B(function(){u(W,function(a){a()});W=[];S=null;v={}})}function H(a,U){var b=g(a);a=e.element(b);Z.push(a);b=Date.now()+U;b<=da||(s.cancel(ca),da=b,ca=s(function(){G(Z);Z=[]},U,!1))}function G(a){u(a,function(a){(a=a.data(q))&&(a.closeAnimationFn||m)()})}function K(a,b){var c=b?v[b]:null;if(!c){var d=0,e=0,f=0,g=0,m,k,h,q;u(a,function(a){if(a.nodeType==aa){a=l.getComputedStyle(a)||{};h=a[I+P];d=
Math.max(L(h),d);q=a[I+x];m=a[I+t];e=Math.max(L(m),e);k=a[p+t];g=Math.max(L(k),g);var b=L(a[p+P]);0<b&&(b*=parseInt(a[p+w],10)||1);f=Math.max(b,f)}});c={total:0,transitionPropertyStyle:q,transitionDurationStyle:h,transitionDelayStyle:m,transitionDelay:e,transitionDuration:d,animationDelayStyle:k,animationDelay:g,animationDuration:f};b&&(v[b]=c)}return c}function L(a){var b=0;a=e.isString(a)?a.split(/\s*,\s*/):[];u(a,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function J(a){var b=a.parent(),
c=b.data(h);c||(b.data(h,++ba),c=ba);return c+"-"+g(a).getAttribute("class")}function r(a,b,c,d){var e=J(b),f=e+" "+c,l=v[f]?++v[f].total:0,k={};if(0<l){var h=c+"-stagger",k=e+" "+h;(e=!v[k])&&b.addClass(h);k=K(b,k);e&&b.removeClass(h)}d=d||function(a){return a()};b.addClass(c);var h=b.data(q)||{},n=d(function(){return K(b,f)});d=n.transitionDuration;e=n.animationDuration;if(0===d&&0===e)return b.removeClass(c),!1;b.data(q,{running:h.running||0,itemIndex:l,stagger:k,timings:n,closeAnimationFn:m});
a=0<h.running||"setClass"==a;0<d&&T(b,c,a);0<e&&(0<k.animationDelay&&0===k.animationDuration)&&(g(b).style[p]="none 0s");return!0}function T(a,b,c){"ng-enter"!=b&&("ng-move"!=b&&"ng-leave"!=b)&&c?a.addClass(y):g(a).style[I+x]="none"}function k(a,b){var c=I+x,d=g(a);d.style[c]&&0<d.style[c].length&&(d.style[c]="");a.removeClass(y)}function N(a){var b=p;a=g(a);a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function Y(a,b,d,e){function k(a){b.off(x,l);b.removeClass(m);c(b,d);a=g(b);for(var e in s)a.style.removeProperty(s[e])}
function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(V));Math.max(a-z,0)>=y&&b>=v&&e()}var h=g(b);a=b.data(q);if(-1!=h.getAttribute("class").indexOf(d)&&a){var m="";u(d.split(" "),function(a,b){m+=(0<b?" ":"")+a+"-active"});var n=a.stagger,p=a.timings,t=a.itemIndex,v=Math.max(p.transitionDuration,p.animationDuration),w=Math.max(p.transitionDelay,p.animationDelay),y=w*D,z=Date.now(),x=A+" "+X,r="",s=[];if(0<p.transitionDuration){var B=
p.transitionPropertyStyle;-1==B.indexOf("all")&&(r+=f+"transition-property: "+B+";",r+=f+"transition-duration: "+p.transitionDurationStyle+";",s.push(f+"transition-property"),s.push(f+"transition-duration"))}0<t&&(0<n.transitionDelay&&0===n.transitionDuration&&(r+=f+"transition-delay: "+Q(p.transitionDelayStyle,n.transitionDelay,t)+"; ",s.push(f+"transition-delay")),0<n.animationDelay&&0===n.animationDuration&&(r+=f+"animation-delay: "+Q(p.animationDelayStyle,n.animationDelay,t)+"; ",s.push(f+"animation-delay")));
0<s.length&&(p=h.getAttribute("style")||"",h.setAttribute("style",p+"; "+r));b.on(x,l);b.addClass(m);a.closeAnimationFn=function(){k();e()};h=(t*(Math.max(n.animationDelay,n.transitionDelay)||0)+(w+v)*C)*D;a.running++;H(b,h);return k}e()}function Q(a,b,c){var d="";u(a.split(","),function(a,e){d+=(0<e?",":"")+(c*b+parseInt(a,10))+"s"});return d}function M(a,b,d,e){if(r(a,b,d,e))return function(a){a&&c(b,d)}}function a(a,b,d,e){if(b.data(q))return Y(a,b,d,e);c(b,d);e()}function b(b,c,d,e){var f=M(b,
c,d);if(f){var g=f;E(c,function(){k(c,d);N(c);g=a(b,c,d,e)});return function(a){(g||m)(a)}}e()}function c(a,b){a.removeClass(b);var c=a.data(q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(q))}function d(a,b){var c="";a=e.isArray(a)?a:a.split(/\s+/);u(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var f="",I,X,p,A;F.ontransitionend===O&&F.onwebkittransitionend!==O?(f="-webkit-",I="WebkitTransition",X="webkitTransitionEnd transitionend"):(I="transition",X="transitionend");
F.onanimationend===O&&F.onwebkitanimationend!==O?(f="-webkit-",p="WebkitAnimation",A="webkitAnimationEnd animationend"):(p="animation",A="animationend");var P="Duration",x="Property",t="Delay",w="IterationCount",h="$$ngAnimateKey",q="$$ngAnimateCSS3Data",y="ng-animate-block-transitions",V=3,C=1.5,D=1E3,v={},ba=0,W=[],S,ca=null,da=0,Z=[];return{enter:function(a,c){return b("enter",a,"ng-enter",c)},leave:function(a,c){return b("leave",a,"ng-leave",c)},move:function(a,c){return b("move",a,"ng-move",
c)},beforeSetClass:function(a,b,c,e){var f=d(c,"-remove")+" "+d(b,"-add"),g=M("setClass",a,f,function(d){var e=a.attr("class");a.removeClass(c);a.addClass(b);d=d();a.attr("class",e);return d});if(g)return E(a,function(){k(a,f);N(a);e()}),g;e()},beforeAddClass:function(a,b,c){var e=M("addClass",a,d(b,"-add"),function(c){a.addClass(b);c=c();a.removeClass(b);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},setClass:function(b,c,e,f){e=d(e,"-remove");c=d(c,"-add");return a("setClass",b,
e+" "+c,f)},addClass:function(b,c,e){return a("addClass",b,d(c,"-add"),e)},beforeRemoveClass:function(a,b,c){var e=M("removeClass",a,d(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);c=c();a.attr("class",d);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},removeClass:function(b,c,e){return a("removeClass",b,d(c,"-remove"),e)}}}])}])})(window,window.angular);

 /*------------- End : angular-animate.min.js-----------*/ 

 /*------------- Begin : angular-cookies.min.js-----------*/ 

/*
 AngularJS v1.2.6
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(p,f,n){'use strict';f.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(d,b){var c={},g={},h,k=!1,l=f.copy,m=f.isUndefined;b.addPollFn(function(){var a=b.cookies();h!=a&&(h=a,l(a,g),l(a,c),k&&d.$apply())})();k=!0;d.$watch(function(){var a,e,d;for(a in g)m(c[a])&&b.cookies(a,n);for(a in c)(e=c[a],f.isString(e))?e!==g[a]&&(b.cookies(a,e),d=!0):f.isDefined(g[a])?c[a]=g[a]:delete c[a];if(d)for(a in e=b.cookies(),c)c[a]!==e[a]&&(m(e[a])?delete c[a]:c[a]=e[a])});
return c}]).factory("$cookieStore",["$cookies",function(d){return{get:function(b){return(b=d[b])?f.fromJson(b):b},put:function(b,c){d[b]=f.toJson(c)},remove:function(b){delete d[b]}}}])})(window,window.angular);
 /*------------- End : angular-cookies.min.js-----------*/ 

 /*------------- Begin : ui-bootstrap-custom-0.12.0.min.js-----------*/ 

/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.0 - 2015-10-17
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.dropdown"]),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(n){var o=null;this.open=function(i){o||(n.bind("click",e),n.bind("keydown",t)),o&&o!==i&&(o.isOpen=!1),o=i},this.close=function(i){o===i&&(o=null,n.unbind("click",e),n.unbind("keydown",t))};var e=function(n){if(o){var e=o.getToggleElement();n&&e&&e[0].contains(n.target)||o.$apply(function(){o.isOpen=!1})}},t=function(n){27===n.which&&(o.focusToggleElement(),e())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(n,o,e,t,i,l){var r,c=this,s=n.$new(),a=t.openClass,u=angular.noop,d=o.onToggle?e(o.onToggle):angular.noop;this.init=function(t){c.$element=t,o.isOpen&&(r=e(o.isOpen),u=r.assign,n.$watch(r,function(n){s.isOpen=!!n}))},this.toggle=function(n){return s.isOpen=arguments.length?!!n:!s.isOpen},this.isOpen=function(){return s.isOpen},s.getToggleElement=function(){return c.toggleElement},s.focusToggleElement=function(){c.toggleElement&&c.toggleElement[0].focus()},s.$watch("isOpen",function(o,e){l[o?"addClass":"removeClass"](c.$element,a),o?(s.focusToggleElement(),i.open(s)):i.close(s),u(n,o),angular.isDefined(o)&&o!==e&&d(n,{open:!!o})}),n.$on("$locationChangeSuccess",function(){s.isOpen=!1}),n.$on("$destroy",function(){s.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(n,o,e,t){t.init(o)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(n,o,e,t){if(t){t.toggleElement=o;var i=function(i){i.preventDefault(),o.hasClass("disabled")||e.disabled||n.$apply(function(){t.toggle()})};o.bind("click",i),o.attr({"aria-haspopup":!0,"aria-expanded":!1}),n.$watch(t.isOpen,function(n){o.attr("aria-expanded",!!n)}),n.$on("$destroy",function(){o.unbind("click",i)})}}}}); /*------------- End : ui-bootstrap-custom-0.12.0.min.js-----------*/ 

 /*------------- Begin : ui-bootstrap-custom-tpls-0.12.0.min.js-----------*/ 

/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.0 - 2015-10-17
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.dropdown"]),angular.module("ui.bootstrap.tpls",[]),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(n){var o=null;this.open=function(i){o||(n.bind("click",e),n.bind("keydown",t)),o&&o!==i&&(o.isOpen=!1),o=i},this.close=function(i){o===i&&(o=null,n.unbind("click",e),n.unbind("keydown",t))};var e=function(n){if(o){var e=o.getToggleElement();n&&e&&e[0].contains(n.target)||o.$apply(function(){o.isOpen=!1})}},t=function(n){27===n.which&&(o.focusToggleElement(),e())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(n,o,e,t,i,l){var r,s=this,a=n.$new(),c=t.openClass,u=angular.noop,p=o.onToggle?e(o.onToggle):angular.noop;this.init=function(t){s.$element=t,o.isOpen&&(r=e(o.isOpen),u=r.assign,n.$watch(r,function(n){a.isOpen=!!n}))},this.toggle=function(n){return a.isOpen=arguments.length?!!n:!a.isOpen},this.isOpen=function(){return a.isOpen},a.getToggleElement=function(){return s.toggleElement},a.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},a.$watch("isOpen",function(o,e){l[o?"addClass":"removeClass"](s.$element,c),o?(a.focusToggleElement(),i.open(a)):i.close(a),u(n,o),angular.isDefined(o)&&o!==e&&p(n,{open:!!o})}),n.$on("$locationChangeSuccess",function(){a.isOpen=!1}),n.$on("$destroy",function(){a.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(n,o,e,t){t.init(o)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(n,o,e,t){if(t){t.toggleElement=o;var i=function(i){i.preventDefault(),o.hasClass("disabled")||e.disabled||n.$apply(function(){t.toggle()})};o.bind("click",i),o.attr({"aria-haspopup":!0,"aria-expanded":!1}),n.$watch(t.isOpen,function(n){o.attr("aria-expanded",!!n)}),n.$on("$destroy",function(){o.unbind("click",i)})}}}}); /*------------- End : ui-bootstrap-custom-tpls-0.12.0.min.js-----------*/ 

 /*------------- Begin : CountryData.js-----------*/ 

var countryDataIe = [{"id":"34","name":"United States","code":"US","phnCode":"1"},{"id":"2","name":"Australia","code":"AU","phnCode":"61"},{"id":"14","name":"United Kingdom","code":"GB","phnCode":"44"},{"id":"6","name":"India","code":"IN","phnCode":"91"},{"id":"30","name":"Saudi Arabia","code":"SA","phnCode":"966"},{"id":"24","name":"United Arab Emirates","code":"AE","phnCode":"971"},{"id":"35","name":"Canada","code":"CA","phnCode":"1"},{"id":"213","name":"Singapore","code":"SG","phnCode":"65"},{"id":"23","name":"Switzerland","code":"CH","phnCode":"41"},{"id":"67","name":"South Africa","code":"ZA","phnCode":"27"},{"id":"104","name":"Afghanistan","code":"AF","phnCode":"93"},{"id":"111","name":"Aland Islands","code":"AX","phnCode":"358"},{"id":"107","name":"Albania","code":"AL","phnCode":"355"},{"id":"137","name":"Algeria","code":"DZ","phnCode":"213"},{"id":"109","name":"American Samoa","code":"AS","phnCode":"1684"},{"id":"103","name":"Andorra","code":"AD","phnCode":"376"},{"id":"74","name":"Angola","code":"AO","phnCode":"244"},{"id":"106","name":"Anguilla","code":"AI","phnCode":"1264"},{"id":"108","name":"Antarctica","code":"AQ","phnCode":"672"},{"id":"105","name":"Antigua and Barbuda","code":"AG","phnCode":"1268"},{"id":"50","name":"Argentina","code":"AR","phnCode":"54"},{"id":"93","name":"Armenia","code":"AM","phnCode":"374"},{"id":"110","name":"Aruba","code":"AW","phnCode":"297"},{"id":"20","name":"Austria","code":"AT","phnCode":"43"},{"id":"69","name":"Azerbaijan","code":"AZ","phnCode":"994"},{"id":"120","name":"Bahamas","code":"BS","phnCode":"1242"},{"id":"59","name":"Bahrain","code":"BH","phnCode":"973"},{"id":"113","name":"Bangladesh","code":"BD","phnCode":"880"},{"id":"112","name":"Barbados","code":"BB","phnCode":"1246"},{"id":"96","name":"Belarus","code":"BY","phnCode":"375"},{"id":"22","name":"Belgium","code":"BE","phnCode":"32"},{"id":"124","name":"Belize","code":"BZ","phnCode":"501"},{"id":"115","name":"Benin","code":"BJ","phnCode":"229"},{"id":"37","name":"Bermuda","code":"BM","phnCode":"1441"},{"id":"121","name":"Bhutan","code":"BT","phnCode":"975"},{"id":"118","name":"Bolivia","code":"BO","phnCode":"591"},{"id":"86","name":"Bosnia and Herzegovina","code":"BA","phnCode":"387"},{"id":"123","name":"Botswana","code":"BW","phnCode":"267"},{"id":"122","name":"Bouvet Island","code":"BV","phnCode":"47"},{"id":"51","name":"Brazil","code":"BR","phnCode":"55"},{"id":"164","name":"British Indian Ocean Territory","code":"IO","phnCode":"246"},{"id":"117","name":"Brunei Darussalam","code":"BN","phnCode":"673"},{"id":"41","name":"Bulgaria","code":"BG","phnCode":"359"},{"id":"114","name":"Burkina Faso","code":"BF","phnCode":"226"},{"id":"70","name":"Burundi","code":"BI","phnCode":"257"},{"id":"249","name":"Cambodia","code":"KH","phnCode":"855"},{"id":"129","name":"Cameroon","code":"CM","phnCode":"237"},{"id":"132","name":"Cape Verde","code":"CV","phnCode":"238"},{"id":"119","name":"Caribbean Netherlands ","code":"BQ","phnCode":"599"},{"id":"171","name":"Cayman Islands","code":"KY","phnCode":"1345"},{"id":"126","name":"Central African Republic","code":"CF","phnCode":"236"},{"id":"227","name":"Chad","code":"TD","phnCode":"235"},{"id":"52","name":"Chile","code":"CL","phnCode":"56"},{"id":"3","name":"China","code":"CN","phnCode":"86"},{"id":"134","name":"Christmas Island","code":"CX","phnCode":"61"},{"id":"125","name":"Cocos (Keeling) Islands","code":"CC","phnCode":"61"},{"id":"55","name":"Colombia","code":"CO","phnCode":"57"},{"id":"168","name":"Comoros","code":"KM","phnCode":"269"},{"id":"81","name":"Congo","code":"CG","phnCode":"242"},{"id":"73","name":"Congo, Democratic Republic of","code":"CD","phnCode":"243"},{"id":"128","name":"Cook Islands","code":"CK","phnCode":"682"},{"id":"130","name":"Costa Rica","code":"CR","phnCode":"506"},{"id":"127","name":"Cote d'Ivoire","code":"CI","phnCode":"225"},{"id":"48","name":"Croatia","code":"HR","phnCode":"385"},{"id":"131","name":"Cuba","code":"CU","phnCode":"53"},{"id":"133","name":"Curacao","code":"CW","phnCode":"599"},{"id":"97","name":"Cyprus","code":"CY","phnCode":"357"},{"id":"39","name":"Czech Republic","code":"CZ","phnCode":"420"},{"id":"31","name":"Denmark","code":"DK","phnCode":"45"},{"id":"49","name":"Djibouti","code":"DJ","phnCode":"253"},{"id":"135","name":"Dominica","code":"DM","phnCode":"1767"},{"id":"136","name":"Dominican Republic","code":"DO","phnCode":"1809"},{"id":"138","name":"Ecuador","code":"EC","phnCode":"593"},{"id":"68","name":"Egypt","code":"EG","phnCode":"20"},{"id":"223","name":"El Salvador","code":"SV","phnCode":"503"},{"id":"154","name":"Equatorial Guinea","code":"GQ","phnCode":"240"},{"id":"140","name":"Eritrea","code":"ER","phnCode":"291"},{"id":"89","name":"Estonia","code":"EE","phnCode":"372"},{"id":"141","name":"Ethiopia","code":"ET","phnCode":"251"},{"id":"143","name":"Falkland Islands","code":"FK","phnCode":"500"},{"id":"145","name":"Faroe Islands","code":"FO","phnCode":"298"},{"id":"142","name":"Fiji","code":"FJ","phnCode":"679"},{"id":"42","name":"Finland","code":"FI","phnCode":"358"},{"id":"13","name":"France","code":"FR","phnCode":"33"},{"id":"148","name":"French Guiana","code":"GF","phnCode":"594"},{"id":"203","name":"French Polynesia","code":"PF","phnCode":"689"},{"id":"228","name":"French Southern Territories","code":"TF","phnCode":"262"},{"id":"146","name":"Gabon","code":"GA","phnCode":"241"},{"id":"152","name":"Gambia","code":"GM","phnCode":"220"},{"id":"66","name":"Georgia","code":"GE","phnCode":"995"},{"id":"15","name":"Germany","code":"DE","phnCode":"49"},{"id":"150","name":"Ghana","code":"GH","phnCode":"233"},{"id":"98","name":"Gibraltar","code":"GI","phnCode":"350"},{"id":"18","name":"Greece","code":"GR","phnCode":"30"},{"id":"151","name":"Greenland","code":"GL","phnCode":"299"},{"id":"147","name":"Grenada","code":"GD","phnCode":"1473"},{"id":"100","name":"Guadeloupe","code":"GP","phnCode":"590"},{"id":"157","name":"Guam","code":"GU","phnCode":"1671"},{"id":"156","name":"Guatemala","code":"GT","phnCode":"502"},{"id":"149","name":"Guernsey","code":"GG","phnCode":"44"},{"id":"153","name":"Guinea","code":"GN","phnCode":"224"},{"id":"158","name":"Guinea-Bissau","code":"GW","phnCode":"245"},{"id":"102","name":"Guyana","code":"GY","phnCode":"592"},{"id":"161","name":"Haiti","code":"HT","phnCode":"509"},{"id":"159","name":"Heard and McDonald Islands","code":"HM","phnCode":null},{"id":"160","name":"Honduras","code":"HN","phnCode":"504"},{"id":"9","name":"Hong Kong","code":"HK","phnCode":"852"},{"id":"45","name":"Hungary","code":"HU","phnCode":"36"},{"id":"78","name":"Iceland","code":"IS","phnCode":"354"},{"id":"162","name":"Indonesia","code":"ID","phnCode":"62"},{"id":"32","name":"Iran","code":"IR","phnCode":"98"},{"id":"64","name":"Iraq","code":"IQ","phnCode":"964"},{"id":"40","name":"Ireland","code":"IE","phnCode":"353"},{"id":"163","name":"Isle of Man","code":"IM","phnCode":"44"},{"id":"25","name":"Israel","code":"IL","phnCode":"972"},{"id":"17","name":"Italy","code":"IT","phnCode":"39"},{"id":"165","name":"Jamaica","code":"JM","phnCode":"1876"},{"id":"4","name":"Japan","code":"JP","phnCode":"81"},{"id":"83","name":"Jersey","code":"JE","phnCode":"44"},{"id":"63","name":"Jordan","code":"JO","phnCode":"962"},{"id":"28","name":"Kazakhstan","code":"KZ","phnCode":"7"},{"id":"166","name":"Kenya","code":"KE","phnCode":"254"},{"id":"167","name":"Kiribati","code":"KI","phnCode":"686"},{"id":"58","name":"Kuwait","code":"KW","phnCode":"965"},{"id":"91","name":"Kyrgyzstan","code":"KG","phnCode":"996"},{"id":"172","name":"Lao People's Democratic Republic","code":"LA","phnCode":"856"},{"id":"90","name":"Latvia","code":"LV","phnCode":"371"},{"id":"60","name":"Lebanon","code":"LB","phnCode":"961"},{"id":"176","name":"Lesotho","code":"LS","phnCode":"266"},{"id":"175","name":"Liberia","code":"LR","phnCode":"231"},{"id":"92","name":"Libya","code":"LY","phnCode":"218"},{"id":"82","name":"Liechtenstein","code":"LI","phnCode":"423"},{"id":"75","name":"Lithuania","code":"LT","phnCode":"370"},{"id":"47","name":"Luxembourg","code":"LU","phnCode":"352"},{"id":"185","name":"Macau","code":"MO","phnCode":"853"},{"id":"80","name":"Macedonia","code":"MK","phnCode":"389"},{"id":"180","name":"Madagascar","code":"MG","phnCode":"261"},{"id":"191","name":"Malawi","code":"MW","phnCode":"265"},{"id":"7","name":"Malaysia","code":"MY","phnCode":"60"},{"id":"190","name":"Maldives","code":"MV","phnCode":"960"},{"id":"182","name":"Mali","code":"ML","phnCode":"223"},{"id":"189","name":"Malta","code":"MT","phnCode":"356"},{"id":"181","name":"Marshall Islands","code":"MH","phnCode":"692"},{"id":"101","name":"Martinique","code":"MQ","phnCode":"596"},{"id":"187","name":"Mauritania","code":"MR","phnCode":"222"},{"id":"99","name":"Mauritius","code":"MU","phnCode":"230"},{"id":"248","name":"Mayotte","code":"YT","phnCode":"262"},{"id":"36","name":"Mexico","code":"MX","phnCode":"52"},{"id":"144","name":"Micronesia, Federated States of","code":"FM","phnCode":"691"},{"id":"79","name":"Moldova","code":"MD","phnCode":"373"},{"id":"177","name":"Monaco","code":"MC","phnCode":"377"},{"id":"184","name":"Mongolia","code":"MN","phnCode":"976"},{"id":"178","name":"Montenegro","code":"ME","phnCode":"382"},{"id":"188","name":"Montserrat","code":"MS","phnCode":"1664"},{"id":"250","name":"Morocco","code":"MA","phnCode":"212"},{"id":"192","name":"Mozambique","code":"MZ","phnCode":"258"},{"id":"183","name":"Myanmar","code":"MM","phnCode":"95"},{"id":"193","name":"Namibia","code":"NA","phnCode":"264"},{"id":"199","name":"Nauru","code":"NR","phnCode":"674"},{"id":"198","name":"Nepal","code":"NP","phnCode":"977"},{"id":"21","name":"Netherlands","code":"NL","phnCode":"31"},{"id":"194","name":"New Caledonia","code":"NC","phnCode":"687"},{"id":"201","name":"New Zealand","code":"NZ","phnCode":"64"},{"id":"197","name":"Nicaragua","code":"NI","phnCode":"505"},{"id":"195","name":"Niger","code":"NE","phnCode":"227"},{"id":"77","name":"Nigeria","code":"NG","phnCode":"234"},{"id":"200","name":"Niue","code":"NU","phnCode":"683"},{"id":"196","name":"Norfolk Island","code":"NF","phnCode":"672"},{"id":"170","name":"North Korea","code":"KP","phnCode":"850"},{"id":"186","name":"Northern Mariana Islands","code":"MP","phnCode":"1670"},{"id":"33","name":"Norway","code":"NO","phnCode":"47"},{"id":"62","name":"Oman","code":"OM","phnCode":"968"},{"id":"85","name":"Pakistan","code":"PK","phnCode":"92"},{"id":"208","name":"Palau","code":"PW","phnCode":"680"},{"id":"87","name":"Palestinian Territory, Occupied","code":"PS","phnCode":"970"},{"id":"54","name":"Panama","code":"PA","phnCode":"507"},{"id":"204","name":"Papua New Guinea","code":"PG","phnCode":"675"},{"id":"88","name":"Paraguay","code":"PY","phnCode":"595"},{"id":"202","name":"Peru","code":"PE","phnCode":"51"},{"id":"11","name":"Philippines","code":"PH","phnCode":"63"},{"id":"206","name":"Pitcairn","code":"PN","phnCode":"870"},{"id":"38","name":"Poland","code":"PL","phnCode":"48"},{"id":"29","name":"Portugal","code":"PT","phnCode":"351"},{"id":"207","name":"Puerto Rico","code":"PR","phnCode":"1"},{"id":"61","name":"Qatar","code":"QA","phnCode":"974"},{"id":"209","name":"Reunion","code":"RE","phnCode":"262"},{"id":"44","name":"Romania","code":"RO","phnCode":"40"},{"id":"27","name":"Russian Federation","code":"RU","phnCode":"7"},{"id":"210","name":"Rwanda","code":"RW","phnCode":"250"},{"id":"116","name":"Saint Barthelemy","code":"BL","phnCode":"590"},{"id":"214","name":"Saint Helena","code":"SH","phnCode":"290"},{"id":"169","name":"Saint Kitts and Nevis","code":"KN","phnCode":"1869"},{"id":"173","name":"Saint Lucia","code":"LC","phnCode":"1758"},{"id":"244","name":"Saint Vincent and the Grenadines","code":"VC","phnCode":"1784"},{"id":"179","name":"Saint-Martin (France)","code":"MF","phnCode":"1599"},{"id":"224","name":"Saint-Martin (Pays-Bas)","code":"SX","phnCode":"1721"},{"id":"247","name":"Samoa","code":"WS","phnCode":"685"},{"id":"217","name":"San Marino","code":"SM","phnCode":"378"},{"id":"222","name":"Sao Tome and Principe","code":"ST","phnCode":"239"},{"id":"218","name":"Senegal","code":"SN","phnCode":"221"},{"id":"76","name":"Serbia","code":"RS","phnCode":"381"},{"id":"84","name":"Seychelles","code":"SC","phnCode":"248"},{"id":"216","name":"Sierra Leone","code":"SL","phnCode":"232"},{"id":"46","name":"Slovakia (Slovak Republic)","code":"SK","phnCode":"421"},{"id":"43","name":"Slovenia","code":"SI","phnCode":"386"},{"id":"211","name":"Solomon Islands","code":"SB","phnCode":"677"},{"id":"219","name":"Somalia","code":"SO","phnCode":"252"},{"id":"155","name":"South Georgia and the South Sandwich Islands","code":"GS","phnCode":"500"},{"id":"8","name":"South Korea","code":"KR","phnCode":"82"},{"id":"221","name":"South Sudan","code":"SS","phnCode":"211"},{"id":"19","name":"Spain","code":"ES","phnCode":"34"},{"id":"174","name":"Sri Lanka","code":"LK","phnCode":"94"},{"id":"205","name":"St. Pierre and Miquelon","code":"PM","phnCode":"508"},{"id":"212","name":"Sudan","code":"SD","phnCode":"249"},{"id":"220","name":"Suriname","code":"SR","phnCode":"597"},{"id":"215","name":"Svalbard and Jan Mayen Islands","code":"SJ","phnCode":"47"},{"id":"225","name":"Swaziland","code":"SZ","phnCode":"268"},{"id":"16","name":"Sweden","code":"SE","phnCode":"46"},{"id":"57","name":"Syria","code":"SY","phnCode":"963"},{"id":"10","name":"Taiwan","code":"TW","phnCode":"886"},{"id":"230","name":"Tajikistan","code":"TJ","phnCode":"992"},{"id":"238","name":"Tanzania","code":"TZ","phnCode":"255"},{"id":"5","name":"Thailand","code":"TH","phnCode":"66"},{"id":"232","name":"Timor-Leste","code":"TL","phnCode":"670"},{"id":"229","name":"Togo","code":"TG","phnCode":"228"},{"id":"231","name":"Tokelau","code":"TK","phnCode":"690"},{"id":"235","name":"Tonga","code":"TO","phnCode":"676"},{"id":"236","name":"Trinidad and Tobago","code":"TT","phnCode":"1868"},{"id":"234","name":"Tunisia","code":"TN","phnCode":"216"},{"id":"65","name":"Turkey","code":"TR","phnCode":"90"},{"id":"233","name":"Turkmenistan","code":"TM","phnCode":"993"},{"id":"226","name":"Turks and Caicos Islands","code":"TC","phnCode":"1649"},{"id":"237","name":"Tuvalu","code":"TV","phnCode":"688"},{"id":"239","name":"Uganda","code":"UG","phnCode":"256"},{"id":"26","name":"Ukraine","code":"UA","phnCode":"380"},{"id":"240","name":"United States Minor Outlying Islands","code":"UM","phnCode":"699"},{"id":"241","name":"Uruguay","code":"UY","phnCode":"598"},{"id":"242","name":"Uzbekistan","code":"UZ","phnCode":"998"},{"id":"245","name":"Vanuatu","code":"VU","phnCode":"678"},{"id":"243","name":"Vatican","code":"VA","phnCode":"39"},{"id":"53","name":"Venezuela","code":"VE","phnCode":"58"},{"id":"12","name":"Vietnam","code":"VN","phnCode":"84"},{"id":"94","name":"Virgin Islands (British)","code":"VG","phnCode":"1284"},{"id":"56","name":"Virgin Islands (U.S.)","code":"VI","phnCode":"1340"},{"id":"246","name":"Wallis and Futuna Islands","code":"WF","phnCode":"681"},{"id":"139","name":"Western Sahara","code":"EH","phnCode":"212"},{"id":"95","name":"Yemen","code":"YE","phnCode":"967"},{"id":"71","name":"Zambia","code":"ZM","phnCode":"260"},{"id":"72","name":"Zimbabwe","code":"ZW","phnCode":"263"}] /*------------- End : CountryData.js-----------*/ 

 /*------------- Begin : EventsData.js-----------*/ 

function gaEventsTracker() {

    this.overAllFunnelString = 'overall funnel';
    this.classRoomFunnelString = 'classroom funnel';
    this.onlineFunnelString = 'online funnel';
    this.noWorkshopFoundFunnel = 'No Workshop Found';
    this.invalidCoupon = 'Cart Page';

    this.eventsRedmine1094 = {
        'flyouthover': {'category': "Navigation", 'action': "Flyout hover", 'labelRequired': true, 'noninteractiveness': true},
        'flyoutclick': {'category': "Navigation", 'action': "Flyout Popular Course clicked", 'labelRequired': true, 'noninteractiveness': false},
        'flyoutMasterProgclick': {'category': "Navigation", 'action': "Click on Masters Program in Megamenu", 'labelRequired': true, 'noninteractiveness': false},
        'flyoutcatclick': {'category': "Navigation", 'action': "Flyout category button clicked", 'labelRequired': true, 'noninteractiveness': false},
        'frsmenuhover': {'category': "Navigation", 'action': "Resources - Top Bar hover", 'labelRequired': true, 'noninteractiveness': true},
        'resourcesclick': {'category': "Navigation", 'action': "Resources - Top Bar content clicked", 'labelRequired': true, 'noninteractiveness': false},
        'logoclick': {'category': "Navigation", 'action': "Simplilearn Logo", 'labelRequired': true, 'noninteractiveness': false},
        'headercorporatelinkclick': {'category': "Navigation", 'action': "Corporate Training - Top Bar", 'labelRequired': true, 'noninteractiveness': false},
        'headerinstructorlinkclick': {'category': "Navigation", 'action': "Become an instructor - Top Bar", 'labelRequired': true, 'noninteractiveness': false},
        'searchinitiated': {'category': "Navigation", 'action': "Search Initiated", 'labelRequired': true, 'noninteractiveness': true},
        'Search_tab_header': {'category': "Navigation", 'action': "Search Finished", 'labelRequired': true, 'noninteractiveness': false},
        'resourcescatclick': {'category': "Navigation", 'action': "Resources - Top Bar category clicked", 'labelRequired': true, 'noninteractiveness': false},
        'peopleAlsoViewedSectionClicked': {'category': "Navigation", 'action': "User clicks on People also viewed section", 'labelRequired': true, 'noninteractiveness': false},
        'homepagejumpto': {'category': "Home Page", 'action': "Quick Link", 'labelRequired': true, 'noninteractiveness': false},
        'mastercardclick': {'category': "Home Page", 'action': "Master Course Card Click", 'labelRequired': true, 'noninteractiveness': false},
        'viewmoretestimonials': {'category': "Engagement", 'action': "View More Testimonials", 'labelRequired': true, 'noninteractiveness': false},
        'alumniprofilevisit': {'category': "Engagement", 'action': "Alumni Profile Clicked", 'labelRequired': true, 'noninteractiveness': false},
        'Category_advisor_social_click': {'category': "Engagement", 'action': "Category Advisor Profile Clicked", 'labelRequired': true, 'noninteractiveness': false},
        'mobileapplinkclick': {'category': "Engagement", 'action': "Mobile AppStore Visit", 'labelRequired': true, 'noninteractiveness': false},
        'inmedialinkclick': {'category': "Engagement", 'action': "Media coverage", 'labelRequired': true, 'noninteractiveness': false},
        'Re_WebFooter': {'category': "Navigation", 'action': "Refer & Earn - Footer", 'labelRequired': true, 'noninteractiveness': false},
        'mobileapplinkfooter': {'category': "Engagement", 'action': "Mobile AppStore Visit - Footer", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventscountrychangesuccess': {'category': "Engagement", 'action': "Country Change", 'labelRequired': true, 'noninteractiveness': false},
        'helpandsupportfooter': {'category': "Navigation", 'action': "Help & Support", 'labelRequired': true, 'noninteractiveness': false},
        'leadformclicked': {'category': "Lead Capture", 'action': "Lead form Clicked", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventslivechattry': {'category': "Lead Capture", 'action': "Lead form Clicked", 'labelRequired': true, 'noninteractiveness': true},
        'leads_form_filled': {'category': "Lead Capture", 'action': "Lead process Initiated", 'labelRequired': true, 'noninteractiveness': false},
        'leadcapturequeryform': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'leadcaptureconvenientsched': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'labelValue': 'Convenient Schedule', 'noninteractiveness': false},
        'leadcapturefail': {'category': "Lead Capture", 'action': "Lead Submit Failure", 'labelRequired': true, 'noninteractiveness': false},
        'leadinitiatepreview': {'category': "Lead Capture", 'action': "Lead process Initiated", 'labelRequired': true, 'noninteractiveness': false},
        'leadsubmittedpreview': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'introvideoclick': {'category': "Engagement", 'action': "Introduction video clicked", 'labelRequired': true, 'noninteractiveness': false},
        'introvideowatched': {'category': "Engagement", 'action': "Introduction Video watched", 'labelRequired': true, 'noninteractiveness': false},
        'previewvideowatched': {'category': "Engagement", 'action': "Course Preview Video watched", 'labelRequired': true, 'noninteractiveness': false},
        'introvideoclosed': {'category': "Engagement", 'action': "Introduction video closed", 'labelRequired': true, 'noninteractiveness': false},
        'custtestimonialarrowclick': {'category': "Engagement", 'action': "Customer testimonials arrows click", 'labelRequired': true, 'noninteractiveness': true},
        'mastercardarrowclick': {'category': "Engagement", 'action': "Master Course Card arrows click", 'labelRequired': true, 'noninteractiveness': true},
        'categorycourseclick': {'category': "Navigation", 'action': "Course Card Click", 'labelRequired': true, 'noninteractiveness': false},
        'viewmorecoursesclick': {'category': "Navigation", 'action': "View More Popular Courses", 'labelRequired': true, 'noninteractiveness': false},
        'Category_partner_click': {'category': "Engagement", 'action': "Course Partner profile clicked", 'labelRequired': true, 'noninteractiveness': false},
        'coursestickyheader': {'category': "Engagement", 'action': "Course details sticky header", 'labelRequired': true, 'noninteractiveness': false},
        'viewclassschedule': {'category': "Engagement", 'action': "View class schedule", 'labelRequired': true, 'noninteractiveness': false},
        'downloadschedule': {'category': "Engagement", 'action': "Download class schedule", 'labelRequired': true, 'noninteractiveness': false},
        'showmorereviews': {'category': "Engagement", 'action': "View More Reviewer Profiles", 'labelRequired': true, 'noninteractiveness': false},
        'reviewerprofileclick': {'category': "Engagement", 'action': "Reviewer profile clicked", 'labelRequired': true, 'noninteractiveness': false},
        'chapternameclick': {'category': "Engagement", 'action': "Chapter name clicked", 'labelRequired': true, 'noninteractiveness': false},
        'enroll_online': {'category': "Payment", 'action': "Enroll for OSL", 'labelRequired': true, 'noninteractiveness': false},
        'enroll_lvc': {'category': "Payment", 'action': "Enroll for LVC", 'labelRequired': true, 'noninteractiveness': false},
        'enroll_classroom': {'category': "Payment", 'action': "Enroll for Classroom", 'labelRequired': true, 'noninteractiveness': false},
        'subslearningpathClick': {'category': "Engagement", 'action': "Course option selected - master Learning path", 'labelRequired': true, 'noninteractiveness': false},
        'jobassistclick': {'category': "Navigation", 'action': "Job Assist", 'labelRequired': true, 'noninteractiveness': false},
        'fpt_link_course': {'category': "Navigation", 'action': "Free Practice Test", 'labelRequired': true, 'noninteractiveness': false},
        'fptleadinitiated': {'category': "FPT - Lead Capture", 'action': "Lead process Initiated", 'labelRequired': true, 'noninteractiveness': false},
        'fptleadsubmitted': {'category': "FPT - Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'fptquestionsubmitted': {'category': "FPT - Lead Capture", 'action': "FPT-Question#", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventsloginopen': {'category': "Engagement", 'action': "Login Top Header clicked", 'labelRequired': true, 'noninteractiveness': false},
        'loginsignupinitiated': {'category': "Engagement", 'action': "Login/Sign in process Initiated", 'labelRequired': true, 'noninteractiveness': false},
        'autologin': {'category': "Engagement", 'action': "Auto Login from cookie", 'labelRequired': true, 'noninteractiveness': false},
        'loginsignupsubmitted': {'category': "Engagement", 'action': "Login/Sign in credentials Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'linkedinloginclick': {'category': "Engagement", 'action': "Login/Sign in Linkedin button clicked", 'labelRequired': true, 'noninteractiveness': false},
        'searchloadmore': {'category': "Engagement", 'action': "Loading more results", 'labelRequired': true, 'noninteractiveness': false},
        'searchclearfilters': {'category': "Engagement", 'action': "Clear all filters", 'labelRequired': true, 'noninteractiveness': false},
        'searchcatfilter': {'category': "Engagement", 'action': "Apply Category filter", 'labelRequired': true, 'noninteractiveness': false},
        'searchresourcefilter': {'category': "Engagement", 'action': "Apply Free Resource filter", 'labelRequired': true, 'noninteractiveness': false},
        'paymentSuccessLvcPass': {'category': "Payment", 'action': "Payment Confirmed", 'labelRequired': true, 'noninteractiveness': false},
        'paymentSuccessCourse': {'category': "Payment", 'action': "Payment Confirmed", 'labelRequired': true, 'noninteractiveness': false},
        'enrollBundle': {'category': "Payment", 'action': "Enroll Master Course", 'labelRequired': true, 'noninteractiveness': false},
        'paymentSuccessBundle': {'category': "Payment", 'action': "Payment Confirmed", 'labelRequired': true, 'noninteractiveness': false},
        'coursepagewatchcoursepreview': {'category': "Engagement", 'action': "Course preview video click", 'labelRequired': true, 'noninteractiveness': false},
        'coursepageclosecoursepreview': {'category': "Engagement", 'action': "Course preview video closed", 'labelRequired': true, 'noninteractiveness': false},
        'breadcrumclick': {'category': "Navigation", 'action': "Bread crumb", 'labelRequired': true, 'noninteractiveness': false},
        'bundlestickyClick' : {'category': "Engagement", 'action':"Master Program details sticky header", 'labelRequired': true, 'noninteractiveness': true},
        'faqclickedopen' : {'category': "Engagement", 'action':"FAQ questions clicked open", 'labelRequired': true, 'noninteractiveness': true},
        'cdclickedopen' : {'category': "Engagement", 'action':"Course Description questions clicked open", 'labelRequired': true, 'noninteractiveness': true},
        'mdclickedopen' : {'category': "Engagement", 'action':"Master Program Description questions clicked open", 'labelRequired': true, 'noninteractiveness': true},
        'eacclickedopen' : {'category': "Engagement", 'action':"Exam and Certification questions clicked open", 'labelRequired': true, 'noninteractiveness': true},
        'jasubmitprofile' : {'category': "Job Assist - Engagement", 'action':"Submit profile", 'labelRequired': true, 'noninteractiveness': true},
        'corpclientstories' : {'category': "Engagement", 'action':"Client Stories - Arrow Click", 'labelRequired': true, 'noninteractiveness': true},
        'corpcourseclick' : {'category': "Navigation", 'action':"Course Card Click", 'labelRequired': true, 'noninteractiveness': true},
        'offerbannerclosed' : {'category': "Engagement", 'action':"Offer banner closed", 'labelRequired': true, 'noninteractiveness': true},
        'offerbannerclick' : {'category': "Engagement", 'action':"Offer banner clicked to show offer pop up", 'labelRequired': true, 'noninteractiveness': true},
        'offerstripclick' : {'category': "Engagement", 'action':"Offer strip clicked when banner is hidden", 'labelRequired': true, 'noninteractiveness': true},
        'offerpopupclosed' : {'category': "Engagement", 'action':"Offer pop up closed", 'labelRequired': true, 'noninteractiveness': true},
        'atpleadformclick' : {'category': "Lead Capture", 'action':"Lead form Clicked", 'labelRequired': true, 'noninteractiveness': true},
        'atpleadprocessinit' : {'category': "Lead Capture", 'action':"Lead process Initiated", 'labelRequired': true, 'noninteractiveness': true},
        'atpleadsubmit' : {'category': "Lead Capture", 'action':"Lead Submitted", 'labelRequired': true, 'noninteractiveness': true},
        'atpintrovideoclick' : {'category': "Engagement", 'action':"Introduction video clicked", 'labelRequired': true, 'noninteractiveness': true},
        'atpstickyheader' : {'category': "Engagement", 'action':"ATP Page sticky header", 'labelRequired': true, 'noninteractiveness': true},
        'atptestimonialsarrow' : {'category': "Engagement", 'action':"Customer testimonials arrows click", 'labelRequired': true, 'noninteractiveness': true},
        'clickoncoursecontenttab' : {'category': "Engagement", 'action':"Click on Course Content tab", 'labelRequired': true, 'noninteractiveness': true},
        'gsaleadformclick' : {'category': "Lead Capture", 'action':"Lead form Clicked", 'labelRequired': true, 'noninteractiveness': true},
        'gsaleadprocessinit' : {'category': "Lead Capture", 'action':"Lead process Initiated", 'labelRequired': true, 'noninteractiveness': true},
        'gsaleadsubmit' : {'category': "Lead Capture", 'action':"Lead Submitted", 'labelRequired': true, 'noninteractiveness': true},
        'masterProgramEmiKnowMore': {'category': "Engagement", 'action': "EMI - Know more clicked", 'labelRequired': true, 'noninteractiveness': false},
        'masterProgramEmiEnroll': {'category': "Payment", 'action': "EMI - Enroll now clicked ", 'labelRequired': true, 'noninteractiveness': false},



        'homepageflyout': {'category': "Home Page", 'action': "Flyout", 'labelRequired': true, 'noninteractiveness': false},
        'homepagesearch': {'category': "Home Page", 'action': "Search", 'labelRequired': true, 'noninteractiveness': false},
        'homepagepopularcourseclick': {'category': "Home Page", 'action': "Popular Course Click", 'labelRequired': true, 'noninteractiveness': false},
        'homepagepopularcourseverticalclick': {'category': "Home Page", 'action': "Popular Course Vertical Click", 'labelRequired': true, 'noninteractiveness': true},
        'homepageselecttrainingtype': {'category': "Home Page", 'action': "Select Training Type", 'labelRequired': true, 'noninteractiveness': false},
        'courselistpageselectcourse': {'category': "Course List Page", 'action': "Select Course", 'labelRequired': true, 'noninteractiveness': false},
        'courselistpagequeryformsubmit': {'category': "Course List Page", 'action': "Query Form Submit", 'labelRequired': true, 'noninteractiveness': false},
        'coursepagegenerictrain': {'category': "Course Page Generic", 'action': "Select Training Type", 'labelRequired': true, 'noninteractiveness': false},
        'coursepagegenericcourseintro': {'category': "Course Page Generic", 'action': "View Course Intro", 'labelRequired': true, 'noninteractiveness': true},
        'coursepagegenericviewothertrain': {'category': "Course Page Generic", 'action': "View Other Training Type", 'labelRequired': false, 'noninteractiveness': true},
        'coursepagegenericcoursepreview': {'category': "Course Page Generic", 'action': "Course Preview Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepagegenericcoursepreviewsuccess': {'category': "Course Page Generic", 'action': "Course Preview Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepagegenericcitytraining': {'category': "Course Page Generic", 'action': "Choose City Training Page", 'labelRequired': true, 'noninteractiveness': false},
        'coursepagegenericqueryformsubmit': {'category': "Course Page Generic", 'action': "Query Form Submit", 'labelRequired': false, 'noninteractiveness': false},
        'coursepagegenericcorporatetry': {'category': "Course Page Generic", 'action': "Corporate_Lead Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepagegenericcorporatesuccess': {'category': "Course Page Generic", 'action': "Corporate_Lead Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageonlinetrain': {'category': "Course Page OSL", 'action': "Choose ILT as Training Type", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageonlinecourseintro': {'category': "Course Page OSL", 'action': "View Course Intro", 'labelRequired': true, 'noninteractiveness': true},
        'coursepageonlineviewothertrain': {'category': "Course Page OSL", 'action': "View Other Training Type", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageonlinecoursepreview': {'category': "Course Page OSL", 'action': "Course Preview Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageonlinecoursepreviewsuccess': {'category': "Course Page OSL", 'action': "Course Preview Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageonlinecitytraining': {'category': "Course Page OSL", 'action': "Choose City Training Page", 'labelRequired': true, 'noninteractiveness': false},
        'coursepageonlinequeryformsubmit': {'category': "Course Page OSL", 'action': "Query Form Submit", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageonlineenroll': {'category': "Course Page OSL", 'action': "Enroll", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageonlinecorporatetry': {'category': "Course Page OSL", 'action': "Corporate_Lead Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageonlinecorporatesuccess': {'category': "Course Page OSL", 'action': "Corporate_Lead Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageclassroomcourseintro': {'category': "Course Page ILT", 'action': "View Course Intro", 'labelRequired': true, 'noninteractiveness': true},
        'coursepageclassroomviewothertrain': {'category': "Course Page ILT", 'action': "View Other Training Type", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageclassroomtrain': {'category': "Course Page ILT", 'action': "Choose OSL as Training Type", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageclassroomcoursepreview': {'category': "Course Page ILT", 'action': "Course Preview Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageclassroomcoursepreviewsuccess': {'category': "Course Page ILT", 'action': "Course Preview Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageclassroomenroll': {'category': "Course Page ILT", 'action': "Enroll", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageclassroomcorporatetry': {'category': "Course Page ILT", 'action': "Corporate_Lead Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageclassroomcorporatesuccess': {'category': "Course Page ILT", 'action': "Corporate_Lead Success", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageiltchangecitytry': {'category': "Course Page ILT", 'action': "Change City Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageiltchangecitysuccess': {'category': "Course Page ILT", 'action': "Change City Success", 'labelRequired': true, 'noninteractiveness': true},
        'coursepageclassroomcitytraining': {'category': "Course Page ILT", 'action': "Choose City Training Page", 'labelRequired': true, 'noninteractiveness': false},
        'coursepageclassroomqueryformsubmit': {'category': "Course Page ILT", 'action': "Query Form Submit", 'labelRequired': false, 'noninteractiveness': false},
        'coursepageconvenienttry': {'category': "Course Page ILT", 'action': "Convenient Schedule Try", 'labelRequired': false, 'noninteractiveness': true},
        'coursepageconvenientsubmit': {'category': "Course Page ILT", 'action': "Convenient Schedule Submit", 'labelRequired': false, 'noninteractiveness': false},
        'coursepagecorporateleadcapture': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'cartpagecoupontry': {'category': "Cart Page", 'action': "Coupon Try", 'labelRequired': true, 'noninteractiveness': true},
        'cartpagecouponsuccess': {'category': "Cart Page", 'action': "Coupon Success", 'labelRequired': true, 'noninteractiveness': true},
        'cartpagecouponfail': {'category': "Cart Page", 'action': "Coupon Fail", 'labelRequired': true, 'noninteractiveness': true},
        'cartpageproceedtopay': {'category': "Cart Page", 'action': "Proceed to Pay Click", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventsrequestcallbacktry': {'category': "Request a Call Back", 'action': "Try", 'labelRequired': false, 'noninteractiveness': true},
        'crosseventsrequestcallbacksuccess': {'category': "Request a Call Back", 'action': "Success", 'labelRequired': false, 'noninteractiveness': false},
        'crosseventsloginattempt': {'category': "Login", 'action': "Login Attempt", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventsloginsuccess': {'category': "Login", 'action': "Login Success", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventsloginfailure': {'category': "Login", 'action': "Login Failure", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventsloginsignupclick': {'category': "Login", 'action': "Sign Up Click", 'labelRequired': false, 'noninteractiveness': true},
        'crosseventsloginsignupattempt': {'category': "Login", 'action': "Sign Up Attempt", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventsloginsignupsuccess': {'category': "Login", 'action': "Sign Up Success", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventsloginsignupfailure': {'category': "Login", 'action': "Sign Up Failure", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventscountrychangetry': {'category': "Country_Change", 'action': "Try", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventssearchattempt': {'category': "Search", 'action': "Attempt", 'labelRequired': true, 'noninteractiveness': true},
        'crosseventssearchlist': {'category': "Search", 'action': "List", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventssearchclickresult': {'category': "Search", 'action': "Click_Result", 'labelRequired': true, 'noninteractiveness': false},
        'crosseventssearchnoresult': {'category': "Search", 'action': "No_Result", 'labelRequired': true, 'noninteractiveness': true},
        'leadcapturerequestcall': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'labelValue': 'Request A Call', 'noninteractiveness': false},
        'leadcapturecoursepreview': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},        'leadcaptureworkshopnotavail': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'labelValue': 'Workshop Not Available', 'noninteractiveness': false},
        'leadcapturereferearnreferrer': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'leadcapturereferearnreferee': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'footercorporatelinkclick': {'category': "Footer", 'action': "Corporate", 'labelRequired': false, 'noninteractiveness': false},
        'corporatewebsiteleadcapture': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'corporatehomepageclick': {'category': "Header B2b", 'action': "Home", 'labelRequired': false, 'noninteractiveness': true},
        'corporateclientspageclick': {'category': "Header B2b", 'action': "Customers", 'labelRequired': false, 'noninteractiveness': true},
        'corporatecoursepageclick': {'category': "Header B2b", 'action': "Courses", 'labelRequired': false, 'noninteractiveness': true},
        'corporatecompetencypageclick': {'category': "Header B2b", 'action': "Why Simplilearn", 'labelRequired': false, 'noninteractiveness': true},
        'corporateleadtry': {'category': "Request Cust Quote B2b", 'action': "Try", 'labelRequired': true, 'noninteractiveness': true},
        'corporateleadsuccess': {'category': "Request Cust Quote B2b", 'action': "Success", 'labelRequired': true, 'noninteractiveness': false},
        'corporatehomeleadersclick': {'category': "b2b Home", 'action': "Loved By Leader", 'labelRequired': false, 'noninteractiveness': true},
        'corporatehomeexpertsclick': {'category': "b2b Home", 'action': "Experts in", 'labelRequired': false, 'noninteractiveness': false},
        'corporatecoursebusinesslabelclick': {'category': "B2b Course Page", 'action': "Business Category Show Detail", 'labelRequired': true, 'noninteractiveness': true},
        'corporatecoursetechlabelclick': {'category': "B2b Course Page", 'action': "Technology  Category  Show Detail", 'labelRequired': true, 'noninteractiveness': true},
        'corporatecoursebusinesscourseclick': {'category': "B2b Course Page", 'action': "Business Category Course Click", 'labelRequired': true, 'noninteractiveness': true},
        'corporatecoursetechcourseclick': {'category': "B2b Course Page", 'action': "Technology  Category  Course Click", 'labelRequired': true, 'noninteractiveness': true},
        'corporatecoursebusinesslabelclose': {'category': "B2b Course Page", 'action': "Business Category Close Detail", 'labelRequired': true, 'noninteractiveness': true},
        'corporatecoursetechlabelclose': {'category': "B2b Course Page", 'action': "Technology Category Close Detail", 'labelRequired': true, 'noninteractiveness': true},
        'corporateclientsreviewscrollright': {'category': "B2b Customer Page", 'action': "Reviews - Scroll Right", 'labelRequired': false, 'noninteractiveness': true},
        'corporateclientsreviewscrollleft': {'category': "B2b Customer Page", 'action': "Reviews - Scroll Left", 'labelRequired': false, 'noninteractiveness': true},
        'corporateclientsindustryindexclick': {'category': "B2b Customer Page", 'action': "Click Industry Alphabet", 'labelRequired': true, 'noninteractiveness': true},
        'frsArticleCommentsClick': {'category': "Free Resource - Articles", 'action': "Click Comment at Top", 'labelRequired': false, 'noninteractiveness': true},
        'frsArticleCommentsTry': {'category': "Free Resource - Articles", 'action': "Comments Try", 'labelRequired': false, 'noninteractiveness': true},
        'frsArticleCommentsSuccess': {'category': "Free Resource - Articles", 'action': "Comments Success", 'labelRequired': false, 'noninteractiveness': false},
        'frsShareTry': {'category': "Free Resource", 'action': "Share Try", 'labelRequired': true, 'noninteractiveness': true},
        'frsArticleAuthorProfileClick': {'category': "Free Resource - Articles", 'action': "Author Profile Click", 'labelRequired': true, 'noninteractiveness': true},
        'frsArticleCourseImageClick': {'category': "Free Resource - Articles", 'action': "Related Courses Click - Image", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticleCourseDetailsClick': {'category': "Free Resource - Articles", 'action': "Related Courses Click - More Details", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticleCourseNavClick': {'category': "Free Resource - Articles", 'action': "Related Course Click - Scroll", 'labelRequired': true, 'noninteractiveness': true},
        'frsEbookCourseImageClick': {'category': "Free Resource - Ebooks", 'action': "Related Courses Click - Image", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookCourseDetailsClick': {'category': "Free Resource - Ebooks", 'action': "Related Courses Click - More Details", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookCourseNavClick': {'category': "Free Resource - Ebooks", 'action': "Related Course Click - Scroll", 'labelRequired': true, 'noninteractiveness': true},
        'frsWebinarCourseImageClick': {'category': "Free Resource - Webinars", 'action': "Related Courses Click - Image", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarCourseDetailsClick': {'category': "Free Resource - Webinars", 'action': "Related Courses Click - More Details", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarCourseNavClick': {'category': "Free Resource - Webinars", 'action': "Related Course Click - Scroll", 'labelRequired': true, 'noninteractiveness': true},
        'frsVideoCourseImageClick': {'category': "Free Resource - Videos", 'action': "Related Courses Click - Image", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoCourseDetailsClick': {'category': "Free Resource - Videos", 'action': "Related Courses Click - More Details", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoCourseNavClick': {'category': "Free Resource - Videos", 'action': "Related Course Click - Scroll", 'labelRequired': true, 'noninteractiveness': true},
        'frsArticleWebinarClick': {'category': "Free Resource - Articles", 'action': "Webinar Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticleEbookClick': {'category': "Free Resource - Articles", 'action': "Ebook Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticlePopularTagClick': {'category': "Free Resource - Articles", 'action': "Popular Tag click", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticleRelatedArticleSideClick': {'category': "Free Resource - Articles", 'action': "Related Article Click -From Side", 'labelRequired': true, 'noninteractiveness': false},
        'frsArticleRelatedArticleBottomClick': {'category': "Free Resource - Articles", 'action': "Related Article Click -From Bottom", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookWebinarClick': {'category': "Free Resource - Ebooks", 'action': "Webinar Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookEbookClick': {'category': "Free Resource - Ebooks", 'action': "Ebook Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookPopularTagClick': {'category': "Free Resource - Ebooks", 'action': "Popular Tag click", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookRelatedArticleSideClick': {'category': "Free Resource - Ebooks", 'action': "Related Article Click -From Side", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarWebinarClick': {'category': "Free Resource - Webinars", 'action': "Webinar Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarEbookClick': {'category': "Free Resource - Webinars", 'action': "Ebook Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarPopularTagClick': {'category': "Free Resource - Webinars", 'action': "Popular Tag click", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarRelatedArticleSideClick': {'category': "Free Resource - Webinars", 'action': "Related Article Click -From Side", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoWebinarClick': {'category': "Free Resource - Videos", 'action': "Webinar Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoEbookClick': {'category': "Free Resource - Videos", 'action': "Ebook Click - Link", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoPopularTagClick': {'category': "Free Resource - Videos", 'action': "Popular Tag click", 'labelRequired': true, 'noninteractiveness': false},
        'frsVideoRelatedArticleSideClick': {'category': "Free Resource - Videos", 'action': "Related Article Click -From Side", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarListRegisterTry': {'category': "Webinar List Page", 'action': "Register Try", 'labelRequired': true, 'noninteractiveness': true},
        'frsWebinarListRegisterSuccess': {'category': "Webinar List Page", 'action': "Register Success", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarDtlRegisterSuccess': {'category': "Webinar Page", 'action': "Register Success", 'labelRequired': true, 'noninteractiveness': false},
        'frsWebinarLeadCapture': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookDtlRegisterSuccess': {'category': "Ebook Page", 'action': "Download Success", 'labelRequired': true, 'noninteractiveness': false},
        'frsEbookLeadCapture': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
        'lvcpassCatFilter': {'category': "LVC_Pass", 'action': "Filter", 'labelRequired': true, 'noninteractiveness': true},
        'lvcpassKeyFeature': {'category': "LVC_Pass", 'action': "Key_features", 'labelRequired': true, 'noninteractiveness': true},
        'lvcpassTermsOfUse': {'category': "LVC_Pass", 'action': "Open Terms of use", 'labelRequired': true, 'noninteractiveness': true},
        'lvcpassPurchase': {'category': "LVC_Pass", 'action': "Purchase", 'labelRequired': true, 'noninteractiveness': true},
        'lvcpassLead': {'category': "LVC_Pass", 'action': "Lead", 'labelRequired': true, 'noninteractiveness': false},
        'subsHomePageClick' : {'category': "Home Page", 'action':"Subscription Click", 'labelRequired': true, 'noninteractiveness': false},
        'subsHomePageScroll' : {'category': "Home Page", 'action':"Subscription Scroll", 'labelRequired': true, 'noninteractiveness': false},
        'subsCourseListPage' : {'category': "Course List Page", 'action':"Subscription Click", 'labelRequired': true, 'noninteractiveness': false},
        'subsCoursePage' : {'category': "Course Page OSL", 'action':"Subscription Click", 'labelRequired': true, 'noninteractiveness': false},
        'subsSubscriptionPageStartTrial' : {'category': gaPageCategory, 'action':"Start Free Trial", 'labelRequired': true, 'noninteractiveness': false},
        'subsCourseExpand' : {'category': gaPageCategory, 'action':"Expand Course", 'labelRequired': true, 'noninteractiveness': true},
        'subskeyfeaturesClick' : {'category': gaPageCategory, 'action':"Key Features Click", 'labelRequired': true, 'noninteractiveness': true},
        'subsabouttheprogramClick' : {'category': gaPageCategory, 'action':"About Subscription Click", 'labelRequired': true, 'noninteractiveness': true},
        'subsreviewsClick' : {'category': gaPageCategory, 'action':"Click Reviews", 'labelRequired': true, 'noninteractiveness': true},
        'subsLead' : {'category': gaPageCategory, 'action':"Query Submit", 'labelRequired': true, 'noninteractiveness': true},
        'subsCartProceed' : {'category': "Subscription Cart", 'action':"Proceed to pay", 'labelRequired': false, 'noninteractiveness': true},
        'subsCartPopup' : {'category': "Subscription Cart", 'action':"Cart Message Popup", 'labelRequired': true, 'noninteractiveness': false},
        'subsCartPopupClick' : {'category': "Subscription Cart", 'action':"Cart Message Popup - Click", 'labelRequired': true, 'noninteractiveness': true},
        'subsCartFnlLand' : {'category': "Subscription Funnel", 'action':"Subscription Cart", 'labelRequired': true, 'noninteractiveness': true},
        'subsTyFunnelLand' : {'category': "Subscription Funnel", 'action':"Subscription Thank You Page", 'labelRequired': true, 'noninteractiveness': true},
        'subsCartFnlPayToProceedMsg' : {'category': "Subscription Funnel Without Free Trial", 'action':"Cart Message - Pay Now Opened", 'labelRequired': true, 'noninteractiveness': true},
        'subsCartFnlPayToProceedAct' : {'category': "Subscription Funnel Without Free Trial", 'action':"Cart Message - Subscribe Now", 'labelRequired': true, 'noninteractiveness': true},
        'subsTyFnlPaid' : {'category': "Subscription Funnel Without Free Trial", 'action':"Subscription Thank You Page", 'labelRequired': true, 'noninteractiveness': true},
        'subsTyFnlFree' : {'category': "Subscription Funnel - Free Trial", 'action':"Subscription Thank You Page", 'labelRequired': true, 'noninteractiveness': true},
        'frscoldleadformpop' : {'category': "FRS_Cold_lead", 'action':"Lead_Pop_up", 'labelRequired': true, 'noninteractiveness': true},
        'frscoldleadformpopsubmit' : {'category': "FRS_Cold_lead", 'action':"Lead_submission", 'labelRequired': true, 'noninteractiveness': true},
        'searchpagefilterclick' : {'category': "Search_result_filter", 'action':"none", 'labelRequired': true, 'noninteractiveness': true},
        'searchpagefeedclick' : {'category': "Search_result_selection", 'action':"none", 'labelRequired': true, 'noninteractiveness': true},
        'LecturePage_Watch_Course_Video' : {'category': "Lecture Page", 'action':"Watch Course Video", 'labelRequired': false, 'noninteractiveness':true},
        'LecturePage_View_Course_Detail' : {'category': "Lecture Page", 'action':"View Course Detail", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_Click_Related_Course' : {'category': "Lecture Page", 'action':"Click Related Course", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_Click_Webinar' : {'category': "Lecture Page", 'action':"Click Webinar", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_Click_Related_Article' : {'category': "Lecture Page", 'action':"Click Related Article", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_Click_Other_Chapter' : {'category': "Lecture Page", 'action':"Click Other Chapter", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_Scroll_Related_Course' : {'category': "Lecture Page", 'action':"Scroll Related Course", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Scroll_Learner_Review' : {'category': "Lecture Page", 'action':"Scroll Learner Review", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Scroll_Webinar' : {'category': "Lecture Page", 'action':"Scroll Webinar", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Scroll_Related_Article' : {'category': "Lecture Page", 'action':"Scroll Related Article", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Click_Reviewer_Prfile' : {'category': "Lecture Page", 'action':"Click Reviewer Prfile", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Expand_Topic' : {'category': "Lecture Page", 'action':"Expand Topic", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Collapse_Topic' : {'category': "Lecture Page", 'action':"Collapse Topic", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Is_it_helpful' : {'category': "Lecture Page", 'action':"Is it helpful", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_View_Topic_Video' : {'category': "Lecture Page", 'action':"View Topic Video", 'labelRequired': true, 'noninteractiveness':true},
        'LecturePage_Click_Course_Detail_from_Video' : {'category': "Lecture Page", 'action':"Click Course Detail from Video", 'labelRequired': true, 'noninteractiveness':false},
        'LecturePage_transcript_click_icon':{'category': "Course Preview Page", 'action':"Click on transcript icon", 'labelRequired': false, 'noninteractiveness':false},
        'LecturePage_transcript_popup':{'category': "Course Preview Page", 'action':"Transcript Popup close", 'labelRequired': false, 'noninteractiveness':false},
        'CoursePreview_LectPage_accordian_open':{'category': "Course Preview Page", 'action':"Lecture Page accordian open", 'labelRequired': true, 'noninteractiveness':false},
        'onloadSubsPageType':{'category': "Subscription_funnel", 'action':"Page load", 'labelRequired': true, 'noninteractiveness':true},
        'onloadBundlePageType':{'category': "Bundle_funnel", 'action':"Page load", 'labelRequired': true, 'noninteractiveness':true},
        'startFreeTrail':{'category': "Subscription_funnel", 'action':"Start free trial", 'labelRequired': true, 'noninteractiveness':false},
        'proceedToPayPal':{'category': "Subscription_funnel", 'action':"Proceed to pay with Paypal", 'labelRequired': true, 'noninteractiveness':false},
        'changeSubsMPlan':{'category': "Subscription Page", 'action':"change to annual plan", 'labelRequired': true, 'noninteractiveness':false},
        'changeSubsAPlan':{'category': "Subscription Page", 'action':"change to monthly plan", 'labelRequired': true, 'noninteractiveness':false},
        'lvcFireOnload':{'category': "lvcpass_funnel", 'action':"Page load", 'labelRequired': true, 'noninteractiveness':true},
        'OnPorceedClick':{'category': "lvcpass_funnel", 'action':"Add to cart", 'labelRequired': true, 'noninteractiveness':false},
        'OnPorceedBundleClick':{'category': "Bundle_funnel", 'action':" Proceed to payment page", 'labelRequired': true, 'noninteractiveness':false},
        'OnPorceedLvcPassClick':{'category': "lvcpass_funnel", 'action':"Proceed to payment page", 'labelRequired': true, 'noninteractiveness':false},
        'paymentSuccesssubc':{'category': "Subscription_funnel", 'action':"Successful enrollment", 'labelRequired': true, 'noninteractiveness':false},
        'coursePageABTestingHover' : {'category': "ab testing", 'action':"onhover", 'labelRequired': false, 'noninteractiveness':false},
        'coursePageABTestingClick' : {'category': "ab testing", 'action':"onclickspecialoffer", 'labelRequired': false, 'noninteractiveness':false},
        'cCallClose' : {'category': "Click 2 Call US", 'action':"Popup Close", 'labelRequired': true, 'noninteractiveness':false},
        'cCallLogged' : {'category': "Click 2 Call US", 'action':"Popup open loggedin user", 'labelRequired': true, 'noninteractiveness':false},
        'cCallNotLogged' : {'category': "Click 2 Call US", 'action':"Popup open not loggedin user", 'labelRequired': true, 'noninteractiveness':false},
        'cCallBtn' : {'category': "Click 2 Call US", 'action':"Clicked on Call Btn", 'labelRequired': true, 'noninteractiveness':false},
        'course_agenda' : {'category': "Course Agenda", 'action':"click on download", 'labelRequired': true, 'noninteractiveness':true},
        'ec_council_notify_me': {'category': "Course Page EC Council", 'action': "click on Notify Me", 'labelRequired': true, 'noninteractiveness': true},
        'pre_run': {'category': "Course Page Generic", 'action': "click on pre run video", 'labelRequired': false, 'noninteractiveness': true},
        'flexi_pass': {'category': "Course Page Generic", 'action': "click on flexi pass video", 'labelRequired': false, 'noninteractiveness': true},
        'CoursePreviewIntrovideoClick': {'category': "Course Page Generic", 'action': "click on course preview from intro video", 'labelRequired': true, 'noninteractiveness': false},
        'RE_view_TC': {'category': "RE_view_TC", 'action': "user clicks on the T&C link", 'labelRequired': false, 'noninteractiveness': false},
        'rf_social_channel': {'category': "R&E_initiated_Referral_via_social_channel", 'action': "social sharing option", 'labelRequired': true, 'noninteractiveness': false},
        'Referral_via_Email_Import_Click': {'category': "R&E_initiates_Referral_via_Email", 'action': "clicks on email import", 'labelRequired': true, 'noninteractiveness': false},
        'Referral_via_Email_Import_Submit': {'category': "R&E_initiates_Referral_via_Email", 'action': "clicks on submit while using email import", 'labelRequired': true, 'noninteractiveness': false},
        'RE_CopyLink': {'category': "R&E_CopyLink", 'action': "Click on Copy Link", 'labelRequired': false, 'noninteractiveness': false},
        'Re_ini_Email': {'category': "R&E_initiates_Referral_via_Email", 'action': "User attempts to enter email addresses", 'labelRequired': false, 'noninteractiveness': false},
        'Re_comp_Email': {'category': "R&E_completes_Referral_via_Email", 'action': "The user completes inviting friends via email", 'labelRequired': false, 'noninteractiveness': false},
        'Re_initiated_Login': {'category': "R&E_initiated_Login", 'action': "Initiated email login", 'labelRequired': false, 'noninteractiveness': false},
        'Re_submit_Email': {'category': "R&E_submit_Email", 'action': "Submitted email login", 'labelRequired': true, 'noninteractiveness': false},
        'FreePracticeTest': {'category': "Free Practice Test", 'action': "FPT Name", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_contact_us_Click': {'category': "Enterprise_Enroll_Card", 'action': "User clicks on Contact Us", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_Enterprise_Form_Open': {'category': "Enterprise_Enroll_Card", 'action': "Enterprise form pop up opens", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_LearnersRangePricing_OSL_Modal_Open': {'category': "CP B2b Learners Range Pricing Modal for OSL", 'action': "CP B2b Learners Range Pricing Modal Open", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_LearnersRangePricing_LVC_Modal_Open': {'category': "CP B2b Learners Range Pricing Modal for LVC", 'action': "CP B2b Learners Range Pricing Modal Open", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_User_Fills_Marketo_Form': {'category': "Enterprise_Enroll_Card", 'action': "User initiates filling the marketo form", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_User_Submits_Marketo_Form': {'category': "Enterprise_Enroll_Card", 'action': "User submits the marketo form", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_User_Clicks_Enterprise_Tab': {'category': "Course Page B2B Query Drop", 'action': "User clicks on Enterprise Tab", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_User_Fills_Enterprise_Form': {'category': "Course Page B2B Query Drop", 'action': "User initiates filling the enterprise form", 'labelRequired': true, 'noninteractiveness': false},
        'Cp_User_Submits_Enterprise_Form': {'category': "Course Page B2B Query Drop", 'action': "User submits the enterprise form", 'labelRequired': true, 'noninteractiveness': false},
        'Course_callus_click': {'category': "Course Page Mobile Sticky footer", 'action': "Click on Call Us button", 'labelRequired': true, 'noninteractiveness': false},
        'Course_chat_click': {'category': "Course Page Mobile Sticky footer", 'action': "Click on Chat button", 'labelRequired': true, 'noninteractiveness': false},
        'Course_query_click': {'category': "Course Page Mobile Sticky footer", 'action': "Click on Query button", 'labelRequired': true, 'noninteractiveness': false},
        'Category_video_click': {'category': "Category Page", 'action': "Video Clicked to view", 'labelRequired': true, 'noninteractiveness': false},
        'Category_modal_closed': {'category': "Category Page", 'action': "Video modal closed", 'labelRequired': true, 'noninteractiveness': false},
        'Category_advisor_scroll_left': {'category': "Category Page", 'action': "Course Advisor Section Scrolled Left", 'labelRequired': true, 'noninteractiveness': false},
        'Category_advisor_scroll_right': {'category': "Category Page", 'action': "Course Advisor Section Scrolled Right", 'labelRequired': true, 'noninteractiveness': false},
        'Category_alumni_social_click': {'category': "Category Page", 'action': "User views Alumnus LinkedIn Profile", 'labelRequired': true, 'noninteractiveness': false},
        'Category_individuals_tab_click': {'category': "Category Page", 'action': "User clicks on For Individuals tab to see form", 'labelRequired': true, 'noninteractiveness': false},
        'Category_business_tab_click': {'category': "Category Page", 'action': "User clicks on For Business tab to see form", 'labelRequired': true, 'noninteractiveness': false},
        'Category_form_filled': {'category': "Category Page", 'action': "User intiates the step of filling Individuals form", 'labelRequired': true, 'noninteractiveness': false},
        'Category_course_card_click': {'category': "Category Page", 'action': "Course Card clicked", 'labelRequired': true, 'noninteractiveness': false},
        'Category_master_program_click': {'category': "Category Page", 'action': "Masters Program card clicked", 'labelRequired': true, 'noninteractiveness': false},

        'SemCoursePageTabViewMoreClick':{'category': "Engagement", 'action': "User clicks on View More in the course tabs", 'labelRequired': true, 'noninteractiveness': true},
        'SemCoursePageTabClick':{'category': "Engagement", 'action': "User clicks on course tabs", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseTestimonialClick':{'category': "Engagement", 'action': "User clicks Testimonials", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseShowMoreReviews': {'category': "Engagement", 'action': "User clicks View all Testimonials", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseForm2LeadSubmit': {'category': "Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseForm2Click': {'category': "Lead Capture", 'action': "Lead form Clicked", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseTestimonialReadMore':{'category': "Engagement", 'action': "Read more of Testimonial clicked", 'labelRequired': true, 'noninteractiveness': true},
        'SemBundleShowMoreCourseInLearningPath':{'category': "Engagement", 'action': "Show More Courses Link clicked", 'labelRequired': true, 'noninteractiveness': true},
        'SemBundleShowLessCourseInLearningPath':{'category': "Engagement", 'action': "Show Less Courses Link clicked", 'labelRequired': true, 'noninteractiveness': true},
        'SemCourseAdvisoryExplore':{'category': "Engagement", 'action': "User explores course advisor section", 'labelRequired': true, 'noninteractiveness': false},
        
         //Home Page Ga Events
        'homepageQuickLinkClick':{'category': "Navigation", 'action': "Quick Link", 'labelRequired': true, 'noninteractiveness': false},
        'homepageExploreAll':{'category': "Navigation",     'action': "Explore all Courses clicked", 'labelRequired': true, 'noninteractiveness': false},
        'homepageCourseToogle':{'category': "Engagement",   'action': "Course Toggle clicked", 'labelRequired': true, 'noninteractiveness': false},
        'homepageWhatsNewClick':{'category': "Engagement",  'action': "Whats new section clicked", 'labelRequired': true, 'noninteractiveness': false},
        'homepageCorporateLearnMoreClick':{'category': "Navigation", 'action': "Corporate Training - Learn More clicked", 'labelRequired': true, 'noninteractiveness': false},
        'dobubleNavClickedGeneric':{'category': "Navigation", 'action': "Double Nav clicked", 'labelRequired': true, 'noninteractiveness': false},
        'homepageMasterCardClick':{'category': "Navigation", 'action': "Master Course Card Click", 'labelRequired': true, 'noninteractiveness': false},
        'myCourseClickGeneric':{'category': "Engagement", 'action': "My courses clicked", 'labelRequired': true, 'noninteractiveness': false},
        'onLogoutClickGeneric':{'category': "Engagement", 'action': "Logout clicked", 'labelRequired': true, 'noninteractiveness': false},

        //GSA Page Ga Events
         'gsapageViewMoreTestimonials': {'category': "Navigation", 'action': "View More Testimonials", 'labelRequired': true, 'noninteractiveness': false},
        //GDPR Optin Checkbox Ga Events
         'gdprOptinCheckboxChecked':{'category': "Engagement", 'action': "Click on Consent check box", 'labelRequired': true, 'noninteractiveness': false},
    };

    this.init = function () {
        var overAllFunnelTrigger = this.logicForOverAllFunnelTrigger();
        if (overAllFunnelTrigger.trigger == true) {
            this.triggerOverAllFunnel(overAllFunnelTrigger);
        }
        var classRoomFunnelTrigger = this.logicForClassRoomFunnelTrigger();
        if (classRoomFunnelTrigger.trigger == true) {
            this.triggerClassRoomFunnel(classRoomFunnelTrigger);
        }
        var onlineFunnelTrigger = this.logicForOnlineFunnelTrigger();
        if (onlineFunnelTrigger.trigger == true) {
            this.triggerOnlineFunnel(onlineFunnelTrigger);
        }
        this.gaFireOnCoursePage();
        this.gaFireOnCoursePageNoWorkshop();
        this.gaFireOnCourseListSearchTagDetect();
        this.fireDataLayerAdElement();
    }
    this.logicForOverAllFunnelTrigger = function () {
        var args = new Array();
        args.isArray = false;
        args.trigger = false;

        if (user_params.overAllDataIsArrayForGa == true) {
            var argumentArray = user_params.overAllDataForGa;
            args = this.forEachInFunnelTriggers(argumentArray, args, 'overAllPage');
            console.log(args);
            args.isArray = true;
        } else {
            args.funnelAction = user_params.overAllPageActionForGa;
            args.label = user_params.overAllPageLabelForGa;
            args.value = user_params.overAllPageValueForGa;
            if (args.funnelAction != '' || args.label != '' || args.value != '') {
                args.trigger = true;
            }
        }
        return args;
    }
    this.logicForClassRoomFunnelTrigger = function () {
        var args = new Array();
        args.isArray = false;
        args.trigger = false;

        if (user_params.classRoomDataIsArrayForGa == true) {
            var argumentArray = user_params.classRoomDataForGa;
            args = this.forEachInFunnelTriggers(argumentArray, args, 'classRoomPage');
            args.isArray = true;
        } else {
            args.funnelAction = user_params.classRoomPageActionForGa;
            args.label = user_params.classRoomPageLabelForGa;
            args.value = user_params.classRoomPageValueForGa;
            if (args.funnelAction != '' || args.label != '' || args.value != '') {
                args.trigger = true;
            }
        }
        return args;
    }
    this.logicForOnlineFunnelTrigger = function () {
        var args = new Array();
        args.isArray = false;
        args.trigger = false;

        if (user_params.onlineDataIsArrayForGa == true) {
            var argumentArray = user_params.onlineDataForGa;
            args = this.forEachInFunnelTriggers(argumentArray, args, 'onlinePage');
            args.isArray = true;
        } else {
            args.funnelAction = user_params.onlinePageActionForGa;
            args.label = user_params.onlinePageLabelForGa;
            args.value = user_params.onlinePageValueForGa;
            if (args.funnelAction != '' || args.label != '' || args.value != '') {
                args.trigger = true;
            }
        }
        return args;
    }
    this.gaEventsFireForError = function () {
        var args = new Array();
        args.trigger = true;
        args.funnelString = 'Error';
        args.funnelAction = user_params.codeForGa;
        args.label = user_params.referralUrl;
        args.value = user_params.message;
        this.triggerCustomFunnel(args);
    }
    this.gaFireOnCoursePage = function () {
        if (user_params.genericCoursePageStringForGa) {
            if (window.location.hash != '#/ilt' && window.location.hash != '#/osl') {
                var args = new Array();
                args.trigger = true;
                args.funnelString = this.overAllFunnelString;
                args.funnelAction = user_params.genericCoursePageStringForGa;
                args.label = user_params.codeForGa;
                args.value = 'send-url';
                this.triggerCustomFunnel(args);
            }
        }
    }
    this.gaFireOnCoursePageNoWorkshop = function () {
        if (user_params.noWorkshopFoundFunnelActivate) {
            var args = new Array();
            args.trigger = true;
            args.funnelString = this.noWorkshopFoundFunnel;
            args.funnelAction = user_params.noWorkshopFoundAction;
            args.label = user_params.noWorkshopFoundLabel;
            args.value = '';
            this.triggerCustomFunnel(args);
        }
    }
    this.gaFireOnCoursePageNoWorkshopFormSubmit = function () {
        var args = new Array();
        args.trigger = true;
        args.funnelString = this.noWorkshopFoundFunnel;
        args.funnelAction = 'Form Submit';
        args.label = user_params.noWorkshopFoundLabel;
        args.value = '';
        args.noninteractiveness = false;
        this.triggerCustomFunnel(args);
    }
    this.gaFireOnCourseListSearchTagDetect = function () {
        var keyword = user_params.gaTagForPage;
        if (user_params.overAllPageLabelForGa == 'search') {
            if (document.getElementsByClassName('list_li').length > 0) {
                this.gaFireInteractiveEvents('crosseventssearchlist', keyword);
            } else {
                this.gaFireInteractiveEvents('crosseventssearchnoresult', keyword);
            }
        }
    }
    this.gaFireOnCourseListSearchTagCounter = function (rank) {

        var keyword = user_params.gaTagForPage;
        if (user_params.overAllPageLabelForGa == 'search') {
            this.gaFireInteractiveEvents('crosseventssearchclickresult', keyword + ' | ' + rank);
        }
    }
    this.gaFireOnCartPageInvalidCouponSubmit = function (invalidCouponLabel) {
        this.gaFireOnCartPageInvalidCouponSubmit(invalidCouponLabel);
    }
    this.gaFireInteractiveEvents = function (keyInRedmineArray, label) {
        this.gaFireInteractiveEvents(keyInRedmineArray, label);
    }
    this.gaFireOnCartProceedClick = function () {
        if (typeof user_params.overAllDataForGa[0] != 'undefined' && typeof user_params.overAllDataForGa[0]['overAllPageActionForGa'] != 'undefined' && typeof user_params.overAllDataForGa[0]['overAllPageLabelForGa'] != 'undefined' && user_params.overAllDataForGa[0]['overAllPageActionForGa'] == 'Cart Page') {
            this.gaFireInteractiveEvents('cartpageproceedtopay', user_params.overAllDataForGa[0]['overAllPageLabelForGa']);
        }
    }
    this.triggerOverAllFunnel = function (args) {
        if (args.trigger) {
            temp = new Array();
            if (args.isArray) {
                for (var i = 0; typeof args[i] != 'undefined'; i++) {
                    if (!isNaN(args[i].value) && (args[i].value === 0 || args[i].value > 0)) {
                        var value = args[i].value;
                    } else {
                        var value = 0;
                    }
                    temp.push(['_trackEvent', this.overAllFunnelString, args[i].funnelAction, args[i].label, value, true]);
                    _gaq.push(['_trackEvent', this.overAllFunnelString, args[i].funnelAction, args[i].label, value, true]);
                }
            } else {
                if (!isNaN(args.value) && (args.value === 0 || args.value > 0)) {
                    var value = args.value;
                } else {
                    var value = 0;
                }
                temp.push(['_trackEvent', this.overAllFunnelString, args.funnelAction, args.label, value, true]);
                _gaq.push(['_trackEvent', this.overAllFunnelString, args.funnelAction, args.label, value, true]);
            }
            if (printGaInConsole) {
                console.log(temp);
            }
        }
    }
    this.triggerCustomFunnel = function (args) {
        if (args.trigger) {
            temp = new Array();
            if (args.isArray) {
                for (var i = 0; typeof args[i] != 'undefined'; i++) {
                    if (!isNaN(args[i].value) && (args[i].value === 0 || args[i].value > 0)) {
                        var value = args[i].value;
                    } else {
                        var value = 0;
                    }
                    var noninteractiveness = true;
                    if (typeof args[i].noninteractiveness != 'undefined' && (args[i].noninteractiveness == true || args[i].noninteractiveness == false)) {
                        noninteractiveness = args[i].noninteractiveness;
                    }
                    _gaq.push(['_trackEvent', args[i].funnelString, args[i].funnelAction, args[i].label, value, noninteractiveness]);
                    temp.push(['_trackEvent', args[i].funnelString, args[i].funnelAction, args[i].label, value, noninteractiveness]);
                }
            } else {
                if(args.value == 'send-url'){
                    var value = document.URL;
                }
                else if (!isNaN(args.value) && (args.value === 0 || args.value > 0)) {
                    var value = args.value;
                } else {
                    var value = 0;
                }
                var noninteractiveness = true;
                if (typeof args.noninteractiveness != 'undefined' && (args.noninteractiveness == true || args.noninteractiveness == false)) {
                    noninteractiveness = args.noninteractiveness;
                }
                temp.push(['_trackEvent', args.funnelString, args.funnelAction, args.label, value, noninteractiveness]);
                _gaq.push(['_trackEvent', args.funnelString, args.funnelAction, args.label, value, noninteractiveness]);
            }
            if (printGaInConsole) {
                console.log(temp);
            }
        }
    }
    this.triggerClassRoomFunnel = function (args) {
        if (args.trigger) {
            tempClass = new Array();
            if (args.isArray) {
                for (var i = 0; typeof args[i] != 'undefined'; i++) {
                    if (!isNaN(args[i].value) && (args[i].value === 0 || args[i].value > 0)) {
                        var value = args[i].value;
                    } else {
                        var value = 0;
                    }
                    _gaq.push(['_trackEvent', this.classRoomFunnelString, args[i].funnelAction, args[i].label, value, true]);
                    tempClass.push(['_trackEvent', this.classRoomFunnelString, args[i].funnelAction, args[i].label, value, true]);
                }
            } else {
                if (!isNaN(args.value) && (args.value === 0 || args.value > 0)) {
                    var value = args.value;
                } else {
                    var value = 0;
                }
                tempClass.push(['_trackEvent', this.classRoomFunnelString, args.funnelAction, args.label, value, true]);
                _gaq.push(['_trackEvent', this.classRoomFunnelString, args.funnelAction, args.label, value, true]);
            }
            if (printGaInConsole) {
                console.log(tempClass);
            }
        }
    }
    this.triggerOnlineFunnel = function (args) {
        if (typeof args.trigger != 'undefined' && args.trigger) {
            tempOnline = new Array();
            if (typeof args.isArray != 'undefined' && args.isArray) {
                for (var i = 0; typeof args[i] != 'undefined'; i++) {
                    if (!isNaN(args[i].value) && (args[i].value === 0 || args[i].value > 0)) {
                        var value = args[i].value;
                    } else {
                        var value = 0;
                    }
                    _gaq.push(['_trackEvent', this.onlineFunnelString, args[i].funnelAction, args[i].label, value, true]);
                    tempOnline.push(['_trackEvent', this.onlineFunnelString, args[i].funnelAction, args[i].label, value, true]);
                }
            } else {
                if (!isNaN(args.value) && (args.value === 0 || args.value > 0)) {
                    var value = args.value;
                } else {
                    var value = 0;
                }

                tempOnline.push(['_trackEvent', this.onlineFunnelString, args.funnelAction, args.label, value, true]);
                _gaq.push(['_trackEvent', this.onlineFunnelString, args.funnelAction, args.label, value, true]);
            }
            if (printGaInConsole) {
                console.log(tempOnline);
            }
        }
    }
    this.eventsOverallOnTrainingType = function (courseType) {
        var args = new Array();
        args.trigger = true;
        args.funnelAction = 'Training Type';
        args.label = courseType;
        args.value = '';
        this.triggerOverAllFunnel(args);
    }

    this.eventsClassRoomOnTrainingType = function () {
        var args = new Array();
        args.trigger = true;
        args.funnelAction = 'Course Page';
        args.label = course_name;
        args.value = '';
        this.triggerClassRoomFunnel(args);
    }

    this.eventsOnlineOnTrainingType = function () {
        if(gaPageCategory == ''){
            var args = new Array();
            args.trigger = true;
            args.funnelAction = 'Course Page';
            args.label = course_name;
            args.value = '';
            this.triggerOnlineFunnel(args);
        }
    }

    this.gaFireOnCartPageInvalidCouponSubmit = function (invalidCouponLabel) {

        var args = new Array();
        args.trigger = true;
        args.funnelString = this.invalidCoupon;
        args.funnelAction = 'Invalid Coupon';
        args.label = invalidCouponLabel;
        args.value = '';
        this.triggerCustomFunnel(args);
    }

    this.gaFireInteractiveEvents = function (keyInRedmineArray, label, action) {
        var args = new Array();
        args.trigger = true;
        if(typeof this.eventsRedmine1094[keyInRedmineArray] === "undefined" || !this.eventsRedmine1094[keyInRedmineArray]) {
            console.warn("SL:Warn - gaFireInteractiveEvents > undefined eventsRedmine1094", keyInRedmineArray);
            return;
        }
        args.funnelString = this.eventsRedmine1094[keyInRedmineArray].category;
        if(typeof action != "undefined") {
            args.funnelAction = action;
        } else {
            args.funnelAction = this.eventsRedmine1094[keyInRedmineArray].action;
        }
        args.label = '';
        if (this.eventsRedmine1094[keyInRedmineArray].labelRequired == true) {
            if (typeof this.eventsRedmine1094[keyInRedmineArray].labelValue != 'undefined') {
                label = this.eventsRedmine1094[keyInRedmineArray].labelValue;
            }
            if (typeof label == 'undefined') {
                if (printGaInConsole) {
                    console.log('label not proper for ' + keyInRedmineArray);
                }
            }
            args.label = label;
        }

        if (this.eventsRedmine1094[keyInRedmineArray].labelRequired == false && typeof label != 'undefined') {
            if (printGaInConsole) {
                console.log('label not proper for ' + keyInRedmineArray);
            }
        }
        args.value = '';
        args.noninteractiveness = this.eventsRedmine1094[keyInRedmineArray].noninteractiveness;
        this.triggerCustomFunnel(args);
    }

    this.forEachInFunnelTriggers = function (argumentArray, args, keyString) {

        for (var i = 0; typeof argumentArray[i] != 'undefined'; i++) {

            var temp = new Array();
            if (typeof argumentArray[i][keyString + 'ActionForGa'] != 'undefined') {
                args.trigger = true;
                temp['funnelAction'] = argumentArray[i][keyString + 'ActionForGa'];
            } else {
                temp['funnelAction'] = '';
            }

            if (typeof argumentArray[i][keyString + 'LabelForGa'] != 'undefined') {
                args.trigger = true;
                temp['label'] = argumentArray[i][keyString + 'LabelForGa'];
            } else {
                temp['label'] = '';
            }

            if (typeof argumentArray[i][keyString + 'ValueForGa'] != 'undefined') {
                args.trigger = true;
                temp['value'] = argumentArray[i][keyString + 'ValueForGa'];
            } else {
                temp['value'] = '';
            }

            args.push(temp);
        }
        return args;
    }

    this.fireDataLayerAdElement = function () {
        if (typeof user_params.adElementData != 'undefined' && user_params.adElementData.length > 0) {

            setTimeout(function () {
                timeoutForAdElement = 0;
                var adElementPushToDataLayer = function (adData, timeout) {
                    if (typeof dataLayer == 'undefined') {
                        dataLayer = [];
                    }
                    setTimeout(function() {
                        if(printGaInConsole) {
                            console.log(adData);
                        }
                        dataLayer.push(adData);
                    }, timeout);
                }
                for (adData in user_params.adElementData) {
                    if (user_params.adElementDataCoursePage) {
                        if (window.location.hash == '#/ilt') {
                            var adElementTrainingType = 'classroom';
                        } else if (window.location.hash == '#/osl') {
                            var adElementTrainingType = 'online';
                        } else {
                            var adElementTrainingType = 'either';
                        }
                    }
                    if (typeof user_params.adElementData[adData].event != 'undefined' && typeof user_params.adElementData[adData].depth != 'undefined') {
                        var temp = new Object();
                        for (key in user_params.adElementData[adData]) {
                            temp[key] = user_params.adElementData[adData][key];
                        }
                        if (user_params.adElementDataCoursePage) {
                            temp.trainingType = adElementTrainingType;
                        }
                        adElementPushToDataLayer(temp, timeoutForAdElement);
                        timeoutForAdElement +=500;
                    }
                }
                ;
            }
            , 5000
                    );
        }
    }
}
 /*------------- End : EventsData.js-----------*/ 

 /*------------- Begin : FooterFunctions.js-----------*/ 

var getActiveWeUser = function () {
    if (typeof webengage !== "undefined" &&
            typeof webengage.state !== "undefined" &&
            typeof webengage.state.getForever === "function" &&
            webengage.state.getForever() &&
            webengage.state.getForever().uattr
    ) {
        return webengage.state.getForever().uattr;
    }
    return null;
}
function onlyUnique(value, index, self) {
    return self.indexOf(value) === index;
}
function closeTicker(id) {
    if (typeof id != 'undefined' && id) {
        var clas = document.getElementsByClassName(id);
        clas[0].style.display = 'none';
        var date = new Date();
        date.setTime(date.getTime() + (4 * 24 * 60 * 60 * 1000));
        document.cookie = '_tikr_msg=1; expires=' + date.toGMTString() + '; path=/';
        return;
    }
}
function getCookieByName(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");

    for (i = 0; i < ARRcookies.length; i++)
    {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name)
        {
            return unescape(y);
        }
    }
}

var setCookieByName = function (cname, cvalue, exhours, path) {
    path = path || "/";
    var d = new Date();
    d.setTime(d.getTime() + (exhours * 60 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";domain=.simplilearn.com";
}

function GetUTMParams(sParam) {
    var cookieUTM = getCookieByName('__utmz');
    //var cookieUTM = '31204797.1381386645.21.4.utmcsr=google|utmgclid=CLCM26HSi7oCFbF34godGFAA1g|utmccn=G-Brand-India|utmcmd=cpc|utmctr=simplilearn';
    if (cookieUTM != '' && typeof cookieUTM != 'undefined' && cookieUTM != null) {
        var sURLVariablesstr = cookieUTM;
        sURLVariables = sURLVariablesstr.replace(/(.)+utmcsr/g, "utmcsr");
        sURLVariables = sURLVariables.split('|');
        for (var i = 0; i < sURLVariables.length; i++)
        {
            var sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] == sParam) {
                return sParameterName[1];
            }
        }
        return false;
    }
    return false;
}
function sendUtmDetailsToDataLayer() {
    var utmSource = GetUTMParams('utmcsr');
    if (utmSource != '') {
        var utmMedium = GetUTMParams('utmcmd');
        var utmCampaign = GetUTMParams('utmccn');
        setDataLayerForUTMDetails(utmSource, utmMedium, utmCampaign);
    }
}
function setDataLayerForUTMDetails(source, medium, campaign) {
    if (typeof dataLayer == 'undefined') {
        dataLayer = [];
    }
    dataLayer.push({
        'event': 'source-medium-campaign-details',
        'source': source,
        'medium': medium,
        "campaign": campaign
    });
    return true;
}

function sendCountryCodeToDataLayer() {
    if (typeof dataLayer == 'undefined') {
        dataLayer = [];
    }
    if (typeof user_params.countryCode != 'undefined') {
        var pushData = {'countryCode': user_params.countryCode};
        dataLayer.push(pushData);
        return true;
    } else {
        return false;
    }
}
function sendArticleParamsToDataLayer() {
    if (typeof dataLayer == 'undefined') {
        dataLayer = [];
    }
    if (typeof user_params.product_name != 'undefined') {
        var pushData = {'product_name': user_params.product_name};
        dataLayer.push(pushData);
    }
    if (typeof user_params.product_id != 'undefined') {
        var pushData = {'product_id': user_params.product_id};
        dataLayer.push(pushData);
    }
    if (typeof user_params.category != 'undefined') {
        var pushData = {'category': user_params.category};
        dataLayer.push(pushData);
    }
    if (typeof user_params.category_id != 'undefined') {
        var pushData = {'category_id': user_params.category_id};
        dataLayer.push(pushData);
    }
    if (typeof user_params.segment_name != 'undefined') {
        var pushData = {'segment_name': user_params.segment_name};
        dataLayer.push(pushData);
    }
    if (typeof user_params.segment_id != 'undefined') {
        var pushData = {'segment_id': user_params.segment_id};
        dataLayer.push(pushData);
    }
    if (typeof user_params.resource_type != 'undefined') {
        var pushData = {'resource_type': user_params.resource_type};
        dataLayer.push(pushData);
    }

    return true;
}


var lpMTagConfig = {'lpServer': "server.iad.liveperson.net", 'lpNumber': "24435859", 'lpProtocol': (document.location.toString().indexOf('https:') == 0) ? 'https' : 'http'};

function lpAddMonitorTag(src) {
    if (typeof (src) == 'undefined' || typeof (src) == 'object') {
        src = lpMTagConfig.lpMTagSrc ? lpMTagConfig.lpMTagSrc : '/hcp/html/mTag.js';
    }
    if (src.indexOf('http') != 0) {
        src = lpMTagConfig.lpProtocol + "://" + lpMTagConfig.lpServer + src + '?site=' + lpMTagConfig.lpNumber;
    } else {
        if (src.indexOf('site=') & 0) {
            if (src.indexOf('?') & 0)
                src = src + '?';
            else
                src = src + '&';
            src = src + 'site=' + lpMTagConfig.lpNumber;
        }
    }
    ;
    var s = document.createElement('script');
    s.setAttribute('type', 'text/javascript');
    s.setAttribute('charset', 'iso-8859-1');
    s.setAttribute('src', src);
    document.getElementsByTagName('head').item(0).appendChild(s);
}

function downloadJSAtOnload() {

    //GTM init
    setTimeout(function() {
        //webengage code
        if (isDesktopDevice()) {
            // removing to enable new webengage account
            // window.webengageWidgetInit = window.webengageWidgetInit || function() {
            //     webengage.init({licenseCode: webEngageId}).onReady(function() {
            //         webengage.render();
            //     });
            // };
            // (function(d) {
            //     var _we = d.createElement('script');
            //     _we.type = 'text/javascript';
            //     _we.async = true;
            //     _we.src = (d.location.protocol == 'https:' ? "//ssl.widgets.webengage.com" : "//cdn.widgets.webengage.com") + "/js/widget/webengage-min-v-3.0.js";
            //     var _sNode = d.getElementById('_webengage_script_tag');
            //     _sNode.parentNode.insertBefore(_we, _sNode);
            // })(document);
        }
        //gamooga chat script
        //typeof is_href_lang === 'undefined' &&
        if (typeof isMomPage !=='undefined' &&isMomPage == false && typeof is_caldon_pulse === 'undefined' && typeof isCaldonPage === 'undefined'  && typeof is_enterprise_page ==='undefined' && typeof isB2BLandingPage === 'undefined' /*&& typeof is_corporate_page === 'undefined'*/) {
            getLiveChatCode();
        }
        if (typeof is_caldon_pulse !== 'undefined' && is_caldon_pulse === 1) {
            sendArticleParamsToDataLayer();
        }


//        gtmLoadScript();
        sendUtmDetailsToDataLayer();
        if (typeof isB2BLandingPage === 'undefined')
            sendCountryCodeToDataLayer();
        var gaEvents = new gaEventsTracker;
        gaEvents.init();
    }, 5000);

    mbsyCookieCheck();
}

function getUserInfo(){
    var returnUserInfo = {};
    var $injector = angular.element(document).injector();
    var $rootScope = $injector.get('$rootScope');
    var user = $rootScope.userInfo || {};
    user.name = user.name || user_params.first_name || '';
    var nameData = user.name.split(/ (.+)/);
    returnUserInfo['first_name'] = nameData[0] || '';
    var last_name = "";
    if(typeof nameData[1] != 'undefined' && nameData[1] != '')
        last_name = nameData[1];
    else
        last_name = user_params.last_name || ''
    returnUserInfo['last_name'] = last_name;
    returnUserInfo['email'] = user.email || user_params.email || '';
    returnUserInfo['phone'] = user.phone || user_params.phone || '';
    return returnUserInfo;
}

function returnLinkedInResponse(id, name, email, msg) {
    var $injector = angular.element(document).injector();
    var $rootScope = $injector.get('$rootScope');
    var currentUrl = window.location.href;
    var objs = document.querySelector("[ng-controller='HeaderController']");
    var controllerVar = angular.element(objs);
    var scopeVar = controllerVar.scope();

    if (typeof msg != 'undefined' && msg != '') {
        scopeVar.linkedErrClass = "error_msg";
        scopeVar.linkedinErrMsg = msg;
        scopeVar.$apply();
    } else {
        $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupSuccess('linkedin');
        user_params.loggedIn = 1;
        user_params.user_id = id;
        user_params.email = email;
        $rootScope.isLoggedIn = true;
        $rootScope.$emit('isLoggedIn', true);
        $rootScope.communityRequestPending = {'display': 'none'};
        scopeVar.headerFormsStyle = {'display': 'none'};
        scopeVar.$apply();

        var PostReqService = $injector.get('PostReqService');
        PostReqService.initFreeTrialCookie();
    }

    if (typeof currentUrl != 'undefined' && currentUrl.indexOf('help-and-support') > 0) {
        location.reload();
    }
    else if (window.refurl != 'undefined' && typeof window.refurl == 'object') {
        if (typeof window.refurl.host != 'undefined' && window.refurl.host != '' && typeof window.refurl.source != 'undefined' && window.refurl.source != '') {
            if (window.refurl.host == 'community.simplilearn.com') {
                window.location.href = window.refurl.source;        //after success signup redirect to community page
            } else if (window.refurl.host == 'lms.simplilearn.com') {
                window.location.href = window.refurl.source;        //after success signup redirect to lms page
            }
        }
    }
}

function getLiveChatCode() {

    var ta = document.createElement('script');
    ta.type = 'text/javascript';
    ta.async = true;
    ta.id = "__ta";
    ta.src = '//cdn-jp.gsecondscreen.com/static/tac.min.js';
    var fs = document.getElementsByTagName('script')[0];
    fs.parentNode.insertBefore(ta, fs);
    ta.onload = function() {
        var gamoogaChatSpan = document.getElementsByClassName("gamooga_chat_span");
        var gamoogaChatLoading = document.getElementsByClassName("gamooga_chat_loading");
        var gamoogaChatLink = document.getElementsByClassName("ive_chat_right")[0];
        if(gamoogaChatSpan.length == 0) {
            // console.warn('SL: gamooga chat not available');
            return;
        }
        gamoogaChatLoading[0].className = gamoogaChatLoading[0].className + " hidden_class";
        gamoogaChatSpan[0].className = gamoogaChatSpan[0].className.replace("hidden_class", " ");
        gamoogaChatLink.style.cursor = "pointer";

        var mobileChatWrapper = document.getElementsByClassName("mobile_lead_wrapper")[0];
        var loadingIcons = mobileChatWrapper.getElementsByClassName("load-icon");
        loadingIcons[0].className = loadingIcons[0].className.replace("load-icon", " ");
        //loadingIcons[0].className = loadingIcons[0].className.replace("load-icon", " ");
    };

}

//There was an img tag of shareasale in footer which was dispaying a blank space below footer. This code is to hide the same, if found: Abhijit
var myintervalcount = 0;
var myinterval = setInterval(function() {
    var shareASaleImgObj = document.querySelector("[src='https://shareasale.com/sale.cfm?amount=undefined&tracking=undefined&transtype=sale&merchantID=43470']");
    myintervalcount++;
    if (typeof shareASaleImgObj != 'undefined' && shareASaleImgObj != null) {
        shareASaleImgObj.className = "hidden_class";
        clearInterval(myinterval);
    } else {
        if (myintervalcount > 10) {
            clearInterval(myinterval);
        }
    }
}, 1000);


function isDesktopDevice() {
    var userAgentStr = navigator.userAgent;
    var isDesktop = true;
    if (userAgentStr.indexOf("Android") != -1 || userAgentStr.indexOf("iPad") != -1 || userAgentStr.indexOf("iPhone") != -1 ||
            userAgentStr.indexOf("Blackberry") != -1 || userAgentStr.indexOf("BB") != -1 || userAgentStr.indexOf("Windows Phone") != -1 || userAgentStr.indexOf("Mobile") != -1) {
        isDesktop = false;
    }
    return isDesktop;
}

//Added code to fix ios devices body on click issue. #4365
(function() {
    var userAgentStr = navigator.userAgent;
    if (userAgentStr.indexOf("iPad") != -1 || userAgentStr.indexOf("iPhone") != -1) {
        document.body.style.cursor = 'pointer';
    }
})();

function setUpDataLayer(event, eventLabel, params) {
    if (typeof dataLayer == 'undefined') {
        dataLayer = [];
    }
    var d = new Date();
    var n = d.getMilliseconds();
    var pushData = {
        'event': event,
        'eventLabel': eventLabel
    }

    for (var key in params) {
        pushData[key] = params[key];
    }

    dataLayer.push(pushData);
    return true;
}
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

function getPrefilledInfo(inputData, prefilledData) {
    var keys = Object.keys(inputData);
    var prefilInfo = {
        prefillled_data: 1,
        prefilled_source: null,
        prefilled_modified: 0
    };
    if(typeof prefilledData == 'undefined' || !prefilledData) {
        prefilInfo.prefillled_data = 0;
        prefilInfo.prefilled_source = 'other';
    } else {
        prefilInfo.prefilled_source = prefilledData.source || 'other';
        for(var i in keys) {
            var key = keys[i];
            var input = inputData[key] || '';
            var prefil = prefilledData[key] || '';
            if(input != prefil) {
                prefilInfo.prefilled_modified = 1;
            }
        }
    }
    return prefilInfo;
}

function setSlGlobalData(key, val) {
    if(typeof window.sl_custom_val != 'object') {
        window.sl_custom_val = {};
    }
    window.sl_custom_val[key] = val;
    window.sl_custom_param = encodeURIComponent(JSON.stringify(window.sl_custom_val));
}

// Init golbal custom data
function initSlGlobalData() {
    setSlGlobalData('last_source', fetchUTMSource());
    setSlGlobalData('course_id', (typeof user_params == 'object' && user_params.course_id) || '')
}

// Init after page load
window.addEventListener("load", initSlGlobalData);

function fetchUtmSourceFromUrl() {
    var utmcsr = getParameterByName('utm_source');
    var utmccn = getParameterByName('utm_campaign');
    var utmcmd = getParameterByName('utm_medium');
    var utmctr = getParameterByName('utm_term');
    var utmcct = getParameterByName('utm_content');
    var utmgclid = getParameterByName('gclid');
    var utmzCookie = null;
    if(utmcsr || utmccn || utmcmd || utmctr || utmcct || utmgclid) {
        utmzCookie = "utmcsr="+utmcsr+"|utmgclid="+utmgclid+"|utmccn="+utmccn+"|utmcmd="+utmcmd+"|utmctr="+utmctr+"|utmcct="+utmcct+"|create_type=manual_url";
    }
    return utmzCookie;
}


function cJInit() {
    var cjevent = getParameterByName('cjevent');
    if (cjevent != '') {
        var date = new Date();
        date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
        window.cjevent = cjevent;
        document.cookie = 'cjevent=' + cjevent + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
    }
    var cjeventCookie = getCookieByName('cjevent');
    if ((cjevent == '' && typeof cjeventCookie != 'undefined' || cjeventCookie != '')) {
        window.cjevent = cjeventCookie;
    }
}

/**
 * Return source info. utmz cookie || utm source from url || find from
 * @returns String
 */
function fetchUTMSource() {
    var cookieVal = "utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)|create_type=manual"; // default value

    // from cookie
    var utmzCookie = getCookieByName('__utmz');

    // from url
    if ((typeof utmzCookie == 'undefined' || !utmzCookie)) {
        utmzCookie = fetchUtmSourceFromUrl();
    }

    // from referrer
    if ((typeof utmzCookie == 'undefined' || !utmzCookie) && document.referrer) {
        var referrer = document.referrer;
        var domainData = referrer.match(/\/\/[^/]+/);
        var domain = '';
        var medium = 'referral';
        var campaign = '(referral)';
        var selfDomains = ['simplilearn', 'marketmotive'];
        var organicDomains = ['google', 'bing', 'yahoo', 'baidu', 'ask', 'youtube', 'yandex', 'aol'];
        var selfRefer = false;

        if(Array.isArray(domainData) && domainData[0]) {
            domain = (typeof domainData[0] == 'string')?domainData[0].replace('//', ''):'';

            for(var i in selfDomains) {
                var key = selfDomains[i];
                if(domain.indexOf(key) !== -1) {
                    selfRefer = true;
                }
            }

            if(!selfRefer) {
                for(var i in organicDomains) {
                    var key = organicDomains[i];
                    if(domain.indexOf(key) !== -1) {
                        domain = key;
                        medium = 'organic';
                        campaign = '(organic)';
                        break;
                    }
                }
            }
        }
        if(!selfRefer) {
            var utmcsr = domain;
            var utmcmd = medium;
            var utmcct = referrer;
            var utmccn = campaign;
            var utmctr = '';
            var utmgclid = '';
            utmzCookie = "utmcsr="+utmcsr+"|utmccn="+utmccn+"|utmcmd="+utmcmd+"|utmctr="+utmctr+"|utmcct="+utmcct+"|utmgclid="+utmgclid+"|create_type=manual_ref";
        }
    }

    if (typeof utmzCookie == 'undefined' || !utmzCookie) {
        if(getCookieByName('sl_utmz')) {
            utmzCookie = getCookieByName('sl_utmz');
        } else {
            utmzCookie = cookieVal; // default value
        }
    }

    if(!getCookieByName('__utmz')) {
        var date = new Date();
        date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
        document.cookie = 'sl_utmz=' + utmzCookie + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
    }
    user_params.utm_params = utmzCookie;
    return utmzCookie;
}
function getGCLID(){
    var utmz = fetchUTMSource();
    var n = utmz.search(/|/i);
    var fromGoogle = false;
    var utmccnSet = false;
    var gclid = '';
    var gclidToSet = '';
    if(utmz != '' && n >= 0){
        utmz = utmz.split('|');
        if(utmz.length > 0){
            for(var i = 0; i<utmz.length;i++){
                var n = utmz[i].search(/=/i);
                if(n >= 0){
                    var params = utmz[i].split('=');
                    var n = params[0].search(/utmcsr/i);
                    if(n >= 0 && params[1] == 'google'){
                        fromGoogle = true;
                    } else if(params[0] == 'utmccn' && params[1] != ''){
                        utmccnSet = true;
                    } else if(params[0].search(/utmgclid/i) != -1){
                        gclid = params[1];
                    }
                }
            }
            if(fromGoogle && utmccnSet && gclid != ''){
                gclidToSet = gclid;
            }
            if(gclidToSet.length===0){
                gclidToSet=getParameterByName("gclid");
            }
            return gclidToSet;
        } else {
            if(gclidToSet.length===0){

                gclidToSet=getParameterByName("gclid");
            }
            return gclidToSet;
        }
    } else {
         if(gclidToSet.length===0){
                gclidToSet=getParameterByName("gclid");
        }

        return gclidToSet;
    }
}

function setSimplilearnCustomCookie() {
    window.addEventListener('load', function() {
        var firstLandingPage = getCookieByName('simplilearn_first_page');
        if(!firstLandingPage) {
            var date = new Date();
            date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
            document.cookie = 'simplilearn_first_page=' + location.href + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
            document.cookie = 'simplilearn_landing_time=' + new Date().toISOString() + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
        }

        var firstOrigin = getCookieByName('simplilearn_custom');

        if (!firstOrigin) {
            setCustomCookie(0);
        }
    }, false);
}

function addCouponCodesToAACCookie(code_to_add){
  try {
    //cookie expiration
    var days = 15; //Cookie expire after 15 day
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "expires="+date.toGMTString();

    //Code_to_add will be in comma seperated string
    var code = getCookieByName('aac');
    //If previous code present
    if(code_to_add != undefined && code_to_add != ''){
      if(code != undefined && code != ''){
      var aac_arr = code_to_add.split(',');
      var curr_aac = code.split(',');
      var last = '';
      for(var i = 0; i < aac_arr.length; i++) {
        if(curr_aac.indexOf(aac_arr[i]) === -1){
          curr_aac.push(aac_arr[i]);
        }
      }
      last = curr_aac.join(',');
      document.cookie = 'aac='+last+ '; path=/;domain=.simplilearn.com ; '+expires;
     } else {
        document.cookie = 'aac='+code_to_add+ '; path=/;domain=.simplilearn.com ; '+expires;
     }
    }
  } catch(e){
      console.log("Error in auto Applying coupon");
  }
}

function setCustomCookie(pCntr) {
    var utmzCookie = getCookieByName('__utmz');

    if (utmzCookie) {
        var date = new Date();
        date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
        document.cookie = 'simplilearn_custom=' + utmzCookie + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
        return;
    }
    else {
        ++pCntr;
        if (pCntr > 10) {
            return false;
        }
        setTimeout(function() {
            setCustomCookie(pCntr);
        }, 400);
    }
}

function hideMobileFooterDropQueryLink() {
    var drpQryLink = document.getElementsByClassName("mob_footer_drp_qry");
    var chatLink = document.getElementsByClassName("mob_footer_chat");
    drpQryLink[0].className = drpQryLink[0].className + " hidden_class";
    drpQryLink[1].className = drpQryLink[1].className + " hidden_class";

    chatLink[0].className = chatLink[0].className + " full-width";
    chatLink[1].className = chatLink[1].className + " full-width";
}

function showMobileFooterDropQueryLink() {
    var drpQryLink = document.getElementsByClassName("mob_footer_drp_qry");
    var chatLink = document.getElementsByClassName("mob_footer_chat");
    drpQryLink[0].className = drpQryLink[0].className.replace("hidden_class", "");
    drpQryLink[1].className = drpQryLink[1].className.replace("hidden_class", "");

    chatLink[0].className = chatLink[0].className.replace("full-width", "");
    chatLink[1].className = chatLink[1].className.replace("full-width", "");
}

setSimplilearnCustomCookie();

var mbsyName = 'mbsy';
var mbsyshortCode = getParameterByName(mbsyName);
function mbsyCookieCheck() {
    var c = getCookieByName(mbsyName);
    if ((mbsyshortCode != '' && mbsyshortCode)) {
        if (mbsyshortCode != c) {
            var date = new Date();
            date.setTime(date.getTime() + (45 * 24 * 60 * 60 * 1000));
            document.cookie = 'mbsy=' + mbsyshortCode + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
            return;
        }
    } else if (c) {
        mbsyshortCode = c;
    }
}

/**
 * Get hash parameter value by key
 * @param {string} key
 * @returns {string|null}
 */
function getHashByKey(key) {
    var query = location.hash.replace('#/','').replace('#','');
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == key) {
            return (pair[1])?decodeURIComponent(pair[1]) : '';
        }
    }
    return null;
}

function getHashList() {
    var query = location.hash.replace('#/','').replace('#','');
    var vars = query.split('&');
    var list = {};
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if(!pair[1]) {
            list['hashTag'] = pair[0];
        }
        list[pair[0]] = (pair[1])?decodeURIComponent(pair[1]) : '';
    }
    return list;
}

function generateLeadId(key) {
    (typeof key == 'undefined' || !key) && (key = '*');
    window.latest_lead_uid = new Date().getTime() + "_" + key.substr(0, 4) + "_" + parseInt(Math.random() * 10000);
    return window.latest_lead_uid;
}
function getCookieOrigin() {
    var utmzVal = getCookieByName('__utmz');
    var ls_utmzVal = getCookieByName('sl_utmz');
    var utmzVal = typeof utmzVal !== "undefined" ? utmzVal : ls_utmzVal;
    return utmzVal;
}

function getDeviceInfo(userAgent) {
    var deviceInfo = {};
    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
    // Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)
    var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
    var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
    // At least Safari 3+: "[object HTMLElementConstructor]"
    var isChrome = !!window.chrome && !isOpera;              // Chrome 1+
    var isIE = /*@cc_on!@*/false || !!document.documentMode;   // At least IE6
    var browserOs = "unknown";
    var nAgt = navigator.userAgent;
    if(typeof userAgent !== 'undefined' && userAgent ) {
        nAgt = userAgent;
    }
        var clientStrings = [
            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},
            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},
            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},
            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},
            {s:'Windows Vista', r:/Windows NT 6.0/},
            {s:'Windows Server 2003', r:/Windows NT 5.2/},
            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},
            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},
            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},
            {s:'Windows 98', r:/(Windows 98|Win98)/},
            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},
            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},
            {s:'Windows CE', r:/Windows CE/},
            {s:'Windows 3.11', r:/Win16/},
            {s:'Android', r:/Android/},
            {s:'Open BSD', r:/OpenBSD/},
            {s:'Sun OS', r:/SunOS/},
            {s:'Linux', r:/(Linux|X11)/},
            {s:'iOS', r:/(iPhone|iPad|iPod)/},
            {s:'Mac OS X', r:/Mac OS X/},
            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},
            {s:'QNX', r:/QNX/},
            {s:'UNIX', r:/UNIX/},
            {s:'BeOS', r:/BeOS/},
            {s:'OS/2', r:/OS\/2/},
            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}
        ];
        for (var id in clientStrings) {
            var cs = clientStrings[id];
            if (cs.r.test(nAgt)) {
                browserOs = cs.s;
                break;
            }
        }
    var deviceType = 'Desktop';
    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(nAgt)
            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(nAgt.substr(0, 4)))
        deviceType = 'Mobile';

    var deviceName = null;
    if (nAgt.match(/Android/i)) {
        deviceName = 'Android';
    }
    if (nAgt.match(/BlackBerry/i)) {
        deviceName = 'BlackBerry';
    }
    if (nAgt.match(/iPhone/i)) {
        deviceName = 'iPhone';
    }
    if (nAgt.match(/iPad/i)) {
        deviceName = 'iPad';
    }
    if (nAgt.match(/iPod/i)) {
        deviceName = 'iPod';
    }
    deviceInfo = {browserOs: browserOs, deviceType: deviceType, deviceName: deviceName};
    return deviceInfo;
}
function getGdprOptInText(countryId, siteModule) {
    var gdprOptinText = 'Please contact me about course options and additional scholarships.';
    var gdprSiteModules = ["bundle agenda", "course preview", "course agenda", "ebook_download", "frs-ebook-hot", 'on demand webinar', "fpt-paper-cold", "GSA_Brochure", "atp brochure", "B2B-ebook"];
    var agreeText = '';
    var euroCountryArr = [];
    if (typeof euroCountriesIds !== "undefined" && euroCountriesIds) {
        euroCountryArr = euroCountriesIds.split(",");
    }
    if (countryId && siteModule && euroCountriesIds.indexOf(countryId)!=-1 && gdprSiteModules.indexOf(siteModule)!=-1) {
        agreeText = gdprOptinText;
    }
    return agreeText;
}
function getLeadTrainingType(leadTrainingType) {
    var leadTrainingTypeStr = "";
    //var trainingTypeLists = ['classroom', 'osl', 'lvc', 'tests', 'webinar', 'ides', 'onlinetolvc', 'notsure', 'coursePass'];
    var lead_class_room_training_str = 'Classroom Training';
    var lead_osl_training_str = 'Online Self Learning';
    var lead_instructor_led_training_str = 'Instructor Led Online Classroom';
    var lead_flexi_pass_training_str = 'Online Classroom Flexi-Pass';
    if (typeof leadTrainingType !== "undefined") {
        switch (leadTrainingType) {
            case "classroom":
                leadTrainingTypeStr = lead_class_room_training_str;
                break;
            case "osl":
                leadTrainingTypeStr = lead_osl_training_str;
                break;
            case "coursePass":
                leadTrainingTypeStr = lead_flexi_pass_training_str;
                break;
            case "lvc":
                leadTrainingTypeStr = lead_flexi_pass_training_str;
                break;
            case "online":
                leadTrainingTypeStr = lead_osl_training_str;
                break;
            default:
                leadTrainingTypeStr = lead_osl_training_str;
        }
    }
    return leadTrainingTypeStr;
}
function formatTZDateTime(dateTime) {
    var formatedDateTime = '';
    if (typeof dateTime !== "undefined" && dateTime) {
        var date = new Date(dateTime);
        var yy = date.getFullYear();
        var gg = date.getDate();
        var mm = (date.getMonth() + 1);

        if (gg < 10)
            gg = "0" + gg;

        if (mm < 10)
            mm = "0" + mm;

        var cur_day = yy + "-" + mm + "-" + gg;

        var hours = date.getHours()
        var minutes = date.getMinutes()
        var seconds = date.getSeconds();

        if (hours < 10)
            hours = "0" + hours;

        if (minutes < 10)
            minutes = "0" + minutes;

        if (seconds < 10)
            seconds = "0" + seconds;
        formatedDateTime = cur_day + " " + hours + ":" + minutes + ":" + seconds;
    }
    return formatedDateTime
}

var produtPageViewedEvent = function() {
    webengage.onReady(function () {
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_eng_product_page_viewed",
            event_data: {},
            common: "product"
        });
    });
}

function checkIfAccordionIsOpen(accordionId) {
    var isAccordionOpen = false;
    if (accordionId) {
        var accordionElm = document.getElementById(accordionId);
        if (accordionElm) {
            isAccordionOpen = accordionElm.classList.contains("arrow-down");
        }
    }
    return isAccordionOpen;
}
function breadcrumEvent(productType,gotoLink,name,id) {
    var eventData = {};
    eventData['sl_destination_product_type'] = productType || '';
    eventData['sl_destination_link'] = gotoLink || '';
    eventData['sl_destination_product_name'] = name || '';
    eventData['sl_destination_product_id'] = parseInt(id) || '';
    WebTracking.eventReq.triggerEvent({
        event_id: "sl_nav_breadcrumb_clicked",
        event_data: eventData,
        common: "product"
    });
}
!function(e){"use strict";function h(b){var a=b.charCodeAt(0);if(55296<=a&&56319>=a)if(b=b.charCodeAt(1),b===b&&56320<=b&&57343>=b){if(a=1024*(a-55296)+b-56320+65536,65535<a)return d(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|a&63)}else return d(239,191,189);return 127>=a?inputString:2047>=a?d(192|a>>>6,128|a&63):d(224|a>>>12,128|a>>>6&63,128|a&63)}function k(b){var a=b.charCodeAt(0)<<24,f=l(~a),c=0,e=b.length,g="";if(5>f&&e>=f){a=a<<f>>>24+f;for(c=1;c<f;++c)a=a<<6|b.charCodeAt(c)&63;65535>=a?g+=d(a):1114111>=
a?(a-=65536,g+=d((a>>10)+55296,(a&1023)+56320)):c=0}for(;c<e;++c)g+="\ufffd";return g}var m=Math.log,n=Math.LN2,l=Math.clz32||function(b){return 31-m(b>>>0)/n|0},d=String.fromCharCode,p=atob,q=btoa;e.btoaUTF8=function(b,a){return q((a?"\u00ef\u00bb\u00bf":"")+b.replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,h))};e.atobUTF8=function(b,a){a||"\u00ef\u00bb\u00bf"!==b.substring(0,3)||(b=b.substring(3));return p(b).replace(/[\xc0-\xff][\x80-\xbf]*/g,k)}}(""+void 0==typeof global?
""+void 0==typeof self?this:self:global) /*------------- End : FooterFunctions.js-----------*/ 

 /*------------- Begin : SearchTags.js-----------*/ 



var search_tags = {"0":"business","1":"technology","2":"agile and scrum","3":"pas","4":"agile","5":"scrum","6":"technology management","7":"project","8":"sprint","9":"tdd","10":"planning","11":"it","12":"exin","13":"agile scrum","14":"agile methodology","15":"scrum practice","16":"safe","17":"csd","18":"all","21":"capm","22":"exam","23":"prep","24":"banking","25":"software development","26":"healthcare","28":"services","29":"consulting","30":"including integration","31":"cost","32":"time","33":"scope","34":"quality","35":"communications","36":"human","37":"resource","38":"management","39":"risk","40":"procurement","43":"project management","44":"risk management","45":"time management","46":"primevera","47":"pmi","51":"csm","52":"scrummaster","53":"certified scrum master","55":"master","56":"planning management","58":"scrum master","59":"scrum alliance","61":"psm","67":"msp","68":"governance","69":"leadership","70":"stakeholder","71":"engagement","72":"programme","74":"benefits","75":"blueprints","77":"control","78":"issue","80":"transformational","81":"managing successful programmes","85":"agile certified practitioner","86":"pmi-acp","88":"acp","92":"dsdm","93":"pmbok","94":"apm","95":"kanban","98":"pmi acp","102":"pmp","104":"pdu","105":"waterfall","106":"cascade","107":"structure","108":"model","109":"responsive","110":"forecasting","114":"schedule","116":"overrun","118":"processes","119":"group","120":"knowledge","121":"area","122":"construction","123":"infrastructure","124":"delivery","125":"optimization","126":"certification","128":"modelling","129":"program","130":"leverage","131":"mitigation","132":"predictive","136":"project manager","138":"ipma","139":"project +","143":"45 pdu","145":"plan","147":"change","148":"prince2","151":"stage","152":"process","153":"controlling","154":"boundary","155":"apmg","156":"practitioner","157":"ato","159":"foundation","167":"qualitative","168":"analysis","169":"quantitative","170":"responses","172":"professional","173":"rmp","174":"audits","175":"reassessment","176":"pmi rmp","179":"big-data and hadoop developer","180":"bigdata","181":"hadoop","182":"pig","183":"hive","184":"mapreduce","185":"hbase","186":"zookeeper","187":"sqoop","188":"flume","189":"deployment","190":"cloudera","191":"cloud","192":"analytics","193":"datascience","194":"research","196":"modeling","197":"big data","198":"data science","199":"business analytics","200":"data scientist","201":"big data and hadoop","202":"data analysis","203":"machine learning","204":"business analysis","205":"data analyst","206":"hadoop admin","207":"scala","208":"cassandra","209":"bdh","210":"spark","214":"itil foundation","215":"itil","216":"axelos","218":"information technology","220":"itil v3","221":"it service","222":"service strategy","223":"service transition","224":"infrastructure library","225":"itilv3","226":"cmdb","230":"itil intermediate csi","234":"information","237":"service","238":"servicestrategy","239":"servicetransition","241":"library","243":"osa","244":"ppo","245":"rv","246":"soa","247":"malc","248":"capability","249":"expert","254":"itil intermediate osa","278":"itil intermediate ppo","302":"itil intermediate rcv","326":"itil intermediate sd","350":"itil intermediate so","370":"kepner","371":"tregoe","376":"itil intermediate soa","400":"itil intermediate ss","424":"itil intermediate st","448":"itil managing across the lifecycle (malc)","472":"itsm","479":"cisa","480":"audit","481":"cyber","482":"security","483":"pentesting","484":"cryptography","486":"networking","487":"network","488":"hack","489":"secure","490":"trojan","491":"countermeasure","492":"backdoors","493":"firewalls","494":"honeypots","495":"wireless","496":"virus","497":"defense","498":"regulations","499":"compliance","500":"informaton","502":"auditor","503":"crisc","504":"cgeit","505":"is27001","506":"cissa","509":"cissp","531":"isc2","532":"architecture","534":"csslp","537":"cobit5","538":"cobit","561":"prm","562":"pam","568":"ctfl","570":"software","571":"static","572":"tester","573":"ctal","577":"certified lean six sigma black belt","578":"defect","579":"defects","580":"six","581":"sigma","582":"green belt","583":"asq","585":"statistical","586":"statistics management","587":"define","588":"iassc","589":"measure","590":"analyze","591":"improve","593":"dmaic","594":"manufacturing","598":"retail","599":"supply chain","600":"minitab","601":"cssgb","602":"electronics","603":"lean","604":"lssgb","605":"lssbb","606":"istqb","607":"astqb","608":"blackbelt","609":"sixsigma","610":"csqa","615":"tool","616":"six sigma","618":"black belt","622":"ccnp-routing & switching","623":"cisco","625":"routing","626":"switching","627":"ccie","631":"lean management","633":"volume","638":"ceh (v9)- certified ethical hacker","639":"ceh","640":"v9","641":"ethical","642":"hacking","643":"hacker","647":"spoofing","652":"ilabs","653":"eccouncil","663":"312-50","665":"cnd","668":"ec","669":"disaster","670":"v9ilabs","672":"ec-council","676":"software estimation","678":"sizing","679":"effort","680":"estimation","681":"ifpug","682":"counting","683":"rules","684":"table","685":"complexity","686":"fpa","687":"nesma","688":"seot","691":"microsoft project 2013","692":"microsoft","693":"projects 2013","696":"pooling","697":"consolidation","698":"development","699":"business management","709":"ccba","710":"iiba","713":"cbap","714":"requirement","715":"swot","716":"communication","717":"babok","719":"business analyst","720":"risk analysis","721":"enterprise analysis","722":"swot analysis","723":"capability analysis","724":"requirement analysis","725":"bacp","726":"pba","729":"salesforce administrator","730":"salesforce admin","731":"administrator","732":"adm 201","733":"201","734":"sfdc","736":"sales","737":"app exchange","738":"force.com","739":"chatter","741":"administrators","742":"crm","743":"siebel","746":"salesforce developer","747":"salesforce app builder","748":"salesforce","749":"developer dev 401","752":"data model","753":"application","760":"togaf 9.1","761":"togaf","762":"the open group","763":"enterprise architecture","764":"solution architect","765":"togaf level1","766":"togaf level2","767":"adm","768":"togaf9 foundation","769":"architecture framework","770":"architecture forum","773":"70-411","774":"administering windows server 2012 - r2","775":"windows","777":"ms 2012 server","778":"r2","779":"administering","780":"db","781":"gpo","782":"encryption","783":"vpn","786":"certified data scientist with sas and excel","787":"business analytics foundation - sas","788":"sas","789":"predict","795":"analyst","797":"machine","799":"logistic","800":"linear","801":"regression","802":"summary","803":"data","804":"datascientist","806":"datamining","807":"database","808":"oracle","809":"dbms","810":"datawarehouse","811":"reporting","812":"intelligence","813":"metric","820":"predictive modeling","821":"data modeling","822":"logistic regression","823":"linear regression","824":"statistical modeling","825":"statistics","831":"salesforce administrator & developer","833":"admin","840":"appexchange","845":"developer","846":"dev","847":"401","848":"dev401","857":"certified data scientist with r","858":"certified analytics professional r language","859":"business analytics professional - r language","860":"rlanguage","905":"certified lean six sigma green belt","927":"supply","928":"chain","932":"lean.lssgb","940":"php development suite","941":"php development","942":"cms","943":"mysql","944":"laravel4","945":"codeigniter","948":"javascript development suite","949":"javascript","951":"ajax","952":"jquery","953":"node.js","954":"selenium","955":"scjp","956":"nodejs","959":"python development suite","960":"python development","961":"programming","962":"phyton","965":"html\/html5 and css\/css3 suite","966":"html","967":"html5","968":"css","969":"css3","970":"sass","971":"developers","974":"content marketing","975":"content","976":"marketing","977":"online","978":"digital","980":"internet","981":"google","982":"seo","983":"ecommerce","986":"website conversion rate optimization","987":"conversion","988":"optimisation","989":"roi","998":"mobile marketing","999":"mobile","1005":"app","1006":"adwords","1007":"admob","1011":"remarketing","1012":"pay per click (ppc)","1013":"ppc","1014":"click","1021":"bing","1025":"search engine optimization (seo)","1030":"online marketing","1032":"search engine","1036":"social media","1041":"facebook","1042":"twitter","1044":"g+","1045":"digital marketing","1047":"internet marketing","1051":"web analytics","1052":"web","1063":"certified sas base programmer","1098":"sas base","1099":"sas programmer","1102":"introduction to online marketing","1117":"complete web development suite","1119":"developmentcss3","1125":"php","1126":"mongodb","1129":"android app development","1130":"android","1133":"certified android app developer","1137":"introduction to project management","1139":"introduction","1140":"introductory","1143":"methodology","1144":"portfolio","1147":"triple","1148":"constraints","1154":"certified business analysis professional (cbap)","1173":"cbip","1176":"70-410","1177":"installing and configuring ms windows server 2012 r2","1178":"ms","1180":"windows server 2012","1182":"configuring","1183":"installing","1184":"manager","1185":"hyper-v","1186":"storage","1191":"microsoft excel 2013 foundation","1193":"microsoft 2013","1194":"office","1195":"excel","1196":"macros","1197":"reports","1198":"vlookup","1199":"pivot","1200":"hyperlinks","1201":"formulas","1202":"functions","1203":"worksheet","1204":"charts","1205":"vba","1208":"microsoft excel 2013 intermediate","1223":"77-427","1226":"microsoft excel 2013-advanced","1241":"77-428","1251":"uk","1252":"europe","1257":"usa","1269":"cspo certification training","1271":"cspo","1279":"scrumalliance","1282":"product owner","1285":"big data and hadoop administrator","1286":"hadoop administrator","1287":"hadoop administrator training","1289":"hadoop administration","1320":"smac stack services","1321":"social","1324":"simplilearn","1330":"online tutorial","1332":"training","1340":"impala","1341":"open source","1342":"sql","1379":"lean 6 sigma application training","1381":"6 sigma certification","1384":"6 sigma","1388":"apache","1391":"classes","1426":"access","1427":"2013","1429":"mos","1433":"queries","1437":"77-424","1441":"outlook","1446":"mail","1447":"calender","1448":"task","1449":"message","1451":"files","1452":"mailmerge","1454":"77-423","1460":"powerpoint","1462":"2010","1463":"presentation","1464":"tables","1466":"texts","1467":"multimedia","1468":"autoshapes","1469":"animation","1480":"microsoft office","1481":"mos 77-422","1485":"lean sigma","1487":"6 sigma healthcare","1493":"word","1494":"ms word","1499":"layout","1500":"formatting","1502":"page-layout","1503":"proof-reading","1512":"develop","1518":"apache kafka","1520":"tutorial","1523":"email marketing","1530":"youtube marketing","1531":"video marketing","1537":"twitter marketing","1538":"twitter advertising","1544":"pinterest marketing","1550":"facebook marketing","1551":"facebook advertising","1557":"display advertising","1563":"cism","1567":"course","1570":"exam 70-413","1571":"designing","1572":"implementing","1575":"windows server","1581":"fundamentals","1582":"dmca","1583":"digital marketing certified associate","1586":"apache spark","1587":"apache scala","1590":"spark training","1591":"scala training","1592":"spark certification","1593":"scala certification","1594":"scala programming","1595":"spark and scala","1596":"spark and scala training","1597":"spark and scala certification","1601":"crisc certification","1607":"apache storm tutorial","1613":"ios","1614":"ios app","1615":"ios development","1616":"ios developer","1620":"agile scrum master","1621":"advanced agile scrum","1624":"microsoft sharepoint server","1625":"sharepoint server 2013","1626":"developing core solutions","1629":"personal branding","1630":"build a personal brand","1631":"brand yourself","1635":"aws technical essentials","1636":"aws services","1637":"aws certification","1638":"cloud training","1641":"google adwords","1642":"adwords certification","1643":"adwords training","1644":"google ppc","1647":"business analytics training","1648":"business analytics with excel","1649":"business analytics course","1652":"marketing automation","1653":"marketing automation course","1654":"marketing automation basics","1657":"programmatic buying","1658":"programmatic buying course","1659":"programmatic buying training","1663":"aws solutions architect","1664":"aws training","1666":"aws course","1670":"salesforce platform developer","1671":"salesforce platform developer certification","1672":"salesforce course","1677":"developing microsoft azure solutions","1678":"azure certification","1679":"70-532 exam","1680":"azure training","1684":"cloud trining","1685":"implementing microsoft azure infrastructure solutions","1686":"azure infrastructure solutions","1687":"70-533 exam","1690":"python for data analysis","1691":"r vs python","1692":"python data science","1693":"python for data science","1694":"data science with python","1697":"machine learning training","1698":"machine learning course","1699":"machine learning certification","1700":"ml","1703":"aws developer certification","1704":"aws developer training","1705":"aws developer course","1708":"aws sysops certification","1709":"aws sysops training","1710":"aws sysops course","1713":"advanced java","1714":"advanced java training","1715":"java ee","1716":"java soa","1717":"java course","1718":"java soa course","1719":"j2ee training","1720":"java spring","1721":"hibernate","1724":"devops","1729":"certified","1730":"workflow","1732":"operations","1735":"active directory","1737":"active directory services certification","1741":"system center 2012","1742":"system center 1012 configuration manager","1747":"iis","1748":"web server iis","1750":"certificatin","1755":"windows poweshell","1756":"advanced automated administration","1763":"window server infrastructure","1764":"windows server findamentals training","1768":"identity","1770":"windows server 2016","1775":"advanced server","1776":"advanced server infrastructure","1784":"installation","1798":"poweshell","1799":"automating","1800":"administration","1801":"server","1806":"core","1807":"solutions","1808":"exchange","1819":"advanced","1826":"upgrade","1831":"2012","1834":"securing","1837":"2016","1841":"skills","1850":"sharepoint","1851":"site","1852":"collection","1863":"performancepoint","1867":"connectivity","1868":"visio","1871":"developing","1892":"technologies","1900":"with","1901":"system","1902":"center","1908":"digital selling","1909":"social selling","1910":"social selling tools","1915":"deploying and managing windows 10 using enterprise services","1916":"windows 10 deployment","1917":"m20697-2","1920":"enabling office 365 services","1921":"enabling office 365 services training","1924":"installing and configuring windows 10","1925":"windows 10 training","1926":"windows 10 course","1929":"system center 2012 orchestrator","1930":"system center orchestrator training","1933":"system center 2012 r2 operation manager","1934":"system center 2012 r2 operation manager training","1935":"cloud and datacenter monitoring","1936":"system center 2012 r2 operation manager course","1939":"configuring and deploying a private cloud","1940":"cloud configuration and deployment training","1943":"infrastructure provisioning with system center","1944":"system center 2012 r2 virtual machine manager","1947":"microsoft.azure","1949":"beginners","1958":"cxo","1959":"cheifs","1962":"git","1969":"aws database migration","1970":"aws dms","1971":"aws database migration service","1972":"aws migration","1975":"aws lambda training","1976":"aws lambda tutorial","1977":"aws lambda course","1978":"aws lambda certification","1982":"jira","1983":"product","1985":"module","1994":"classroom","1999":"agilist","2000":"framework","2002":"traning","2003":"leading","2008":"pmp exam","2011":"docker training","2012":"docker certification","2013":"docker course","2014":"docker platform","2017":"kubernets","2020":"tableau","2021":"tableau 10","2022":"tableau desktop","2023":"visualization","2025":"bi","2026":"business intelligence","2029":"angular","2030":"angular1","2031":"angular2","2032":"angular5","2033":"angular6","2037":"selenium1","2042":"node js","2045":"qlikview","2046":"qlikview1","2049":"information powercenter1","2050":"information powercenter2","2053":"ccsp","2057":"icp-acc","2061":"tkp","2065":"icp-tst","2069":"kmp-1","2073":"kmp-2","2076":"react","2082":"c","2085":"c#","2088":"julia","2091":"go","2094":"perl","2097":"ruby on rails","2100":"ansible","2103":"salt","2106":"puppet","2109":"amazon route 53","2112":"s3","2115":"vpc","2118":"ec2","2121":"apache maven","2124":"blockchain","2125":"bitcoin","2128":"chfi","2134":"linux1","2135":"linux2","2141":".net","2144":"comptia-security+","2152":"owner","2167":"power","2173":"architecting microsoft solutions","2176":"deep learning","2177":"tensorflow","2180":"artificial intelligence","2199":"blockchain basics","2200":"blockchain fundamentals","2209":"design","2210":"design-thinking","2213":"mobile and software","2216":"ai and machine learning","2217":"rpa","2218":"uipath","2221":"digital-marketing","2230":"cloud computing","2242":"ai","2246":"it service and architecture","2252":"cyber security","2273":"advanced digital marketing course","2274":"digital marketing masters course","2275":"advanced digital marketing training","2276":"marketing certification courses","2277":"digital marketing specialist course","2278":"digital marketing expert","2279":"digital marketing masters","2280":"advanced marketing course","2281":"advanced marketing training","2282":"digital marketing course","2283":"digital marketing training","2284":"digital marketing certification","2286":"advanced digital marketing","2289":"itil expert","2290":"itil expert certification","2291":"itil intermediate sd training","2292":"itil intermediate csi course","2293":"itil intermediate so training","2294":"itil intermediate ss course","2295":"itil intermediate st training","2296":"itil intermediate","2297":"itil so","2298":"itil csi","2299":"itil sd","2300":"itil ss","2301":"itil st","2302":"itil lifecycle training","2303":"itil lifecycle program","2304":"itil lifecycle expert course","2307":"itil training","2308":"itil course","2309":"itil certification","2312":"itil expert training","2313":"itil expert course","2314":"itil rcv","2315":"itil soa","2316":"itil osa","2317":"itil ppo","2318":"itil rcv course","2319":"itil rcv training","2320":"itil soa course","2321":"itil soa training","2322":"itil ppo course","2323":"itil ppo training","2326":"it service management course","2328":"it service certification","2329":"it service course","2331":"it service expert course","2332":"it service expert training","2335":"itil ss course","2336":"itil ss training","2337":"itil sd course","2338":"itil sd training","2339":"itil csi course","2340":"itil csi training","2344":"lean six sigma course","2345":"six sigma black belt course","2346":"six sigma black belt training","2347":"six sigma black belt certification","2348":"six sigma green belt course","2349":"lean six sigma green belt course","2350":"lean six sigma black belt course","2351":"six sigma experts","2352":"minitab course","2353":"minitab training","2354":"six sigma masters","2355":"lean six sigma masters","2356":"lean six sigma green belt","2357":"lean six sigma black belt","2359":"data scientist masters","2360":"data scientist masters program","2361":"data science masters","2362":"data science masters program","2363":"data scientist course","2364":"data scientist training data scientist certification","2366":"data science with python training","2367":"data science course","2368":"data science training","2369":"data science certification","2370":"r programming","2371":"data science with sas","2372":"sas training","2373":"sas courses","2374":"sas certifications","2376":"big data architect course","2377":"big data architect training","2378":"hadoop masters program","2379":"big data masters course","2380":"hadoop masters course","2381":"big data architect masters","2382":"big data architect program","2383":"big data architect certification","2384":"hadoop architect certification","2385":"data architect courses","2386":"hadoop certification","2387":"big data certification","2388":"big data course","2389":"big data training","2390":"hadoop training","2391":"big data developer course","2392":"bigdata and hadoop training","2393":"hadoop and big data training","2394":"big data admin course","2395":"hadoop admin course","2396":"hadoop administration training","2397":"hadoop administrator course","2399":"business analytics masters","2400":"data analytics expert","2401":"masters in business analytics","2402":"business analytics expert","2403":"business analytics masters certification","2406":"analytics certification","2407":"excel analytics course","2408":"data analytics with excel","2410":"big data and data science","2411":"big data masters program","2413":"big data and data science courses","2416":"big data & data science courses","2419":"devops architect","2420":"devops engineer","2421":"devops masters","2422":"devops expert course","2423":"devops masters program","2424":"devops masters course","2425":"devops architect training","2426":"aws solution architect associate","2429":"aws certification training","2430":"aws solution architect","2432":"azure certification 70-532","2433":"70-532","2434":"azure 70-532","2435":"microsoft azure certification","2436":"microsoft azure course","2437":"micosoft azure training","2446":"devops foundation","2447":"devops course","2448":"devops training","2449":"devops certification","2450":"devops practitioner","2451":"devops certificate training","2452":"devops engineer course","2453":"devops foundation course","2454":"devops course content","2456":"full stack developer course","2457":"full stack developer certification","2458":"full stack developer training","2459":"mean stack course","2460":"mean stack certification","2461":"full stack certification","2462":"mean stack developer","2463":"mean stack training","2464":"full stack development course","2465":"mean stack masters","2466":"mean stack masters course","2467":"mean stack developer course","2468":"mongodb certification","2469":"mongodb training","2470":"mongodb course","2471":"node js certification","2472":"node js training","2473":"node js course","2474":"angular certification","2475":"angular training","2476":"angular course","2478":"software engineer course","2479":"software engineer training","2480":"software engineer certification","2481":"software engineer masters","2482":"java training course","2483":"java certification","2485":"python training","2486":"python course","2489":"core java course","2495":"automation testing","2496":"automation testing course","2497":"automation testing certification","2498":"automation testing masters","2499":"automation testing masters course","2500":"selenium training","2501":"selenium training course","2502":"selenium course","2503":"selenium certification","2504":"automation test engineer course","2505":"automation test engineer","2508":"pmp plus","2509":"pmp bundle course","2510":"pmp pdu","2511":"pmp course","2512":"pmp training","2513":"pmp certification","2514":"project management course","2515":"pmp 60 pdu","2516":"pmp 60 pdu course","2517":"pmi-rmp","2518":"pmi-rmp course","2519":"pmp bundle","2520":"project management training","2521":"project management certification","2523":"pmp+","2524":"pmp+ course","2525":"pmp+ bundle","2526":"pmp+ masters","2529":"pmp renewal pdu courses","2530":"pmp 60 pdu courses","2531":"pmp pdu courses","2532":"pmp renewal pdu","2533":"pmp 60 pdus","2534":"pmp pdu renewal","2539":"pmp renewal","2543":"artificial","2550":"dl","2555":"digital project manager","2556":"digital project manager course","2557":"digital project manager certification","2558":"digital project management","2559":"digital project manager masters program","2560":"digital project manager expert course","2563":"cyber security expert","2564":"cyber security master"} /*------------- End : SearchTags.js-----------*/ 

 /*------------- Begin : SimpliApp.js-----------*/ 

angular.module('Simplilearn',[
 'CommonPlugins','ngAnimate','ngCookies','ui.bootstrap'
])
.run(function( $rootScope, LocService){
    //initialize root scope variables
	$rootScope.currentCountry = null;
	$rootScope.queryCountryCode = null;
	$rootScope.queryCountryId = null;
	$rootScope.queryPhoneCode = null;
	$rootScope.countryList = null;
	$rootScope.countryDrpDwnStyle={'display':'none'};
	$rootScope.phoneInputStyle = {};
	$rootScope.regStatusMsg = "";
	$rootScope.regStatusClass = "";
    $rootScope.regSuccessMsg = "";
	$rootScope.regSuccessClass = "";
	$rootScope.resetMsgs = 0;
	//refer and earn email-list
	$rootScope.emailList = [];
        $rootScope.supportNo = '1-800-102-9602';
        $rootScope.supportNoDail = '1-800-102-9602';
        $rootScope.clickToCallUSno = '+1-844-532-7688';

        $rootScope.minWidthThreshold = 768;
        $rootScope.minWidthThresholdHybrid = 1024;

        $rootScope.setSizeFlags= function() {
            $rootScope.mobWidthFlag = (window.screen.width < $rootScope.minWidthThreshold) ? 1 : 0;
            if(typeof isIOs !== 'undefined') {
                $rootScope.hybridWidthFlag = ((!isIOs && window.screen.width < $rootScope.minWidthThresholdHybrid) || (isIOs && window.innerWidth < $rootScope.minWidthThresholdHybrid)) ? 1 : 0;            //for ipad use innerwidth
            } else {
                $rootScope.hybridWidthFlag = (window.screen.width < $rootScope.minWidthThresholdHybrid) ? 1 : 0;
            }
        };
        $rootScope.setSizeFlags();

        $rootScope.communityRequestPending = {'display':'none'};

    $rootScope.isCpClicked = 0;
    $rootScope.isPracticeTestClicked = 0;
	$rootScope.loggedInUsrEmail = "";
	$rootScope.accountListUsrEmail = "";
	$rootScope.loggedInUsrId = null;
	$rootScope.userWishList = null;
	$rootScope.wishListArr = {"courses":{},"ebooks":{},"tests":{}};
	$rootScope.wishListCount = "";
	$rootScope.regexph = /^\+\d{1,4}-?\d{5,10}$/;

        /*mobile drop query form start*/
        $rootScope.isOrientationChanged = 0;
        $rootScope.showMobDropQuery = {'display':'none'};
        $rootScope.mobDropQueryBg = {};
	$rootScope.showDrpQueryFrm = {};
        $rootScope.chatHoverIconStyle = {'display':'block'};

        $rootScope.closeMobDropQueryForm = function(){
            $rootScope.showMobDropQuery = {'display':'none'};
            $rootScope.mobDropQueryBg = {};
            $rootScope.showDrpQueryFrm = {};
            document.getElementsByTagName("body")[0].className = document.getElementsByTagName("body")[0].className.replace(" hiddenScroll","");
        }
        /*mobile drop query form end*/


	$rootScope.initDropQueryForm = function () {
            LocService.getCountryData().then(function (countryList) {
                setTimeout(function () {
                    $rootScope.countryList = LocService.getAppCountryData();
                        if ($rootScope.userInfo && $rootScope.userInfo.phoneCode) {
                            // Set phone code form user data
                            var phonecode = $rootScope.userInfo.phoneCode.replace('+', '').replace('-', '');
                            if ($rootScope.userInfo.phoneCode != $rootScope.defaultQueryPhoneCode && Array.isArray(countryList)) {
                                // Choose first match based on phone code. phone code can be duplicate in countries.
                                for (var i in countryList) {
                                    var country = countryList[i];
                                    if (country.phnCode == phonecode) {
                                        $rootScope.queryPhoneCode = $rootScope.userInfo.phoneCode;
                                        $rootScope.queryCountryId = country.id;
                                        break;
                                    }
                                }
                            }
                        }
                        if(!$rootScope.queryPhoneCode) {
                            $rootScope.queryPhoneCode = $rootScope.defaultQueryPhoneCode;
                        }
                        $rootScope.phoneCode = $rootScope.queryPhoneCode;
                        setPhoneCodeStyle($rootScope.queryPhoneCode);
                        setTimeout(function() {
                            if(typeof $rootScope.$apply !== 'undefined') {
                                try { $rootScope.$apply(); } catch(e) { console.warn("SL:Error initDropQueryForm", e); }
                            }
                        },10);
                    
                }, 2000);
                $rootScope.currentCountry = LocService.getCurrentCountry();
                $rootScope.queryCountryCode = $rootScope.currentCountry.code;
                $rootScope.queryCountryId = $rootScope.currentCountry.id;
                $rootScope.defaultQueryPhoneCode = "+" + $rootScope.currentCountry.phnCode + "-";
                setPhoneCodeStyle($rootScope.defaultQueryPhoneCode);
            });

        }
        
        var setPhoneCodeStyle = function (phoneCode) {
            var codelen = (phoneCode.length) - 2;
            if (codelen < 3)
                var widthVal = ((codelen) * 15) + 8;
            else if (codelen == 3) {
                var widthVal = ((codelen) * 15) + 5;
            } else {
                var widthVal = ((codelen) * 15) - 5;
            }
            $rootScope.phoneInputStyle = {'padding-left': widthVal + "px"};
        }

	$rootScope.showCountryDrpDwn = function($event){
		$event.preventDefault();
		if($rootScope.countryDrpDwnStyle.display == 'block')
			$rootScope.countryDrpDwnStyle={'display':'none'};
		else
			$rootScope.countryDrpDwnStyle={'display':'block'};
                //@review return statement missing
	}

	var  getAllElementsWithAttribute = function(attribute){
		var matchingElements = [];
		var allElements = document.getElementsByTagName('*');
		for (var i = 0, n = allElements.length; i < n; i++){
			if (allElements[i].getAttribute(attribute) !== null){
				// Element exists with attribute. Add to array.
				matchingElements.push(allElements[i]);
			}
		}
		return matchingElements;
	}



	$rootScope.chooseQueryCountry = function($event,countrycode,phonecode,countryId){
		$event.preventDefault();
		setTimeout(function(){
			var clickedEle = null;
			if(typeof $event.srcElement != 'undefined'){
				clickedEle = $event.srcElement;
			}else{
				clickedEle = $event.target;
			}
			var parentEle = angular.element(clickedEle).parent();
			for(var i=0;i<3;i++){
				if(parentEle[0].className == 'dropdown-menu'){
					parentEle[0].style.display = 'none';
					break;
				}else{
					parentEle = parentEle.parent();
				}
			}
		},200);
		$rootScope.queryCountryCode = countrycode;
		$rootScope.queryPhoneCode = phonecode;
		$rootScope.queryCountryId = countryId;
		$rootScope.countryDrpDwnStyle={'display':'none'};
		var codelen = (phonecode.length)-2;
		if(codelen < 3)
			var widthVal = (((phonecode.length)-2)*15)+8;
		else if(codelen == 3){
			var widthVal = (((phonecode.length)-2)*15);
		}else{
			var widthVal = (((phonecode.length)-2)*15)-5;
		}

		$rootScope.phoneInputStyle = {'padding-left':widthVal+"px"};
                //@review return statement missing
	}

	$rootScope.toggleModalDisplay = function(modalClass,displayStatus,$event){
                if($event) {
                    $event.preventDefault();
                }
		var modalEle = document.getElementsByClassName(modalClass)[0];
		if(typeof modalEle != 'undefined'){
			modalEle.style.display = displayStatus;
		}
		$rootScope.resetMsgs = 1;
		if(displayStatus == 'block' && isIpad == 1){
			var bodyObj = document.getElementsByTagName('body')[0];
			bodyObj.className = bodyObj.className+" body_fixed";
		}else{
			var bodyObj = document.getElementsByTagName('body')[0];
			bodyObj.className = bodyObj.className.replace("body_fixed","");
		}
	}
            $rootScope.showHideDivsLP = function (type, elearningType) {
                if (type == 1) {
                    angular.element(document.getElementsByClassName('special-video-iframe')).css('display', 'none');
                    angular.element(document.getElementsByClassName('special-video-bottom')).css('display', 'none');
                    angular.element(document.getElementsByClassName('special-video-enroll-overlay')).css('display', 'block');
                } else if (type == 2) {
                    angular.element(document.getElementsByClassName('special-video-iframe')).css('display', 'none');
                    angular.element(document.getElementsByClassName('special-video-bottom')).css('display', 'none');
                    angular.element(document.getElementsByClassName('special-video-enroll-overlay')).css('display', 'none');
                } else {
                    if (elearningType) {
                        angular.element(document.getElementsByClassName('special-video-iframe')).css('display', 'block');
                        angular.element(document.getElementsByClassName('special-video-bottom')).css('display', 'block');
                        angular.element(document.getElementsByClassName('special-video-enroll-overlay')).css('display', 'none');
                    } else {
                        angular.element(document.getElementsByClassName('special-video-iframe')).css('display', 'none');
                        angular.element(document.getElementsByClassName('special-video-bottom')).css('display', 'block');
                        angular.element(document.getElementsByClassName('special-video-enroll-overlay')).css('display', 'none');
                    }
                }
            }

	var modalEscHandler = function(){
		document.onkeydown = function (event) {
			if(event.keyCode == 27){
				hideAllModal();
			}
		};

		document.onclick = function (event) {
			var targetEle = event.target;
			if(typeof targetEle != 'undefined'){
				var targetEleClass = targetEle.className;
				if(typeof targetEleClass != 'undefined' && targetEleClass != ''){
					if(targetEleClass != '' && targetEleClass.indexOf("popup_country_wrapper")!=-1){
						hideAllModal();
					}
				}
			}
		};

	}();

	var hideAllModal = function(){
		var modalObjs = document.getElementsByClassName('popup_country_wrapper');
		var modalLen = modalObjs.length;
		for(var i=0;i<modalLen;i++){
			if(modalObjs[i].style.display =='block'){
				modalObjs[i].style.display = 'none';
			}
		}
		var bodyObj = document.getElementsByTagName('body')[0];
		bodyObj.className = bodyObj.className.replace("body_fixed","");
	}


})
.filter('htmlToPlaintext', function() {
    return function(text) {
      return String(text).replace(/<[^>]+>/gm, '');
    };
  }
)
.filter('cleanCourseId', function() {
    return function(text) {
      return String(text).replace('b', '');
    };
  }
)
.constant('AMBASSADORENABLE',1)
;

var isIE = (function () {
    var undef, rv = -1; // Return value assumes failure.
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf('MSIE ');
    var trident = ua.indexOf('Trident/');

    if (msie > 0) {
        // IE 10 or older => return version number
        rv = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
    } else if (trident > 0) {
        // IE 11 (or newer) => return version number
        var rvNum = ua.indexOf('rv:');
        rv = parseInt(ua.substring(rvNum + 3, ua.indexOf('.', rvNum)), 10);
    }

    return ((rv > -1) ? rv : undef);
}());


var helpers = function(){
    this.FormNotValid = function(form) {
                for (i in form) {
                    if (typeof form[i].$dirty !== 'undefined' && typeof form[i].$invalid !== 'undefined') {

                        form[i].$dirty = true;
                        //form[i].$invalid = form[i].$invalid;
                    }
                }
                return false;
    };

    this.GetFormElemTooltipText = function(pElem) {
        var tooltips = {
                        //'mandatory':'This field is mandatory',
                        //'invalidEmail':'Please enter a valid email address',
                        'invalidPhone':'Please enter only numbers ( atleast 7 digits required )',
                        'invalidPwd':'Your password should be minimum 8 characters long, with at least one uppercase, one lowercase letter and one number',
                        'invalidConfPwd':'This should match to the password entered above'
        };

        if( (' ' + pElem.className + ' ').indexOf(' ng-invalid-required ') > -1 ) {
            return tooltips.mandatory;
        }
        else if( (' ' + pElem.className + ' ').indexOf(' ng-invalid-email ') > -1 ) {
            return tooltips.invalidEmail;
        }
        else if( (' ' + pElem.className + ' ').indexOf(' ng-invalid-phone ') > -1 ) {
            return tooltips.invalidPhone;
        }
        else if( (' ' + pElem.className + ' ').indexOf(' ng-invalid-pwd ') > -1 ) {
            return tooltips.invalidPwd;
        }
        else if( (' ' + pElem.className + ' ').indexOf(' ng-invalid-conf-pwd ') > -1 ) {
            return tooltips.invalidConfPwd;
        }
        else {
            return false;
        }
    };

    this.makeValidApiUrl = function(functionName, forceNonCdn) {
        if(typeof forceNonCdn == 'undefined') {
            forceNonCdn = false;
        }
        var url = '';
        var cached = false;
        if(!forceNonCdn && apiFromCdnUrl) {
            url = user_params.cdnApiUrl + functionName + '&cac_bst_vrsn=' + user_params.cdnCacheBust;
            cached = true;
        } else {
            url = user_params.nonCdnApiUrl + functionName;
            cached = false;
        }
        return {'url': url, 'cached': cached};
    }
}; /*------------- End : SimpliApp.js-----------*/ 

 /*------------- Begin : WebEvents.js-----------*/ 

/**
 *
 * Website Events
 * Author : Kusum Saini
 */
 !function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){"use strict";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(f){return void i(n.promise,f)}r(n.promise,o)}else(1===e._state?r:i)(n.promise,e._value)})):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if("function"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(r){i(e,r)}}function i(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e))},function(e){t||(t=!0,i(n,e))})}catch(o){if(t)return;t=!0,i(n,o)}}var c=setTimeout;t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(e,t,r)),r},t.prototype["finally"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"Promise"in l?l.Promise.prototype["finally"]||(l.Promise.prototype["finally"]=e):l.Promise=t});
 /**
 * Copyright (c) 2014, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * https://raw.github.com/facebook/regenerator/master/LICENSE file. An
 * additional grant of patent rights can be found in the PATENTS file in
 * the same directory.
 */

!(function(global) {
  "use strict";

  var hasOwn = Object.prototype.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var iteratorSymbol =
    typeof Symbol === "function" && Symbol.iterator || "@@iterator";

  var inModule = typeof module === "object";
  var runtime = global.regeneratorRuntime;
  if (runtime) {
    if (inModule) {
      // If regeneratorRuntime is defined globally and we're in a module,
      // make the exports object identical to regeneratorRuntime.
      module.exports = runtime;
    }
    // Don't bother evaluating the rest of this file if the runtime was
    // already defined globally.
    return;
  }

  // Define the runtime globally (as expected by generated code) as either
  // module.exports (if we're in a module) or a new, empty object.
  runtime = global.regeneratorRuntime = inModule ? module.exports : {};

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided, then outerFn.prototype instanceof Generator.
    var generator = Object.create((outerFn || Generator).prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  runtime.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  runtime.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  runtime.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `value instanceof AwaitArgument` to determine if the yielded value is
  // meant to be awaited. Some may consider the name of this method too
  // cutesy, but they are curmudgeons.
  runtime.awrap = function(arg) {
    return new AwaitArgument(arg);
  };

  function AwaitArgument(arg) {
    this.arg = arg;
  }

  function AsyncIterator(generator) {
    // This invoke function is written in a style that assumes some
    // calling function (or Promise) will handle exceptions.
    function invoke(method, arg) {
      var result = generator[method](arg);
      var value = result.value;
      return value instanceof AwaitArgument
        ? Promise.resolve(value.arg).then(invokeNext, invokeThrow)
        : Promise.resolve(value).then(function(unwrapped) {
            // When a yielded Promise is resolved, its final value becomes
            // the .value of the Promise<{value,done}> result for the
            // current iteration. If the Promise is rejected, however, the
            // result for this iteration will be rejected with the same
            // reason. Note that rejections of yielded Promises are not
            // thrown back into the generator function, as is the case
            // when an awaited Promise is rejected. This difference in
            // behavior between yield and await is important, because it
            // allows the consumer to decide what to do with the yielded
            // rejection (swallow it and continue, manually .throw it back
            // into the generator, abandon iteration, whatever). With
            // await, by contrast, there is no opportunity to examine the
            // rejection reason outside the generator function, so the
            // only option is to throw it from the await expression, and
            // let the generator function handle the exception.
            result.value = unwrapped;
            return result;
          });
    }

    if (typeof process === "object" && process.domain) {
      invoke = process.domain.bind(invoke);
    }

    var invokeNext = invoke.bind(generator, "next");
    var invokeThrow = invoke.bind(generator, "throw");
    var invokeReturn = invoke.bind(generator, "return");
    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return invoke(method, arg);
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : new Promise(function (resolve) {
          resolve(callInvokeWithMethodAndArg());
        });
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  runtime.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return runtime.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          if (method === "return" ||
              (method === "throw" && delegate.iterator[method] === undefined)) {
            // A return or throw (when the delegate iterator has no throw
            // method) always terminates the yield* loop.
            context.delegate = null;

            // If the delegate iterator has a return method, give it a
            // chance to clean up.
            var returnMethod = delegate.iterator["return"];
            if (returnMethod) {
              var record = tryCatch(returnMethod, delegate.iterator, arg);
              if (record.type === "throw") {
                // If the return method threw an exception, let that
                // exception prevail over the original return or throw.
                method = "throw";
                arg = record.arg;
                continue;
              }
            }

            if (method === "return") {
              // Continue with the outer return, now that the delegate
              // iterator has been terminated.
              continue;
            }
          }

          var record = tryCatch(
            delegate.iterator[method],
            delegate.iterator,
            arg
          );

          if (record.type === "throw") {
            context.delegate = null;

            // Like returning generator.throw(uncaught), but without the
            // overhead of an extra function call.
            method = "throw";
            arg = record.arg;
            continue;
          }

          // Delegate generator ran and handled its own exceptions so
          // regardless of what the method was, we continue as if it is
          // "next" with an undefined arg.
          method = "next";
          arg = undefined;

          var info = record.arg;
          if (info.done) {
            context[delegate.resultName] = info.value;
            context.next = delegate.nextLoc;
          } else {
            state = GenStateSuspendedYield;
            return info;
          }

          context.delegate = null;
        }

        if (method === "next") {
          context._sent = arg;

          if (state === GenStateSuspendedYield) {
            context.sent = arg;
          } else {
            context.sent = undefined;
          }
        } else if (method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw arg;
          }

          if (context.dispatchException(arg)) {
            // If the dispatched exception was caught by a catch block,
            // then let that catch block handle the exception normally.
            method = "next";
            arg = undefined;
          }

        } else if (method === "return") {
          context.abrupt("return", arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          var info = {
            value: record.arg,
            done: context.done
          };

          if (record.arg === ContinueSentinel) {
            if (context.delegate && method === "next") {
              // Deliberately forget the last sent value so that we don't
              // accidentally pass it on to the delegate.
              arg = undefined;
            }
          } else {
            return info;
          }

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(arg) call above.
          method = "throw";
          arg = record.arg;
        }
      }
    };
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  runtime.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  runtime.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      this.sent = undefined;
      this.done = false;
      this.delegate = null;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;
        return !!caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.next = finallyEntry.finallyLoc;
      } else {
        this.complete(record);
      }

      return ContinueSentinel;
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = record.arg;
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      return ContinueSentinel;
    }
  };
})(
  // Among the various tricks for obtaining a reference to the global
  // object, this seems to be the most reliable technique that does not
  // use indirect eval (which violates Content Security Policy).
  typeof global === "object" ? global :
  typeof window === "object" ? window :
  typeof self === "object" ? self : this
);

// // =================================================

var WebTracking = WebTracking || {};
var weusrCookie = getCookieByName('weusr');

// events list
WebTracking.events = {
    'user_auto_login': {'category': "SL_Engagement", 'action': "User Auto Login", 'labelRequired': true, 'noninteractiveness': false},
    // Course Page events
    'sl_eng_product_page_viewed': {'category': "SL_Engagement", 'action': "Product Page viewed", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_query_box_toggle_clicked': {'category': "SL_Lead", 'action': "Query Box Lead form toggle clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_user_initiated_lead_form': {'category': "SL_Lead", 'action': "Lead form initiated", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_user_submitted_lead_form': {'category': "SL_Lead", 'action': "Lead form submitted", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_user_lead_created_automatically': {'category': "SL_Lead", 'action': "User's lead created automatically", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_module_initiated': {'category': "SL_Lead", 'action': "Lead Module initiated", 'labelRequired': true, 'noninteractiveness': false},
    'sl_lead_form_closed': {'category': "SL_Lead", 'action': "Lead form Closed", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_intro_video_clicked': {'category': "SL_Engagement", 'action': "Introduction video clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_intro_video_closed': {'category': "SL_Engagement", 'action': "Introduction video closed", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_page_sticky_top_nav_show_section_change': {'category': "SL_Engagement", 'action': "Page Sticky Top Nav shows change in section", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_class_info_clicked': {'category': "SL_Engagement", 'action': "Class Information Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_class_info_carousal_explored': {'category': "SL_Engagement", 'action': "Class Information Carousal Explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_class_info_downloaded': {'category': "SL_Engagement", 'action': "Class Information Downloaded", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_class_info_popup_closed': {'category': "SL_Engagement", 'action': "Class Information pop up closed", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_web_page_viewed' : { 'category': "SL_Engagement", 'action': "User views the Corporate Training page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_corptrain_eng_user_clicks_on_category' : { 'category': "SL_Engagement", 'action': "User clicks on the category buttons on Corporate Page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_corptrain_eng_user_explores_course_advisor' : { 'category': "SL_Engagement", 'action': "User clicks on the course advisor carousal", 'labelRequired': true, 'noninteractiveness': false },
    'sl_corptrain_eng_user_explores_review_carousal' : { 'category': "SL_Engagement", 'action': "User explores the review carousal", 'labelRequired': true, 'noninteractiveness': false },
    'sl_corptrain_eng_user_explores_resources' : { 'category': "SL_Engagement", 'action': "User explores the resources on Corporate Training page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_eng_product_description_explored': {'category': "SL_Engagement", 'action': "Product Description question explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_money_back_guarantee_explored': {'category': "SL_Engagement", 'action': "Money Back Guarantee explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_ratings_clicked': {'category': "SL_Engagement", 'action': "Product Ratings clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_toc_explored': {'category': "SL_Engagement", 'action': "Product TOC explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_exam_question_explored': {'category': "SL_Engagement", 'action': "Product Exam and Certification question explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_course_advisor_viewed': {'category': "SL_Engagement", 'action': "Course Advisor Section viewed", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_reviews_view_more_clicked': {'category': "SL_Engagement", 'action': "Product Reviews View More Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_reviews_read_more_clicked': {'category': "SL_Engagement", 'action': "Product Review Read More Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_user_profile_clicked': {'category': "SL_Engagement", 'action': "Product Review User Profile Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_faq_question_explored': {'category': "SL_Engagement", 'action': "Product FAQ question explored", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_product_faq_view_more_clicked': {'category': "SL_Engagement", 'action': "Product FAQ View More Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_chat_triggered': {'category': "SL_Engagement", 'action': "Chat triggered", 'labelRequired': true, 'noninteractiveness': false},
    'sl_eng_chat_button_clicked': {'category': "SL_Engagement", 'action': "Chat button clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_nav_people_also_bought_courses_clicked': {'category': "SL_Engagement", 'action': "People Also bought courses clicked", 'labelRequired': true, 'noninteractiveness': false},
    'sl_pay_enroll_button_clicked_osl': {'category': "SL_Engagement", 'action': "Enroll now clicked on OSL", 'labelRequired': true, 'noninteractiveness': false},
    'sl_pay_enroll_button_clicked_lvc': {'category': "SL_Engagement", 'action': "Enroll now clicked on LVC", 'labelRequired': true, 'noninteractiveness': false},
    'sl_pay_enroll_button_clicked_classroom': {'category': "SL_Engagement", 'action': "Enroll now clicked on Classroom", 'labelRequired': true, 'noninteractiveness': false},
    'sl_pay_user_makes_payment' : { 'category': "SL_Payment", 'action': "User makes payment and lands on Thank you Page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_pay_user_removes_item_from_cart': { 'category': "SL_Payment", 'action': "User removes the course from Cart", 'labelRequired': true, 'noninteractiveness': false },
 
    'sl_nav_user_hovers_over_all_courses': { 'category': "SL_Navigation", 'action': "User hovers over All Courses button on top nav", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_on_a_link_in_Megamenu': { 'category': "SL_Navigation", 'action': "User clicks on a link in Megamenu of All Courses", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_on_explore_category_in_Megamenu': { 'category': "SL_Navigation", 'action': "User clicks on Category button in Megamenu of All Courses", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_initiates_search': { 'category': "SL_Navigation", 'action': "User inititates Search", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_completes_search': { 'category': "SL_Navigation", 'action': "User completes Search", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_on_a_link_in_top_Nav': { 'category': "SL_Navigation", 'action': "User clicks on a link in Top Nav", 'labelRequired': true, 'noninteractiveness': false },
    'sl_user_clicks_on_Login': { 'category': "SL_Navigation", 'action': "User clicks on Login", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_on_simplilearn_logo': { 'category': "SL_Navigation", 'action': "User clicks on Simplilearn logo", 'labelRequired': true, 'noninteractiveness': false },
    'sl_user_logs_out': { 'category': "SL_Navigation", 'action': "User logs out", 'labelRequired': true, 'noninteractiveness': false },
    'sl_user_clicks_on_my_courses': { 'category': "SL_Navigation", 'action': "User clicks on My courses", 'labelRequired': true, 'noninteractiveness': false },
     //B2B pages event
    'sl_eng_web_page_viewed':{ 'category': "SL_Engagement", 'action': "Web Page viewed", 'labelRequired': true, 'noninteractiveness': false },

    'sl_refer_user_clicks_on_referal_link_in_footer': { 'category': "SL_Referral", 'action': "The user clicks on referral link on website footer", 'labelRequired': true, 'noninteractiveness': false },
    'sl_refer_user_online_registers_for_referral_prog': { 'category': "SL_Referral", 'action': "User registers for referral program", 'labelRequired': true, 'noninteractiveness': false },
    'sl_refer_user_initiates_giving_referral_leads': { 'category': "SL_Referral", 'action': "User initiates submission of referral leads on the referral page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_lead_user_submits_referee_lead_with_email_id': { 'category': "SL_Referral", 'action': "User submits the referee lead with email id", 'labelRequired': true, 'noninteractiveness': false },
    'sl_lead_user_submits_the_referee_lead_with_phone': { 'category': "SL_Referral", 'action': "User submits the referee lead with phone number", 'labelRequired': true, 'noninteractiveness': false },
    'sl_lead_referrer_submits_referee_lead_with_emailid': { 'category': "SL_Referral", 'action': "Referrer submits the referee lead with email id", 'labelRequired': true, 'noninteractiveness': false },
    'sl_lead_referrer_submits_referee_lead_with_phone': { 'category': "SL_Referral", 'action': "Referrer submits the referee lead with phone number", 'labelRequired': true, 'noninteractiveness': false },
    'sl_refer_user_copied_referral_link': { 'category': "SL_Referral", 'action': "User copied the referral link", 'labelRequired': true, 'noninteractiveness': false },
    'sl_refer_user_promotes_referral_link_socially': { 'category': "SL_Referral", 'action': "User promoting the referral link on social channel", 'labelRequired': true, 'noninteractiveness': false },

 
    // FRS Page Events
    'sl_frs_eng_user_lands_on_frs_homepage': {'category': "SL_Engagement", 'action': "User lands on FRS homepage", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_user_explores_resources_on_homepage': {'category': "SL_Navigation", 'action': "User explores FRS resources on homepage", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_view_all_resources_clicked_on_homepage': {'category': "SL_Navigation", 'action': "User clicks on view all resources of a category on Homepage", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_user_clicks_on_resource_filter_on_frs': {'category': "SL_Engagement", 'action': "User clicks on resource filter on frs pages", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_user_clicks_a_resource_on_segment_page': {'category': "SL_Navigation", 'action': "User explore a resource on the FRS category page", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_user_change_segment_filter_on_category_page': {'category': "SL_Engagement", 'action': "User changes segment filter on Category page", 'labelRequired': true, 'noninteractiveness': false},
//    'sl_frs_eng_user_clicks_on_resource_tabs_on_frs': {'category': "SL_Engagement", 'action': "User clicks on resource tabs on frs pages", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_user_change_segment_filter_on_frs_pages': {'category': "SL_Engagement", 'action': "User changes segment filter on FRS pages", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_resource_in_left_hand_nav_clicked': {'category': "SL_Navigation", 'action': "User clicks on a resource in left hand nav panel", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_recommended_resource_clicked': {'category': "SL_Navigation", 'action': "User clicks on a resource in the recommended resource section", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_course_pop_up_in_frs_clicked': {'category': "SL_Engagement", 'action': "User clicks on the course pop up on FRS resource page", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_user_lands_on_frs_detail_resource_page': {'category': "SL_Engagement", 'action': "User lands on FRS detail resource page", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_nav_user_scrolls_from_one_resource_to_other': {'category': "SL_Engagement", 'action': "User moves from one resource to another while scrolling", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_eng_user_lands_on_frs_authors_page' : {'category': "SL_Engagement", 'action': "User lands on the FRS authors page", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_lead_user_initiated_lead_form': {'category': "SL_FRS Lead", 'action': "Lead form initiated", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_lead_user_submitted_lead': {'category': "SL_FRS Lead", 'action': "Lead form submitted", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_lead_module_initiated': {'category': "SL_FRS Lead", 'action': "Lead Module initiated", 'labelRequired': true, 'noninteractiveness': false},
    'sl_frs_lead_form_closed': {'category': "SL_FRS Lead", 'action': "Lead form Closed", 'labelRequired': true, 'noninteractiveness': false},
    
    'sl_nav_user_hovers_over_all_courses': { 'category': "SL_Navigation", 'action': "User hovers over All Courses button on top nav", 'labelRequired': true, 'noninteractiveness': false },
        
    //homepage events
    'sl_nav_user_clicks_on_explore_courses_on_homepage': { 'category': "SL_Engagement", 'action': "User clicks on Explore courses on homepage", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_master_carousal_on_homepage': { 'category': "SL_Engagement", 'action': "User clicks on Master program Carousal on homepage", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_user_clicks_on_product_card_on_homepage': { 'category': "SL_Engagement", 'action': "User clicks on Product cards on homepage", 'labelRequired': true, 'noninteractiveness': false },
    'sl_eng_user_clicks_course_type_toggle_on_homepage':{ 'category': "SL_Engagement", 'action': "User clicks on toggle of course type on homepage", 'labelRequired': true, 'noninteractiveness': false },
    'sl_eng_user_explores_testimonials_on_homepage':{ 'category': "SL_Engagement", 'action': "User explores testimonials on homepage", 'labelRequired': true, 'noninteractiveness': false },
    //Category Page Events Start
    'sl_nav_popular_course_on_category_page_clicked': { 'category': "SL_Navigation", 'action': "Popular product clicked on Category Page", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_product_on_category_page_clicked':{ 'category': "SL_Navigation", 'action': "Product on Category Page Clicked", 'labelRequired': true, 'noninteractiveness': false },
    //Category Page Events End
    //FPT Event
    'sl_eng_fpt_final_score': { 'category': "SL_Navigation", 'action': "FPT Final Score", 'labelRequired': true, 'noninteractiveness': false },
    'sl_nav_breadcrumb_clicked':{ 'category': "SL_Navigation", 'action': "Breadcrumb clicked on a product page", 'labelRequired': true, 'noninteractiveness': false },
    //Search Page Events
    'sl_search_user_views_search_result': { 'category': "SL_Navigation", 'action': "User lands on the search page and views search result", 'labelRequired': true, 'noninteractiveness': false },
    'sl_search_user_clicks_on_a_search_result': { 'category': "SL_Navigation", 'action': "User clicks on a search result", 'labelRequired': true, 'noninteractiveness': false },
    'sl_lead_chat_lead_created_by_agent':{ 'category': "SL_Lead", 'action': "Chat lead created by chat agent by clicking on Xenia form submit", 'labelRequired': true, 'noninteractiveness': false },
};
// WE user attribute mappting to sl attributes
WebTracking.userAttributesMap = {
    'sl_user_email': 'we_email',
    'sl_user_first_name': 'we_first_name',
    'sl_user_last_name': 'we_last_name',
    'sl_user_phone' : 'we_phone',
    'sl_user_company' : 'we_company',
    'sl_user_state':'we_region',
    // 'sl_product_name':'sl_latest_course_of_interest',
    // 'sl_product_category':'sl_latest_category_of_interest',
    // 'sl_product_category_id':'sl_latest_category_of_interest_id',
    // 'sl_product_id':'sl_latest_course_of_interest_id',
    // 'sl_product_training_type': 'sl_latest_product_training_type_interested',
    // 'sl_product_type':'sl_latest_product_type_interested',
    // 'sl_site_module':'sl_last_lead_site_module',
    // 'sl_frs_site_module':'sl_frs_last_lead_site_module',
    'sl_lead_type':'sl_user_type',
    'sl_user_country':'we_country',
    'sl_user_jobtitle':'sl_user_jobtitle',
    'sl_email_opt_in':'we_email_opt_in',
    'sl_sms_opt_in':'we_sms_opt_in',
    'sl_user_products_bought':'sl_user_products_bought',
};

(typeof user_params == 'undefined') && (user_params = {});
WebTracking.commonUserAttr = {
    'product' : [
        // 'sl_product_name', 'sl_product_category',
        // 'sl_product_id','sl_product_training_type','sl_product_type',
        // 'sl_site_module','sl_product_category_id',
        'sl_email_opt_in','sl_sms_opt_in'
        ],
    'sl_user_attr' : {
        'sl_user_email' : 'email',
        'sl_user_first_name' : 'first_name',
        'sl_user_last_name' : 'last_name',
        'sl_user_phone' : 'phone',
    },
    'sl_user_attr_no_update' : {
        // 'sl_site_module': 'sl_first_lead_site_module',
    },
    'we_location_attrs' : ['we_country', 'we_city','we_region'],
    'user_attributes' : ['sl_user_type']
}

WebTracking.commonData = {
    'order': ['sl_page_type', 'sl_order_id', 'sl_currency', 'sl_product_price_symbol', 'sl_product_id', 'sl_product_name',
            'sl_product_ratings', 'sl_product_image', 'sl_product_category', 'sl_product_category_id', 'sl_product_training_type',
            'sl_product_price_osl', 'sl_product_price_lvc', 'sl_product_price_classroom', 'sl_product_type', 'sl_utm_src'
     ],
    'product' : ['sl_page_type', 'sl_product_id', 'sl_product_name', 'sl_currency',
       'sl_product_ratings', 'sl_product_image', 'sl_product_category',
       'sl_product_category_list', 'sl_product_category_id',
       'sl_product_training_type', 'sl_product_type', 'sl_product_learners',
       'sl_product_price_osl', 'sl_product_price_classroom', 'sl_product_price_lvc',
       'sl_product_accredition', 'sl_number_of_course_advisors', 'sl_course_advisors',
       'sl_product_has_free_courses', 'sl_product_free_courses_list','sl_product_number_of_subproduct',
       'sl_product_list_of_subproduct', 'sl_product_price_symbol','sl_product_masters_programs_list','sl_user_type'],

    'frs' : ['sl_frs_resource_id','sl_frs_resource_name','sl_frs_segment_id',
        'sl_frs_segment_name','sl_frs_resource_type','sl_frs_resource_image',
        'sl_frs_author_name','sl_frs_author_image','sl_frs_author_profile_link',
        'sl_frs_resource_view_count','sl_frs_resource_download_count',
        'sl_frs_resource_event_timestamp','sl_frs_resource_updated_timestamp',
        'sl_frs_resource_link','sl_frs_timezone','sl_frs_recommended_resources'],

}
WebTracking.gaBarredAttributes = ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_user_phone'];
// attributes barred to be sent to GA
WebTracking.weBarredEvents = [];
// ===============================================================================================================
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

WebTracking.eventReq = {
    user: "",
    event_data_key: 'we_event_data',
    user_attr_key: 'we_attr_data',
    uattr: {},
    eventParam: [],
    finalGaParam: [],
    userAttrPush: {},
    // check if WE logged in email is different than new event email and login, create user cookie
    loginUser: function () {
        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
            return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                    switch (_context.prev = _context.next) {
                        case 0:
                            if (typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined' && typeof this.eventParam.event_data['sl_user_email'] != 'undefined' && this.eventParam.event_data['sl_user_email'] != '' && this.eventParam.event_data['sl_user_email'] != this.user) {
                                this.user = this.eventParam.event_data['sl_user_email'];
                                webengage.user.login(this.user);
                                if(this.eventParam.event_data['sl_user_phone']) {
                                    webengage.user.setAttribute('we_phone', this.eventParam.event_data['sl_user_phone']);
                                }
                            }

                        case 1:
                        case 'end':
                            return _context.stop();
                    }
                }
            }, _callee, this);
        }));

        function loginUser() {
            return _ref.apply(this, arguments);
        }

        return loginUser;
    }(),
    logoutUser: function logoutUser() {
        if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
            var weUserData = webengage.state.getForever();
            if (typeof weUserData != 'undefined') {
                webengage.user.logout();
            }
        }
    },
    getDataFromUserParams: function getDataFromUserParams(fields) {
        var self = this;
        if (Array.isArray(fields)) {
            var data = {};
            fields.forEach(function (key) {
                data[key] = typeof user_params[key] != 'undefined' ? user_params[key] : null;
                if (!isNaN(data[key])) {
                    data[key] = Number(data[key]) || 0;
                } else if (self.IsJsonString(data[key])) {
                    data[key] = JSON.parse(data[key]) || {};
                } else {
                    data[key] = data[key] || "";
                }
            });
            return data;
        }
        return {};
    },
    setEventParams: function setEventParams(params) {
        this.eventParam = params;
        if (typeof this.eventParam.event_data == 'undefined') {
            this.eventParam.event_data = {};
        }
        if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
            var weUserData = webengage.state.getForever();
            var hashKey = '';
            if (typeof weUserData != 'undefined' && typeof weUserData['uattr'] != 'undefined') {
                if (typeof this.eventParam.event_data['sl_user_email'] !== 'string' || this.eventParam.event_data['sl_user_email'] == weUserData['cuid']) {
                    this.uattr = weUserData['uattr'];
                } else {
                    this.uattr = {};
                }
            }
            if (typeof this.eventParam.event_data['sl_user_email'] != 'undefined') {
                hashKey = this.eventParam.event_data['sl_user_email'];
            } else if (typeof this.uattr.we_email === 'string' && this.uattr.we_email) {
                this.user = this.uattr.we_email;
                hashKey = this.user;
            }
            if (typeof this.eventParam.event_data['sl_user_phone'] != 'undefined') {
                hashKey += "," + this.eventParam.event_data['sl_user_phone'];
            } else if (typeof this.uattr.we_phone === 'string' && this.uattr.we_phone) {
                hashKey += "," + weUserData.uattr['we_phone'];
            }
            this.eventParam.event_data['sl_user_email_hash'] = btoa(hashKey);
        }

        if (typeof this.eventParam.event_data['sl_user_type'] == 'undefined') {
            this.eventParam.event_data['sl_user_type'] = typeof user_params.sl_user_type !== 'undefined' ? user_params.sl_user_type : 'b2c';
        }
        if (typeof this.uattr['sl_user_type'] != 'undefined' && this.uattr['sl_user_type'] == 'b2b') {
            this.eventParam.event_data['sl_user_type'] = this.uattr['sl_user_type'];
        }
        this.eventParam.event_data['sl_event_time'] = Math.floor(new Date());
        this.eventParam.event_data['sl_utm_src'] = fetchUTMSource();
        var user = getUserInfo();
        for (userKey in WebTracking.commonUserAttr['sl_user_attr']) {
            if (typeof this.eventParam.event_data[userKey] == 'undefined' && typeof this.eventParam['user_attributes'] != 'undefined' && this.eventParam['user_attributes'].indexOf(userKey) != -1) this.eventParam.event_data[userKey] = user[WebTracking.commonUserAttr['sl_user_attr'][userKey]];
        }
        if (typeof this.eventParam != 'undefined' && typeof this.eventParam.common != 'undefined' && typeof WebTracking.commonData != 'undefined' && typeof WebTracking.commonData[this.eventParam.common] != 'undefined') {
            for (keyN in WebTracking.commonData[this.eventParam['common']]) {
                commonKey = WebTracking.commonData[this.eventParam['common']][keyN];
                if (typeof this.eventParam.event_data[commonKey] == 'undefined') {
                    var valueCommonKey = "";
                    if (typeof user_params[commonKey] != 'undefined' && user_params[commonKey] !== '') {
                        if (user_params[commonKey] === 'true') {
                            valueCommonKey = true;
                        } else if (user_params[commonKey] === 'false') {
                            valueCommonKey = false;
                        } else if (!isNaN(user_params[commonKey])) {
                            valueCommonKey = Number(user_params[commonKey]) || 0;
                        } else if (this.IsJsonString(user_params[commonKey])) {
                            valueCommonKey = JSON.parse(user_params[commonKey]) || {};
                        } else {
                            valueCommonKey = user_params[commonKey] || "";
                        }
                        if (valueCommonKey != "" && valueCommonKey != 0) this.eventParam.event_data[commonKey] = valueCommonKey;
                    }
                }
            }
        }
        if (typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes == 'undefined') {
            this.eventParam.user_attributes = WebTracking.commonUserAttr['user_attributes'];
        } else if (typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes != 'undefined') {
            this.eventParam.user_attributes = this.eventParam.user_attributes.concat(WebTracking.commonUserAttr['user_attributes']).filter(onlyUnique);
        }
        if (typeof this.eventParam != 'undefined' && typeof this.eventParam.common != 'undefined' && typeof WebTracking.commonUserAttr != 'undefined' && typeof WebTracking.commonUserAttr[this.eventParam.common] != 'undefined') {
            this.eventParam.user_attributes = this.eventParam.user_attributes.concat(WebTracking.commonUserAttr[this.eventParam.common]).filter(onlyUnique);
        }

        if (printGaInConsole) {
            console.log('this.eventParam.event_data', this.eventParam.event_data);
        }
    },
    // trigger fuction calls for doing tasks on an event
    triggerEvent: function triggerEvent(params) {
        // console.log(params)
        this.setEventParams(params);
        try {
            var fnCalls = [this.loginUser(), this.userAttributesWE(), this.eventPushWE(), this.eventPushSL(), this.userAttPushSL(), this.eventPushGA()];
            Promise.all(fnCalls).then(this.postEvent());
        } catch (err) {
            console.log('Event tracking error : ', err);
        }
    },
    userAttributesWE: function () {
        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
            var userAttrs, weUserData, userAttributeKey, uAttrName, sessionObj;
            return regeneratorRuntime.wrap(function _callee2$(_context2) {
                while (1) {
                    switch (_context2.prev = _context2.next) {
                        case 0:
                            if (typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes != 'undefined') {
                                userAttrs = {};

                                if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                                    weUserData = webengage.state.getForever();

                                    userAttrs = typeof weUserData != 'undefined' && typeof weUserData['uattr'] != 'undefined' ? weUserData['uattr'] : {};
                                }
                                for (index in this.eventParam.user_attributes) {
                                    userAttributeKey = this.eventParam.user_attributes[index];
                                    uAttrName = "";
                                    // console.log('userAttributeKey',userAttributeKey)

                                    if (typeof this.eventParam.userAttributesMap != 'undefined' && typeof this.eventParam.userAttributesMap[userAttributeKey] != 'undefined' && typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
                                        uAttrName = this.eventParam.userAttributesMap[userAttributeKey];
                                    } else if (typeof WebTracking.userAttributesMap[userAttributeKey] != 'undefined' && typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
                                        uAttrName = WebTracking.userAttributesMap[userAttributeKey];
                                    } else if (typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
                                        uAttrName = userAttributeKey;
                                    }
                                    if (uAttrName != '') {
                                        // console.log('uAttrName', userAttributeKey, WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]);
                                        if (WebTracking.commonUserAttr['we_location_attrs'].indexOf(uAttrName) != -1 && typeof webengage.util != 'undefined') {
                                            sessionObj = webengage.util.getSessionCookie();

                                            sessionObj[uAttrName] = this.eventParam.event_data[userAttributeKey]; //all manipulations you want to do with we_city, we_country and we_region
                                            webengage.util.setSessionCookie(sessionObj);
                                        } else {
                                            webengage.user.setAttribute(uAttrName, this.eventParam.event_data[userAttributeKey]);
                                        }
                                        this.userAttrPush[uAttrName] = this.eventParam.event_data[userAttributeKey];

                                        if (typeof this.eventParam['sl_user_attr_no_update'] != 'undefined' && typeof this.eventParam['sl_user_attr_no_update'][userAttributeKey] != 'undefined' && typeof userAttrs[this.eventParam['sl_user_attr_no_update'][userAttributeKey]] == 'undefined') {
                                            webengage.user.setAttribute(this.eventParam['sl_user_attr_no_update'][userAttributeKey], this.eventParam.event_data[userAttributeKey]);
                                            this.userAttrPush[this.eventParam['sl_user_attr_no_update'][userAttributeKey]] = this.eventParam.event_data[userAttributeKey];
                                        } else if (typeof WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey] != 'undefined' && typeof userAttrs[WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]] == 'undefined') {
                                            webengage.user.setAttribute(WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey], this.eventParam.event_data[userAttributeKey]);
                                            this.userAttrPush[WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]] = this.eventParam.event_data[userAttributeKey];
                                        }
                                    }
                                }
                                // console.log('update user attributes in WE',this.eventParam.user_attributes);
                                // console.log('user attributes event push to Kafka');
                            }

                        case 1:
                        case 'end':
                            return _context2.stop();
                    }
                }
            }, _callee2, this);
        }));

        function userAttributesWE() {
            return _ref2.apply(this, arguments);
        }

        return userAttributesWE;
    }(),
    // event push to WE
    eventPushWE: function () {
        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
            var obj_length, weData;
            return regeneratorRuntime.wrap(function _callee3$(_context3) {
                while (1) {
                    switch (_context3.prev = _context3.next) {
                        case 0:
                            if (typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined' && typeof this.eventParam.event_id != 'undefined' && typeof WebTracking.events[this.eventParam.event_id] != 'undefined' && WebTracking.weBarredEvents.indexOf(this.eventParam.event_id) == -1) {
                                obj_length = 0;

                                for (eventAttributeKey in this.eventParam.event_data) {
                                    // console.log('eventAttributeKey',eventAttributeKey)
                                    if (typeof this.eventParam.event_data[eventAttributeKey] == 'undefined' || this.eventParam.event_data[eventAttributeKey] == '') {
                                        delete this.eventParam.event_data[eventAttributeKey];
                                    } else {
                                        obj_length += 1;
                                    }
                                }
                                weData = this.eventParam.event_data;

                                weData['event_name'] = WebTracking.events[this.eventParam.event_id].action;
                                
                                if (obj_length > 0) {
                                    webengage.track(this.eventParam.event_id, this.eventParam.event_data);
                                }

                                //console.log('event push to WE', this.eventParam.event_data, obj_length);
                            }

                        case 1:
                        case 'end':
                            return _context3.stop();
                    }
                }
            }, _callee3, this);
        }));

        function eventPushWE() {
            return _ref3.apply(this, arguments);
        }

        return eventPushWE;
    }(),
    // event push to Kafka
    eventPushSL: function () {
        var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
            var obj_length, weUserData, params, userData;
            return regeneratorRuntime.wrap(function _callee4$(_context4) {
                while (1) {
                    switch (_context4.prev = _context4.next) {
                        case 0:
                            if (!(typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined' && typeof this.eventParam.event_id != 'undefined' && typeof WebTracking.events[this.eventParam.event_id] != 'undefined' && WebTracking.weBarredEvents.indexOf(this.eventParam.event_id) == -1)) {
                                _context4.next = 14;
                                break;
                            }

                            // webengage.track(WebTracking.events[this.eventParam.event_id].action, this.eventParam.event_data);
                            // console.log('event push to Kafka', this.eventParam.event_data);
                            obj_length = 0;


                            for (eventAttributeKey in this.eventParam.event_data) {
                                // console.log('eventAttributeKey',eventAttributeKey)
                                if (typeof this.eventParam.event_data[eventAttributeKey] == 'undefined' || this.eventParam.event_data[eventAttributeKey] == '') {
                                    delete this.eventParam.event_data[eventAttributeKey];
                                } else {
                                    obj_length += 1;
                                }
                            }
                            weData = this.cloneData(this.eventParam.event_data);
                            //Array.from(this.eventParam.event_data);
                            if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                                weUserData = webengage.state.getForever();

                                if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined') weData['we_user_id'] = weUserData['cuid'];
                                if (typeof weUserData != 'undefined' && typeof weUserData['luid'] != 'undefined') weData['we_anon_id'] = weUserData['luid'];
                            }
                            weData['sl_page_url'] = document.URL;
                            weData['event_name'] = WebTracking.events[this.eventParam.event_id].action;
                            weData['event_id'] = this.eventParam.event_id;
                            params = { "records": [{ "value": weData, "key": this.eventParam.event_id }] };

                            if (!(obj_length > 0)) {
                                _context4.next = 14;
                                break;
                            }

                            _context4.next = 12;
                            return this.sendEventsSL(params);

                        case 12:
                            if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                                weUserData = webengage.state.getForever();

                                if (typeof weUserData == 'undefined' || typeof weUserData != 'undefined' && typeof weUserData['cuid'] == 'undefined') {
                                    if (sessionStorage) {
                                        userData = JSON.parse(sessionStorage.getItem(this.event_data_key));

                                        if (typeof userData == 'undefined' || userData == null) {
                                            userData = [];
                                        }
                                        userData.push(weData);
                                        sessionStorage.setItem(this.event_data_key, JSON.stringify(userData));
                                        //setSlGlobalData(this.event_data_key,userData);
                                    }
                                }
                            }
                            if (printGaInConsole) console.log('event push to Kafka', params);

                        case 14:
                        case 'end':
                            return _context4.stop();
                    }
                }
            }, _callee4, this);
        }));

        function eventPushSL() {
            return _ref4.apply(this, arguments);
        }

        return eventPushSL;
    }(),
    // event push to Kafka
    userAttPushSL: function () {
        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
            var weData, weUserData, params, userData;
            return regeneratorRuntime.wrap(function _callee5$(_context5) {
                while (1) {
                    switch (_context5.prev = _context5.next) {
                        case 0:
                            if (!(typeof this.userAttrPush != 'undefined' && !this.isEmpty(this.userAttrPush))) {
                                _context5.next = 11;
                                break;
                            }

                            weData = {};

                            weData['sl_event_time'] = typeof this.userAttrPush['sl_event_time'] != 'undefined' ? this.userAttrPush['sl_event_time'] : Math.floor(new Date());
                            weData['sl_page_url'] = document.URL;
                            weData['user_attr'] = this.cloneData(this.userAttrPush);
                            //Array.from(this.userAttrPush);
                            if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                                weUserData = webengage.state.getForever();

                                if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined') weData['we_user_id'] = weUserData['cuid'];
                                if (typeof weUserData != 'undefined' && typeof weUserData['luid'] != 'undefined') weData['we_anon_id'] = weUserData['luid'];
                            }
                            params = { "records": [{ "value": weData, "key": 'we_user_attr_update' }] };
                            _context5.next = 9;
                            return this.sendEventsSL(params);

                        case 9:
                            if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                                weUserData = webengage.state.getForever();

                                if (typeof weUserData == 'undefined' || typeof weUserData != 'undefined' && typeof weUserData['cuid'] == 'undefined') {
                                    if (sessionStorage) {
                                        userData = JSON.parse(sessionStorage.getItem(this.user_attr_key));

                                        if (typeof userData == 'undefined' || userData == null) {
                                            userData = [];
                                        }
                                        userData.push(weData);
                                        sessionStorage.setItem(this.user_attr_key, JSON.stringify(userData));
                                        //setSlGlobalData(this.user_attr_key,userData);
                                    }
                                }
                            }
                            if (printGaInConsole) console.log('user att event push to Kafka', params);

                        case 11:
                        case 'end':
                            return _context5.stop();
                    }
                }
            }, _callee5, this);
        }));

        function userAttPushSL() {
            return _ref5.apply(this, arguments);
        }

        return userAttPushSL;
    }(),
    //send events to KAfka
    sendEventsSL: function sendEventsSL(params) {
        var xhr = new XMLHttpRequest();
        // xhr.withCredentials = true;
        xhr.open("POST", eventsSLURL, true);
        xhr.setRequestHeader("Content-Type", "application/vnd.kafka.json.v2+json;charset=utf-8;");
        // xhr.setRequestHeader("cache-control", "no-cache");
        // xhr.setRequestHeader("Authorization", "Basic " + btoa(eventsSLUser + ":" + eventsSLPass));
        xhr.onload = function () {
            if (printGaInConsole) console.log('sendEventsSL response', xhr.response);
            return xhr.response;
        };
        xhr.onerror = function () {
            if (printGaInConsole) console.log('sendEventsSL error response', xhr.response);
            return xhr.response;
        };

        xhr.send(JSON.stringify(params));
    },
    // parse event data and push event to GA
    eventPushGA: function () {
        var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
            return regeneratorRuntime.wrap(function _callee6$(_context6) {
                while (1) {
                    switch (_context6.prev = _context6.next) {
                        case 0:
                            if (!(typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined' && typeof this.eventParam.event_id != 'undefined' && typeof WebTracking.events[this.eventParam.event_id] != 'undefined')) {
                                _context6.next = 4;
                                break;
                            }

                            _context6.next = 3;
                            return this.preparePushParam();

                        case 3:
                            this.gaPush(_context6.sent);
                            // console.log('event push to GA', this.eventParam.event_data);
                            // console.log('event push to Kafka');

                        case 4:
                        case 'end':
                            return _context6.stop();
                    }
                }
            }, _callee6, this);
        }));

        function eventPushGA() {
            return _ref6.apply(this, arguments);
        }

        return eventPushGA;
    }(),
    postEvent: function postEvent() {
        var event = typeof this.eventParam.event_id != 'undefined' ? this.eventParam.event_id : "";
        if (printGaInConsole) {
            console.log('event done', event);
        }
    },
    preparePushParam: function preparePushParam() {
        if (typeof this.eventParam !== "undefined" && typeof this.eventParam.event_id !== "undefined") {

            if (typeof WebTracking.events[this.eventParam.event_id] !== "undefined") {
                var value = 0;
                var eventDetail = WebTracking.events[this.eventParam.event_id];
                var funnelString = eventDetail.category;
                var funnelAction = eventDetail.action;
                var funnelLabel = '';
                var noninteractiveness = eventDetail.noninteractiveness;

                if (eventDetail.labelRequired) {
                    funnelLabel = user_params.user_id || 'undefined';
                    for (eventAttributeKey in this.eventParam.event_data) {
                        // console.log('eventAttributeKey',eventAttributeKey)
                        if (WebTracking.gaBarredAttributes.indexOf(eventAttributeKey) == -1 && this.eventParam.event_data[eventAttributeKey] != '') {
                            if (_typeof(this.eventParam.event_data[eventAttributeKey]) == "object") funnelLabel += ' || ' + JSON.stringify(this.eventParam.event_data[eventAttributeKey]);else funnelLabel += ' || ' + this.eventParam.event_data[eventAttributeKey];
                        }
                    }
                    funnelLabel += typeof this.eventParam.entry_page != 'undefined' ? " || " + this.eventParam.entry_page : " || " + document.URL;
                    // console.log('funnelLabel',funnelLabel)
                    return ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                } else {
                    return ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                }
            }

            // console.log('preparePushParam',this.finalGaParam);
        }
    },
    gaPush: function gaPush(finalGaParam) {
        if(!Array.isArray(finalGaParam)) {
            console.error("SL:Error - gaPush invalid finalGaParam");
            return;
        }
        var arrLength = finalGaParam.length;
        if (arrLength > 0) {
            if (printGaInConsole) {
                console.log(finalGaParam);
            }
            if(typeof _gaq !=='undefined'){
                _gaq.push(finalGaParam);
            }
        }
    },
    isEmpty: function isEmpty(obj) {
        for (var key in obj) {
            if (obj.hasOwnProperty(key)) return false;
        }
        return true;
    },
    IsJsonString: function IsJsonString(str) {
        try {
            JSON.parse(str);
        } catch (e) {
            return false;
        }
        return true;
    },
    cloneData: function cloneData(data) {
        return JSON.parse(JSON.stringify(data));
    }
};
WebTracking.setUserParams = function(key, value) {
    user_params[key] = value;
};
// ===============================================================================================================
// WebTracking.eventReq = {
//     user : "",
//     event_data_key:'we_event_data',
//     user_attr_key:'we_attr_data',
//     uattr : {},
//     eventParam: [],
//     finalGaParam: [],
//     userAttrPush: {},
//     // check if WE logged in email is different than new event email and login, create user cookie
//     loginUser: async function () {
//         if ( typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined' && typeof this.eventParam.event_data['sl_user_email'] != 'undefined'
//             && this.eventParam.event_data['sl_user_email'] != '' && this.eventParam.event_data['sl_user_email'] != this.user) {
//             this.user = this.eventParam.event_data['sl_user_email'];
//             webengage.user.login(this.user);
//         }
//     },
//     logoutUser: function () {
//         if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//           var weUserData = webengage.state.getForever();
//           if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined') {
//             webengage.user.logout();
//           }
//         }
//     },
//     getDataFromUserParams: function(fields) {
//        var self = this;
//        if (Array.isArray(fields)) {
//            var data = {};
//            fields.forEach(function(key) {
//                data[key] = (typeof user_params[key] != 'undefined')?user_params[key]:null;
//                if (!isNaN(data[key])) {
//                    data[key] = Number(data[key]) || 0;
//                } else if (self.IsJsonString(data[key])) {
//                    data[key] = JSON.parse(data[key]) || {};
//                } else {
//                    data[key] = data[key] || "";
//                }
//            });
//            return data;
//        }
//        return {};
//    },
//     setEventParams: function(params){
//       this.eventParam = params;
//       if (typeof this.eventParam.event_data == 'undefined') {
//           this.eventParam.event_data = {}
//       }
//       if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//           var weUserData = webengage.state.getForever();
//           // if(!weUserData) return;
//            var hashKey = '';
//            if (typeof this.eventParam.event_data['sl_user_email'] != 'undefined') {
//                hashKey = this.eventParam.event_data['sl_user_email'];
//            } else if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined') {
//                this.user = weUserData['cuid'];
//                hashKey = this.user;
//            }
//            if (typeof this.eventParam.event_data['sl_user_phone'] != 'undefined') {
//                hashKey += "," + this.eventParam.event_data['sl_user_phone'];
//            } else if (typeof weUserData != 'undefined' && typeof weUserData['we_phone'] != 'undefined') {
//                hashKey += "," + weUserData['we_phone'];
//            }
//            this.eventParam.event_data['sl_user_email_hash'] = btoa(hashKey);
//            if (typeof weUserData != 'undefined' && typeof weUserData['uattr'] != 'undefined')
//               this.uattr = weUserData['uattr'];
//       }

//       if (typeof this.eventParam.event_data['sl_user_type'] == 'undefined') {
//           this.eventParam.event_data['sl_user_type'] = (typeof user_params.sl_user_type !== 'undefined')?user_params.sl_user_type:'b2c';
//       }
//       if ( typeof this.uattr['sl_user_type'] != 'undefined' && this.uattr['sl_user_type'] == 'b2b') {
//           this.eventParam.event_data['sl_user_type'] = this.uattr['sl_user_type'];
//       }
//       this.eventParam.event_data['sl_event_time'] = Math.floor(new Date());
//       this.eventParam.event_data['sl_utm_src'] = fetchUTMSource();
//       var user = getUserInfo();
//       for ( userKey in WebTracking.commonUserAttr['sl_user_attr'] ) {
//           if (typeof this.eventParam.event_data[userKey] == 'undefined' && typeof this.eventParam['user_attributes'] != 'undefined' && this.eventParam['user_attributes'].indexOf(userKey) != -1 )
//               this.eventParam.event_data[userKey] = user[WebTracking.commonUserAttr['sl_user_attr'][userKey]];
//       }
//       if (typeof this.eventParam != 'undefined' && typeof this.eventParam.common != 'undefined' && typeof WebTracking.commonData != 'undefined' && typeof WebTracking.commonData[this.eventParam.common] != 'undefined') {
//         for ( keyN in WebTracking.commonData[this.eventParam['common']] ) {
//           commonKey = WebTracking.commonData[this.eventParam['common']][keyN];
//           if (typeof this.eventParam.event_data[commonKey] == 'undefined') {
//             var valueCommonKey = "";
//             if(typeof user_params[commonKey] != 'undefined' && user_params[commonKey] !== ''){
//               if (user_params[commonKey] === 'true') {
//                   valueCommonKey = true;
//               } else if (user_params[commonKey] === 'false') {
//                   valueCommonKey = false;
//               } else if(!isNaN(user_params[commonKey])) {
//                 valueCommonKey = Number(user_params[commonKey]) || 0;
//               } else if( this.IsJsonString(user_params[commonKey])) {
//                 valueCommonKey = JSON.parse(user_params[commonKey]) || {};
//               } else {
//                 valueCommonKey = user_params[commonKey] || "";
//               }
//               if (valueCommonKey != "" && valueCommonKey != 0)
//                 this.eventParam.event_data[commonKey] = valueCommonKey;
//             }

//           }
//         }
//       }
//       if (typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes == 'undefined') {
//           this.eventParam.user_attributes = WebTracking.commonUserAttr['user_attributes'];
//       }
//       else if (typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes != 'undefined'){
//           this.eventParam.user_attributes = this.eventParam.user_attributes.concat(WebTracking.commonUserAttr['user_attributes']).filter( onlyUnique );
//       }
//       if (typeof this.eventParam != 'undefined' && typeof this.eventParam.common != 'undefined' && typeof WebTracking.commonUserAttr != 'undefined' && typeof WebTracking.commonUserAttr[this.eventParam.common] != 'undefined') {
//           this.eventParam.user_attributes = this.eventParam.user_attributes.concat(WebTracking.commonUserAttr[this.eventParam.common]).filter( onlyUnique );
//       }

//       if (printGaInConsole) {
//           console.log('this.eventParam.event_data',this.eventParam.event_data)
//       }
//     },
//     // trigger fuction calls for doing tasks on an event
//     triggerEvent: function (params) {
//        var self = this;
//        webengage.onReady(function() {
//         // console.log(params)
//         self.setEventParams(params);
//         try {
//             var fnCalls = [
//                 self.loginUser(),
//                 self.userAttributesWE(),
//                 self.eventPushWE(),
//                 self.eventPushSL(),
//                 self.userAttPushSL(),
//                 self.eventPushGA()];
//             Promise.all(fnCalls).then(self.postEvent());
//         } catch(err) {
//             console.log('Event tracking error : ',err)
//         }
//        });
//     },
//     userAttributesWE: async function () {
//         if ( typeof this.eventParam != 'undefined' && typeof this.eventParam.user_attributes != 'undefined') {
//             var userAttrs = {};
//             if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//                 var weUserData = webengage.state.getForever();
//                 userAttrs = typeof weUserData != 'undefined' && typeof weUserData['uattr'] != 'undefined' ? weUserData['uattr'] : {};
//             }
//             for (index in this.eventParam.user_attributes) {
//                 var userAttributeKey  = this.eventParam.user_attributes[index]
//                 var uAttrName = "";
//                 // console.log('userAttributeKey',userAttributeKey)
//                 if(typeof this.eventParam.userAttributesMap != 'undefined' && typeof this.eventParam.userAttributesMap[userAttributeKey] != 'undefined' && typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
//                     uAttrName = this.eventParam.userAttributesMap[userAttributeKey];
//                 } else if(typeof WebTracking.userAttributesMap[userAttributeKey] != 'undefined' && typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
//                     uAttrName = WebTracking.userAttributesMap[userAttributeKey];
//                 } else if(typeof this.eventParam.event_data[userAttributeKey] != 'undefined' && this.eventParam.event_data[userAttributeKey] != '') {
//                     uAttrName = userAttributeKey;
//                 }
//                 if (uAttrName != ''){
//                     // console.log('uAttrName', userAttributeKey, WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]);
//                     if(WebTracking.commonUserAttr['we_location_attrs'].indexOf(uAttrName) != -1 && typeof webengage.util != 'undefined') {
//                         var sessionObj         = webengage.util.getSessionCookie();
//                         sessionObj[uAttrName]  = this.eventParam.event_data[userAttributeKey]; //all manipulations you want to do with we_city, we_country and we_region
//                         webengage.util.setSessionCookie(sessionObj)
//                     } else {
//                         webengage.user.setAttribute(uAttrName, this.eventParam.event_data[userAttributeKey]);
//                     }
//                     this.userAttrPush[uAttrName] = this.eventParam.event_data[userAttributeKey];

//                     if (typeof this.eventParam['sl_user_attr_no_update'] !='undefined'
//                         && typeof this.eventParam['sl_user_attr_no_update'][userAttributeKey] != 'undefined'
//                         && typeof userAttrs[this.eventParam['sl_user_attr_no_update'][userAttributeKey]] == 'undefined') {
//                         webengage.user.setAttribute(this.eventParam['sl_user_attr_no_update'][userAttributeKey], this.eventParam.event_data[userAttributeKey]);
//                         this.userAttrPush[this.eventParam['sl_user_attr_no_update'][userAttributeKey]] = this.eventParam.event_data[userAttributeKey];
//                     } else if (typeof WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey] != 'undefined'
//                         && typeof userAttrs[WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]] == 'undefined') {
//                         webengage.user.setAttribute(WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey], this.eventParam.event_data[userAttributeKey]);
//                         this.userAttrPush[WebTracking.commonUserAttr['sl_user_attr_no_update'][userAttributeKey]] = this.eventParam.event_data[userAttributeKey];
//                     }
//                 }


//             }
//             // console.log('update user attributes in WE',this.eventParam.user_attributes);
//             // console.log('user attributes event push to Kafka');
//         }
//     },
//     // event push to WE
//     eventPushWE: async function () {
//         if ( typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined'
//             && typeof this.eventParam.event_id != 'undefined'
//             && typeof WebTracking.events[this.eventParam.event_id] != 'undefined'
//             && WebTracking.weBarredEvents.indexOf(this.eventParam.event_id) == -1) {
//             var obj_length = 0;
//             for (eventAttributeKey in this.eventParam.event_data) {
//                 // console.log('eventAttributeKey',eventAttributeKey)
//                 if(typeof this.eventParam.event_data[eventAttributeKey] == 'undefined' || this.eventParam.event_data[eventAttributeKey] == '') {
//                     delete this.eventParam.event_data[eventAttributeKey];
//                 } else {
//                     obj_length += 1;
//                 }
//             }
//             var weData = this.eventParam.event_data;
//             weData['event_name'] = WebTracking.events[this.eventParam.event_id].action;
//             if (obj_length > 0){
//                 webengage.track(this.eventParam.event_id, this.eventParam.event_data);

//             }

//             //console.log('event push to WE', this.eventParam.event_data, obj_length);
//         }

//     },
//     // event push to Kafka
//     eventPushSL: async function () {
//         if ( typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined'
//             && typeof this.eventParam.event_id != 'undefined'
//             && typeof WebTracking.events[this.eventParam.event_id] != 'undefined'
//             && WebTracking.weBarredEvents.indexOf(this.eventParam.event_id) == -1) {
//             // webengage.track(WebTracking.events[this.eventParam.event_id].action, this.eventParam.event_data);
//             // console.log('event push to Kafka', this.eventParam.event_data);
//             var obj_length = 0;

//             for (eventAttributeKey in this.eventParam.event_data) {
//                 // console.log('eventAttributeKey',eventAttributeKey)
//                 if (typeof this.eventParam.event_data[eventAttributeKey] == 'undefined' || this.eventParam.event_data[eventAttributeKey] == '') {
//                     delete this.eventParam.event_data[eventAttributeKey];
//                 } else {
//                     obj_length += 1;
//                 }
//             }
//             weData = this.cloneData(this.eventParam.event_data);
//             //Array.from(this.eventParam.event_data);
//             if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//                 var weUserData = webengage.state.getForever();
//                 if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined')
//                     weData['we_user_id'] = weUserData['cuid'];
//                 if (typeof weUserData != 'undefined' && typeof weUserData['luid'] != 'undefined')
//                     weData['we_anon_id'] =  weUserData['luid'];
//             }
//             weData['sl_page_url'] = document.URL;
//             weData['event_name'] = WebTracking.events[this.eventParam.event_id].action;
//             weData['event_id'] = this.eventParam.event_id;
//             var params = {"records":[{"value":weData,"key":this.eventParam.event_id}]}
//             if (obj_length > 0) {
//                 await this.sendEventsSL(params)
//                 if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//                   var weUserData = webengage.state.getForever();
//                   if (typeof weUserData == 'undefined' || (typeof weUserData != 'undefined' && typeof weUserData['cuid'] == 'undefined')) {
//                     if(sessionStorage) {
//                       var userData = JSON.parse(sessionStorage.getItem(this.event_data_key));
//                       if(typeof userData == 'undefined' || userData == null) {
//                         userData = [];
//                       }
//                       userData.push(weData);
//                       sessionStorage.setItem(this.event_data_key,JSON.stringify(userData))
//                       setSlGlobalData(this.event_data_key,userData);
//                     }
//                   }
//                 }
//                 if (printGaInConsole)
//                   console.log('event push to Kafka', params);
//             }
//         }

//     },
//     // event push to Kafka
//     userAttPushSL: async function () {
//         if ( typeof this.userAttrPush != 'undefined' && !this.isEmpty(this.userAttrPush)) {
//             var weData = {};
//             weData['sl_event_time'] = typeof this.userAttrPush['sl_event_time'] != 'undefined' ? this.userAttrPush['sl_event_time'] : Math.floor(new Date());
//             weData['sl_page_url'] = document.URL;
//             weData['user_attr'] = this.cloneData(this.userAttrPush);
//             //Array.from(this.userAttrPush);
//             if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//                 var weUserData = webengage.state.getForever();
//                 if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined')
//                     weData['we_user_id'] = weUserData['cuid'];
//                 if (typeof weUserData != 'undefined' && typeof weUserData['luid'] != 'undefined')
//                     weData['we_anon_id'] = weUserData['luid'];
//             }
//             var params = {"records":[{"value":weData,"key":'we_user_attr_update'}]};
//             await this.sendEventsSL(params);
//             if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
//               var weUserData = webengage.state.getForever();
//               if (typeof weUserData == 'undefined' || (typeof weUserData != 'undefined' && typeof weUserData['cuid'] == 'undefined')) {
//                 if(sessionStorage) {
//                   var userData = JSON.parse(sessionStorage.getItem(this.user_attr_key));
//                   if(typeof userData == 'undefined' || userData == null) {
//                     userData = [];
//                   }
//                   userData.push(weData);
//                   sessionStorage.setItem(this.user_attr_key,JSON.stringify(userData))
//                   setSlGlobalData(this.user_attr_key,userData);
//                 }
//               }
//             }
//             if (printGaInConsole)
//               console.log('user att event push to Kafka', params);
//         }

//     },
//     //send events to KAfka
//     sendEventsSL: function (params) {
//         var xhr = new XMLHttpRequest();
//         // xhr.withCredentials = true;
//         xhr.open("POST", eventsSLURL, true);
//         xhr.setRequestHeader("Content-Type", "application/vnd.kafka.json.v2+json;charset=utf-8;");
//         // xhr.setRequestHeader("cache-control", "no-cache");
//         // xhr.setRequestHeader("Authorization", "Basic " + btoa(eventsSLUser + ":" + eventsSLPass));
//         xhr.onload = function () {
//             if (printGaInConsole)
//                 console.log('sendEventsSL response',xhr.response)
//             return xhr.response;
//         };
//         xhr.onerror = function () {
//             if (printGaInConsole)
//                 console.log('sendEventsSL error response',xhr.response)
//             return xhr.response;
//         };

//         xhr.send(JSON.stringify(params));

//     },
//     // parse event data and push event to GA
//     eventPushGA: async function () {
//         if ( typeof this.eventParam != 'undefined' && typeof this.eventParam.event_data != 'undefined'
//             && typeof this.eventParam.event_id != 'undefined' && typeof WebTracking.events[this.eventParam.event_id] != 'undefined') {
//             await this.preparePushParam()
//             this.gaPush()
//             // console.log('event push to GA', this.eventParam.event_data);
//             // console.log('event push to Kafka');
//         }

//     },
//     postEvent: function () {
//         var event = typeof this.eventParam.event_id != 'undefined' ? this.eventParam.event_id : "";
//         if (printGaInConsole) {
//             console.log('event done', event);
//         }
//     },
//     preparePushParam: function () {
//         if (typeof this.eventParam !== "undefined" && typeof this.eventParam.event_id !== "undefined") {

//             if (typeof WebTracking.events[this.eventParam.event_id] !== "undefined") {
//                 var value = 0;
//                 var eventDetail = WebTracking.events[this.eventParam.event_id];
//                 var funnelString = eventDetail.category;
//                 var funnelAction = eventDetail.action;
//                 var funnelLabel = '';
//                 var noninteractiveness = eventDetail.noninteractiveness;

//                 if (eventDetail.labelRequired) {
//                     funnelLabel = user_params.user_id || 'undefined';
//                     for (eventAttributeKey in this.eventParam.event_data) {
//                         // console.log('eventAttributeKey',eventAttributeKey)
//                             if (WebTracking.gaBarredAttributes.indexOf(eventAttributeKey) == -1 && this.eventParam.event_data[eventAttributeKey] != '') {
//                                 if (typeof this.eventParam.event_data[eventAttributeKey] == "object")
//                                     funnelLabel += ' || ' + JSON.stringify(this.eventParam.event_data[eventAttributeKey]);
//                                 else
//                                     funnelLabel += ' || ' + this.eventParam.event_data[eventAttributeKey];
//                             }

//                     }
//                     funnelLabel += typeof this.eventParam.entry_page != 'undefined' ? " || " + this.eventParam.entry_page : " || " + document.URL;
//                     // console.log('funnelLabel',funnelLabel)
//                     this.finalGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
//                 } else {
//                     this.finalGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
//                 }
//             }

//             // console.log('preparePushParam',this.finalGaParam);

//         }
//     },
//     gaPush: function () {
//         var arrLength = this.finalGaParam.length;
//         if (arrLength > 0) {
//             if (printGaInConsole) {
//                 console.log(this.finalGaParam);
//             }
//             if(typeof _gaq !=='undefined'){
//                 _gaq.push(this.finalGaParam);
//             }
//         }
//     },
//     isEmpty: function (obj) {
//         for(var key in obj) {
//             if(obj.hasOwnProperty(key))
//                 return false;
//         }
//         return true;
//     },
//     IsJsonString: function (str) {
//       try {
//           JSON.parse(str);
//       } catch (e) {
//           return false;
//       }
//       return true;
//     },
//     cloneData: function (data) {
//       return JSON.parse(JSON.stringify(data));
//     }
// };
WebTracking.setUserParams = function(key, value) {
    user_params[key] = value;
}
WebTracking.eventReq.setType = function(value) {
    if (typeof value != 'undefined' && value != '') {
        if (value === 'true') {
            value = true;
        } else if (value === 'false') {
            value = false;
        } else if (!isNaN(value)) {
            value = Number(value) || 0;
        } else if (this.IsJsonString(value)) {
            value = JSON.parse(value) || {};
        } else {
            value = value || "";
        }
    } else {
        value = "";
    }
    return value;
}
WebTracking.setUserParams = function(key, value) {
    user_params[key] = value;
}
 /*------------- End : WebEvents.js-----------*/ 

 /*------------- Begin : CountryData.js-----------*/ 

var countryDataIe = [{"id":"34","name":"United States","code":"US","phnCode":"1"},{"id":"2","name":"Australia","code":"AU","phnCode":"61"},{"id":"14","name":"United Kingdom","code":"GB","phnCode":"44"},{"id":"6","name":"India","code":"IN","phnCode":"91"},{"id":"30","name":"Saudi Arabia","code":"SA","phnCode":"966"},{"id":"24","name":"United Arab Emirates","code":"AE","phnCode":"971"},{"id":"35","name":"Canada","code":"CA","phnCode":"1"},{"id":"213","name":"Singapore","code":"SG","phnCode":"65"},{"id":"23","name":"Switzerland","code":"CH","phnCode":"41"},{"id":"67","name":"South Africa","code":"ZA","phnCode":"27"},{"id":"104","name":"Afghanistan","code":"AF","phnCode":"93"},{"id":"111","name":"Aland Islands","code":"AX","phnCode":"358"},{"id":"107","name":"Albania","code":"AL","phnCode":"355"},{"id":"137","name":"Algeria","code":"DZ","phnCode":"213"},{"id":"109","name":"American Samoa","code":"AS","phnCode":"1684"},{"id":"103","name":"Andorra","code":"AD","phnCode":"376"},{"id":"74","name":"Angola","code":"AO","phnCode":"244"},{"id":"106","name":"Anguilla","code":"AI","phnCode":"1264"},{"id":"108","name":"Antarctica","code":"AQ","phnCode":"672"},{"id":"105","name":"Antigua and Barbuda","code":"AG","phnCode":"1268"},{"id":"50","name":"Argentina","code":"AR","phnCode":"54"},{"id":"93","name":"Armenia","code":"AM","phnCode":"374"},{"id":"110","name":"Aruba","code":"AW","phnCode":"297"},{"id":"20","name":"Austria","code":"AT","phnCode":"43"},{"id":"69","name":"Azerbaijan","code":"AZ","phnCode":"994"},{"id":"120","name":"Bahamas","code":"BS","phnCode":"1242"},{"id":"59","name":"Bahrain","code":"BH","phnCode":"973"},{"id":"113","name":"Bangladesh","code":"BD","phnCode":"880"},{"id":"112","name":"Barbados","code":"BB","phnCode":"1246"},{"id":"96","name":"Belarus","code":"BY","phnCode":"375"},{"id":"22","name":"Belgium","code":"BE","phnCode":"32"},{"id":"124","name":"Belize","code":"BZ","phnCode":"501"},{"id":"115","name":"Benin","code":"BJ","phnCode":"229"},{"id":"37","name":"Bermuda","code":"BM","phnCode":"1441"},{"id":"121","name":"Bhutan","code":"BT","phnCode":"975"},{"id":"118","name":"Bolivia","code":"BO","phnCode":"591"},{"id":"86","name":"Bosnia and Herzegovina","code":"BA","phnCode":"387"},{"id":"123","name":"Botswana","code":"BW","phnCode":"267"},{"id":"122","name":"Bouvet Island","code":"BV","phnCode":"47"},{"id":"51","name":"Brazil","code":"BR","phnCode":"55"},{"id":"164","name":"British Indian Ocean Territory","code":"IO","phnCode":"246"},{"id":"117","name":"Brunei Darussalam","code":"BN","phnCode":"673"},{"id":"41","name":"Bulgaria","code":"BG","phnCode":"359"},{"id":"114","name":"Burkina Faso","code":"BF","phnCode":"226"},{"id":"70","name":"Burundi","code":"BI","phnCode":"257"},{"id":"249","name":"Cambodia","code":"KH","phnCode":"855"},{"id":"129","name":"Cameroon","code":"CM","phnCode":"237"},{"id":"132","name":"Cape Verde","code":"CV","phnCode":"238"},{"id":"119","name":"Caribbean Netherlands ","code":"BQ","phnCode":"599"},{"id":"171","name":"Cayman Islands","code":"KY","phnCode":"1345"},{"id":"126","name":"Central African Republic","code":"CF","phnCode":"236"},{"id":"227","name":"Chad","code":"TD","phnCode":"235"},{"id":"52","name":"Chile","code":"CL","phnCode":"56"},{"id":"3","name":"China","code":"CN","phnCode":"86"},{"id":"134","name":"Christmas Island","code":"CX","phnCode":"61"},{"id":"125","name":"Cocos (Keeling) Islands","code":"CC","phnCode":"61"},{"id":"55","name":"Colombia","code":"CO","phnCode":"57"},{"id":"168","name":"Comoros","code":"KM","phnCode":"269"},{"id":"81","name":"Congo","code":"CG","phnCode":"242"},{"id":"73","name":"Congo, Democratic Republic of","code":"CD","phnCode":"243"},{"id":"128","name":"Cook Islands","code":"CK","phnCode":"682"},{"id":"130","name":"Costa Rica","code":"CR","phnCode":"506"},{"id":"127","name":"Cote d'Ivoire","code":"CI","phnCode":"225"},{"id":"48","name":"Croatia","code":"HR","phnCode":"385"},{"id":"131","name":"Cuba","code":"CU","phnCode":"53"},{"id":"133","name":"Curacao","code":"CW","phnCode":"599"},{"id":"97","name":"Cyprus","code":"CY","phnCode":"357"},{"id":"39","name":"Czech Republic","code":"CZ","phnCode":"420"},{"id":"31","name":"Denmark","code":"DK","phnCode":"45"},{"id":"49","name":"Djibouti","code":"DJ","phnCode":"253"},{"id":"135","name":"Dominica","code":"DM","phnCode":"1767"},{"id":"136","name":"Dominican Republic","code":"DO","phnCode":"1809"},{"id":"138","name":"Ecuador","code":"EC","phnCode":"593"},{"id":"68","name":"Egypt","code":"EG","phnCode":"20"},{"id":"223","name":"El Salvador","code":"SV","phnCode":"503"},{"id":"154","name":"Equatorial Guinea","code":"GQ","phnCode":"240"},{"id":"140","name":"Eritrea","code":"ER","phnCode":"291"},{"id":"89","name":"Estonia","code":"EE","phnCode":"372"},{"id":"141","name":"Ethiopia","code":"ET","phnCode":"251"},{"id":"143","name":"Falkland Islands","code":"FK","phnCode":"500"},{"id":"145","name":"Faroe Islands","code":"FO","phnCode":"298"},{"id":"142","name":"Fiji","code":"FJ","phnCode":"679"},{"id":"42","name":"Finland","code":"FI","phnCode":"358"},{"id":"13","name":"France","code":"FR","phnCode":"33"},{"id":"148","name":"French Guiana","code":"GF","phnCode":"594"},{"id":"203","name":"French Polynesia","code":"PF","phnCode":"689"},{"id":"228","name":"French Southern Territories","code":"TF","phnCode":"262"},{"id":"146","name":"Gabon","code":"GA","phnCode":"241"},{"id":"152","name":"Gambia","code":"GM","phnCode":"220"},{"id":"66","name":"Georgia","code":"GE","phnCode":"995"},{"id":"15","name":"Germany","code":"DE","phnCode":"49"},{"id":"150","name":"Ghana","code":"GH","phnCode":"233"},{"id":"98","name":"Gibraltar","code":"GI","phnCode":"350"},{"id":"18","name":"Greece","code":"GR","phnCode":"30"},{"id":"151","name":"Greenland","code":"GL","phnCode":"299"},{"id":"147","name":"Grenada","code":"GD","phnCode":"1473"},{"id":"100","name":"Guadeloupe","code":"GP","phnCode":"590"},{"id":"157","name":"Guam","code":"GU","phnCode":"1671"},{"id":"156","name":"Guatemala","code":"GT","phnCode":"502"},{"id":"149","name":"Guernsey","code":"GG","phnCode":"44"},{"id":"153","name":"Guinea","code":"GN","phnCode":"224"},{"id":"158","name":"Guinea-Bissau","code":"GW","phnCode":"245"},{"id":"102","name":"Guyana","code":"GY","phnCode":"592"},{"id":"161","name":"Haiti","code":"HT","phnCode":"509"},{"id":"159","name":"Heard and McDonald Islands","code":"HM","phnCode":null},{"id":"160","name":"Honduras","code":"HN","phnCode":"504"},{"id":"9","name":"Hong Kong","code":"HK","phnCode":"852"},{"id":"45","name":"Hungary","code":"HU","phnCode":"36"},{"id":"78","name":"Iceland","code":"IS","phnCode":"354"},{"id":"162","name":"Indonesia","code":"ID","phnCode":"62"},{"id":"32","name":"Iran","code":"IR","phnCode":"98"},{"id":"64","name":"Iraq","code":"IQ","phnCode":"964"},{"id":"40","name":"Ireland","code":"IE","phnCode":"353"},{"id":"163","name":"Isle of Man","code":"IM","phnCode":"44"},{"id":"25","name":"Israel","code":"IL","phnCode":"972"},{"id":"17","name":"Italy","code":"IT","phnCode":"39"},{"id":"165","name":"Jamaica","code":"JM","phnCode":"1876"},{"id":"4","name":"Japan","code":"JP","phnCode":"81"},{"id":"83","name":"Jersey","code":"JE","phnCode":"44"},{"id":"63","name":"Jordan","code":"JO","phnCode":"962"},{"id":"28","name":"Kazakhstan","code":"KZ","phnCode":"7"},{"id":"166","name":"Kenya","code":"KE","phnCode":"254"},{"id":"167","name":"Kiribati","code":"KI","phnCode":"686"},{"id":"58","name":"Kuwait","code":"KW","phnCode":"965"},{"id":"91","name":"Kyrgyzstan","code":"KG","phnCode":"996"},{"id":"172","name":"Lao People's Democratic Republic","code":"LA","phnCode":"856"},{"id":"90","name":"Latvia","code":"LV","phnCode":"371"},{"id":"60","name":"Lebanon","code":"LB","phnCode":"961"},{"id":"176","name":"Lesotho","code":"LS","phnCode":"266"},{"id":"175","name":"Liberia","code":"LR","phnCode":"231"},{"id":"92","name":"Libya","code":"LY","phnCode":"218"},{"id":"82","name":"Liechtenstein","code":"LI","phnCode":"423"},{"id":"75","name":"Lithuania","code":"LT","phnCode":"370"},{"id":"47","name":"Luxembourg","code":"LU","phnCode":"352"},{"id":"185","name":"Macau","code":"MO","phnCode":"853"},{"id":"80","name":"Macedonia","code":"MK","phnCode":"389"},{"id":"180","name":"Madagascar","code":"MG","phnCode":"261"},{"id":"191","name":"Malawi","code":"MW","phnCode":"265"},{"id":"7","name":"Malaysia","code":"MY","phnCode":"60"},{"id":"190","name":"Maldives","code":"MV","phnCode":"960"},{"id":"182","name":"Mali","code":"ML","phnCode":"223"},{"id":"189","name":"Malta","code":"MT","phnCode":"356"},{"id":"181","name":"Marshall Islands","code":"MH","phnCode":"692"},{"id":"101","name":"Martinique","code":"MQ","phnCode":"596"},{"id":"187","name":"Mauritania","code":"MR","phnCode":"222"},{"id":"99","name":"Mauritius","code":"MU","phnCode":"230"},{"id":"248","name":"Mayotte","code":"YT","phnCode":"262"},{"id":"36","name":"Mexico","code":"MX","phnCode":"52"},{"id":"144","name":"Micronesia, Federated States of","code":"FM","phnCode":"691"},{"id":"79","name":"Moldova","code":"MD","phnCode":"373"},{"id":"177","name":"Monaco","code":"MC","phnCode":"377"},{"id":"184","name":"Mongolia","code":"MN","phnCode":"976"},{"id":"178","name":"Montenegro","code":"ME","phnCode":"382"},{"id":"188","name":"Montserrat","code":"MS","phnCode":"1664"},{"id":"250","name":"Morocco","code":"MA","phnCode":"212"},{"id":"192","name":"Mozambique","code":"MZ","phnCode":"258"},{"id":"183","name":"Myanmar","code":"MM","phnCode":"95"},{"id":"193","name":"Namibia","code":"NA","phnCode":"264"},{"id":"199","name":"Nauru","code":"NR","phnCode":"674"},{"id":"198","name":"Nepal","code":"NP","phnCode":"977"},{"id":"21","name":"Netherlands","code":"NL","phnCode":"31"},{"id":"194","name":"New Caledonia","code":"NC","phnCode":"687"},{"id":"201","name":"New Zealand","code":"NZ","phnCode":"64"},{"id":"197","name":"Nicaragua","code":"NI","phnCode":"505"},{"id":"195","name":"Niger","code":"NE","phnCode":"227"},{"id":"77","name":"Nigeria","code":"NG","phnCode":"234"},{"id":"200","name":"Niue","code":"NU","phnCode":"683"},{"id":"196","name":"Norfolk Island","code":"NF","phnCode":"672"},{"id":"170","name":"North Korea","code":"KP","phnCode":"850"},{"id":"186","name":"Northern Mariana Islands","code":"MP","phnCode":"1670"},{"id":"33","name":"Norway","code":"NO","phnCode":"47"},{"id":"62","name":"Oman","code":"OM","phnCode":"968"},{"id":"85","name":"Pakistan","code":"PK","phnCode":"92"},{"id":"208","name":"Palau","code":"PW","phnCode":"680"},{"id":"87","name":"Palestinian Territory, Occupied","code":"PS","phnCode":"970"},{"id":"54","name":"Panama","code":"PA","phnCode":"507"},{"id":"204","name":"Papua New Guinea","code":"PG","phnCode":"675"},{"id":"88","name":"Paraguay","code":"PY","phnCode":"595"},{"id":"202","name":"Peru","code":"PE","phnCode":"51"},{"id":"11","name":"Philippines","code":"PH","phnCode":"63"},{"id":"206","name":"Pitcairn","code":"PN","phnCode":"870"},{"id":"38","name":"Poland","code":"PL","phnCode":"48"},{"id":"29","name":"Portugal","code":"PT","phnCode":"351"},{"id":"207","name":"Puerto Rico","code":"PR","phnCode":"1"},{"id":"61","name":"Qatar","code":"QA","phnCode":"974"},{"id":"209","name":"Reunion","code":"RE","phnCode":"262"},{"id":"44","name":"Romania","code":"RO","phnCode":"40"},{"id":"27","name":"Russian Federation","code":"RU","phnCode":"7"},{"id":"210","name":"Rwanda","code":"RW","phnCode":"250"},{"id":"116","name":"Saint Barthelemy","code":"BL","phnCode":"590"},{"id":"214","name":"Saint Helena","code":"SH","phnCode":"290"},{"id":"169","name":"Saint Kitts and Nevis","code":"KN","phnCode":"1869"},{"id":"173","name":"Saint Lucia","code":"LC","phnCode":"1758"},{"id":"244","name":"Saint Vincent and the Grenadines","code":"VC","phnCode":"1784"},{"id":"179","name":"Saint-Martin (France)","code":"MF","phnCode":"1599"},{"id":"224","name":"Saint-Martin (Pays-Bas)","code":"SX","phnCode":"1721"},{"id":"247","name":"Samoa","code":"WS","phnCode":"685"},{"id":"217","name":"San Marino","code":"SM","phnCode":"378"},{"id":"222","name":"Sao Tome and Principe","code":"ST","phnCode":"239"},{"id":"218","name":"Senegal","code":"SN","phnCode":"221"},{"id":"76","name":"Serbia","code":"RS","phnCode":"381"},{"id":"84","name":"Seychelles","code":"SC","phnCode":"248"},{"id":"216","name":"Sierra Leone","code":"SL","phnCode":"232"},{"id":"46","name":"Slovakia (Slovak Republic)","code":"SK","phnCode":"421"},{"id":"43","name":"Slovenia","code":"SI","phnCode":"386"},{"id":"211","name":"Solomon Islands","code":"SB","phnCode":"677"},{"id":"219","name":"Somalia","code":"SO","phnCode":"252"},{"id":"155","name":"South Georgia and the South Sandwich Islands","code":"GS","phnCode":"500"},{"id":"8","name":"South Korea","code":"KR","phnCode":"82"},{"id":"221","name":"South Sudan","code":"SS","phnCode":"211"},{"id":"19","name":"Spain","code":"ES","phnCode":"34"},{"id":"174","name":"Sri Lanka","code":"LK","phnCode":"94"},{"id":"205","name":"St. Pierre and Miquelon","code":"PM","phnCode":"508"},{"id":"212","name":"Sudan","code":"SD","phnCode":"249"},{"id":"220","name":"Suriname","code":"SR","phnCode":"597"},{"id":"215","name":"Svalbard and Jan Mayen Islands","code":"SJ","phnCode":"47"},{"id":"225","name":"Swaziland","code":"SZ","phnCode":"268"},{"id":"16","name":"Sweden","code":"SE","phnCode":"46"},{"id":"57","name":"Syria","code":"SY","phnCode":"963"},{"id":"10","name":"Taiwan","code":"TW","phnCode":"886"},{"id":"230","name":"Tajikistan","code":"TJ","phnCode":"992"},{"id":"238","name":"Tanzania","code":"TZ","phnCode":"255"},{"id":"5","name":"Thailand","code":"TH","phnCode":"66"},{"id":"232","name":"Timor-Leste","code":"TL","phnCode":"670"},{"id":"229","name":"Togo","code":"TG","phnCode":"228"},{"id":"231","name":"Tokelau","code":"TK","phnCode":"690"},{"id":"235","name":"Tonga","code":"TO","phnCode":"676"},{"id":"236","name":"Trinidad and Tobago","code":"TT","phnCode":"1868"},{"id":"234","name":"Tunisia","code":"TN","phnCode":"216"},{"id":"65","name":"Turkey","code":"TR","phnCode":"90"},{"id":"233","name":"Turkmenistan","code":"TM","phnCode":"993"},{"id":"226","name":"Turks and Caicos Islands","code":"TC","phnCode":"1649"},{"id":"237","name":"Tuvalu","code":"TV","phnCode":"688"},{"id":"239","name":"Uganda","code":"UG","phnCode":"256"},{"id":"26","name":"Ukraine","code":"UA","phnCode":"380"},{"id":"240","name":"United States Minor Outlying Islands","code":"UM","phnCode":"699"},{"id":"241","name":"Uruguay","code":"UY","phnCode":"598"},{"id":"242","name":"Uzbekistan","code":"UZ","phnCode":"998"},{"id":"245","name":"Vanuatu","code":"VU","phnCode":"678"},{"id":"243","name":"Vatican","code":"VA","phnCode":"39"},{"id":"53","name":"Venezuela","code":"VE","phnCode":"58"},{"id":"12","name":"Vietnam","code":"VN","phnCode":"84"},{"id":"94","name":"Virgin Islands (British)","code":"VG","phnCode":"1284"},{"id":"56","name":"Virgin Islands (U.S.)","code":"VI","phnCode":"1340"},{"id":"246","name":"Wallis and Futuna Islands","code":"WF","phnCode":"681"},{"id":"139","name":"Western Sahara","code":"EH","phnCode":"212"},{"id":"95","name":"Yemen","code":"YE","phnCode":"967"},{"id":"71","name":"Zambia","code":"ZM","phnCode":"260"},{"id":"72","name":"Zimbabwe","code":"ZW","phnCode":"263"}] /*------------- End : CountryData.js-----------*/ 

 /*------------- Begin : FrsGaEvents.js-----------*/ 

/**
 *
 * Frs Ga Events
 * Author : Syed Asfaquz Zaman<syed.asfaquz@simplilearn.com>
 */
var CaldonGA = CaldonGA || {};
CaldonGA.events = {
    //job assist page
    'jobAssistUserClickSubmitButton': {'category': "Job Assist - Engagement", 'action': "Submit profile", 'labelRequired': true, 'noninteractiveness': false},

    //listing page
    'listingchangeSegment': {'category': "FRS - Engagement", 'action': "Category Select - dropdown", 'labelRequired': true, 'noninteractiveness': false},
    'resoursetypeselect': {'category': "FRS - Engagement", 'action': "Resource Type Select - Tab", 'labelRequired': true, 'noninteractiveness': false},
    'sharingiconclick': {'category': "FRS - Engagement", 'action': "Sharing icon clicked", 'labelRequired': true, 'noninteractiveness': false},

    //On demand webinar GA
    'clickPlayVideoButton': {'category': "FRS - Lead Capture", 'action': "Webcast Lead form Clicked", 'labelRequired': true, 'noninteractiveness': false},
    'playvideoleadinitiate': {'category': "FRS - Lead Capture", 'action': "Lead process Initiated", 'labelRequired': true, 'noninteractiveness': false},
    'clicksOnLeadSubmitButton' : {'category': 'On-Demand-Webinar:Click_Submit_Button', 'action': 'User clicks submit button to give lead', 'labelRequired': true, 'noninteractiveness': false},

    //Caldon Detail Page
    'detailarticleLeadPopUpSubmitted': {'category': "FRS - Pop up Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
    'detailebookLeadSubmitted': {'category': 'FRS - Ebook Lead Capture', 'action': 'User clicks on the download button', 'labelRequired': true, 'noninteractiveness': false},
    'detailwebinarLeadSubmitted': {'category': "FRS - Lead Capture", 'action': "Lead Submitted", 'labelRequired': true, 'noninteractiveness': false},
    'detailonscroll': {'category': "FRS - Engagement", 'action': "Scroll", 'labelRequired': true, 'noninteractiveness': false},
    'detailpanelClickedOnResource': {'category': "FRS - Navigation", 'action': "Resource Card", 'labelRequired': true, 'noninteractiveness': false},
    'detailauthornameclick': {'category': "FRS - Navigation", 'action': "Author Name clicked", 'labelRequired': true, 'noninteractiveness': false},
    'detailarticleCommentClick': {'category': "FRS - Engagement", 'action': "Leave Comment clicked", 'labelRequired': true, 'noninteractiveness': false},
    'detailhomeClicked': {'category': "FRS - Navigation", 'action': "FRS - Home page icon", 'labelRequired': true, 'noninteractiveness': false},
    'SuggestedArticleClicked' : {'category': "FRS - Navigation", 'action': "Suggested article clicked", 'labelRequired': true, 'noninteractiveness': false},


    //Caldon Detail Page
    'detailresourceConsumed': {'category': 'FRS - Engagement', 'action': 'Scroll', 'labelRequired': true, 'noninteractiveness': false},
    'detailarticleLeadPopUp': {'category': 'FRS - Pop up Lead Capture', 'action': 'Lead Pop up Seen', 'labelRequired': true, 'noninteractiveness': true},
    'detailarticleLeadPopUp45': {'category': 'FRS - Pop up Lead Capture ', 'action': 'Lead Pop up Seen', 'labelRequired': true, 'noninteractiveness': true},
    // 'detailtimeSpendSingleResource': {'category': 'Details_Page:time_spend_on_one_resource', 'action': 'Change of URL', 'labelRequired': true, 'noninteractiveness': false},
    'detailarticleLeadPopUpInitiated': {'category': 'FRS - Pop up Lead Capture', 'action': 'User type on email section to enter details', 'labelRequired': true, 'noninteractiveness': true},
    'detailarticleLeadPopUpInitiated45': {'category': 'FRS - Pop up Lead Capture', 'action': 'User enters email in 45 second lead pop up', 'labelRequired': true, 'noninteractiveness': true},
    'detailarticleCommentTopClick': {'category': 'Details_Page:article_comments_top_click', 'action': 'User clicks on comments link on top of article and gets scrolled down to comments section', 'labelRequired': true, 'noninteractiveness': false},
    //'detailarticleCommentSubmitted': {'category': 'Details_Page:article_comment_submitted', 'action': 'User clicks on submit button of the comment', 'labelRequired': true, 'noninteractiveness': false},
    'detailresourceShared': {'category': 'FRS - Engagement', 'action': 'Sharing icon clicked', 'labelRequired': true, 'noninteractiveness': false},
    'detailpopularTab': {'category': 'Details_Page:Popular_Tab', 'action': 'User clicks on Popular Tab while on Latest Tab', 'labelRequired': true, 'noninteractiveness': false},
    'detaillatestTab': {'category': 'Details_Page:Latest_Tab', 'action': 'User clicks on Latest Tab while on Popular Tab', 'labelRequired': false, 'noninteractiveness': false},
    'detailchangeSegment': {'category': 'Details_Page:Change_Segment', 'action': 'User clicks on drop down menu to change segment', 'labelRequired': true, 'noninteractiveness': false},
    'detailebookLeadInitiated': {'category': 'FRS - Pop up Lead Capture', 'action': 'Ebook Lead process Initiated', 'labelRequired': true, 'noninteractiveness': false},
    'detailwebinarLeadInitiated': {'category': 'FRS - Pop up Lead Capture', 'action': 'Webinar Lead process Initiated', 'labelRequired': true, 'noninteractiveness': false},

    'detailEnterpriseClickRegister': {'category':'Details_Page:Enterprise_Click_Register','action':'User clicks on register/download of an Enterprise Resource','labelRequired': true, 'noninteractiveness': false},

    // 'detailvideoWatched': {'category': 'Details_Page:Video_Watched', 'action': 'User clicks on play video', 'labelRequired': true, 'noninteractiveness': false},
    'detailredirectionToSimplilearnHome': {'category': 'Navigation', 'action': 'Simplilearn Logo', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewOtherWebinar': {'category': 'Details_Page:Webinars', 'action': 'User click on view other webinars', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewOtherEbook': {'category': 'Details_Page:Ebooks', 'action': 'User click on view other ebooks', 'labelRequired': true, 'noninteractiveness': false},

    'detailTabClick' : {'category': 'Details_Page:Tab_Click','action':'The user clicks on this of details page', 'labelRequired': true, 'noninteractiveness': false},
//    'detailTabClickWebinars' : {'category': 'Details_Page:Tab_Click_Webinars','action':'The user clicks on the Webinars tab of details page', 'labelRequired': true, 'noninteractiveness': false},
//    'detailTabClickEbooks' : {'category': 'Details_Page:Tab_Click_Ebooks','action':'The user clicks on the Ebooks tab of details page', 'labelRequired': true, 'noninteractiveness': false},
//    'detailTabClickAllResources' : {'category': 'Details_Page:Tab_Click_All Resources','action':'The user clicks on the All Resources tab of details page', 'labelRequired': true, 'noninteractiveness': false},

    //Caldon Listing Page
    'listinghomeClicked': {'category': 'Listing_Page:Home_Clicked', 'action': 'User clicks home to go back to Free resource landing page', 'labelRequired': true, 'noninteractiveness': false},
    'listingpopularTab': {'category': 'Listing_Page:Popular_Tab', 'action': 'User clicks on Popular Tab while on Latest Tab', 'labelRequired': true, 'noninteractiveness': false},
    'listinglatestTab': {'category': 'Listing_Page:Latest_Tab', 'action': 'User clicks on Latest Tab while on Popular Tab', 'labelRequired': false, 'noninteractiveness': false},
    'listingresourceShared': {'category': 'Listing_Page:resource_shared', 'action': 'Click on fb, linkedin, twitter & g+ share', 'labelRequired': true, 'noninteractiveness': false},
    'listingredirectionToSimplilearnHome': {'category': 'Navigation', 'action': 'Simplilearn Logo', 'labelRequired': true, 'noninteractiveness': false},
    'listingviewmoreClicked': {'category': 'Listing_Page:Click_on_View_more', 'action': 'User clicks on view more on the Listing page to see more segments', 'labelRequired': false, 'noninteractiveness': false},
    'listingresourceCard': {'category': 'Listing_page:Click_on_resource_card', 'action': 'User clicks on the resource (article/ebook/webinar/video) card', 'labelRequired': true, 'noninteractiveness': false},
    //Caldon Home Page
    'homepopularTab': {'category': 'Homepage:Popular_Tab', 'action': 'User clicks on Popular Tab while on Latest Tab', 'labelRequired': true, 'noninteractiveness': false},
    'homelatestTab': {'category': 'Homepage:Latest_Tab', 'action': 'User clicks on Latest Tab while on Popular Tab', 'labelRequired': false, 'noninteractiveness': false},
    'homeredirectionToSimplilearnHome': {'category': 'Navigation', 'action': 'Simplilearn Logo', 'labelRequired': true, 'noninteractiveness': false},
    'homeviewmoreClicked': {'category': 'Homepage:View_More', 'action': 'User clicks on the view more button on homepage', 'labelRequired': false, 'noninteractiveness': false},
    'homeviewmoreSegmentClicked': {'category': 'Homepage:Segment_Click_More', 'action': 'User clicks on the more of a segment', 'labelRequired': true, 'noninteractiveness': false},
    'homeScrollSegment': {'category': 'Homepage:Segment_Explore_Right_Scroll', 'action': 'User clicks on right scroll of a segment', 'labelRequired': true, 'noninteractiveness': false},

    //On demand webinar GA

    'startLeadOnForm' : {'category': 'On-Demand-Webinar:Start_Lead_Form', 'action': 'User starts giving lead on the form', 'labelRequired': true, 'noninteractiveness': false},
    'videoStartsPlaying' : {'category': 'On-Demand-Webinar:Video_Starts_Playing', 'action': 'Video starts playing', 'labelRequired': true, 'noninteractiveness': false},
    'videoStopsPlaying' : {'category': 'On-Demand-Webinar:Video_Stops_Playing', 'action': 'Video stops playing', 'labelRequired': true, 'noninteractiveness': false},
    'closeVideoMidway' : {'category': 'On-Demand-Webinar:Close_Video_Midway', 'action': 'User closes video midway', 'labelRequired': true, 'noninteractiveness': false},
    'closeVideoByClickingCloseButton' : {'category': 'On-Demand-Webinar:Close_Video_Clicking_Close_Button', 'action': 'User closes video by clicking close button', 'labelRequired': true, 'noninteractiveness': false},

    // Persistent pop
    'detailViewPersistentPopSeen': {'category': 'FRS - Pop up Lead Capture', 'action': 'Lead Pop up Closed', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewClickSmallPopUp': {'category': 'FRS - Pop up Lead Capture', 'action': 'Persistent Pop up Clicked', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewPersistentPopupCancel': {'category': 'User cancels the pop up', 'action': 'Lead Pop up Closed.', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewPersistentPopupSubmit': {'category': 'User submits the pop up', 'action': 'The user submits the lead in the pop up created by Persistent pop up', 'labelRequired': true, 'noninteractiveness': false},
    'detailViewPopupGotoCourse': {'category': 'FRS - Pop up Lead Capture', 'action': 'Lead Pop up Clicked', 'labelRequired': true, 'noninteractiveness': false},

    //job assist page
    'jobAssistUserViewJobLeadForm' : {'category':'JobAssist','action':'User views the Job Lead form','labelRequired': false, 'noninteractiveness': false},
    'jobAssistUserNotApplicable' : {'category':'JobAssist','action':'User not applicable for the Job Assist Program','labelRequired': true, 'noninteractiveness': false},

    //GDPR Optin Checkbox Ga Events
    'gdprOptinCheckboxChecked':{'category': "Engagement", 'action': "Click on Consent check box", 'labelRequired': true, 'noninteractiveness': false},
};


CaldonGA.triggerEvent = {
    eventParam: [],
    finalGaParam: [],
    tempParam: [],
    preparePushParam: function () {
        if (typeof this.eventParam !== "undefined" && typeof this.eventParam.eventType !== "undefined") {

            if (typeof CaldonGA.events[this.eventParam.eventType] !== "undefined") {
                var value = 0;
                var eventDetail = CaldonGA.events[this.eventParam.eventType];
                var funnelString = eventDetail.category;
                var funnelAction = eventDetail.action;
                var funnelLabel = '';
                var noninteractiveness = eventDetail.noninteractiveness;

                if (eventDetail.labelRequired) {
                    funnelLabel = this.eventParam.label;
                    this.finalGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                    this.tempGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                } else {
                    this.finalGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                    this.tempGaParam = ['_trackEvent', funnelString, funnelAction, funnelLabel, value, noninteractiveness];
                }


            }

        }
    },
    gagInitiate: function (param) {
        this.eventParam = param;
        this.preparePushParam();
        this.gagPush();
    },
    gagPush: function () {
        var arrLength = this.finalGaParam.length;
        if (arrLength > 0) {
            if (printGaInConsole) {
                console.log(this.tempGaParam);
            }
            _gaq.push(this.finalGaParam);
        }


    }
};



function redirectToHomeEvent() {
    var referrerUrl = window.location.href;
    var pagename = document.getElementById("frs-page-name").value;

    var eventObj = {};
    if (pagename === "frs_details") {
        eventObj = {
            'eventType': 'detailredirectionToSimplilearnHome',
            'label': user_params.user_id +  ' || ' + referrerUrl + ' || frs_details'
        };
    }

    if (pagename === "frs_content_listing") {
        eventObj = {
            'eventType': 'listingredirectionToSimplilearnHome',
            'label': user_params.user_id +  ' || ' + referrerUrl + ' || frs_content_listing'
        };
    }

    if (pagename === "frs_content_home") {
        eventObj = {
            'eventType': 'homeredirectionToSimplilearnHome',
            'label': user_params.user_id +  ' || ' + referrerUrl + ' || frs_content_home'
        };
    }

    if (JSON.stringify(eventObj) !== '{}') {
        CaldonGA.triggerEvent.gagInitiate(eventObj);
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_nav_user_clicks_on_simplilearn_logo",
            event_data: {
                'sl_destination_link': frontendUrl || '',
                'sl_destination_page_type': 'home'
            },
            common: "product",
        });
    }

    return;

}


function frsHomeIconClicked() {
    var referrerUrl = window.location.href;
    var pagename = document.getElementById("frs-page-name").value;
    if (pagename === "frs_content_listing") {
        var eventObj = {
            'eventType': 'listinghomeClicked',
            'label': referrerUrl
        };
        CaldonGA.triggerEvent.gagInitiate(eventObj);
    }
    return;

}

function popularTabEvent() {
    var referrerUrl = window.location.href;
    var pagename = document.getElementById("frs-page-name").value;
    var eventObj = {};
    if (pagename === "frs_content_listing") {
        eventObj = {
            'eventType': 'listingpopularTab',
            'label': referrerUrl
        };
    }

    if (pagename === "frs_content_home") {
        eventObj = {
            'eventType': 'homepopularTab',
            'label': referrerUrl
        };
    }
    if (JSON.stringify(eventObj) !== '{}') {
        CaldonGA.triggerEvent.gagInitiate(eventObj);
        WebTracking.setUserParams('sl_frs_resource_filter_selected', "all resources");
        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_frs_segment_id', 'sl_frs_segment_name', 'sl_frs_resource_filter_selected', 'sl_page_type','sl_user_type']);
        if (eventData['sl_frs_segment_name'] == "Other Segments") {
            eventData['sl_frs_segment_id'] = 0;
        }
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_frs_eng_user_clicks_on_resource_filter_on_frs",
            event_data: eventData

        });
    }
    return;
}

function resourceTypeEvent(type) {
    var eventObj = {
        'eventType': 'resoursetypeselect',
        'label': user_params.user_id + ' || ' + type + ' || ' + document.URL
    };

   if(type == "Articles"){
     WebTracking.setUserParams('sl_frs_resource_filter_selected', "articles");   
   } else if(type == "E-Books"){
      WebTracking.setUserParams('sl_frs_resource_filter_selected', "ebooks"); 
   }else if(type == "On-Demand Webinars"){
      WebTracking.setUserParams('sl_frs_resource_filter_selected', "on demand webinar"); 
   }else if(type == "Live Webinars"){
      WebTracking.setUserParams('sl_frs_resource_filter_selected', "webinars"); 
   }
   
    CaldonGA.triggerEvent.gagInitiate(eventObj);
    var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_frs_segment_id', 'sl_frs_segment_name', 'sl_frs_resource_filter_selected', 'sl_page_type','sl_user_type']);
    if (eventData['sl_frs_segment_name'] == "Other Segments") {
        eventData['sl_frs_segment_id'] = 0;
    }
    WebTracking.eventReq.triggerEvent({
        event_id: "sl_frs_eng_user_clicks_on_resource_filter_on_frs",
        event_data: eventData

    });
    return;
}


function latestTabEvent() {
    var referrerUrl = window.location.href;
    var pagename = document.getElementById("frs-page-name").value;
    var eventObj = {};
    if (pagename === "frs_content_listing") {
        eventObj = {
            'eventType': 'listinglatestTab',
            'label': referrerUrl
        };
    }

    if (pagename === "frs_content_home") {
        eventObj = {
            'eventType': 'homelatestTab',
            'label': referrerUrl
        };
    }

    if (JSON.stringify(eventObj) !== '{}') {
        CaldonGA.triggerEvent.gagInitiate(eventObj);
    }
    return;
}
 /*------------- End : FrsGaEvents.js-----------*/ 

 /*------------- Begin : SearchTags.js-----------*/ 



var search_tags = {"0":"business","1":"technology","2":"agile and scrum","3":"pas","4":"agile","5":"scrum","6":"technology management","7":"project","8":"sprint","9":"tdd","10":"planning","11":"it","12":"exin","13":"agile scrum","14":"agile methodology","15":"scrum practice","16":"safe","17":"csd","18":"all","21":"capm","22":"exam","23":"prep","24":"banking","25":"software development","26":"healthcare","28":"services","29":"consulting","30":"including integration","31":"cost","32":"time","33":"scope","34":"quality","35":"communications","36":"human","37":"resource","38":"management","39":"risk","40":"procurement","43":"project management","44":"risk management","45":"time management","46":"primevera","47":"pmi","51":"csm","52":"scrummaster","53":"certified scrum master","55":"master","56":"planning management","58":"scrum master","59":"scrum alliance","61":"psm","67":"cspo certification training","69":"cspo","77":"scrumalliance","80":"product owner","84":"msp","85":"governance","86":"leadership","87":"stakeholder","88":"engagement","89":"programme","91":"benefits","92":"blueprints","94":"control","95":"issue","97":"transformational","98":"managing successful programmes","102":"program","105":"professional","106":"pgmp","109":"assessment","111":"life","112":"cycle","114":"closure","115":"supporting","116":"process","117":"multiple","118":"projects","122":"agile certified practitioner","123":"pmi-acp","125":"acp","129":"dsdm","130":"pmbok","131":"apm","132":"kanban","135":"pmi acp","139":"pmp","141":"pdu","142":"waterfall","143":"cascade","144":"structure","145":"model","146":"responsive","147":"forecasting","151":"schedule","153":"overrun","155":"processes","156":"group","157":"knowledge","158":"area","159":"construction","160":"infrastructure","161":"delivery","162":"optimization","163":"certification","165":"modelling","167":"leverage","168":"mitigation","169":"predictive","173":"project manager","175":"ipma","176":"project +","180":"45 pdu","182":"plan","184":"change","185":"prince2","188":"stage","190":"controlling","191":"boundary","192":"apmg","193":"practitioner","194":"ato","196":"foundation","204":"qualitative","205":"analysis","206":"quantitative","207":"responses","210":"rmp","211":"audits","212":"reassessment","213":"pmi rmp","217":"big-data and hadoop developer","218":"bigdata","219":"hadoop","220":"pig","221":"hive","222":"mapreduce","223":"hbase","224":"zookeeper","225":"sqoop","226":"flume","227":"deployment","228":"cloudera","229":"cloud","230":"analytics","231":"datascience","232":"research","233":"modeling","234":"big data","235":"data science","236":"business analytics","237":"data scientist","238":"big data and hadoop","239":"data analysis","240":"machine learning","241":"business analysis","242":"data analyst","243":"hadoop admin","244":"scala","245":"cassandra","246":"bdh","247":"spark","251":"itil foundation","252":"itil","253":"axelos","255":"information technology","257":"itil v3","258":"it service","259":"service strategy","260":"service transition","261":"infrastructure library","262":"itilv3","263":"cmdb","267":"itil intermediate csi","271":"information","274":"service","275":"servicestrategy","276":"servicetransition","278":"library","280":"osa","281":"ppo","282":"rv","283":"soa","284":"malc","285":"capability","286":"expert","291":"itil intermediate osa","315":"itil intermediate ppo","339":"itil intermediate rcv","363":"itil intermediate sd","387":"itil intermediate so","407":"kepner","408":"tregoe","413":"itil intermediate soa","437":"itil intermediate ss","461":"itil intermediate st","485":"itil managing across the lifecycle (malc)","509":"itsm","516":"cisa","517":"audit","518":"cyber","519":"security","520":"pentesting","521":"cryptography","523":"networking","524":"network","525":"hack","526":"secure","527":"trojan","528":"countermeasure","529":"backdoors","530":"firewalls","531":"honeypots","532":"wireless","533":"virus","534":"defense","535":"regulations","536":"compliance","537":"informaton","538":"auditor","539":"crisc","540":"cgeit","541":"is27001","542":"cissa","545":"cissp","566":"isc2","567":"architecture","569":"csslp","572":"cobit5","573":"cobit","595":"prm","596":"pam","602":"ctfl","604":"software","605":"static","606":"tester","607":"ctal","611":"certified lean six sigma black belt","612":"defect","613":"defects","614":"six","615":"sigma","616":"green belt","617":"asq","619":"statistical","620":"statistics management","621":"define","622":"iassc","623":"measure","624":"analyze","625":"improve","627":"dmaic","628":"manufacturing","632":"retail","633":"supply chain","634":"minitab","635":"cssgb","636":"electronics","637":"lean","638":"lssgb","639":"lssbb","640":"istqb","641":"astqb","642":"blackbelt","643":"sixsigma","644":"csqa","648":"certified six sigma green belt","653":"quality management","665":"supply","666":"chain","679":"tool","680":"six sigma","682":"black belt","686":"ccnp-routing & switching","687":"cisco","689":"routing","690":"switching","691":"ccie","695":"lean management","697":"volume","702":"ceh (v9)- certified ethical hacker","703":"ceh","704":"v9","705":"ethical","706":"hacking","707":"hacker","711":"spoofing","716":"ilabs","717":"eccouncil","727":"312-50","729":"cnd","732":"ec","733":"disaster","734":"v9ilabs","736":"ec-council","740":"software estimation","742":"sizing","743":"effort","744":"estimation","745":"ifpug","746":"counting","747":"rules","748":"table","749":"complexity","750":"fpa","751":"nesma","752":"seot","755":"microsoft project 2013","756":"microsoft","757":"projects 2013","760":"pooling","761":"consolidation","762":"development","763":"business management","773":"ccba","774":"iiba","777":"cbap","778":"requirement","779":"swot","780":"communication","781":"babok","783":"business analyst","784":"risk analysis","785":"enterprise analysis","786":"swot analysis","787":"capability analysis","788":"requirement analysis","789":"bacp","790":"pba","793":"salesforce administrator","794":"salesforce admin","795":"administrator","796":"adm 201","797":"201","798":"sfdc","800":"sales","801":"app exchange","802":"force.com","803":"chatter","805":"administrators","806":"crm","807":"siebel","810":"salesforce developer","811":"salesforce app builder","812":"salesforce","813":"developer dev 401","816":"data model","817":"application","824":"togaf 9.1","825":"togaf","826":"the open group","827":"enterprise architecture","828":"solution architect","829":"togaf level1","830":"togaf level2","831":"adm","832":"togaf9 foundation","833":"architecture framework","834":"architecture forum","837":"70-411","838":"administering windows server 2012 - r2","839":"windows","841":"ms 2012 server","842":"r2","843":"administering","844":"db","845":"gpo","846":"encryption","847":"vpn","850":"70-332","851":"advanced solutions of ms sharepoint server 2013","852":"ms","854":"sharepoint server","855":"solutions","858":"syo-401","859":"comptia security+ syo-401","860":"comptia","862":"green it","863":"301","864":"401","865":"syo","866":"host","867":"crypography","868":"scada","869":"byod","870":"casp","872":"security+","875":"642-832","876":"ccnp tshoot -troubleshooting & maintaining cisco ip networks","878":"tshoot","879":"ccnp","880":"troubleshooting","881":"maintaining","882":"ip","884":"palo alto","885":"iot","890":"certified data scientist with sas and excel","891":"business analytics foundation - sas","892":"sas","893":"predict","899":"analyst","901":"machine","903":"logistic","904":"linear","905":"regression","906":"summary","907":"data","908":"datascientist","909":"datamining","910":"database","911":"oracle","912":"dbms","913":"datawarehouse","914":"reporting","915":"intelligence","916":"metric","923":"predictive modeling","924":"data modeling","925":"logistic regression","926":"linear regression","927":"statistical modeling","928":"statistics","934":"salesforce administrator & developer","936":"admin","943":"appexchange","948":"developer","949":"dev","951":"dev401","961":"certified data scientist with r","962":"certified analytics professional r language","963":"business analytics professional - r language","964":"rlanguage","1008":"certified lean six sigma green belt","1035":"lean.lssgb","1043":"php development suite","1044":"php development","1045":"cms","1046":"mysql","1047":"laravel4","1048":"codeigniter","1051":"javascript development suite","1052":"javascript","1054":"ajax","1055":"jquery","1056":"node.js","1057":"selenium","1058":"scjp","1059":"nodejs","1062":"python development suite","1063":"python development","1064":"programming","1065":"phyton","1068":"html\/html5 and css\/css3 suite","1069":"html","1070":"html5","1071":"css","1072":"css3","1073":"sass","1074":"developers","1077":"content marketing","1078":"content","1079":"marketing","1080":"online","1081":"digital","1083":"internet","1084":"google","1085":"seo","1086":"ecommerce","1089":"conversion optimization","1090":"conversion","1091":"optimisation","1092":"roi","1101":"mobile marketing","1102":"mobile","1108":"app","1109":"adwords","1110":"admob","1114":"remarketing","1115":"pay per click (ppc)","1116":"ppc","1117":"click","1124":"bing","1128":"search engine optimization (seo)","1133":"online marketing","1135":"search engine","1139":"social media","1144":"facebook","1145":"twitter","1147":"g+","1148":"digital marketing","1150":"internet marketing","1154":"web analytics","1155":"web","1167":"certified sas base programmer","1201":"sas base","1202":"sas programmer","1205":"introduction to online marketing","1220":"complete web development suite","1222":"developmentcss3","1228":"php","1229":"mongodb","1232":"android app development","1233":"android","1236":"certified android app developer","1240":"introduction to project management","1242":"introduction","1243":"introductory","1246":"methodology","1247":"portfolio","1250":"triple","1251":"constraints","1256":"ccna-routing & switching","1258":"ccna","1267":"certified business analysis professional (cbap)","1286":"cbip","1289":"70-412","1290":"configuring advanced windows server 2012 r2 services","1291":"windows server","1293":"microsoft 2012","1295":"configuring","1296":"ipam","1297":"dhcp","1298":"adds","1299":"dns","1303":"core solutions of ms sharepoint server 2013","1306":"solution","1307":"70-331","1310":"70-410","1311":"installing and configuring ms windows server 2012 r2","1314":"windows server 2012","1317":"installing","1318":"manager","1319":"hyper-v","1320":"storage","1325":"microsoft excel 2013 foundation","1327":"microsoft 2013","1328":"office","1329":"excel","1330":"macros","1331":"reports","1332":"vlookup","1333":"pivot","1334":"hyperlinks","1335":"formulas","1336":"functions","1337":"worksheet","1338":"charts","1339":"vba","1342":"microsoft excel 2013 intermediate","1357":"77-427","1360":"microsoft excel 2013-advanced","1375":"77-428","1385":"uk","1386":"europe","1391":"usa","1403":"big data and hadoop administrator","1404":"hadoop administrator","1405":"hadoop administrator training","1407":"hadoop administration","1437":"smac stack services","1438":"social","1441":"simplilearn","1448":"online tutorial","1450":"training","1459":"tutorial","1465":"courses","1468":"fundamentals","1472":"python","1473":"matlab","1479":"basics","1480":"beginners","1481":"guide","1486":"websites","1487":"bootstrap","1488":"3","1489":"webservice","1493":"impala","1494":"open source","1495":"sql","1531":"lean 6 sigma application training","1533":"6 sigma certification","1536":"6 sigma","1541":"apache","1544":"classes","1578":"access","1579":"2013","1581":"mos","1585":"queries","1589":"77-424","1593":"outlook","1598":"mail","1599":"calender","1600":"task","1601":"message","1603":"files","1604":"mailmerge","1606":"77-423","1612":"powerpoint","1614":"2010","1615":"presentation","1616":"tables","1618":"texts","1619":"multimedia","1620":"autoshapes","1621":"animation","1632":"microsoft office","1633":"mos 77-422","1637":"2011","1638":"mac","1641":"ibooks author","1644":"microsoft onenote","1646":"onenote","1649":"linux","1651":"level 1","1654":"apple","1655":"iwork 2013","1658":"quickbooks 14","1662":"lean sigma","1664":"6 sigma healthcare","1667":"quickstart office 365","1673":"word","1674":"ms word","1679":"layout","1680":"formatting","1682":"page-layout","1683":"proof-reading","1693":"develop","1700":"apache kafka","1705":"email marketing","1712":"youtube marketing","1713":"video marketing","1719":"twitter marketing","1720":"twitter advertising","1726":"pinterest marketing","1732":"holiday ppc advertising","1738":"facebook marketing","1739":"facebook advertising","1745":"display advertising","1751":"cism","1755":"course","1758":"exam 70-413","1759":"designing","1760":"implementing","1770":"dmca","1771":"digital marketing certified associate","1775":"apache spark","1776":"apache scala","1779":"spark training","1780":"scala training","1781":"spark certification","1782":"scala certification","1783":"scala programming","1784":"spark and scala","1785":"spark and scala training","1786":"spark and scala certification","1790":"crisc certification","1797":"apache storm tutorial","1803":"apple watch app development tutorial","1804":"how to get apple watch app","1805":"apple watch app development","1809":"tableau training","1810":"tableau certification","1811":"tableau desktop 9","1814":"digital marketing in asia","1815":"digital marketing asia","1825":"ios","1826":"ios app","1827":"ios development","1828":"ios developer","1832":"agile scrum master","1833":"advanced agile scrum","1836":"microsoft sharepoint server","1837":"sharepoint server 2013","1838":"developing core solutions","1841":"personal branding","1842":"build a personal brand","1843":"brand yourself","1847":"aws technical essentials","1848":"aws services","1849":"aws certification","1850":"cloud training","1853":"google adwords","1854":"adwords certification","1855":"adwords training","1856":"google ppc","1860":"business analytics training","1861":"business analytics with excel","1862":"business analytics course","1865":"pay per click","1867":"ppc foundation","1868":"ppc course","1871":"seo basics","1872":"seo foundation","1873":"seo course","1874":"seo training","1875":"search engine optimization","1879":"email marketing basics","1880":"email marketing course","1883":"marketing automation","1884":"marketing automation course","1885":"marketing automation basics","1888":"programmatic buying","1889":"programmatic buying course","1890":"programmatic buying training","1894":"aws solutions architect","1895":"aws training","1897":"aws course","1901":"google cloud platform fundamentals","1902":"google cloud platform","1903":"google cloud platform training","1904":"google cloud platform certification","1905":"cp100a","1909":"systems operations professional","1910":"cpo200","1913":"google cloud-based apps","1914":"developing solutions for google cloud platform","1915":"cpd200","1920":"big data & machine learning","1921":"cpb100","1925":"google bigquery","1926":"data analysts","1927":"cpb200","1930":"salesforce platform developer","1931":"salesforce platform developer certification","1932":"salesforce course","1936":"content marketing basics","1937":"content marketing for beginners","1941":"mobile marketing for beginners","1942":"mobile advertising","1947":"developing microsoft azure solutions","1948":"azure certification","1949":"70-532 exam","1950":"azure training","1954":"cloud trining","1955":"implementing microsoft azure infrastructure solutions","1956":"azure infrastructure solutions","1957":"70-533 exam","1961":"architecting microsoft azure solutions","1962":"70-534 exam","1967":"python for data analysis","1968":"r vs python","1969":"python data science","1970":"python for data science","1971":"data science with python","1974":"ethical hacking course","1975":"ethical hacking certification","1976":"ethical hacking training","1980":"machine learning training","1981":"machine learning course","1982":"machine learning certification","1985":"aws developer certification","1986":"aws developer training","1987":"aws developer course","1990":"aws sysops certification","1991":"aws sysops training","1992":"aws sysops course","1996":"advertising","2000":"media","2001":"tweet","2005":"conversion optimization training","2006":"conversions optimization foundation course","2007":"cro","2012":"java","2013":"java training","2014":"java ee","2015":"java soa","2016":"java course","2017":"java soa course","2018":"j2ee training","2019":"java spring","2020":"hibernate","2030":"blueprint","2037":"devops","2042":"certified","2043":"workflow","2045":"operations","2048":"active directory","2050":"active directory services certification","2054":"system center 2012","2055":"system center 1012 configuration manager","2060":"iis","2061":"web server iis","2063":"certificatin","2068":"windows poweshell","2069":"advanced automated administration","2076":"window server infrastructure","2077":"windows server findamentals training","2081":"identity","2083":"windows server 2016","2090":"installation","2104":"tableau","2105":"server10","2112":"poweshell","2113":"automating","2114":"administration","2115":"server","2120":"core","2122":"exchange","2133":"advanced","2140":"upgrade","2145":"2012","2148":"securing","2151":"2016","2155":"skills","2163":"developing","2165":"sharepoint","2184":"technologies","2190":"datacenter","2191":"monitoring","2192":"with","2193":"system","2194":"center","2195":"operation","2212":"deploying and managing windows 10 using enterprise services","2213":"windows 10 deployment","2214":"m20697-2","2217":"enabling office 365 services","2218":"enabling office 365 services training","2221":"installing and configuring windows 10","2222":"windows 10 training","2223":"windows 10 course","2226":"system center 2012 orchestrator","2227":"system center orchestrator training","2230":"system center 2012 r2 operation manager","2231":"system center 2012 r2 operation manager training","2232":"cloud and datacenter monitoring","2233":"system center 2012 r2 operation manager course","2236":"configuring and deploying a private cloud","2237":"cloud configuration and deployment training","2240":"infrastructure provisioning with system center","2241":"system center 2012 r2 virtual machine manager","2244":"microsoft.azure","2255":"cxo","2256":"cheifs","2259":"dummy text","2263":"test","2266":"masters program 20","2267":"masters program 21","2268":"masters program 22","2269":"masters program 23","2270":"masters program 24","2271":"masters program 25","2272":"masters program 26","2273":"masters program 27","2274":"masters program 17","2275":"masters program 18","2276":"masters program 19","2277":"masters program","2278":"master program","2279":"master program 1","2280":"masters program 1","2281":"master program 2","2282":"masters program 2","2283":"master program 3","2284":"masters program 4","2285":"master program 5","2286":"masters program 6","2287":"master program 7","2288":"masters program 8","2289":"master program 9","2290":"masters program 10","2291":"master program 11","2292":"master program 12","2293":"masters program 13","2294":"master program 14","2295":"masters program 15","2297":"masters","2300":"masters program 3","2302":"all in one","2304":"advanced online marketing suite","2307":"seo 1","2308":"seo 2","2309":"seo 3","2310":"seo 4","2311":"seo 5","2312":"sem 1","2313":"sem 2","2317":"converision","2319":"branding","2320":"social media 1","2321":"social media 2","2322":"social media 3","2329":"itil expert suite","2332":"cs","2333":"ss","2334":"so","2338":"cita","2340":"itil expert","2345":"bundle","2351":"quality management suite","2366":"greenbelt","2369":"lean six sigma","2378":"data scientist 1","2379":"data scientist 2","2380":"data scientist 3","2381":"data scientist 4","2382":"data scientist 5","2384":"senior data scientist","2385":"learning path","2394":"master program 4","2395":"masters program 5","2435":"pmi-","2437":"social media specialist","2438":"social media specialist 1","2439":"social media specialist 2","2440":"social media specialist 3","2441":"social media specialist 4","2442":"social media specialist 5","2443":"social media specialist 6","2447":"ppc specialist","2449":"ppc specialist 1","2450":"ppc specialist 2","2451":"ppc specialist 3","2452":"ppc specialist 4","2453":"ppc specialist 5","2454":"ppc specialist 6","2455":"ppc specialist 7","2456":"ppc specialist 8","2460":"big data solutions architect 1","2461":"big data solutions architect 3","2463":"solutions architect 5","2464":"solutions architect 6","2465":"solutions architect 7","2466":"solutions architect 8","2476":"masters program 28","2477":"masters program 29","2478":"masters program 30","2479":"masters program 16","2489":"master program 6","2490":"masters program 7","2491":"master program 8","2492":"masters program 9","2493":"master program 10","2494":"masters program 11","2500":"masters 1","2502":"masters 2","2503":"masters 3","2504":"masters 4","2505":"masters 5","2509":"cloud computing 1","2510":"cloud computing 2","2511":"cloud computing 3","2512":"cloud computing 4","2513":"cloud computing 5","2514":"cloud computing 6","2515":"aws","2517":"aws devops architect","2518":"devops architect","2519":"aws architect","2526":"architecting","2529":"azure","2531":"70-533","2532":"70-534","2533":"70-532","2536":"big","2539":"sdsadsa","2540":"gdfgfdgdf","2541":"rytryr","2544":"sadsa","2545":"fdsafdasf"} /*------------- End : SearchTags.js-----------*/ 

 /*------------- Begin : Common.js-----------*/ 

angular.module('CommonPlugins', [
])
        .directive("ngMobileClick", [function () {
            return function (scope, elem, attrs) {
                elem.bind("touchstart click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    scope.$apply(attrs["ngMobileClick"]);
                });
            }
        }])
        .directive('dirPlaceholder', function($timeout) {
            return {
                scope:  {
                            placeholder: '@dirPlaceholder',
                            model: '=ngModel'
                        },
                restrict: 'A',
                replace: false,
                require: 'ngModel',
                link: function(scope, elem, attrs) {

                    var mobileTooltip = elem.parent()[0].getElementsByClassName("mobile_tooltip");

                    $timeout(function() {

                        elem.next().html(scope.placeholder);
                        elem.next().css('color', '#AAA');

                        if (elem.val() !== '') {
                            elem.next().css('display', 'none');
                        }

                        elem.next().on('click', function() {
                                elem[0].focus();
                        });

                        elem.on('focus', function() {
                            elem.next().css('color', '#DDD');
                            if(mobileTooltip != null && mobileTooltip.length > 0){
                                 mobileTooltip[0].className = mobileTooltip[0].className.replace(" hidden_class","");
                            }
                        });

                        elem.on('blur', function() {
                            elem.next().css('color', '#AAA');
                            if(mobileTooltip != null && mobileTooltip.length > 0){
                                 mobileTooltip[0].className = mobileTooltip[0].className+" hidden_class";
                            }
                        });

                        scope.$watch('model', function(newValue) {
                            if (typeof newValue == 'undefined' || newValue == '') {
                                elem.next().css('display', 'inline');
                            }
                            else {
                                elem.next().css('display', 'none');
                            }
                        });

                        elem.on('input keyup keydown', function(){
                            if (elem.val() == '') {
                                elem.next().css('display', 'inline');
                            }
                            else {
                                elem.next().css('display', 'none');
                            }
                        });

                    }, 0);
                }
            };
        })
        .directive('stopccp', function(){
		    return {
		        scope: {},
		        link:function(scope,element){
		            element.on('cut copy paste', function (event) {
		              event.preventDefault();
		            });
		        }
		    };
		})
        .directive('dirFormTooltip', function($timeout, $window) {
            return {
                scope:  {
                            tooltipClassname: '@',
                            tooltipForClassname: '@'        //optional attribute
                        },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {

                    $timeout(function() {
                        var target_elem_nodes = elem[0].querySelectorAll('input,select,a');
                        var tooltip_node = elem[0].getElementsByClassName(scope.tooltipClassname);
                        var helpers = new $window.helpers();

                        if(  target_elem_nodes.length && tooltip_node ) {
                            var target_elem = angular.element(target_elem_nodes);
                            var target_tooltip = angular.element(tooltip_node[0]);

                            target_elem.bind('focus keyup', function(){
                                if( scope.tooltipForClassname ) {
                                    var classified_nodes = elem[0].querySelectorAll('input.'+scope.tooltipForClassname+',select.'+scope.tooltipForClassname+',a.'+scope.tooltipForClassname+',span.'+scope.tooltipForClassname+',div.'+scope.tooltipForClassname);
                                    if( classified_nodes.length ) {
                                        var tooltip_text = helpers.GetFormElemTooltipText(classified_nodes[0]);

                                        if( tooltip_text ) {
                                            target_tooltip.html(tooltip_text);
                                            target_tooltip.css('display', 'block');
                                        }
                                        else {
                                            target_tooltip.css('display', 'none');
                                        }
                                    }
                                    else {
                                        target_tooltip.css('display', 'none');
                                    }
                                }
                                else {
                                    target_tooltip.css('display', 'block');
                                }
                            });

                            target_elem.bind('blur', function(){
                                target_tooltip.css('display', 'none');
                            });
                        }
                    }, 0);
                }
            };
        })
        .directive('dirFocusInvalidForm', function ($timeout) {
            return {
                restrict: 'A',
                replace: false,
                scope:{},
                link: function (scope, elem) {
                    // set up event handler on the form element
                    elem.on('submit', function () {
                        focusInvalidElem();
                    });

                    elem.find('button').on('click', function () {
                        focusInvalidElem();
                    });

                    var focusInvalidElem = function() {
                        // find the first invalid element
                        var invalidElems = angular.element( elem[0].querySelector('.ng-invalid') );

                        if (invalidElems.length) {
                            $timeout( function() {
                                invalidElems[0].focus();
                            }, 100);
                        }
                    };
                }
            };
        })
        .directive('dirCarousel', function($timeout, $interval, HelperService, $rootScope,$compile) {
            return {
                scope: {
                    carousel_name: '@dirCarousel',
                    prev_active_class: '@prevActive',
                    prev_inactive_class: '@prevInactive',
                    next_active_class: '@nextActive',
                    next_inactive_class: '@nextInactive',
                    on_page_load:'@onPageLoad',
                    auto_scroll:'@autoScroll',
                    is_custom:'@isCustom',
                    show_all:'@showAll',
                    desktop_disabled:'@desktopDisabled'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                	if(!(isDesktopDevice() && scope.desktop_disabled == 1)){
	                    var carousel = function() {
	                        var hf, move_unit, move_timeout, bullet_flag, scrolling_status,
	                            visible_portion, list_parent, list_elements, list_elements_size, list_elem_width,
	                            running_status, prev_limit, visible_list_elems, next_limit, prev_arrow, next_arrow, computedWidthVal,
	                            move_count,already_moved,emptyLis,liList;

	                        var self = this,
	                            hf = HelperService,
	                            running_status = 0,
	                            move_unit = 50;
	                            move_timeout = 10,
	                            bullet_flag = 0,
	                            scrolling_status = 1,
	                            blocksToMove=0,
	                            already_moved=0,extraLiBucket=[];
	                    var originalList=null;

	                        if (elem[0].getElementsByClassName('c_bullet').length !== 0) {
	                            bullet_flag = 1;

	                        }

	                        if(originalList == null){
	                            originalList = [];
	                            list_parent = elem[0].getElementsByClassName('c_list')[0];
	                            var objcopys = [];
	                            var objclones = [];
	                            for(var i=0;i<list_parent.children.length;i++){
	                                        objcopys[i] = list_parent.children[i];
	                                        objclones[i] = objcopys[i].cloneNode(true);
	                                    }
	                                    //append elements to the end of the list
	                                    for(var i=0;i<list_parent.children.length;i++){
	                                        originalList[i] = objclones[i];
	                                    }

	                        }

	                        var calculateBlocksToMove = function(visible_portion,list_elements){
	                            list_elements_size = list_elements.length;
	                            for(var i=0;i<list_elements_size;i++){
	                                if(list_elements[i].offsetWidth > 0){
	                                    blocksToMove = Math.round(visible_portion.offsetWidth/list_elements[i].offsetWidth);
	                                    break;
	                                }
	                            }
	                            return blocksToMove;
	                        }

	                        var reArrangeList = function(list_parent){
	                            var listChildren = list_parent.children.length;
	                            for(var i=0;i<listChildren;i++){
	                                list_parent.removeChild(list_parent.children[0]);
	                            }
	                            for(var i=0;i<listChildren;i++){
                                        if(typeof originalList[i] !=='undefined')
	                                list_parent.appendChild(originalList[i]);
	                            }
	                            var bullets = elem[0].getElementsByClassName('c_bullet');
	                            angular.element(bullets[0]).parent().find('a').removeClass('active');
	                            angular.element(bullets[0]).addClass('active');
	                            return list_parent;
	                        }

				var addEmptyLi = function(){
	                                //clear all empty lis
	                                emptyLis = list_parent.getElementsByClassName('c_list_item empty_li');
	                                var fullScheduleDiv = list_parent.getElementsByClassName('download_schedule_div');
	                                var emptyLisLength = emptyLis.length;
	                                if(emptyLis.length > 0){
	                                    for(var i=0;i<emptyLisLength;i++){
	                                        list_parent.removeChild(list_parent.getElementsByClassName('c_list_item empty_li')[0]);
	                                    }
	                                }
	                                list_parent = elem[0].getElementsByClassName('c_list')[0];
	                                list_elements = elem[0].getElementsByClassName('c_list_item');
	                                list_elements_size = list_elements.length;
	                                blocksToMove = calculateBlocksToMove(visible_portion,list_elements);
	                                var maxToShow = blocksToMove*5;

	                                /* show/hide batches depending on screen size if show_all != 1 */
	                                if(scope.show_all != 1){
	                                    for(var i=0;i<list_elements_size;i++){
	                                        var cIndex = list_elements[i].className.substring(list_elements[i].className.indexOf("c_index_")+8,list_elements[i].className.length);
	                                        if(cIndex > maxToShow){
	                                            list_elements[i].className = list_elements[i].className+" hidden_class";
	                                            angular.element(fullScheduleDiv).removeClass("hidden_class");
	                                        }else{
	                                            list_elements[i].className = list_elements[i].className.replace(" hidden_class","");
	                                            angular.element(fullScheduleDiv).addClass("hidden_class");
	                                        }

	                                    }
	                                }
	                                list_elements_size = list_elements.length;
	                                var aa = list_elements_size%blocksToMove;
	                                if(aa != 0){
	                                    var bb = blocksToMove-aa;
	                                    liList = [];
	                                    for(var i=0;i<bb;i++){
	                                        var li = document.createElement("li");
	                                        li.style.border = "none";
	                                        li.style.float = "left";
	                                        li.style.width = "370px";
	                                        li.style.marginRight = "30px";
	                                        li.className = "c_list_item c_index_"+(list_elements_size+i+1)+" empty_li";
	                                        liList[i] = li;
	                                    }
	                                    if(typeof list_parent.getElementsByClassName("download_schedule_div") != 'undefined' &&
	                                            list_parent.getElementsByClassName("download_schedule_div").length > 0){
	                                        if(list_elements_size < (blocksToMove*5)){
	                                            for(var i=0;i<bb;i++){
	                                                list_parent.insertBefore(liList[i],list_parent.getElementsByClassName("download_schedule_div")[0]);
	                                            }
	                                        }
	                                    }else{
	                                        for(var i=0;i<bb;i++){
	                                            list_parent.appendChild(liList[i]);
	                                        }
	                                    }
	                                }

					return list_parent;
				}

	                        this.iniit = function(){
	                            var firstEleIndex=0;
	                            setTimeout(function(){
	                                visible_portion = elem[0].getElementsByClassName('c_screen')[0];
	                                list_parent = elem[0].getElementsByClassName('c_list')[0];
	                                list_parent = reArrangeList(list_parent);
	                                list_parent = addEmptyLi();

	                                /*show/hide bullets on orientation change*/
	                                if(bullet_flag == 1){
	                                    var bullets = elem[0].getElementsByClassName('c_bullet');
	                                    var bulletsLen = bullets.length;
	                                    var maxBulletsToShow=0;
	                                    var visibleEles=0;
	                                    for(var i=0;i<list_parent.children.length;i++){
	                                        if(list_parent.children[i].className.indexOf("hidden_class")==-1){
	                                            visibleEles++;
	                                        }
	                                    }
	                                    if(visibleEles <= blocksToMove){
	                                        maxBulletsToShow = 0;
	                                    }else if((visibleEles % blocksToMove) == 0){
	                                        maxBulletsToShow = parseInt(visibleEles / blocksToMove);
	                                    }else{
	                                        maxBulletsToShow = parseInt(visibleEles / blocksToMove) + 1;
	                                    }

	                                    for(var i=0;i<maxBulletsToShow;i++){
	                                        angular.element(bullets[i]).removeClass("hidden_class");
	                                    }
	                                    for(var i=maxBulletsToShow;i<bulletsLen;i++){
	                                        angular.element(bullets[i]).addClass("hidden_class");
	                                    }

	                                }

	                                for(var i=0;i<list_parent.children.length;i++){
	                                    var clsName = list_parent.children[i].className;
	                                    if(clsName.indexOf('c_index_1')!=-1){
	                                        firstEleIndex=i;
	                                        break;
	                                    }
	                                }
	                                copiedObjs=[];
	                                clonedObjs=[];
	                                if(firstEleIndex!=0){
	                                    for(var i=0;i<firstEleIndex;i++){
	                                        copiedObjs[i] = list_parent.children[i];
	                                        clonedObjs[i] = copiedObjs[i].cloneNode(true);
	                                    }
	                                    //append elements to the end of the list
	                                    for(var i=0;i<firstEleIndex;i++){
	                                        list_parent.appendChild(clonedObjs[i]);
	                                    }
	                                    for(var i=0;i<firstEleIndex;i++){
	                                        list_parent.removeChild(copiedObjs[i]);
	                                    }
	                                    copiedObjs=[];
	                                    clonedObjs=[];

	                                    var bullets = elem[0].getElementsByClassName('c_bullet');
	                                    angular.element(bullets[0]).parent().find('a').removeClass('active');
	                                    angular.element(bullets[0]).addClass('active');
	                                }

	                            },0);
	                        }
	                        //this.iniit();
	                        if(typeof scope.is_custom != 'undefined' && scope.is_custom == 1){
	                            this.iniit();
	                        }

	                        $rootScope.$on('orientationChanged', function(isOrientationChanged){
	                            if(isOrientationChanged && typeof scope.is_custom != 'undefined' && scope.is_custom == 1){
	                                self.iniit();
	                            }
	                        });


	                        this.init = function() {
	                            visible_portion = elem[0].getElementsByClassName('c_screen')[0];
	                            list_parent = elem[0].getElementsByClassName('c_list')[0];
	                            list_elements = elem[0].getElementsByClassName('c_list_item');
	                            list_elements_size = list_elements.length;
	                            if(typeof scope.is_custom != 'undefined' && scope.is_custom == 1){
	                                blocksToMove = calculateBlocksToMove(visible_portion,list_elements);
	                            }else{
	                                blocksToMove = 1;
	                            }

	                            move_count = parseInt((list_elements_size/blocksToMove)+1);
	                            prev_arrow = elem[0].getElementsByClassName('c_prev')[0];
	                            next_arrow = elem[0].getElementsByClassName('c_next')[0];
	                            var computedStyle = window.getComputedStyle(angular.element(list_elements[0])[0]);
	                            computedWidthVal = parseInt(computedStyle.paddingRight) + parseInt(computedStyle.paddingLeft) + parseInt(computedStyle.marginRight) + parseInt(computedStyle.marginLeft);
	                            computedWidthVal = computedWidthVal * blocksToMove;
	                            list_elem_width = list_elements[0].offsetWidth * blocksToMove;

	                            prev_limit = list_parent.offsetLeft;
	                            visible_list_elems = (Math.floor(visible_portion.offsetWidth / list_elem_width) === 0) ? Math.round(visible_portion.offsetWidth / list_elem_width) : Math.floor(visible_portion.offsetWidth / list_elem_width);
	                            next_limit = list_elem_width * (visible_list_elems - list_elements.length) + list_parent.offsetLeft;

	                            //if( list_elements.length <= 1 || list_elements.length <= blocksToMove ) {
	                            if( list_elements.length <= 1 || list_elements.length <= blocksToMove) {
	                                angular.element(prev_arrow).removeClass(scope.prev_active_class).addClass(scope.prev_inactive_class);
	                                angular.element(next_arrow).removeClass(scope.next_active_class).addClass(scope.next_inactive_class);
	                            }
	                            if(typeof list_parent.getElementsByClassName("download_schedule_div") != 'undefined' &&
	                                    list_parent.getElementsByClassName("download_schedule_div").length > 0){
	                                list_parent.getElementsByClassName("download_schedule_div")[0].style.width = visible_portion.offsetWidth+'px';
	                            }


	                        };

	                        this.init();



	                        //count total number of batches
	                        var listparentchildrenlen = list_parent.children.length;
	                        var totalBatchesCount=0;
	                        for(var i=0;i<listparentchildrenlen;i++){
	                            var currEle = list_parent.children[i];
	                            if(currEle.className.indexOf("c_index")!=-1 && currEle.className.indexOf("empty_li")==-1){
	                                totalBatchesCount++;
	                            }
	                        }

	                        //show counter
	                        if(list_parent.children[0].className.indexOf("c_index")!=-1){
	                            var currEleIndex = list_parent.children[0].className.substring(list_parent.children[0].className.indexOf("c_index_")+8,list_parent.children[0].className.length);
	                            //alert(currEleIndex);
	                            if(typeof elem[0].getElementsByClassName("dirCarouselCounter") != 'undefined' && elem[0].getElementsByClassName("dirCarouselCounter").length > 0){
	                                elem[0].getElementsByClassName("dirCarouselCounter")[0].innerHTML = currEleIndex;
	                            }
	                        }

	                        var showCounter = function(){
	                            var listparentchildrenlen = list_parent.children.length;
	                            for(var i=0;i<listparentchildrenlen;i++){
	                                var currEle = list_parent.children[i];
	                                if(currEle.className.indexOf("c_index")!=-1 && currEle.className.indexOf("hidden_class")==-1 && currEle.className.indexOf("download_schedule_div")==-1){
	                                   if(typeof elem[0].getElementsByClassName("batches_counter_span")[0] != 'undefined')
	                                    elem[0].getElementsByClassName("batches_counter_span")[0].className = elem[0].getElementsByClassName("batches_counter_span")[0].className.replace(" hidden_class","");
	                                    if(typeof elem[0].getElementsByClassName("all_batches")[0] != 'undefined' && elem[0].getElementsByClassName("all_batches")[0].className.indexOf("hidden_class")==-1){
	                                        elem[0].getElementsByClassName("all_batches")[0].className = elem[0].getElementsByClassName("all_batches")[0].className+" hidden_class";
	                                    }
	                                    var currEleIndex = currEle.className.substring(currEle.className.indexOf("c_index_")+8,currEle.className.length);
	                                    if(typeof elem[0].getElementsByClassName("dirCarouselCounter") != 'undefined' && elem[0].getElementsByClassName("dirCarouselCounter").length > 0){
	                                        elem[0].getElementsByClassName("dirCarouselCounter")[0].innerHTML = currEleIndex;
	                                    }
	                                    break;
	                                }else if(currEle.className.indexOf("download_schedule_div")!=-1){
	                                    elem[0].getElementsByClassName("all_batches")[0].className = elem[0].getElementsByClassName("all_batches")[0].className.replace(" hidden_class","");
	                                    elem[0].getElementsByClassName("batches_counter_span")[0].className = elem[0].getElementsByClassName("batches_counter_span")[0].className+" hidden_class";
	                                    break;
	                                }
	                            }
	                        }

	                        var calculateHiddenElements = function(listEleLen){
	                            var hiddenEleCount=0;
	                            for(var i=0;i<listEleLen;i++){
	                                if(list_parent.children[i].className.indexOf("hidden_class")!=-1){
	                                        hiddenEleCount++;
	                                }
	                            }
	                            return hiddenEleCount;
	                        }

	                        var animateLeft = function(obj, from, to, limit) {

	                            running_status = 1;
	                            var copiedObjs = [];
	                            var clonedObjs = [];
	                            var hiddenEleCount=0;
	                            var listEleLen = list_elements.length;
	                            if(listEleLen <= blocksToMove && list_elements[0].className.indexOf("download_schedule_div")==-1){
	                                running_status = 0;
	                                return true;
	                            }

	                            //calculate all elements those are hidden
	                            hiddenEleCount = calculateHiddenElements(listEleLen);

	                            //first append and remove all hidden elements if any are present at the beginning of the list
	                            if((list_parent.children[0]).className.indexOf("hidden_class")!=-1 && hiddenEleCount > 0){
	                                for(var i=0;i<hiddenEleCount;i++){
	                                    if(list_parent.children[i].className.indexOf("hidden_class")!=-1){
	                                        copiedObjs[i] = list_parent.children[i];
	                                        clonedObjs[i] = copiedObjs[i].cloneNode(true);
	                                        list_parent.appendChild(clonedObjs[i]);
	                                    }
	                                }
	                                for(var i=0;i<hiddenEleCount;i++){
	                                    list_parent.removeChild(copiedObjs[i]);
	                                }
	                                copiedObjs = [];
	                                clonedObjs = [];
	                            }


	                            //if first visible element is download schedule div, copy and remove it
	                            if((list_parent.children[0]).className.indexOf("download_schedule_div")!=-1) {
	                                copiedObjs[0] = list_parent.getElementsByTagName("li")[0];
	                                clonedObjs[0] = copiedObjs[0].cloneNode(true);
	                                list_parent.appendChild(clonedObjs[0]);
	                            }
	                            //if first visible element is a normal div, do a normal copy and remove
	                            else{
	                                for(var i=0;i<blocksToMove;i++){
	                                    copiedObjs[i] = list_parent.children[i];
	                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
	                                }
	                                //append elements to the end of the list
	                                for(var i=0;i<blocksToMove;i++){
	                                    list_parent.appendChild(clonedObjs[i]);

	                                }
	                            }

	                            //move the list to show desired elements with transition
	                            list_parent.style.transition = "all .5s ease";
	                            list_parent.style.left = (-list_elem_width-computedWidthVal) + "px";

	                            $timeout(function(){
	                                running_status = 0;
	                                //remove all elements from clonedObjs and copiedObjs
	                                if((list_parent.children[0]).className.indexOf("download_schedule_div")!=-1) {
	                                    list_parent.removeChild(copiedObjs[0]);
	                                }else{
	                                    for(var i=0;i<blocksToMove;i++){
	                                        list_parent.removeChild(copiedObjs[i]);
	                                    }
	                                }
	                                //reset left to original 0 value
					list_parent.style.transition = "";
	                                list_parent.style.left = "0px";
	                                if(typeof scope.is_custom != 'undefined' && scope.is_custom == 1){
	                                    blocksToMove = calculateBlocksToMove(visible_portion,list_elements);
	                                }else{
	                                    blocksToMove = 1;
	                                }

					//show counter
	                                showCounter();

	                             },250);

	                            return true;
	                        };

	                        var animateRight = function(obj, from, to, limit) {
	                            running_status = 1;
	                            var copiedObjs = [];
	                            var clonedObjs = [];
	                            var lastEleIndex = angular.element(list_parent)[0].children.length - 1;
	                            var hiddenEleCount = 0;
	                            var listEleLen = lastEleIndex + 1;
	                            if(listEleLen <= blocksToMove){
	                               running_status = 0;
	                               return true;
	                           }
	                            //calculate all elements those are hidden
	                            hiddenEleCount = calculateHiddenElements(listEleLen);

	                            //first append and remove all hidden elements if any are present at the end of the list
	                            if((list_parent.children[lastEleIndex]).className.indexOf("hidden_class")!=-1 && hiddenEleCount > 0){
	                                for (var i = 0; i < hiddenEleCount; i++) {
	                                    copiedObjs[hiddenEleCount - (i + 1)] = list_parent.children[lastEleIndex];
	                                    clonedObjs[hiddenEleCount - (i + 1)] = copiedObjs[hiddenEleCount - (i + 1)].cloneNode(true);
	                                    list_parent.insertBefore(clonedObjs[hiddenEleCount - (i + 1)], list_parent.firstChild);
	                                }
	                                for (var i = 0; i < hiddenEleCount; i++) {
	                                    list_parent.removeChild(copiedObjs[i]);
	                                }
	                                copiedObjs = [];
	                                clonedObjs = [];
	                            }

	                            //if last visible element is download schedule div, copy and remove it
	                            if (list_parent.children[lastEleIndex].className.indexOf("download_schedule_div")!=-1) {
	                                var copiedObj = list_parent.children[lastEleIndex];
	                                var clonedObj = copiedObj.cloneNode(true);
	                                list_parent.insertBefore(clonedObj, list_parent.children[0]);
	                                list_parent.removeChild(copiedObj);
	                            }
	                            //if last visible element is a normal div, do a normal copy and remove
	                            else{
	                                for (var i = 0; i < blocksToMove; i++) {
	                                    copiedObjs[i] = list_parent.children[list_parent.children.length - (i + 1)];
	                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
	                                }
	                                //append elements to the end of the list
	                                for (var i = 0; i < blocksToMove; i++) {
	                                    list_parent.insertBefore(clonedObjs[i], list_parent.firstChild);
	                                }
	                                for (var i = 0; i < blocksToMove; i++) {
	                                    list_parent.removeChild(copiedObjs[i]);
	                                }
	                            }


	                            list_parent.style.left = (-list_elem_width - computedWidthVal) + "px";

	                            $timeout(function () {

	                                list_parent.style.transition = "all .5s ease";
	                                list_parent.style.left = "0px";
	                                if(typeof scope.is_custom != 'undefined' && scope.is_custom == 1){
	                                    blocksToMove = calculateBlocksToMove(visible_portion,list_elements);
	                                }else{
	                                    blocksToMove = 1;
	                                }
	                                //show counter
	                                showCounter();

	                            }, 300);

	                            $timeout(function () {
	                                list_parent.style.transition = "";
	                                running_status = 0;
	                            }, 700);
	                            return true;

	                        };

	                        //code for bullets initialization
	                        if (bullet_flag === 1) {
	                            var bullets = elem[0].getElementsByClassName('c_bullet');
	                            for (var i = 0; i < bullets.length; i++) {

	                                angular.element(bullets[i]).attr('c_index', i);
	                                if(i==0){
	                                    angular.element(bullets[i]).addClass('active');
	                                }

	                                angular.element(bullets[i]).on('click', function() {
	                                    self.init();
	                                    var index = parseInt(angular.element(this).attr('c_index'));
	                                    var prevIndexBullet = elem[0].getElementsByClassName('c_bullet active');
	                                    var prevIndex = angular.element(prevIndexBullet[0]).attr('c_index');
	                                    if (index == prevIndex) {
	                                        return;
	                                    } else if (index < prevIndex) {
	                                        blocksToMove = (prevIndex - index) * blocksToMove;
	                                        animateRight(list_parent, 0, 0, 0);
	                                        activateBullet(700, 'prev', prevIndex - index);
	                                    }
	                                    else if (index > prevIndex) {
	                                        blocksToMove = (index - prevIndex) * blocksToMove;
	                                        animateLeft(list_parent, 0, 0, 0);
	                                        activateBullet(700, 'next', index - prevIndex);
	                                    }

	                                });
	                            }

	                            var activateBullet = function(timeout,movementType,step) {
	                                if (!timeout) {
	                                    timeout = 700;
	                                }
	                                setTimeout(function() {
	                                    var curIndex = 0;
	                                    var bulletList = angular.element(bullets[0]).parent().children();
	                                    var visibleEleIndex = 0;
	                                    var listparentChildrenlength = list_parent.children.length;

	                                    for(var i=0;i<listparentChildrenlength;i++){
	                                        if(list_parent.children[i].className.indexOf("hidden_class")==-1 &&
	                                                list_parent.children[i].className.indexOf("empty_li")==-1 &&
	                                                list_parent.children[i].className.indexOf("download_schedule_div")==-1){
	                                            visibleEleIndex =  list_parent.children[i].className.substring(list_parent.children[i].className.indexOf("c_index_")+8,list_elements[i].className.length);
	                                            break;
	                                        }else if(list_parent.children[i].className.indexOf("hidden_class")==-1 &&
	                                                list_parent.children[i].className.indexOf("empty_li")==-1 &&
	                                                list_parent.children[i].className.indexOf("download_schedule_div")!=-1){
	                                            visibleEleIndex =  bulletList.length-1;
	                                            break;
	                                        }
	                                    }
	                                    angular.element(bullets[0]).parent().find('a').removeClass('active');
	                                    if(list_parent.children[i].className.indexOf("download_schedule_div")!=-1){
	                                        angular.element(bullets[bullets.length - 1]).addClass('active');
	                                    }else{
	                                        if(blocksToMove == 1){
	                                            angular.element(bullets[visibleEleIndex - 1]).addClass('active');
	                                        }else{
	                                            var toActivateIndex = parseInt(visibleEleIndex / blocksToMove);
	                                            angular.element(bullets[toActivateIndex]).addClass('active');
	                                        }
	                                    }

	                                }, timeout);
	                            };
	                        }

	                        var showPreviousBlock = function() {

	                            self.init();

	                            //if(running_status == 1 || list_elements.length <= blocksToMove) {
	                            if(running_status == 1) {
	                                return false;
	                            }
	                            var from = list_parent.offsetLeft;
	                            var to = list_parent.offsetLeft + list_elem_width;
	                            var rv = animateRight(list_parent, from, to, prev_limit);
	                            if (rv !== false && bullet_flag === 1) {
	                                var timeout = (Math.ceil(list_elem_width / move_unit) * move_timeout) + 50;
	                                activateBullet(700,'prev',1);
	                            }
	                        };

	                        var showNextBlock = function() {

	                            self.init();
	                            //if(running_status == 1 || list_elements.length <= visible_list_elems) {
	                            if(running_status == 1) {
	                                return false;
	                            }
	                            var from = list_parent.offsetLeft;
	                            var to = list_parent.offsetLeft - list_elem_width;
	                            blocksToMove = calculateBlocksToMove(visible_portion,list_elements);
	                            var rv = animateLeft(list_parent, from, to, next_limit);
	                            if (rv !== false && bullet_flag === 1) {
	                                var timeout = (Math.ceil(list_elem_width / move_unit) * move_timeout) + 50;
	                                activateBullet(700,'next',1);
	                            }
	                        };

	                        angular.element(prev_arrow).on('click', function() {
	                            showPreviousBlock();
	                        });

	                        angular.element(next_arrow).on('click', function() {
	                            showNextBlock();
	                        });

	                        hf.$(visible_portion).onSwipeLeft(function() {
	                            showNextBlock();
	                        });

	                        hf.$(visible_portion).onSwipeRight(function() {
	                            var bullets = elem[0].getElementsByClassName('c_bullet');
	                            var bulletList = angular.element(bullets[0]).parent().children();
                                if(bulletList.length != undefined && bulletList.length > 0)
	                            showPreviousBlock();
	                        });

	                        elem.on('mouseover', function() {
	                            scrolling_status = 0;
	                        });

	                        elem.on('mouseleave', function() {
	                            scrolling_status = 1;
	                        });

	                        if( scope.auto_scroll == 1 ) {
	                            $interval(function() {
	                                if(scrolling_status) {
	                                    angular.element(next_arrow).triggerHandler('click');
	                                }
	                            }, 3000);
	                        }
	                    };

	                    var carouselObj = null;
	                    if(scope.on_page_load == 1) {
	                        carouselObj = new carousel();
	                    }
	                    else {
	                        $timeout(function() {
	                            carouselObj = new carousel();
	                        }, 0);
	                    }
	                }
	            }
            };
        })
        // Dynamic carousel - re render based on the trigger parmeter change
        .directive('dirCarouselDynamic', function($timeout, $interval, HelperService, $rootScope,$compile) {
            return {
                scope: {
                    carousel_name: '@dirCarousel',
                    prev_active_class: '@prevActive',
                    prev_inactive_class: '@prevInactive',
                    next_active_class: '@nextActive',
                    next_inactive_class: '@nextInactive',
                    on_page_load:'@onPageLoad',
                    auto_scroll:'@autoScroll',
                    is_custom:'@isCustom',
                    show_all:'@showAll',
                    desktop_disabled:'@desktopDisabled',
                    trigger:'=',
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var navigationEventFlag = false;
                    var triggerCarousel = function () {
                        if(elem[0].getElementsByClassName('c_list_item').length == 0) {
                            return;
                        }

                        if(!(isDesktopDevice() && scope.desktop_disabled == 1)) {
                            var carousel = function () {
                                var hf, move_unit, move_timeout, bullet_flag, scrolling_status,
                                    visible_portion, list_parent, list_elements, list_elements_size, list_elem_width,
                                    running_status, prev_limit, visible_list_elems, next_limit, prev_arrow, next_arrow, computedWidthVal,
                                    move_count, already_moved, emptyLis, liList;

                                var self = this,
                                    hf = HelperService,
                                    running_status = 0,
                                    move_unit = 50;
                                move_timeout = 10,
                                    bullet_flag = 0,
                                    scrolling_status = 1,
                                    blocksToMove = 0,
                                    already_moved = 0, extraLiBucket = [];
                                var originalList = null;

                                if (elem[0].getElementsByClassName('c_bullet').length !== 0) {
                                    bullet_flag = 1;

                                }

                                if (originalList == null) {
                                    originalList = [];
                                    list_parent = elem[0].getElementsByClassName('c_list')[0];
                                    var objcopys = [];
                                    var objclones = [];
                                    for (var i = 0; i < list_parent.children.length; i++) {
                                        objcopys[i] = list_parent.children[i];
                                        objclones[i] = objcopys[i].cloneNode(true);
                                    }
                                    //append elements to the end of the list
                                    for (var i = 0; i < list_parent.children.length; i++) {
                                        originalList[i] = objclones[i];
                                    }

                                }

                                var calculateBlocksToMove = function (visible_portion, list_elements) {
                                    list_elements_size = list_elements.length;
                                    for (var i = 0; i < list_elements_size; i++) {
                                        if (list_elements[i].offsetWidth > 0) {
                                            blocksToMove = Math.round(visible_portion.offsetWidth / list_elements[i].offsetWidth);
                                            break;
                                        }
                                    }
                                    return blocksToMove;
                                }

                                var reArrangeList = function (list_parent) {
                                    var listChildren = list_parent.children.length;
                                    for (var i = 0; i < listChildren; i++) {
                                        list_parent.removeChild(list_parent.children[0]);
                                    }
                                    for (var i = 0; i < listChildren; i++) {
                                        list_parent.appendChild(originalList[i]);
                                    }
                                    var bullets = elem[0].getElementsByClassName('c_bullet');
                                    angular.element(bullets[0]).parent().find('a').removeClass('active');
                                    angular.element(bullets[0]).addClass('active');
                                    return list_parent;
                                }

                                var addEmptyLi = function () {
                                    //clear all empty lis
                                    emptyLis = list_parent.getElementsByClassName('c_list_item empty_li');
                                    var fullScheduleDiv = list_parent.getElementsByClassName('download_schedule_div');
                                    var emptyLisLength = emptyLis.length;
                                    if (emptyLis.length > 0) {
                                        for (var i = 0; i < emptyLisLength; i++) {
                                            list_parent.removeChild(list_parent.getElementsByClassName('c_list_item empty_li')[0]);
                                        }
                                    }
                                    list_parent = elem[0].getElementsByClassName('c_list')[0];
                                    list_elements = elem[0].getElementsByClassName('c_list_item');
                                    list_elements_size = list_elements.length;
                                    blocksToMove = calculateBlocksToMove(visible_portion, list_elements);
                                    var maxToShow = blocksToMove * 5;

                                    /* show/hide batches depending on screen size if show_all != 1 */
                                    if (scope.show_all != 1) {
                                        for (var i = 0; i < list_elements_size; i++) {
                                            var cIndex = list_elements[i].className.substring(list_elements[i].className.indexOf("c_index_") + 8, list_elements[i].className.length);
                                            if (cIndex > maxToShow) {
                                                list_elements[i].className = list_elements[i].className + " hidden_class";
                                                angular.element(fullScheduleDiv).removeClass("hidden_class");
                                            } else {
                                                list_elements[i].className = list_elements[i].className.replace(" hidden_class", "");
                                                angular.element(fullScheduleDiv).addClass("hidden_class");
                                            }

                                        }
                                    }
                                    list_elements_size = list_elements.length;
                                    var aa = list_elements_size % blocksToMove;
                                    if (aa != 0) {
                                        var bb = blocksToMove - aa;
                                        liList = [];
                                        for (var i = 0; i < bb; i++) {
                                            var li = document.createElement("li");
                                            li.style.border = "none";
                                            li.style.float = "left";
                                            li.style.width = "370px";
                                            li.style.marginRight = "30px";
                                            li.className = "c_list_item c_index_" + (list_elements_size + i + 1) + " empty_li";
                                            liList[i] = li;
                                        }
                                        if (typeof list_parent.getElementsByClassName("download_schedule_div") != 'undefined' &&
                                            list_parent.getElementsByClassName("download_schedule_div").length > 0) {
                                            if (list_elements_size < (blocksToMove * 5)) {
                                                for (var i = 0; i < bb; i++) {
                                                    list_parent.insertBefore(liList[i], list_parent.getElementsByClassName("download_schedule_div")[0]);
                                                }
                                            }
                                        } else {
                                            for (var i = 0; i < bb; i++) {
                                                list_parent.appendChild(liList[i]);
                                            }
                                        }
                                    }

                                    return list_parent;
                                }

                                this.iniit = function () {
                                    var firstEleIndex = 0;
                                    setTimeout(function () {
                                        visible_portion = elem[0].getElementsByClassName('c_screen')[0];
                                        list_parent = elem[0].getElementsByClassName('c_list')[0];
                                        list_parent = reArrangeList(list_parent);
                                        list_parent = addEmptyLi();

                                        /*show/hide bullets on orientation change*/
                                        if (bullet_flag == 1) {
                                            var bullets = elem[0].getElementsByClassName('c_bullet');
                                            var bulletsLen = bullets.length;
                                            var maxBulletsToShow = 0;
                                            var visibleEles = 0;
                                            for (var i = 0; i < list_parent.children.length; i++) {
                                                if (list_parent.children[i].className.indexOf("hidden_class") == -1) {
                                                    visibleEles++;
                                                }
                                            }
                                            if (visibleEles <= blocksToMove) {
                                                maxBulletsToShow = 0;
                                            } else if ((visibleEles % blocksToMove) == 0) {
                                                maxBulletsToShow = parseInt(visibleEles / blocksToMove);
                                            } else {
                                                maxBulletsToShow = parseInt(visibleEles / blocksToMove) + 1;
                                            }

                                            for (var i = 0; i < maxBulletsToShow; i++) {
                                                angular.element(bullets[i]).removeClass("hidden_class");
                                            }
                                            for (var i = maxBulletsToShow; i < bulletsLen; i++) {
                                                angular.element(bullets[i]).addClass("hidden_class");
                                            }

                                        }

                                        for (var i = 0; i < list_parent.children.length; i++) {
                                            var clsName = list_parent.children[i].className;
                                            if (clsName.indexOf('c_index_1') != -1) {
                                                firstEleIndex = i;
                                                break;
                                            }
                                        }
                                        copiedObjs = [];
                                        clonedObjs = [];
                                        if (firstEleIndex != 0) {
                                            for (var i = 0; i < firstEleIndex; i++) {
                                                copiedObjs[i] = list_parent.children[i];
                                                clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                            }
                                            //append elements to the end of the list
                                            for (var i = 0; i < firstEleIndex; i++) {
                                                list_parent.appendChild(clonedObjs[i]);
                                            }
                                            for (var i = 0; i < firstEleIndex; i++) {
                                                list_parent.removeChild(copiedObjs[i]);
                                            }
                                            copiedObjs = [];
                                            clonedObjs = [];

                                            var bullets = elem[0].getElementsByClassName('c_bullet');
                                            angular.element(bullets[0]).parent().find('a').removeClass('active');
                                            angular.element(bullets[0]).addClass('active');
                                        }

                                    }, 0);
                                }
                                //this.iniit();
                                if (typeof scope.is_custom != 'undefined' && scope.is_custom == 1) {
                                    this.iniit();
                                }

                                $rootScope.$on('orientationChanged', function (isOrientationChanged) {
                                    if (isOrientationChanged && typeof scope.is_custom != 'undefined' && scope.is_custom == 1) {
                                        self.iniit();
                                    }
                                });


                                this.init = function () {
                                    visible_portion = elem[0].getElementsByClassName('c_screen')[0];
                                    list_parent = elem[0].getElementsByClassName('c_list')[0];
                                    list_elements = elem[0].getElementsByClassName('c_list_item');
                                    list_elements_size = list_elements.length;
                                    if (typeof scope.is_custom != 'undefined' && scope.is_custom == 1) {
                                        blocksToMove = calculateBlocksToMove(visible_portion, list_elements);
                                    } else {
                                        blocksToMove = 1;
                                    }

                                    move_count = parseInt((list_elements_size / blocksToMove) + 1);
                                    prev_arrow = elem[0].getElementsByClassName('c_prev')[0];
                                    next_arrow = elem[0].getElementsByClassName('c_next')[0];
                                    var computedStyle = window.getComputedStyle(angular.element(list_elements[0])[0]);
                                    computedWidthVal = parseInt(computedStyle.paddingRight) + parseInt(computedStyle.paddingLeft) + parseInt(computedStyle.marginRight) + parseInt(computedStyle.marginLeft);
                                    computedWidthVal = computedWidthVal * blocksToMove;
                                    list_elem_width = list_elements[0].offsetWidth * blocksToMove;

                                    prev_limit = list_parent.offsetLeft;
                                    visible_list_elems = (Math.floor(visible_portion.offsetWidth / list_elem_width) === 0) ? Math.round(visible_portion.offsetWidth / list_elem_width) : Math.floor(visible_portion.offsetWidth / list_elem_width);
                                    next_limit = list_elem_width * (visible_list_elems - list_elements.length) + list_parent.offsetLeft;

                                    //if( list_elements.length <= 1 || list_elements.length <= blocksToMove ) {
                                    if (list_elements.length <= 1 || list_elements.length <= blocksToMove) {
                                        angular.element(prev_arrow).removeClass(scope.prev_active_class).addClass(scope.prev_inactive_class);
                                        angular.element(next_arrow).removeClass(scope.next_active_class).addClass(scope.next_inactive_class);
                                    }
                                    if (typeof list_parent.getElementsByClassName("download_schedule_div") != 'undefined' &&
                                        list_parent.getElementsByClassName("download_schedule_div").length > 0) {
                                        list_parent.getElementsByClassName("download_schedule_div")[0].style.width = visible_portion.offsetWidth + 'px';
                                    }


                                };

                                this.init();



                                //count total number of batches
                                var listparentchildrenlen = list_parent.children.length;
                                var totalBatchesCount = 0;
                                for (var i = 0; i < listparentchildrenlen; i++) {
                                    var currEle = list_parent.children[i];
                                    if (currEle.className.indexOf("c_index") != -1 && currEle.className.indexOf("empty_li") == -1) {
                                        totalBatchesCount++;
                                    }
                                }

                                //show counter
                                if (list_parent.children[0].className.indexOf("c_index") != -1) {
                                    var currEleIndex = list_parent.children[0].className.substring(list_parent.children[0].className.indexOf("c_index_") + 8, list_parent.children[0].className.length);
                                    //alert(currEleIndex);
                                    if (typeof elem[0].getElementsByClassName("dirCarouselCounter") != 'undefined' && elem[0].getElementsByClassName("dirCarouselCounter").length > 0) {
                                        elem[0].getElementsByClassName("dirCarouselCounter")[0].innerHTML = currEleIndex;
                                    }
                                }

                                var showCounter = function () {
                                    var listparentchildrenlen = list_parent.children.length;
                                    for (var i = 0; i < listparentchildrenlen; i++) {
                                        var currEle = list_parent.children[i];
                                        if (currEle.className.indexOf("c_index") != -1 && currEle.className.indexOf("hidden_class") == -1 && currEle.className.indexOf("download_schedule_div") == -1) {
                                            if (typeof elem[0].getElementsByClassName("batches_counter_span")[0] != 'undefined')
                                                elem[0].getElementsByClassName("batches_counter_span")[0].className = elem[0].getElementsByClassName("batches_counter_span")[0].className.replace(" hidden_class", "");
                                            if (typeof elem[0].getElementsByClassName("all_batches")[0] != 'undefined' && elem[0].getElementsByClassName("all_batches")[0].className.indexOf("hidden_class") == -1) {
                                                elem[0].getElementsByClassName("all_batches")[0].className = elem[0].getElementsByClassName("all_batches")[0].className + " hidden_class";
                                            }
                                            var currEleIndex = currEle.className.substring(currEle.className.indexOf("c_index_") + 8, currEle.className.length);
                                            if (typeof elem[0].getElementsByClassName("dirCarouselCounter") != 'undefined' && elem[0].getElementsByClassName("dirCarouselCounter").length > 0) {
                                                elem[0].getElementsByClassName("dirCarouselCounter")[0].innerHTML = currEleIndex;
                                            }
                                            break;
                                        } else if (currEle.className.indexOf("download_schedule_div") != -1) {
                                            elem[0].getElementsByClassName("all_batches")[0].className = elem[0].getElementsByClassName("all_batches")[0].className.replace(" hidden_class", "");
                                            elem[0].getElementsByClassName("batches_counter_span")[0].className = elem[0].getElementsByClassName("batches_counter_span")[0].className + " hidden_class";
                                            break;
                                        }
                                    }
                                }

                                var calculateHiddenElements = function (listEleLen) {
                                    var hiddenEleCount = 0;
                                    for (var i = 0; i < listEleLen; i++) {
                                        if (list_parent.children[i].className.indexOf("hidden_class") != -1) {
                                            hiddenEleCount++;
                                        }
                                    }
                                    return hiddenEleCount;
                                }

                                var animateLeft = function (obj, from, to, limit) {

                                    running_status = 1;
                                    var copiedObjs = [];
                                    var clonedObjs = [];
                                    var hiddenEleCount = 0;
                                    var listEleLen = list_elements.length;
                                    if (listEleLen <= blocksToMove && list_elements[0].className.indexOf("download_schedule_div") == -1) {
                                        running_status = 0;
                                        return true;
                                    }

                                    //calculate all elements those are hidden
                                    hiddenEleCount = calculateHiddenElements(listEleLen);

                                    //first append and remove all hidden elements if any are present at the beginning of the list
                                    if ((list_parent.children[0]).className.indexOf("hidden_class") != -1 && hiddenEleCount > 0) {
                                        for (var i = 0; i < hiddenEleCount; i++) {
                                            if (list_parent.children[i].className.indexOf("hidden_class") != -1) {
                                                copiedObjs[i] = list_parent.children[i];
                                                clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                                list_parent.appendChild(clonedObjs[i]);
                                            }
                                        }
                                        for (var i = 0; i < hiddenEleCount; i++) {
                                            list_parent.removeChild(copiedObjs[i]);
                                        }
                                        copiedObjs = [];
                                        clonedObjs = [];
                                    }


                                    //if first visible element is download schedule div, copy and remove it
                                    if ((list_parent.children[0]).className.indexOf("download_schedule_div") != -1) {
                                        copiedObjs[0] = list_parent.getElementsByTagName("li")[0];
                                        clonedObjs[0] = copiedObjs[0].cloneNode(true);
                                        list_parent.appendChild(clonedObjs[0]);
                                    }
                                    //if first visible element is a normal div, do a normal copy and remove
                                    else {
                                        for (var i = 0; i < blocksToMove; i++) {
                                            copiedObjs[i] = list_parent.children[i];
                                            clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                        }
                                        //append elements to the end of the list
                                        for (var i = 0; i < blocksToMove; i++) {
                                            list_parent.appendChild(clonedObjs[i]);

                                        }
                                    }

                                    //move the list to show desired elements with transition
                                    list_parent.style.transition = "all .5s ease";
                                    list_parent.style.left = (-list_elem_width - computedWidthVal) + "px";

                                    $timeout(function () {
                                        running_status = 0;
                                        //remove all elements from clonedObjs and copiedObjs
                                        if ((list_parent.children[0]).className.indexOf("download_schedule_div") != -1) {
                                            list_parent.removeChild(copiedObjs[0]);
                                        } else {
                                            for (var i = 0; i < blocksToMove; i++) {
                                                list_parent.removeChild(copiedObjs[i]);
                                            }
                                        }
                                        //reset left to original 0 value
                                        list_parent.style.transition = "";
                                        list_parent.style.left = "0px";
                                        if (typeof scope.is_custom != 'undefined' && scope.is_custom == 1) {
                                            blocksToMove = calculateBlocksToMove(visible_portion, list_elements);
                                        } else {
                                            blocksToMove = 1;
                                        }

                                        //show counter
                                        showCounter();

                                    }, 250);

                                    return true;
                                };

                                var animateRight = function (obj, from, to, limit) {
                                    running_status = 1;
                                    var copiedObjs = [];
                                    var clonedObjs = [];
                                    var lastEleIndex = angular.element(list_parent)[0].children.length - 1;
                                    var hiddenEleCount = 0;
                                    var listEleLen = lastEleIndex + 1;
                                    if (listEleLen <= blocksToMove) {
                                        running_status = 0;
                                        return true;
                                    }
                                    //calculate all elements those are hidden
                                    hiddenEleCount = calculateHiddenElements(listEleLen);

                                    //first append and remove all hidden elements if any are present at the end of the list
                                    if ((list_parent.children[lastEleIndex]).className.indexOf("hidden_class") != -1 && hiddenEleCount > 0) {
                                        for (var i = 0; i < hiddenEleCount; i++) {
                                            copiedObjs[hiddenEleCount - (i + 1)] = list_parent.children[lastEleIndex];
                                            clonedObjs[hiddenEleCount - (i + 1)] = copiedObjs[hiddenEleCount - (i + 1)].cloneNode(true);
                                            list_parent.insertBefore(clonedObjs[hiddenEleCount - (i + 1)], list_parent.firstChild);
                                        }
                                        for (var i = 0; i < hiddenEleCount; i++) {
                                            list_parent.removeChild(copiedObjs[i]);
                                        }
                                        copiedObjs = [];
                                        clonedObjs = [];
                                    }

                                    //if last visible element is download schedule div, copy and remove it
                                    if (list_parent.children[lastEleIndex].className.indexOf("download_schedule_div") != -1) {
                                        var copiedObj = list_parent.children[lastEleIndex];
                                        var clonedObj = copiedObj.cloneNode(true);
                                        list_parent.insertBefore(clonedObj, list_parent.children[0]);
                                        list_parent.removeChild(copiedObj);
                                    }
                                    //if last visible element is a normal div, do a normal copy and remove
                                    else {
                                        for (var i = 0; i < blocksToMove; i++) {
                                            copiedObjs[i] = list_parent.children[list_parent.children.length - (i + 1)];
                                            clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                        }
                                        //append elements to the end of the list
                                        for (var i = 0; i < blocksToMove; i++) {
                                            list_parent.insertBefore(clonedObjs[i], list_parent.firstChild);
                                        }
                                        for (var i = 0; i < blocksToMove; i++) {
                                            list_parent.removeChild(copiedObjs[i]);
                                        }
                                    }


                                    list_parent.style.left = (-list_elem_width - computedWidthVal) + "px";

                                    $timeout(function () {

                                        list_parent.style.transition = "all .5s ease";
                                        list_parent.style.left = "0px";
                                        if (typeof scope.is_custom != 'undefined' && scope.is_custom == 1) {
                                            blocksToMove = calculateBlocksToMove(visible_portion, list_elements);
                                        } else {
                                            blocksToMove = 1;
                                        }
                                        //show counter
                                        showCounter();

                                    }, 300);

                                    $timeout(function () {
                                        list_parent.style.transition = "";
                                        running_status = 0;
                                    }, 700);
                                    return true;

                                };

                                //code for bullets initialization
                                if (bullet_flag === 1) {
                                    var bullets = elem[0].getElementsByClassName('c_bullet');
                                    for (var i = 0; i < bullets.length; i++) {

                                        angular.element(bullets[i]).attr('c_index', i);
                                        if (i == 0) {
                                            angular.element(bullets[i]).addClass('active');
                                        }

                                        angular.element(bullets[i]).on('click', function () {
                                            self.init();
                                            var index = parseInt(angular.element(this).attr('c_index'));
                                            var prevIndexBullet = elem[0].getElementsByClassName('c_bullet active');
                                            var prevIndex = angular.element(prevIndexBullet[0]).attr('c_index');
                                            if (index == prevIndex) {
                                                return;
                                            } else if (index < prevIndex) {
                                                blocksToMove = (prevIndex - index) * blocksToMove;
                                                animateRight(list_parent, 0, 0, 0);
                                                activateBullet(700, 'prev', prevIndex - index);
                                            } else if (index > prevIndex) {
                                                blocksToMove = (index - prevIndex) * blocksToMove;
                                                animateLeft(list_parent, 0, 0, 0);
                                                activateBullet(700, 'next', index - prevIndex);
                                            }

                                        });
                                    }

                                    var activateBullet = function (timeout, movementType, step) {
                                        if (!timeout) {
                                            timeout = 700;
                                        }
                                        setTimeout(function () {
                                            var curIndex = 0;
                                            var bulletList = angular.element(bullets[0]).parent().children();
                                            var visibleEleIndex = 0;
                                            var listparentChildrenlength = list_parent.children.length;

                                            for (var i = 0; i < listparentChildrenlength; i++) {
                                                if (list_parent.children[i].className.indexOf("hidden_class") == -1 &&
                                                    list_parent.children[i].className.indexOf("empty_li") == -1 &&
                                                    list_parent.children[i].className.indexOf("download_schedule_div") == -1) {
                                                    visibleEleIndex = list_parent.children[i].className.substring(list_parent.children[i].className.indexOf("c_index_") + 8, list_elements[i].className.length);
                                                    break;
                                                } else if (list_parent.children[i].className.indexOf("hidden_class") == -1 &&
                                                    list_parent.children[i].className.indexOf("empty_li") == -1 &&
                                                    list_parent.children[i].className.indexOf("download_schedule_div") != -1) {
                                                    visibleEleIndex = bulletList.length - 1;
                                                    break;
                                                }
                                            }
                                            angular.element(bullets[0]).parent().find('a').removeClass('active');
                                            if (list_parent.children[i].className.indexOf("download_schedule_div") != -1) {
                                                angular.element(bullets[bullets.length - 1]).addClass('active');
                                            } else {
                                                if (blocksToMove == 1) {
                                                    angular.element(bullets[visibleEleIndex - 1]).addClass('active');
                                                } else {
                                                    var toActivateIndex = parseInt(visibleEleIndex / blocksToMove);
                                                    angular.element(bullets[toActivateIndex]).addClass('active');
                                                }
                                            }

                                        }, timeout);
                                    };
                                }

                                var showPreviousBlock = function () {

                                    self.init();

                                    //if(running_status == 1 || list_elements.length <= blocksToMove) {
                                    if (running_status == 1) {
                                        return false;
                                    }
                                    var from = list_parent.offsetLeft;
                                    var to = list_parent.offsetLeft + list_elem_width;
                                    var rv = animateRight(list_parent, from, to, prev_limit);
                                    if (rv !== false && bullet_flag === 1) {
                                        var timeout = (Math.ceil(list_elem_width / move_unit) * move_timeout) + 50;
                                        activateBullet(700, 'prev', 1);
                                    }
                                };

                                var showNextBlock = function () {

                                    self.init();
                                    //if(running_status == 1 || list_elements.length <= visible_list_elems) {
                                    if (running_status == 1) {
                                        return false;
                                    }
                                    var from = list_parent.offsetLeft;
                                    var to = list_parent.offsetLeft - list_elem_width;
                                    blocksToMove = calculateBlocksToMove(visible_portion, list_elements);
                                    var rv = animateLeft(list_parent, from, to, next_limit);
                                    if (rv !== false && bullet_flag === 1) {
                                        var timeout = (Math.ceil(list_elem_width / move_unit) * move_timeout) + 50;
                                        activateBullet(700, 'next', 1);
                                    }
                                };

                                // Prevent multiple event
                                if (!navigationEventFlag) {
                                    angular.element(prev_arrow).on('click', function () {
                                        showPreviousBlock();
                                    });

                                    angular.element(next_arrow).on('click', function () {
                                        showNextBlock();
                                    });
                                    navigationEventFlag = true;
                                }

                                hf.$(visible_portion).onSwipeLeft(function () {
                                    showNextBlock();
                                });

                                hf.$(visible_portion).onSwipeRight(function () {
                                    var bullets = elem[0].getElementsByClassName('c_bullet');
                                    var bulletList = angular.element(bullets[0]).parent().children();
                                    if (bulletList.length != undefined && bulletList.length > 0)
                                        showPreviousBlock();
                                });

                                elem.on('mouseover', function () {
                                    scrolling_status = 0;
                                });

                                elem.on('mouseleave', function () {
                                    scrolling_status = 1;
                                });

                                if (scope.auto_scroll == 1) {
                                    $interval(function () {
                                        if (scrolling_status) {
                                            angular.element(next_arrow).triggerHandler('click');
                                        }
                                    }, 3000);
                                }
                            };

                            var carouselObj = null;
                            if (scope.on_page_load == 1) {
                                carouselObj = new carousel();
                            } else {
                                $timeout(function () {
                                    carouselObj = new carousel();
                                }, 0);
                            }
                        }
                    }

                    triggerCarousel();

                    scope.$watch('trigger', function(newValue, oldValue) {
                        setTimeout(function() {
                            triggerCarousel();
                        }, 500)
                    });
	            }
            };
        })

        .directive('dirSlCarousel',function(HelperService,$rootScope,$timeout,$window){
            return {
              link: function(scope, element, attrs){
                     var carouselScreen, carouselList, carouselItems, carouselItemWidth, carouselItemsLength, carouselItemsVisible,
                             carouselItemsLength, carouselPrevBtn, carouselNxtBtn, maxSlides, currentSlide,hf = HelperService,isSliding;
                    var initCarousel = function(){
                        carouselScreen = element[0].getElementsByClassName('c_screen')[0];
                        carouselList = element[0].getElementsByClassName('c_list')[0];
                        carouselPrevBtn = element[0].getElementsByClassName('c_prev')[0];
                        carouselNxtBtn = element[0].getElementsByClassName('c_next')[0];
                        carouselItems = angular.element(carouselList).children();
                        carouselItemWidth = carouselItems[0].offsetWidth;
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                        maxSlides = (carouselItemsLength%carouselItemsVisible)==0?(carouselItemsLength/carouselItemsVisible):(parseInt(carouselItemsLength/carouselItemsVisible)+1);
                        currentSlide = 0;
                        carouselList.style.position = "relative";
                        addTransitionStyle(carouselList,"0.3s");
                        addTransformStyle(carouselList,0);
                        carouselList.style.width = "6000px";
                        isSliding=0;
                        angular.element(carouselPrevBtn).on('click',function(){
                           slideRight();
                        });
                        angular.element(carouselNxtBtn).on('click',function(){
                             slideLeft();
                        });
                        hf.$(carouselScreen).onSwipeLeft(function() {
                             slideLeft();
                        });
                        hf.$(carouselScreen).onSwipeRight(function() {
                             slideRight();
                        });
                        getCurrentTransformVal();
                        addEmptyLis(carouselList);
                    }
                    
                    var addEmptyLis = function(carouselList){
                        carouselItems = angular.element(carouselList).children();
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                        var aa = carouselItemsLength%carouselItemsVisible;
                        if(aa != 0){
                            var bb = carouselItemsVisible-aa;
                            var liList = [];
                            for(var i=0;i<bb;i++){
                                var li = document.createElement("li");
                                li.style.border = "none";
                                li.style.float = "left";
                                li.style.width = carouselItemWidth+"px";
                                li.className = "c_list_item c_index_"+(carouselItemsLength+i+1)+" empty_li";
                                liList[i] = li;
                            }
                            for(var i=0;i<bb;i++){
                                carouselList.appendChild(liList[i]);
                            }
                        }
                    }

                    var removeEmptyLis = function(carouselList){
                        var carouselItemsAll = angular.element(carouselList).children();
                        for(var i=0;i<carouselItemsAll.length;i++){
                            var carouselItemObj = carouselItemsAll[i];
                            if(carouselItemObj.className.indexOf("empty_li")!=-1){
                                carouselList.removeChild(carouselItemsAll[i]);
                            }
                        }
                    }
                    var calculateBlocksToMove = function(carouselScreen,carouselItems,carouselItemsLength){
                        var citemstomove = 0;
                        for(var i=0;i<carouselItemsLength;i++){
                            if(carouselItems[i].offsetWidth > 0){
                                citemstomove = Math.floor(carouselScreen.offsetWidth/carouselItems[i].offsetWidth);
                                break;
                            }
                        }
                        return citemstomove;
                    }
                    var addTransitionStyle = function(carouselList,transformVal){
                        carouselList.style.transition = "0.3s";
                        carouselList.style.setProperty("-webkit-transition", transformVal);
                        carouselList.style.setProperty("-moz-transition", transformVal);
                        carouselList.style.setProperty("-ms-transition", transformVal);
                        carouselList.style.setProperty("-o-transition", transformVal);
                    }
                    var addTransformStyle = function(carouselList,presentTransformVal){
                        carouselList.style.transform = "translate3d("+presentTransformVal+"px, 0px, 0px)";
                        carouselList.style.setProperty("-webkit-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-moz-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-ms-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-o-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                    }
                    var slideLeft = function(){
                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide < maxSlides-1){
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3s");
                                addTransformStyle(carouselList,presentTransformVal);
                                currentSlide++;
                                isSliding=0;
                            }else{
                                currentSlide=0;
                                var copiedObjs = [];
                                var clonedObjs = [];
                                for(var i=0;i<carouselItemsLength;i++){
                                    copiedObjs[i] = carouselList.children[i];
                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                }
                                //append elements to the end of the list
                                for(var i=0;i<carouselItemsLength;i++){
                                    carouselList.appendChild(clonedObjs[i]);
                                }
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3");
                                addTransformStyle(carouselList,presentTransformVal);
                                $timeout(function(){
                                    for(var i=0;i<carouselItemsLength;i++){
                                        carouselList.removeChild(copiedObjs[i]);
                                    }
                                    addTransitionStyle(carouselList,"");
                                    addTransformStyle(carouselList,0);
                                    currentSlide = 0;
                                    isSliding=0;
                                },300);
                            }
                        }
                    }

                    var slideRight = function(){
                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide == 0){
                                var copiedObjs = [], clonedObjs = [];
                                for(var i=0;i<carouselItemsLength;i++){
                                    copiedObjs[i] = carouselList.children[carouselItemsLength - (i + 1)];
                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                }
                                addTransitionStyle(carouselList,"");
                                //append elements to the end of the list
                                for(var i=0;i<clonedObjs.length;i++){
                                    carouselList.insertBefore(clonedObjs[i], carouselList.firstChild);
                                }
                                presentTransformVal = getCurrentTransformVal()-(carouselItemWidth*(carouselItemsLength));
                                addTransformStyle(carouselList,presentTransformVal);
                                setTimeout(function(){
                                    presentTransformVal = getCurrentTransformVal()+(carouselItemWidth*carouselItemsVisible);
                                    addTransitionStyle(carouselList,"0.3s");
                                    addTransformStyle(carouselList,presentTransformVal);
                                    for(var i=0;i<carouselItemsLength;i++){
                                        carouselList.removeChild(copiedObjs[i]);
                                    }
                                    currentSlide = maxSlides-1;
                                    isSliding=0;
                                },200);

                            }else{
                                if(currentSlide <= maxSlides){
                                    presentTransformVal = presentTransformVal+(carouselItemsVisible*carouselItemWidth);
                                    addTransitionStyle(carouselList,"0.3s");
                                    addTransformStyle(carouselList,presentTransformVal);
                                    currentSlide--;
                                    isSliding=0;
                                }
                            }
                        }
                    }

                    var getCurrentTransformVal = function(){
                        var transformStr = carouselList.style.transform;
                        var modifiedTransformStr = transformStr.substring(transformStr.indexOf("3d(")+3,transformStr.indexOf(",",transformStr.indexOf("3d(")));
                        modifiedTransformStr = modifiedTransformStr.replace("px","");
                        modifiedTransformStr = parseInt(modifiedTransformStr);
                        return modifiedTransformStr;
                    }
                    initCarousel();

                    $rootScope.$on('orientationChanged', function(isOrientationChanged){
                        if(isOrientationChanged){
                            isSliding=1;
                            $timeout(function(){
                                removeEmptyLis(carouselList);
                                addEmptyLis(carouselList);
                                addTransitionStyle(carouselList,"");
                                addTransformStyle(carouselList,0);
                                carouselItems = angular.element(carouselList).children();
                                carouselItemsLength = carouselItems.length;
                                carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                                maxSlides = (carouselItemsLength%carouselItemsVisible)==0?(carouselItemsLength/carouselItemsVisible):(parseInt(carouselItemsLength/carouselItemsVisible)+1);
                                currentSlide = 0;
                                isSliding=0;
                            },300);
                        }
                    });


                }
            }
        })
		.directive('dirDreamStories', function($window, $interval, HelperService, $q, $rootScope,$timeout) {
		            return {
		                scope: {
		                    prev_active_class: '@prevActive',
		                    prev_inactive_class: '@prevInactive',
		                    next_active_class: '@nextActive',
		                    next_inactive_class: '@nextInactive',
		                    on_page_load:'@onPageLoad',
		                    auto_scroll:'@autoScroll',
		                    arrow_events:'@arrowEvents',
		                    stop_scroll_on_click:'@stopScrollOnClick',
		                    page_name:'@pageName',
                            move_slow:'@moveSlow'
		                },
		                restrict: 'A',
		                replace: false,
		                link: function(scope, elem, attrs) {

		                    var carousel = function() {
		                        var hf, move_unit, move_timeout, scrolling_status,
		                            visible_portion, list_parent, list_elements, list_elem_width,
		                            running_status, prev_limit, visible_list_elems, next_limit, prev_arrow,
		                            next_arrow, dependents, cal_index;
		                        var self = this,
		                            hf = HelperService,
		                            running_status = 0,
		                            move_unit = 40,
		                            move_timeout = 20,
		                            select_index = 1;

		                        this.init = function() {
		                        	$timeout(function() {
		                        		scope.auto_scroll_init = 0;

		                        		if(scope.auto_scroll == 1)
		                        			scope.auto_scroll_init = ($rootScope.mobWidthFlag == 1 || $rootScope.hybridWidthFlag == 1)? 0 : 1;
		                        		move_timeout = $rootScope.mobWidthFlag == 1 ? 15 : move_timeout;
		                        		if(scope.auto_scroll_init == 0)
		                                	scope.scrolling_status = 0;
		                                else
		                                	scope.scrolling_status = 1;
		                            });
		                            visible_portion = elem[0].getElementsByClassName('c_screen')[0];
		                            list_parent = elem[0].getElementsByClassName('c_list')[0];
		                            list_elements = elem[0].getElementsByClassName('c_list_item');
		                            prev_arrow = elem[0].getElementsByClassName('c_prev')[0];
		                            next_arrow = elem[0].getElementsByClassName('c_next')[0];
		                            dependents = elem[0].getElementsByClassName('c_dependent')[0];
		                            list_elem_width = list_elements[0].offsetWidth;

		                            prev_limit = list_parent.offsetLeft;
		                            visible_list_elems = (Math.floor(visible_portion.offsetWidth / list_elem_width) === 0) ? Math.round(visible_portion.offsetWidth / list_elem_width) : Math.floor(visible_portion.offsetWidth / list_elem_width);
		                            next_limit = list_elem_width * (visible_list_elems - list_elements.length) + list_parent.offsetLeft;

		                            cal_index = list_elements.length > 5 ? 1 : parseInt(list_elements.length/2);
		                            select_index = cal_index;
		                            select_index = ($rootScope.hybridWidthFlag) ? 1 : cal_index;
		                            if($rootScope.hybridWidthFlag)
		                            move_timeout = list_elements.length < 4 ? 2 : move_timeout;

		                            if( list_elements.length <= 1 || list_elements.length <= visible_list_elems ) {
		                                angular.element(prev_arrow).removeClass(scope.prev_active_class).addClass(scope.prev_inactive_class);
		                                angular.element(next_arrow).removeClass(scope.next_active_class).addClass(scope.next_inactive_class);
		                            }
		                        };

		                        this.init();

		                        this.styleSelectedStory = function(pAction) {
		                            var selected_position = angular.element(list_elements[select_index]).attr('c_pos');
		                            if(pAction == 'removeClass') {
		                                angular.element(elem[0].getElementsByClassName('c_story')).removeClass('selected_stories');
		                                angular.element(dependents.querySelectorAll('[c_pos]')).css({'display':'none'});
		                            } else if(pAction == 'addClass') {
                                                if(list_elements[select_index]) {
                                                    angular.element(list_elements[select_index].getElementsByClassName('c_story')[0]).addClass('selected_stories');
                                                    angular.element(dependents.querySelector('[c_pos="'+selected_position+'"]')).css({'display':'block'});
                                                }
		                            }
		                        };

		                        self.styleSelectedStory('removeClass');
		                        self.styleSelectedStory('addClass');

		                        var animateLeft = function(obj, from, to, limit, deferred, pDoNotStyle) {
		                            if(!deferred){
		                                deferred = $q.defer();
		                            }
		                            running_status = 1;
		                            if (from === to) {
		                                var firstElement = list_elements[0];
		                                var clonedElement = firstElement.cloneNode(true);
		                                obj.appendChild(clonedElement);
		                                obj.removeChild(firstElement);

		                                running_status = 0;
		                                obj.style.left = (from + list_elem_width) + "px";
		                                if(pDoNotStyle !== true){
											self.styleSelectedStory('removeClass');
		                                    self.styleSelectedStory('addClass');
		                                }
		                                deferred.resolve(pDoNotStyle);
		                                return deferred.promise;
		                            }
		                            else {
		                                var box = obj;
		                                var unit = ((from - to) < move_unit) ? (from - to) : move_unit;
		                                box.style.left = from + "px";

		                                setTimeout(function() {
		                                    animateLeft(obj, from - unit, to, limit, deferred, pDoNotStyle);
		                                }, move_timeout);
		                            }

		                            return deferred.promise;
		                        };

		                        var animateRight = function(obj, from, to, limit, deferred, pDoNotStyle) {
		                            if(!deferred){
		                                deferred = $q.defer();
		                            }

		                            if(running_status == 0) {
		                                var lastElement = list_elements[list_elements.length - 1];
		                                var clonedElement = lastElement.cloneNode(true);
		                                obj.insertBefore(clonedElement, obj.firstChild);
		                                obj.removeChild(lastElement);
		                                obj.style.left = (from - list_elem_width) + "px";
		                                from = from - list_elem_width;
		                                to = to - list_elem_width;
		                            }

		                            running_status = 1;
		                            if (from === to) {
		                                running_status = 0;
		                                obj.style.left = from + "px";
		                                if(pDoNotStyle !== true) {
											self.styleSelectedStory('removeClass');
		                                    self.styleSelectedStory('addClass');
		                                }
		                                deferred.resolve(pDoNotStyle);
		                                return deferred.promise;
		                            }
		                            else {
		                                var box = obj;
		                                var unit = ((to - from) < move_unit) ? (to - from) : move_unit;
		                                box.style.left = from + "px";

		                                setTimeout(function() {
		                                    animateRight(obj, from + unit, to, null, deferred, pDoNotStyle);
		                                }, move_timeout);
		                            }

		                            return deferred.promise;
		                        };

		                        var showPreviousBlock = function(pDoNotStyle) {
		                            self.init();
		                            if(running_status == 1) {
		                                return false;
		                            }
		                            var from = list_parent.offsetLeft;
		                            var to = list_parent.offsetLeft + list_elem_width;
		                            var promise = animateRight(list_parent, from, to, prev_limit, null, pDoNotStyle).then(function(){});
		                            return promise;
		                        };

		                        var showNextBlock = function(pDoNotStyle) {
		                            self.init();
		                            if(running_status == 1) {
		                                return false;
		                            }
		                            var from = list_parent.offsetLeft;
		                            var to = list_parent.offsetLeft - list_elem_width;
		                            var promise = animateLeft(list_parent, from, to, next_limit, null, pDoNotStyle).then(function(){});
		                            return promise;
		                        };

		                        var closestCallback = function() {
		                            if(this.getAttribute && this.getAttribute('c_pos')) {
		                                return this;
		                            }
		                        };
		                        scope.leftClick = false;
		                        angular.element(prev_arrow).on('click', function() {
		                            if(scope.arrow_events == 1 && !scope.leftClick){
		                                var ga = new gaEventsTracker();
		                                ga.gaFireInteractiveEvents('Category_advisor_scroll_left', scope.page_name);
		                                scope.leftClick = true;
		                            }
		                            showPreviousBlock();
		                        });
		                        scope.rightClick = 0;
		                        angular.element(next_arrow).on('click', function() {
		                            if(scope.arrow_events == 1 && scope.rightClick == 1){
                                        var ga = new gaEventsTracker();
                                        ga.gaFireInteractiveEvents('Category_advisor_scroll_right', scope.page_name);
                                        scope.rightClick++;
                                    } else {
                                        scope.rightClick++;
                                    }
		                            showNextBlock();
		                        });

		                        elem.on('mouseover', function() {
		                        	scope.scrolling_status = 0;
		                        });

		                        elem.on('mouseleave', function() {
		                        	scope.scrolling_status = 1;
		                        });

		                        elem.on('touchend', function() {
		                        	$timeout(function() {
		                        		if(scope.auto_scroll_init)
		                        			scope.scrolling_status = 1;
		                        	}, 2000);
		                        });

		                        if(typeof scope.move_slow != 'undefined' && scope.move_slow == 1 ) {
		                            $interval(function() {
		                                if(scope.scrolling_status && scope.auto_scroll_init == 1) {
                                            $timeout(function () {
		                                    angular.element(next_arrow).triggerHandler('click');
                                        }, 10);
		                                }
		                            }, 10000);
		                        } else {
                                    $interval(function() {
                                        if(scope.scrolling_status  && scope.auto_scroll_init == 1) {
                                            $timeout(function () {
                                            angular.element(next_arrow).triggerHandler('click');
                                        }, 10);
                                        }
                                    }, 3000);
                                }

		                        angular.element(visible_portion).on('click', function(pEvt) {
		                            if(scope.stop_scroll_on_click == undefined || scope.stop_scroll_on_click != 1){
		                                self.init();
    		                            var target_elem = hf.$(pEvt.target).closest(closestCallback);
    		                            if(!target_elem) {
    		                                return false;
    		                            }
    		                            var index = parseInt(angular.element(target_elem.elem()).attr('c_pos'));
                                            for(var i=0;i<list_elements.length;i++) {
    		                                if(list_elements[i].getAttribute('c_pos') == index) {
    		                                    var list_position = i;
    		                                    break;
    		                                }
    		                            }

    		                            if(list_position < select_index) {
    		                                var diff = select_index - list_position;
    		                                var promises = [];
    		                                for(var i=0;i<diff;i++) {
    		                                    if(i===0) {
    		                                        promises[i] = showPreviousBlock(true);
    		                                    } else {
    		                                        promises[i] = promises[i-1].then(showPreviousBlock);
    		                                    }
    		                                }
    		                                $q.all(promises).then(function() {
    		                                    self.styleSelectedStory('removeClass');
    		                                    self.styleSelectedStory('addClass');
    		                                });
    		                            } else if(list_position > select_index) {
    		                                var diff = list_position - select_index;
    		                                var promises = [];
    		                                for(var i=0;i<diff;i++) {
    		                                    if(i===0) {
    		                                        promises[i] = showNextBlock(true);
    		                                    } else {
    		                                        promises[i] = promises[i-1].then(showNextBlock);
    		                                    }
    		                                }
    		                                $q.all(promises).then(function() {
    		                                    self.styleSelectedStory('removeClass');
    		                                    self.styleSelectedStory('addClass');
    		                                });
    		                            }
    		                        }
		                        });

		                        hf.$(visible_portion).onSwipeLeft(function() {
		                            var items = elem[0].getElementsByClassName('c_list_item');
		                            if(items.length != undefined && items.length > 1)
		                                showNextBlock();
		                        });

		                        hf.$(visible_portion).onSwipeRight(function() {
		                            var items = elem[0].getElementsByClassName('c_list_item');
		                            if(items.length != undefined && items.length > 1)
                                        showPreviousBlock();
		                        });

		                        hf.$(dependents).onSwipeLeft(function() {
		                            var items = elem[0].getElementsByClassName('c_list_item');
		                            if(items.length != undefined && items.length > 1)
                                        showNextBlock();
		                        });

		                        hf.$(dependents).onSwipeRight(function() {
		                            var items = elem[0].getElementsByClassName('c_list_item');
		                            if(items.length != undefined && items.length > 1)
                                        showPreviousBlock();
		                        });
		                    };

		                    var carouselObj = null;
		                    angular.element($window).on('load', function() {
		                        carouselObj = new carousel();
		                    });

		                    $rootScope.$on('orientationChanged', function(pEvt, pVal) {
		                        if(pVal && carouselObj) {
		                            carouselObj.init();
		                            carouselObj.styleSelectedStory('removeClass');
		                            carouselObj.styleSelectedStory('addClass');

		                        }
		                    });
		                }
		            };
		})
        .directive('scrollPosition', function($window) {
            return {
                scope: {
                    scrollVal: '=scrollPage',
                    showStickyHeader: '=showStickyHeader',
                    defaultHeight: '=defaultHeight',
                    isStickyFlag: '='
                },
                link: function(scope, element, attrs) {
                    var windowEl = angular.element($window);
                    var handler = function() {
                        scope.scrollVal = window.pageYOffset;
                        if (window.pageYOffset > scope.defaultHeight) {
                            scope.showStickyHeader = {'display': 'block'};
                            scope.isStickyFlag = 1;

                        } else {
                            scope.showStickyHeader = {'display': 'none'};
                            scope.isStickyFlag = 0;
                        }
                    }
                    windowEl.on('scroll', scope.$apply.bind(scope, handler));
                    handler();
                }
            };
        })
        .directive('customCheckbox', function() {
            return{
                scope: {
                },
                link: function(scope, element, attrs) {
                    element.on('click', function() {
                        if (element.hasClass("default_img")) {
                            element.removeClass("default_img");
                            element.addClass("selected_img");
                        } else {
                            element.addClass("default_img");
                            element.removeClass("selected_img");
                        }

                    });
                }
            }
        })
        .directive('dirCustomRadioBtns', function() {
            return{
                scope: {
                    radioClass:'@',
                    radioChecked:'@',
                    radioUnchecked:'@'
                },
                link: function(scope, element, attrs) {
                    var radio_btns = element[0].getElementsByClassName(scope.radioClass);

                    angular.element(radio_btns).on('click', function() {
                        var targetElem = angular.element(this);

                        //if button is unchecked, remove all checked buttons and check current button
                        if (targetElem.hasClass(scope.radioUnchecked)) {
                            angular.element(radio_btns).removeClass(scope.radioChecked);
                            angular.element(radio_btns).addClass(scope.radioUnchecked);
                            targetElem.removeClass(scope.radioUnchecked);
                            targetElem.addClass(scope.radioChecked);
                        } else {
                            targetElem.addClass(scope.radioUnchecked);
                            targetElem.removeClass(scope.radioChecked);
                        }
                    });
                }
            }
        })
        .directive('dirFormSubmit', function() {
            return {
                scope: {
                    formId: '@dirFormSubmit',
                    formData: '@'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    elem.on('click', function() {
                        var formObj = document.getElementById(scope.formId);
                        scope.formData = eval('(' + scope.formData + ')');
                        for (param in scope.formData) {
                            var input = document.createElement('input');
                            input.type = 'hidden';
                            input.name = param;
                            input.value = scope.formData[param];
                            formObj.appendChild(input);
                        }
                        formObj.submit();
                    });
                }
            };
        })
        .directive('stopEvent', function() {
            return {
                restrict: 'A',
                replace: false,
                link: function(scope, element, attr) {
                    var evt = attr.stopEvent || 'click';
                    element.bind(evt, function(e) {
                        e.stopPropagation();
                    });
                }
            };
        })
        .directive("closeOnEscape", function($document) {
            return {
                scope: {
                    closeFn: '&closeOnEscape'
                },
                link: function(scope) {
                    $document.on("keyup", function(event) {
                        if (event.keyCode === 27) {
                            scope.$apply(function() {
                                scope.closeFn();
                            });
                        }
                    });
                }
            };
        })
        .directive('dirAccordion', function($timeout) {
            return {
                scope: {
                    activeHeadClass: '@accHeadClass',
                    arrowUpClass: '@accArrowUp',
                    arrowDownClass: '@accArrowDown',
                    activeShadeClass: '@activeShadeClass',
                    inactiveShadeClass: '@inactiveShadeClass',
                    autoScrollLimit: '@autoScrollLimit',
                    enableScroll: '@enableScroll',
                    keepFirstClosed:'='
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var scrollLimit = 40;/* 40 is sticky banner height */
                    if(typeof scope.autoScrollLimit != 'undefined') {
                        scrollLimit = scope.autoScrollLimit;
                    }
                    //firing timeout so that directive executes after dom is ready
                    $timeout(function() {

                        var height_arr = new Array();
                        var acc_dropdown_temp = elem.children();
                        var acc_dropdown = new Array();

                        //for( prop in acc_dropdown_temp )
                        for (var i = 0; i < acc_dropdown_temp.length; i++) {
                            if (angular.element(acc_dropdown_temp[i]).hasClass('acc-exclude')) {
                                continue;
                            }
                            //this plugin assumes that the each accordion element will have 2 children, one containing the heading and the other the content.
                            acc_dropdown.push(angular.element(acc_dropdown_temp[i]).children()[0]);
                            acc_dropdown.push(angular.element(acc_dropdown_temp[i]).children()[1]);
                        }

                        var move_unit = 50,
                                move_timeout = 20;

                        var init_accordion = function() {

                            for (var i = 1; i < acc_dropdown.length; i += 2) {
                                angular.element(acc_dropdown[i]).css('padding', '0');
                                angular.element(acc_dropdown[i]).css('margin', '0');
                                angular.element(acc_dropdown[i]).css('overflow', 'hidden');
                                angular.element(acc_dropdown[i]).attr('a_index', (i - 1) / 2);
                                height_arr.push(acc_dropdown[i].offsetHeight);
                                //keepFirstClosed = 1 is used to keep first one closed by default
                                if( (typeof scope.keepFirstClosed !='undefined' && scope.keepFirstClosed == 1)) { //this will execute if keepFirstClosed = 1 or element is not the first one
                                // if( (typeof scope.keepFirstClosed !='undefined' && scope.keepFirstClosed == 1) || i > 1 ) { //this will execute if keepFirstClosed = 1 or element is not the first one
                                    angular.element(acc_dropdown[i]).css('height', '0');
                                    angular.element(acc_dropdown[i]).removeClass('acc-active');
                                    if (!!scope.activeHeadClass)
                                        angular.element(acc_dropdown[i - 1]).removeClass(scope.activeHeadClass);

                                    if (!!scope.arrowUpClass && !!scope.arrowDownClass)
                                        angular.element(acc_dropdown[i - 1].getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowUpClass).addClass(scope.arrowDownClass);

                                }
                                // else {//this will execute if element is the first one
                                //     if (!!scope.activeHeadClass)
                                //         angular.element(acc_dropdown[i - 1]).addClass(scope.activeHeadClass);

                                //     if (!!scope.arrowUpClass && !!scope.arrowDownClass)
                                //         angular.element(acc_dropdown[i - 1].getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowDownClass).addClass(scope.arrowUpClass);
                                // }

                                if( i == 1 ) {      //always keep class acc-active for first element
                                    angular.element(acc_dropdown[i]).addClass('acc-active');
                                }
                            }
                        }();

                        var divHeight = function(ele) {
                            var x = 0;
                            while (ele) {
                                x += ele.offsetTop;
                                ele = ele.offsetParent;
                            }
                            return x;
                        };

                        var slideAction = function(elemObj){
                            var parentObj = elemObj.parentNode;
                            var heightDiff = (divHeight(parentObj)-window.pageYOffset-scrollLimit);
                            var pageYOffset = window.pageYOffset;
                            if(heightDiff >= 150){
                                window.scrollBy(0,150);
                                if(pageYOffset == window.pageYOffset) {
                                    return false;
                                }
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else if(150 >= heightDiff && heightDiff >= 100){
                                window.scrollBy(0,100);
                                if(pageYOffset == window.pageYOffset) {
                                    return false;
                                }
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else if(100 >= heightDiff && heightDiff >= 60){
                                window.scrollBy(0,60);
                                if(pageYOffset == window.pageYOffset) {
                                    return false;
                                }
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else{
                                window.scrollBy(0,(divHeight(parentObj)-window.pageYOffset)-scrollLimit);
                                return false;
                            }
                            return true;
                        };

                        var animateDown = function(elemObj, fromHeight, toHeight) {
//                            if (fromHeight === toHeight) {
//                                elemObj.style.height = 'auto';
//                                return false;
//                            }
//                            else {
//                                var unit = ((toHeight - fromHeight) < move_unit) ? (toHeight - fromHeight) : move_unit;
//                                elemObj.style.height = fromHeight + 'px';
//                                setTimeout(function() {
//                                    animateDown(elemObj, fromHeight + unit, toHeight);
//                                }, move_timeout);
//                            }
//
//                            return true;

                            elemObj.style.height = 'auto';
                            if(typeof scope.enableScroll == 'undefined' || scope.enableScroll == 1) {
                                setTimeout(function(){
                                    slideAction(elemObj);
                                },50);
                            }
                            return false;
                        };

                        var animateUp = function(elemObj, height) {
//                            if (height === 0) {
//                                elemObj.style.height = height + 'px';
//                                return false;
//                            }
//                            else {
//                                var unit = (height < move_unit) ? height : move_unit;
//                                elemObj.style.height = height + 'px';
//                                setTimeout(function() {
//                                    animateUp(elemObj, height - unit);
//                                }, move_timeout);
//                            }
//
//                            return true;

                            elemObj.style.height = '0';
                                return false;
                        };

                        var showElement = function(newElem, oldElem) {
                            var new_elem_height = height_arr[angular.element(newElem).attr('a_index')];
                            if( newElem === oldElem && ( newElem.style.height === '0' || newElem.style.height === '0px' ) ) {
                                animateDown(newElem, newElem.offsetHeight, new_elem_height);
                            }
                            else if( newElem === oldElem && ( newElem.style.height !== '0' || newElem.style.height !== '0px' ) ) {
                                animateUp(oldElem, oldElem.offsetHeight);
                            }
                            else {
                                animateUp(oldElem, oldElem.offsetHeight);
                                animateDown(newElem, newElem.offsetHeight, new_elem_height);
                            }
                        };

                        for (var i = 0; i < acc_dropdown.length; i+=2) {

                        angular.element(acc_dropdown[i]).on('click', function(e) {

                            if (angular.element(this).parent().hasClass('acc-exclude'))
                                return;

                            var new_elem = angular.element(this).parent().children()[1],
                                    new_elem_head = angular.element(this)[0],
                                    old_elem = angular.element(this).parent().parent()[0].getElementsByClassName('acc-active')[0],
                                    old_elem_head = angular.element(old_elem).parent().children()[0];

                            if (angular.element(new_elem).hasClass('acc-active')) {
                                //return;
                            }

                            if (!!scope.activeHeadClass) {
                                if( new_elem === old_elem && angular.element(new_elem_head).hasClass(scope.activeHeadClass) ) {
                                    angular.element(new_elem_head).removeClass(scope.activeHeadClass);
                                }
                                else if( new_elem === old_elem && !angular.element(new_elem_head).hasClass(scope.activeHeadClass) ) {
                                    angular.element(new_elem_head).addClass(scope.activeHeadClass);
                                }
                                else {
                                    angular.element(old_elem_head).removeClass(scope.activeHeadClass);
                                    angular.element(new_elem_head).addClass(scope.activeHeadClass);
                                }
                            }

                            if (!!scope.arrowUpClass && !!scope.arrowDownClass) {
                                if( new_elem === old_elem && angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).hasClass(scope.arrowDownClass) ) {
                                    angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowDownClass).addClass(scope.arrowUpClass);
                                }
                                else if( new_elem === old_elem && !angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).hasClass(scope.arrowUpClass) ) {
                                    angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowUpClass).addClass(scope.arrowDownClass);
                                }
                                else {
                                    angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowDownClass).addClass(scope.arrowUpClass);
                                    angular.element(old_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(scope.arrowUpClass).addClass(scope.arrowDownClass);
                                }
                            }

                            angular.element(old_elem).removeClass('acc-active');
                            angular.element(new_elem).addClass('acc-active');

                            showElement(new_elem, old_elem);

                            if(scope.activeShadeClass != '' && scope.inactiveShadeClass != '') {
                                var liMembers = angular.element(this).parent().parent().children();
                                if(old_elem != new_elem) {
                                    for(var count = 0; count < liMembers.length; count++) {
                                        var currentLi = angular.element(liMembers[count]).children()[0];
                                        angular.element(currentLi).removeClass(scope.activeShadeClass).addClass(scope.inactiveShadeClass);
                                    }
                                }
                                var classedElement = angular.element(this);
                                if(classedElement.hasClass(scope.inactiveShadeClass)) {
                                    classedElement.removeClass(scope.inactiveShadeClass).addClass(scope.activeShadeClass);
                                } else if(classedElement.hasClass(scope.activeShadeClass)) {
                                    classedElement.removeClass(scope.activeShadeClass).addClass(scope.inactiveShadeClass);
                                }
                            }
                        });
                        }
                    }, 100);
                }
            };
        }).directive('dirMultiAccordion', function($timeout) {
    return {
        scope: {
            acc_levels: "@accLevels",
            compile_acc:"=compileAcc",
            compile_check:"=compileCheck",
            enableScroll: '@enableScroll',
        },
        restrict: 'A',
        replace: false,
        link: function(scope, elem, attrs) {
            //firing timeout so that directive executes after dom is ready
            $timeout(function() {

                if (parseInt(scope.acc_levels) < 2)
                    return;

                var setupAccordion = function(accObj, level) {

                    var acc_obj = angular.element(accObj);
                    var acc_dropdown_temp = acc_obj.children();
                    var acc_dropdown = new Array();
                    var arrowUpClass = acc_obj.attr('acc-arrow-up');
                    var arrowDownClass = acc_obj.attr('acc-arrow-down');

                    //for( prop in acc_dropdown_temp )
                    for (var i = 0; i < acc_dropdown_temp.length; i++) {
                        if (angular.element(acc_dropdown_temp[i]).hasClass('acc-exclude')) {
                            continue;
                        }
                        //this plugin assumes that the each accordion element will have 2 children, one containing the heading and the other the content.
                        acc_dropdown.push(angular.element(acc_dropdown_temp[i]).children()[0]);
                        acc_dropdown.push(angular.element(acc_dropdown_temp[i]).children()[1]);
                    }

                    var move_unit = 500,
                        move_timeout = 100;
                    var init_accordion = function() {

                        for (var i = 1; i < acc_dropdown.length; i += 2) {
                            angular.element(acc_dropdown[i]).css('padding', '0');
                            angular.element(acc_dropdown[i]).css('margin', '0');
                            angular.element(acc_dropdown[i]).css('overflow', 'hidden');
                            angular.element(acc_dropdown[i]).attr('a_index', (i - 1) / 2);
                            angular.element(acc_dropdown[i]).attr('a_height', acc_dropdown[i].offsetHeight);

                            //acc-close-first = 1 is used to keep first one closed by default
                            if( acc_obj.attr("acc-close-first") == 1 || i > 1 ) { //this will execute if attribute acc-close-first = 1 or element is not the first one
                                angular.element(acc_dropdown[i]).css('height', '0');
                                angular.element(acc_dropdown[i]).removeClass('acc-active');
                                angular.element(acc_dropdown[i]).attr('acc-level', level);
                                if (!!scope.activeHeadClass)
                                    angular.element(acc_dropdown[i - 1]).removeClass(scope.activeHeadClass);

                                if (!!arrowUpClass && !!arrowDownClass)
                                    angular.element(acc_dropdown[i - 1].getElementsByClassName('acc-arrow')[0]).removeClass(arrowUpClass).addClass(arrowDownClass);
                            } else {//this will execute if element is the first one
                                angular.element(acc_dropdown[i]).attr('acc-level', level);
                                if (!!scope.activeHeadClass)
                                    angular.element(acc_dropdown[i - 1]).addClass(scope.activeHeadClass);

                                if (!!arrowUpClass && !!arrowDownClass)
                                    angular.element(acc_dropdown[i - 1].getElementsByClassName('acc-arrow')[0]).removeClass(arrowDownClass).addClass(arrowUpClass);
                            }

                            if( i == 1 ) {      //always keep acc-active class in first element
                                angular.element(acc_dropdown[i]).addClass('acc-active');
                            }
                        }
                    }();

                    var divHeight = function(ele) {
                            var x = 0;
                            while (ele) {
                                x += ele.offsetTop;
                                ele = ele.offsetParent;
                            }
                            return x;
                        };

                    var slideAction = function(elemObj){
                            var heightDiff = (divHeight(elemObj)-window.scrollY)-80;
                            if(heightDiff >= 150){
                                window.scrollBy(0,150);
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else if(150 >= heightDiff && heightDiff >= 100){
                                window.scrollBy(0,100);
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else if(100 >= heightDiff && heightDiff >= 50){
                                window.scrollBy(0,50);
                                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
                            }else{
                                window.scrollBy(0,(divHeight(elemObj)-window.scrollY)-80);
                                return false;
                            }
                            return true;
                        };

                    var animateDown = function(elemObj, fromHeight, toHeight) {
//                        if (fromHeight === toHeight) {
//                            elemObj.style.height = fromHeight + 'px';
//                            return false;
//                        }
//                        else {
//                            var unit = ((toHeight - fromHeight) < move_unit) ? (toHeight - fromHeight) : move_unit;
//                            elemObj.style.height = fromHeight + 'px';
//                            setTimeout(function() {
//                                animateDown(elemObj, fromHeight + unit, toHeight);
//                            }, move_timeout);
//                        }
//
//                        return true;
                            elemObj.style.height = 'auto';
                            if(typeof scope.enableScroll == 'undefined' || scope.enableScroll == 1) {
                                setTimeout(function(){
                                    slideAction(elemObj);
                                },50);
                            }
                            return false;
                    };

                    var animateUp = function(elemObj, height, limit) {
//                        if (height === 0) {
//                            elemObj.style.height = height + 'px';
//                            return false;
//                        }
//                        else if (limit !== null && height === limit) {
//                            elemObj.style.height = height + 'px';
//                            return false;
//                        }
//                        else {
//                            var unit = (height < move_unit) ? height : move_unit;
//                            elemObj.style.height = height + 'px';
//                            setTimeout(function() {
//                                animateUp(elemObj, height - unit, limit);
//                            }, move_timeout);
//                        }
//
//                        return true;
elemObj.style.height = '0';
                                return false;
                    };

                    var showElement = function(newElem, oldElem) {
                        var new_elem_height = parseInt(angular.element(newElem).attr('a_height'));

                        if( newElem === oldElem && ( newElem.style.height === '0' || newElem.style.height === '0px' ) ) {
                            animateDown(newElem, newElem.offsetHeight, new_elem_height);
                        }
                        else if( newElem === oldElem && ( newElem.style.height !== '0' && newElem.style.height !== '0px' ) ) {
                            animateUp(oldElem, oldElem.offsetHeight);
                        }
                        else {
                            animateDown(newElem, newElem.offsetHeight, new_elem_height);
                            animateUp(oldElem, oldElem.offsetHeight, null);
                        }

                        var curr_level = angular.element(newElem).attr('acc-level');

                        for (var i = 1; i < curr_level; i++) {
                            var new_parent_elem = angular.element(newElem).parent().parent();
                            new_parent_elem.css('height', 'auto');
                        }

                        angular.element(oldElem).attr('a_height', oldElem.offsetHeight);
                    };

                    for (var i = 0; i < acc_dropdown.length; i+=2) {

                    //acc_obj.children().on('click', function() {
                    angular.element(acc_dropdown[i]).on('click', function() {

                        if (angular.element(this).parent().hasClass('acc-exclude'))
                            return;

                        var new_elem = angular.element(this).parent().children()[1],
                                new_elem_head = angular.element(this).parent().children()[0];

                        var old_elem = angular.element(this).parent().parent()[0].getElementsByClassName('acc-active');

                        //find active element inside the same level accordion
                        for (var i = 0; i < old_elem.length; i++) {
                            if (angular.element(old_elem[i]).attr('acc-level') == level) {
                                old_elem = old_elem[i];
                                break;
                            }
                        }

                        var old_elem_head = angular.element(old_elem).parent().children()[0];

                        if (angular.element(new_elem).hasClass('acc-active')) {
                            //return;
                        }

                        if (!!scope.activeHeadClass) {
                            if( new_elem === old_elem && angular.element(new_elem_head).hasClass(scope.activeHeadClass) ) {
                                angular.element(new_elem_head).removeClass(scope.activeHeadClass);
                            }
                            else if( new_elem === old_elem && !angular.element(new_elem_head).hasClass(scope.activeHeadClass) ) {
                                angular.element(new_elem_head).addClass(scope.activeHeadClass);
                            }
                            else {
                                angular.element(old_elem_head).removeClass(scope.activeHeadClass);
                                angular.element(new_elem_head).addClass(scope.activeHeadClass);
                            }
                        }

                        if (!!arrowUpClass && !!arrowDownClass) {
                            if( new_elem === old_elem && angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).hasClass(arrowDownClass) ) {
                                angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(arrowDownClass).addClass(arrowUpClass);
                            }
                            else if( new_elem === old_elem && !angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).hasClass(arrowUpClass) ) {
                                angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(arrowUpClass).addClass(arrowDownClass);
                            }
                            else {
                                angular.element(new_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(arrowDownClass).addClass(arrowUpClass);
                                angular.element(old_elem_head.getElementsByClassName('acc-arrow')[0]).removeClass(arrowUpClass).addClass(arrowDownClass);
                            }
                        }

                        angular.element(old_elem).removeClass('acc-active');
                        angular.element(new_elem).addClass('acc-active');

                        showElement(new_elem, old_elem);
                    });
                    }
                };



                if(scope.compile_check == 1){
                    scope.$watch('compile_acc', function(newValue, oldValue) {
                        if (newValue == 1){
                            var levels = parseInt(scope.acc_levels);
                            var acc_arr = new Array();

                            for (i = 0; i < levels; i++) {
                                if (i === levels - 1) {
                                    var temp_acc = new Array(elem[0]);
                                }
                                else {
                                    var temp_acc = elem[0].querySelectorAll('[multi-acc-level="' + (levels - i) + '"]');
                                }
                                acc_arr.push(temp_acc);

                                for (var j = 0; j < temp_acc.length; j++) {
                                    setupAccordion(temp_acc[j], (levels - i));
                                }
                            }
                        }

                    }, true);
                }else{
                    var levels = parseInt(scope.acc_levels);
                    var acc_arr = new Array();

                    for (i = 0; i < levels; i++) {
                        if (i === levels - 1) {
                            var temp_acc = new Array(elem[0]);
                        }
                        else {
                            var temp_acc = elem[0].querySelectorAll('[multi-acc-level="' + (levels - i) + '"]');
                        }
                        acc_arr.push(temp_acc);

                        for (var j = 0; j < temp_acc.length; j++) {
                            setupAccordion(temp_acc[j], (levels - i));
                        }
                    }
                }


            }, 100);
        }
    };
})
        .directive('slideAnimation', function() {
            return {
                scope: {
                    slideMaxHeight: "@slideMaxHeight",
                    slideMinHeight: "@slideMinHeight",
                    slideSectionName: "@slideSectionName",
                    slideCollapsedClass: "@slideCollapsedClass",
                    slideExpandedClass: "@slideExpandedClass",
                    slideIndependentSection: "@slideIndependentSection",
                    slideSectionCollapse: "@slideSectionCollapse",
					moveUnit: "@moveUnit",
					slideMobVar:"=slideMobVar",
					mobMinHeight:"@mobMinHeight"
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
					if(typeof scope.moveUnit == 'undefined')
					var move_unit = parseInt('50');
					else
					var move_unit = parseInt(scope.moveUnit);
                    elem.on('click', function(event) {
                        event.preventDefault();
						if(scope.slideMobVar == 1){
							var mobMinHeight = parseInt(scope.mobMinHeight);
							var par = elem.parent().parent().parent()[0];
							if(par.style.height == "auto"){
								par.style.height = mobMinHeight+"px";
								elem[0].className = elem[0].className.replace(scope.slideExpandedClass, scope.slideCollapsedClass);
							}else{
								par.style.height = "auto";
								elem[0].className = elem[0].className.replace(scope.slideCollapsedClass, scope.slideExpandedClass);
							}
						}else{
							var maxHeight = parseInt(scope.slideMaxHeight);
							var minHeight = parseInt(scope.slideMinHeight);

							if (scope.slideIndependentSection == "") {
								var parentDivObj = elem[0].parentNode;
								for (var i = 0; i < 5; i++) {
									if (parentDivObj.className.indexOf(scope.slideSectionName) != -1) {
										break;
									} else {
										parentDivObj = (parentDivObj).parentNode;
									}
								}
							} else {
								var parentDivObj = document.getElementsByClassName(scope.slideIndependentSection)[0];
							}
							if (parentDivObj.offsetHeight >= maxHeight) {
								animateUp(parentDivObj, maxHeight, minHeight);
								elem[0].className = elem[0].className.replace(scope.slideExpandedClass, scope.slideCollapsedClass);
								parentDivObj.className = parentDivObj.className + " " + scope.slideSectionCollapse;
							} else {
								animateDown(parentDivObj, minHeight, maxHeight);
								elem[0].className = elem[0].className.replace(scope.slideCollapsedClass, scope.slideExpandedClass);
								parentDivObj.className = parentDivObj.className.replace(scope.slideSectionCollapse, "");
							}
						}
                    });


                    var move_timeout = 10;

                    var animateDown = function(elemObj, fromHeight, toHeight) {
                        if (fromHeight === toHeight) {
                            elemObj.style.height = fromHeight + 'px';
                            return false;
                        }
                        else {
                            var unit = ((toHeight - fromHeight) < move_unit) ? (toHeight - fromHeight) : move_unit;
                            elemObj.style.height = fromHeight + 'px';
                            setTimeout(function() {
                                animateDown(elemObj, fromHeight + unit, toHeight);
                            }, move_timeout);
                        }

                        return true;
                    };

                    var animateUp = function(elemObj, height, limit) {
                        if (height === 0) {
                            elemObj.style.height = height + 'px';
                            return false;
                        }
                        else if (limit !== null && height === limit) {
                            elemObj.style.height = height + 'px';
                            return false;
                        }
                        else {
                            var unit = (height < move_unit) ? height : move_unit;
                            elemObj.style.height = height + 'px';
                            setTimeout(function() {
                                animateUp(elemObj, height - unit, limit);
                            }, move_timeout);
                        }

                        return true;
                    };
                }
            }
        })
        .directive('scrollLink', function() {
            return {
                scope: {
                    scrollTo: '@scrollTo',
                    offsetHeight: '@offsetHeight'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    elem.on('click', function(event) {
                        event.preventDefault();
                        if( scroll_running_status == 1 ) {
                            return false;
                        }
                        var scrollToObj = document.getElementsByClassName(scope.scrollTo)[0];
						if(typeof scrollToObj != 'undefined'){
							var mmyht = divHeight(scrollToObj) - parseInt(scope.offsetHeight);
							if (window.pageYOffset < mmyht){
								scrollDownAnimation(scrollToObj,scope.offsetHeight);
							}else if (window.pageYOffset > mmyht){
								scrollUpAnimation(scrollToObj,scope.offsetHeight);
							}
						}else{
							return false;
						}
                    });

                    var scrollDownAnimation = function(scrollToObj,htt) {
						var myht = divHeight(scrollToObj) - parseInt(htt);
                        scroll_running_status = 1;
                        var moveBy = 500;
                        var winPageYOffset = Math.ceil(window.pageYOffset);

                        if (winPageYOffset >= myht || ((window.innerHeight + winPageYOffset) >= document.body.offsetHeight) ) {     //if scrolled to reqd element or end of page reached
                            scroll_running_status = 0;
                            return false;
                        } else {

							if (150 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 500) {
								moveBy = 150;
							}
							if (50 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 150) {
								moveBy = 50;
							}
							if (0 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 50) {
								moveBy = (myht - winPageYOffset);
							}

                            window.scrollBy(0, moveBy);
                            setTimeout(function() {
                                scrollDownAnimation(scrollToObj,htt);
                            }, 50);
                        }
                    }

                    var scrollUpAnimation = function(scrollToObj,htt) {
						var myht = divHeight(scrollToObj) - parseInt(htt);
                        scroll_running_status = 1;
                        var moveBy = -500;
                        if (window.pageYOffset <= myht ) {
                            scroll_running_status = 0;
                            return false;
                        } else {

							if (150 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 500) {
								moveBy = -150;
							}
							if (50 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 150) {
								moveBy = -50;
							}
							if (0 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 50) {
								moveBy = -(window.pageYOffset - myht);
							}

                            window.scrollBy(0, moveBy);
                            setTimeout(function() {
                                scrollUpAnimation(scrollToObj,htt);
                            }, 50);
                        }
                    }

                    var divHeight = function(ele) {
                        var x = 0;
                        while (ele) {
                            x += ele.offsetTop;
                            ele = ele.offsetParent;
                        }
                        return x;
                    }
                }
            };
        })
        .directive('stickyElement', function($window) {
            return {
                scope: {
                    topPostion: '@topPostion',
                    stickyStyle: '=stickyStyle',
                    techMasterStyle: '=techMasterStyle',
                    offsetHeight: '@offsetHeight',
                    displayHeight: '@displayHeight',
                    stickyComponentDisplay: '=stickyComponentDisplay'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var windowEl = angular.element($window);
                    var divHeight = function(ele) {
                        var x = 0;
                        while (ele) {
                            x += ele.offsetTop;
                            ele = ele.offsetParent;
                        }
                        return x;
                    }
                    var minHeight = elem[0].offsetTop + elem[0].parentNode.offsetTop;
                    //                    check offers banner is available or not
                    var offerBaner = document.getElementsByClassName('festive_offer_block');
                    if (offerBaner != 'undefined' && offerBaner.length > 0) {
                        var banerHght = document.getElementsByClassName('festive_offer_block')[0].clientHeight;
                        minHeight = minHeight+parseInt(banerHght);
                    }
                    var handler = function() {
                        if (window.pageYOffset > minHeight ) {
                        //if (window.pageYOffset > minHeight - parseInt(scope.offsetHeight)) {
                            scope.stickyStyle = {'position': 'fixed', 'top': '0px', 'z-index': '2'};
                            scope.techMasterStyle = {'position': 'fixed', 'top': '0px', 'z-index': '2'};
                            //scope.stickyStyle = {'position': 'fixed', 'top': scope.topPostion + 'px', 'z-index': '2'};
                            scope.stickyComponentDisplay = {'display':'inline-block'};
                        } else {
                            scope.stickyStyle = {};
                            scope.techMasterStyle = {'position': 'fixed', 'top': '-100px','z-index': '0'}
                            scope.stickyComponentDisplay = {'display':'none'};
                        }

                        if( !!scope.displayHeight ) {
                            if( window.pageYOffset > scope.displayHeight ) {
                                scope.stickyStyle['display'] = 'block';
                            }
                            else {
                                scope.stickyStyle['display'] = 'none';
                            }
                        }
                    }
                    windowEl.on('scroll', scope.$apply.bind(scope, handler));
                    handler();
                }
            };
        })
        .directive('dirPhnCodesSelect', function($timeout, LocService, $cookies) {
            return {
                scope: {
                    inputId: '@inputId'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {

                    $timeout(function() {

                        var countryData = LocService.getAppCountryData();
                        var selected_country = LocService.getCurrentCountry();
                        var phn_code = (!!selected_country) ? selected_country.phnCode : '';

                        if (countryData === null) {
                            LocService.getCountryData().then(function(data) {
                                countryData = data;

                                //set current country using cookie
                                LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

                                //get current country
                                selected_country = LocService.getCurrentCountry();

                                var phn_code = selected_country.phnCode;

                                document.getElementById(scope.inputId).value = "+"+phn_code+"-";
                                if( document.getElementById('phn_'+selected_country.id) ) {
                                    document.getElementById('phn_'+selected_country.id).selected = 'selected';
                                }
                            });
                        }

                        document.getElementById(scope.inputId).value = "+"+phn_code+"-";

                        if( document.getElementById('phn_'+selected_country.id) ) {
                            document.getElementById('phn_'+selected_country.id).selected = 'selected';
                        }

                        elem.on('change', function() {
                            var phn_code = angular.element(this.options[this.selectedIndex]).attr('phn-code');
                            document.getElementById(scope.inputId).focus();
                            document.getElementById(scope.inputId).value = "+"+phn_code+"-";
                        });
                    }, 0);

                }
            };
        })
        .directive('dirLink', function($timeout) {
            return {
                scope: {
                    new_url: '@dirLink',
                    new_url_scope:'=dirLinkScope'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {

                    $timeout(function() {
                        elem.on('click', function() {
                            if(typeof scope.new_url != 'undefined' && scope.new_url != ''){
                                window.location.href = scope.new_url;
                            }else if(typeof scope.new_url_scope != 'undefined' && scope.new_url_scope != ''){
                                window.location.href = scope.new_url_scope;
                            }

                        });
                    }, 0);

                }
            };
})
        .directive('dirBackButton', function() {
            return {
                scope: {
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    elem.on('click', function() {
                        window.history.back();
                    });
                }
            };
})
.directive('escAction',function(){
	return{
		scope:{
			showStatus:'=showStatus'
		},
		restrict: 'A',
		replace: false,
		link: function(scope,element,attrs){
			element.on('keydown',function(event){
				if(event.keyCode == 27){
				var eleStyle = (angular.element(angular.element(element[0].querySelector('header .login_outer'))[0]))[0];
					if(eleStyle.style.display == 'block'){
						scope.showStatus = false;
						scope.$apply();
					}
				}
			});
		}
	};
})
.directive('lazyLoadImg',function(){
	return{
		restrict: 'A',
		replace: false,
		link: function(scope,element,attrs){
                    	if(typeof isIE != 'undefined' && isIE != ''){
                                var lazyLoad = function(){
					var imgObjArr = element.find('img');
					var imgObjArrLen = imgObjArr.length;
					for(var i=0;i<imgObjArrLen;i++){
						var imgObj = angular.element(imgObjArr[i])[0];
						if(typeof angular.element(imgObjArr[i])[0].attributes['data-src'] != 'undefined' && angular.element(imgObjArr[i])[0].attributes['data-src'] != ''){
							angular.element(imgObjArr[i])[0].src = angular.element(imgObjArr[i])[0].attributes['data-src']['nodeValue'];
							angular.element(imgObjArr[i])[0].removeAttribute("data-src");
						}
                        // if(typeof angular.element(imgObjArr[i])[0].attributes['data-lazy'] != 'undefined' && angular.element(imgObjArr[i])[0].attributes['data-lazy'] != ''){
                        //     angular.element(imgObjArr[i])[0].src = angular.element(imgObjArr[i])[0].attributes['data-lazy']['nodeValue'];
                        //     angular.element(imgObjArr[i])[0].removeAttribute("data-lazy");
                        // }

					}
				};
			}else{
                            var lazyLoad = function(){
                                        var imgObjArr = element.find('img');
					var imgObjArrLen = imgObjArr.length;
					for(var i=0;i<imgObjArrLen;i++){
                                                var hideFromMobile = 0;
						var imgObj = angular.element(imgObjArr[i])[0];
						if(imgObj.hasAttribute('show-on-mobile') && imgObj.getAttribute('show-on-mobile') == '0' && isMobileDevice == 1) {
                                                    hideFromMobile = 1;
                                                }
						if(typeof angular.element(imgObjArr[i])[0]['dataset']['src']!= 'undefined' && angular.element(imgObjArr[i])[0]['dataset']['src'] != '' && hideFromMobile == 0){

								angular.element(imgObjArr[i])[0]['src'] = angular.element(imgObjArr[i])[0]['dataset']['src'];
								angular.element(imgObjArr[i])[0].removeAttribute("data-src");
						}
                        //   if(typeof angular.element(imgObjArr[i])[0]['dataset']['lazy']!= 'undefined' && angular.element(imgObjArr[i])[0]['dataset']['lazy'] != ''){

                        //         angular.element(imgObjArr[i])[0]['src'] = angular.element(imgObjArr[i])[0]['dataset']['lazy'];
                        //         angular.element(imgObjArr[i])[0].removeAttribute("data-lazy");

                        // }

					}
				};
			}

                        if(document.readyState === 'complete') {
                            lazyLoad();
                        } else {
                            window.addEventListener('load', lazyLoad);
                        }


		}
	};
})
.directive('loadMoreOnScroll',function(){
	return {

		restrict: 'A',
		replace: false,
		link: function(scope,element,attrs){

            angular.element(document).bind('scroll', function() {
                if ((window.pageYOffset) > (angular.element(element)[0].offsetTop)-700) {
                    scope.$apply(attrs.loadMoreOnScroll);
                }
            });
		}
    };
})
.directive('scrollPosition2', function($window) {
	return {
		scope:{
			scrollClass:"@scrollClass"
		},
		link: function(scope, element, attrs) {

			var windowEl = angular.element($window);
			var handler = function() {

				if (window.pageYOffset > 0) {


						var dropDownContainers = document.getElementsByClassName("dropdown-container");
						var dropDownLen = dropDownContainers.length;
						for(var i=0;i<dropDownLen;i++){
							dropDownContainers[i].style.top = "55px";
							dropDownContainers[i].style.position = "fixed";
						}



						if(typeof attrs.innerpage == 'undefined'){
							if((element[0].className).indexOf(scope.scrollClass) == -1)
								element[0].className = element[0].className+" "+scope.scrollClass;
							document.getElementsByClassName("logo_normal")[0].style.display = 'none';
							document.getElementsByClassName("logo_white")[0].style.display = 'block';
							document.getElementsByClassName("search_nav")[0].style.display = 'block';
							document.getElementsByClassName("enterprise_li")[1].className = document.getElementsByClassName("enterprise_li")[0].className+" hidden";
						}
				} else {
					if(typeof attrs.innerpage == 'undefined'){
						element[0].className = element[0].className.replace(scope.scrollClass,"");
						document.getElementsByClassName("logo_normal")[0].style.display = 'block';
						document.getElementsByClassName("logo_white")[0].style.display = 'none';
						document.getElementsByClassName("search_nav")[0].style.display = 'none';
						document.getElementsByClassName("enterprise_li")[1].className = document.getElementsByClassName("enterprise_li")[0].className.replace("hidden","");
					}
				}



			}
			windowEl.on('scroll', scope.$apply.bind(scope, handler));
			handler();
		}
	};
})
.directive ('scrollSearchSticky', function ($window) {
    return {
        link: function (scope, element, attrs) {
            var windowEl = angular.element($window);
            var currentScrollPosition = window.pageYOffset;
            var promise = 0;
            var handler = function () {
                if (currentScrollPosition > window.pageYOffset) {
                    if (window.pageYOffset > 200) {
                        var searchBar = document.getElementsByClassName("sticky-search");
                        if (searchBar[0].style.display == "none" || searchBar[0].style.display == "") {
                            searchBar[0].style.display = 'block';
                            searchBar[0].style.position = 'fixed';
                            searchBar[0].style['z-index'] = 1;
                            if (promise == 1) {
                                promise = 0;
                                var counter = -50;
                                var interVal = setInterval(
                                        function () {
                                            counter += 2;
                                            searchBar[0].style.top = counter + "px";
                                            if (counter >= -5) {
                                                clearInterval(interVal);
                                            }
                                        }, 1);
                            }
                        }
                    } else {
                        var searchBar = document.getElementsByClassName("sticky-search");
                        if (searchBar[0].style.display == "block" || searchBar[0].style.display == "") {
                            searchBar[0].style.display = 'none';
                            searchBar[0].style.position = '';
                            searchBar[0].style.top = '';
                        }
                        promise = 1;
                    }
                    currentScrollPosition = window.pageYOffset;
                } else {
                    currentScrollPosition = window.pageYOffset;
                    var searchBar = document.getElementsByClassName("sticky-search");
                    if (searchBar[0].style.display == "block" || searchBar[0].style.display == "") {
                        searchBar[0].style.display = 'none';
                        searchBar[0].style.position = '';
                        searchBar[0].style.top = '';
                    }
                    promise = 1;
                }
            }
            windowEl.on('scroll', scope.$apply.bind(scope, handler));
            handler();
        }
    };
})
.directive('customPhoneField', function($window) {
            return {
                scope: {

                },
                link: function(scope, element, attrs) {
                    angular.element(element).on('focus',function(){
						var paddingVal = element.parent().children()[1].offsetWidth;
						angular.element(element)[0].style.paddingLeft = (paddingVal+4)+"px";
					});
                }
            };
        })
.directive('clipText', function($window) {
            return {
                scope: {

                },
                link: function(scope, element, attrs) {
					var containerDiv = element.find("div");
					var viewMoreLink = element[0].getElementsByClassName("view_more")[0];
					var viewLessLink = element[0].getElementsByClassName("view_less")[0];

					viewLessLink.style.display = "none";

					angular.element(viewMoreLink).on('click',function($event){
						$event.preventDefault();
						angular.element(containerDiv)[0].className="";

						viewMoreLink.style.display = "none";
						viewLessLink.style.display = "inline-block";
					});
					angular.element(viewLessLink).on('click',function($event){
						$event.preventDefault();
						angular.element(containerDiv)[0].className="seo_txt_container";
						viewLessLink.style.display = "none";
						viewMoreLink.style.display = "inline-block";
					});

                }
            };
})
.directive('dirOrientationChange', function($window, $rootScope) {
            return {
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    angular.element($window).bind('orientationchange', function () {
                        $rootScope.mobWidthFlag = (window.screen.width < $rootScope.minWidthThreshold && window.innerWidth < $rootScope.minWidthThreshold) ? 1 : 0;
                        $rootScope.hybridWidthFlag = ((!isIOs && window.screen.width < $rootScope.minWidthThresholdHybrid) || (isIOs && window.innerWidth < $rootScope.minWidthThresholdHybrid)) ? 1 : 0;
                        if($rootScope.isOrientationChanged == 0){
                            $rootScope.isOrientationChanged = 1;
                        }else{
                            $rootScope.isOrientationChanged = 0;
                        }
                        //alert(22222222222);
                        $rootScope.$emit('orientationChanged', true);
                    });
                }
            };
})
.directive('dirOuterClick', function($document) {
  return {
    restrict: 'A',
    scope:{
        unique_name: '@dirOuterClick',
        to_hide: '@toHideElemId'
    },
    link: function(scope,element) {
        var ua = navigator.userAgent,
        event = (ua.match(/iPad/i)) ? "touchstart" : "click";

        if( !(ua.match(/iPad/i)) ) {
            return;
        }

        element.data(scope.unique_name, 1);

        angular.element($document[0].body).on(event,function(e) {
        var insideElement =  angular.element(e.target).inheritedData(scope.unique_name);
        if (insideElement) {
            //do nothing
        }
        else {
            angular.element(document.getElementById(scope.to_hide)).css('display', 'none');
        }
      });
    }
  }
})
.directive('dirClassInterval', function($interval) {
    return {
        restrict: 'A',
        scope: {
            class_name:'@dirClassInterval'
        },
        link: function(scope, elem) {
            var children = elem.children();
            var total_children = children.length;
            var count = 1;

            $interval(function() {
                ++count;
                var new_class_index = (count % total_children === 0) ? (total_children -1) : (count % total_children) - 1;
                var old_class_index = (new_class_index === 0) ? (total_children -1) : (new_class_index - 1);
                angular.element(children[old_class_index]).removeClass(scope.class_name);
                angular.element(children[new_class_index]).addClass(scope.class_name);
            }, 3000, 0, false);
        }
    };
})
.directive('stickyFormElement', function($window) {
            return {
                scope: {
                   isIpad:'=isIpad'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var windowEl = angular.element($window);
                    var divHeight = function(ele) {
                        var x = 0;
                        while (ele) {
                            x += ele.offsetTop;
                            ele = ele.offsetParent;
                        }
                        return x;
                    }
                    var formObj;

                    var handler = function(){};

                    if(user_params.pageCategory == 'lvc-pass_index'){

                        var formObj = document.getElementsByClassName("form_wrapper")[0];
                        var columnDist = divHeight(formObj);
                        var lastObj = document.getElementsByClassName("aces_banner");
                        if(typeof lastObj === 'undefined' || lastObj.length == 0){
                            lastObj = document.getElementsByTagName("footer");
                        }
                        lastObj = lastObj[0];

                        handler = function(){
                            var lastObjHt = divHeight(lastObj);
                            if((window.scrollY) > (lastObjHt-formObj.offsetHeight)-50){

                                if(window.scrollY > lastObjHt+lastObj.offsetHeight){
                                    formObj.style.top = '';
                                    formObj.style.position = '';
                                    formObj.style.width='';
                                }else{
                                    formObj.style.top = (((lastObjHt-formObj.offsetHeight)-50)-(window.scrollY))+'px';
                                    formObj.style.position = 'fixed';
                                    formObj.style.width='246px';
                                }
                            }else{
                                if(window.scrollY > (columnDist-10)){
                                    formObj.style.top = '10px';
                                    formObj.style.position = 'fixed';
                                    formObj.style.width='246px';
                                }else{
                                    formObj.style.top = '';
                                    formObj.style.position = '';
                                    formObj.style.width='';
                                }
                            }

                        }
                    }else{
                        var formClientH = 0;
                        var formObj = document.getElementsByClassName("form_wrapper")[1];
                        var minHeight = elem[0].offsetTop;

                        var columnObj = document.getElementsByClassName("our_training_experts")[0];
                        var mainSection = document.getElementsByClassName("course-details-container")[0];
                        var mainSectionObj = null;
                        var mainSectionHt = 0;
                        if(typeof mainSection != 'undefined'){
                            mainSectionObj = mainSection.getElementsByClassName("col-lg-12")[0];
                            mainSectionHt = mainSectionObj.offsetHeight;
                        }

                        if( typeof columnObj === 'undefined' ) {
                            return;
                        }

                        var columnHt = columnObj.offsetHeight;
                        var columnDist = divHeight(columnObj);

                        var cloneObj = document.getElementsByClassName('drop_query_clone')[0];
                        var offset = 0;
                        handler = function() {

                            var formHt = 0;
                            if(typeof formObj != 'undefined'){
                                formHt = formObj.offsetHeight;
                            }
                            if(typeof mainSection != 'undefined') {
                                if (window.scrollY > (columnDist+formHt) && mainSectionHt > (columnHt+formHt)){
                                    offset+=10;
                                    cloneObj.style.height = formHt+'px';
                                    //formObj.style.top = ((columnDist+formHt)-offset)+'px';
                                    var coulmnObjChildren = columnObj.children;
                                    var recentlyViewedObj = coulmnObjChildren[coulmnObjChildren.length-1];

                                    var mainSectionChildren = mainSectionObj.children;
                                    var reviewsSectionObj = mainSectionChildren[mainSectionChildren.length-1];

                                    if(window.scrollY > (divHeight(recentlyViewedObj)+recentlyViewedObj.offsetHeight)-20){

                                        if(window.scrollY > ((divHeight(reviewsSectionObj)+reviewsSectionObj.offsetHeight)-(formHt+50))){
                                            formObj.style.top = ((divHeight(reviewsSectionObj)-window.scrollY)+80)+'px';
                                            formObj.style.position = 'fixed';
                                            formObj.style.width='246px';
                                        }else{
                                            formObj.style.top = '50px';
                                            formObj.style.position = 'fixed';
                                            formObj.style.width='246px';
                                        }
                                    }else{
                                        formObj.style.top = ((divHeight(recentlyViewedObj)-window.scrollY)+recentlyViewedObj.offsetHeight)+'px';
                                        formObj.style.position = 'fixed';
                                        formObj.style.width='246px';
                                    }

                                }else{
                                    cloneObj.style.height = '0';
                                    formObj.style.top = '';
                                    formObj.style.position = '';
                                    formObj.style.width='246px';
                                }
                            }

                        }
                    }

                    if(isIpad == 0 && typeof formObj != 'undefined'){
                        windowEl.on('scroll', scope.$apply.bind(scope, handler));
                        handler();
                    }
                }
            };
        })
        .directive('changeClassOnScroll', function($window) {
            return {
                scope: {
                    new_class : '@changeClassOnScroll'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem) {
                    angular.element($window).on('load', function() {
                        var windowObj = angular.element($window);
                        var bodyContainerObj = document.getElementById('body_content');
                        var threshold_flag = false;

                        var getHeight = function(pElem) {
                            return parseInt(pElem.offsetHeight);
                        };

                        var handleClassChange = function() {

                            if( window.pageYOffset > getHeight(elem[0]) && !threshold_flag ) {
                                elem.addClass(scope.new_class);
                            }
                            else {
                                elem.removeClass(scope.new_class);
                            }

                            var bottom_threshold = ( bodyContainerObj.offsetHeight - window.pageYOffset <= parseInt(elem[0].offsetHeight) + 200 );

                            if( elem.hasClass(scope.new_class) && bottom_threshold ) {
                                elem.removeClass(scope.new_class);
                                threshold_flag = true;
                            }
                            else if( !bottom_threshold ) {
                                threshold_flag = false;
                            }
                        };

                        handleClassChange();    //for onload

                        windowObj.on('scroll', function() {
                            handleClassChange();
                        });
                    });
                }
            };
        })
        .directive('stickyAfterElementScroll', function($window) {
            return {
                scope: {
                    mainElement : '@stickyAfterElementScroll',
                    percent : '@scrollPercent'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem) {
                    angular.element($window).on('load', function() {
                        var scopePercent = 0;

                        if(scope.percent) {
                            scopePercent = scope.percent;
                        }

                        var windowObj = angular.element($window);
                        var screenHeight = window.innerHeight;
                        var mainElem = document.getElementById(scope.mainElement);
                        var bodyObj = document.getElementById('body_content');

                        if(!mainElem.offsetHeight) {
                            return;
                        }

                        var makeSticky = function() {
                            var bottomFixed = (screenHeight * 0.2 ) + 'px';
                            elem.css({"bottom":bottomFixed, "position":"fixed"});
                        };

                        var removeSticky = function() {
                            elem.css({"bottom":"", "position":""});
                        };

                        var setElementStyle = function() {
                            var elemScrolled = window.pageYOffset - mainElem.offsetTop;
                            var percentScrolled = (elemScrolled/mainElem.offsetHeight) * 100;
                            if ( percentScrolled > scopePercent && window.pageYOffset < ( bodyObj.offsetHeight - screenHeight ) ) {
                                makeSticky();
                            }
                            else {
                                removeSticky();
                            }
                        };

                        if( mainElem.offsetHeight <= screenHeight ) {  //always show elem if mainElem is smaller than screen
                            makeSticky();
                        } else {
                            removeSticky();
                            windowObj.on('scroll', setElementStyle);
                        }

                        setElementStyle();
                    });
                }
            };
        })
        .directive('dirPagination', function($http) {
            return {
                scope: {
                    apiUrl:'@',
                    apiParams:'=',
                    pageSize:'@',
                    startPage:'@',          //pages start from 0
                    paginationData:'=',
                    paginationErr:'=',
                    additionalSkip:'@'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem) {
                    var reqParams = {}, currPage = 0, saturatedFlag = 0;
                    var elemHtml = elem.html();

                    if( !scope.paginationData || scope.paginationData.constructor !== Array ) {
                        scope.paginationData = new Array();
                    }

                    if(!scope.pageSize || !scope.apiUrl) {
                        return;
                    }

                    if(scope.apiParams && typeof scope.apiParams === 'object') {
                        reqParams = scope.apiParams;
                    }

                    if( currPage === 0 && scope.startPage ) {
                        currPage = parseInt(scope.startPage);
                    }

                    elem.on('click', function() {
                        if( saturatedFlag === 1 ) {
                            return false;
                        }

                        elem[0].disabled = true;
                        reqParams['additionalSkip'] = scope.additionalSkip;
                        reqParams['pageSize'] = scope.pageSize;
                        reqParams['currPage'] = currPage;

                        elem.html("Loading...");

                        $http.get( scope.apiUrl, { params:reqParams, cache:true } )
                        .success(function(data) {
                            if( data.status == 'success' ) {
                                if( typeof data.content !== 'undefined' ) {
                                    currPage = parseInt(currPage) + 1;

                                    for( var prop in data.content ) {
                                        scope.paginationData.push(data.content[prop]);
                                    }
                                }

                                if( typeof data.content !== 'undefined' && parseInt(data.content.length) < scope.pageSize ) {
                                    saturatedFlag = 1;
                                    elem.html("That's all");
                                } else {
                                    elem.html(elemHtml);
                                }

                                elem[0].disabled = false;
                            }
                            else {
                                scope.paginationErr = 'Some error occurred. Please try again later.';
                                elem[0].disabled = false;
                                elem.html(elemHtml);
                            }
                        })
                        .error(function() {
                            scope.paginationErr = 'Some error occurred. Please try again later.';
                            elem[0].disabled = false;
                            elem.html(elemHtml);
                        });
                    });
                }
            };
        })
.directive('specialsBanner', function($interval) {
    return {
        restrict: 'A',
        scope: {
            selectedTrainingType:"=selectedTrainingType"
        },
        link: function(scope, elem) {
            var closeBtnObj = (angular.element(elem)[0]).getElementsByClassName("banner_close")[0];
            var bannerObj = (angular.element(elem)[0]).getElementsByClassName("specials_banner")[0];
            var bannerCollapsedStrip = (angular.element(elem)[0]).getElementsByClassName("specials_banner_collapse")[0];
            var bannerCarouselBtn = (angular.element(elem)[0]).getElementsByClassName("banner_btn");
            var bannerCarouselDot = (angular.element(elem)[0]).getElementsByClassName("banner_dot");
            var bannerItems = (angular.element(elem)[0]).getElementsByClassName("banner_items");

            var activeCount=0;
            var olOffers = [];
            var clOffers = [];
            var stopSlide=0;


            var getOLOffers = function(bannerItems){
                for(var i=0;i<bannerItems.length;i++){
                    //console.log(angular.element(bannerItems[i])[0].dataset);
                    var data = angular.element(bannerItems[i])[0].dataset;
                    if(typeof data.trainingType != 'undefined'){
                        var str = data.trainingType;
                        angular.element(bannerItems[i])[0].setAttribute('data-tt',getTrainingTypeStr(str));
                    }else{
                         angular.element(bannerItems[i])[0].setAttribute('data-tt','generic');

                    }
                }
            }

            function getTrainingTypeStr(strData){
                    var str = strData;
                    var res = str.split(",");
                    if(res.length < 3){
                        if(res.length == 1 && (res.indexOf("1")!=-1 || res.indexOf("3")!=-1)){
                                return "ilt";
                        }else if(res.length == 1 && res.indexOf("2")!=-1){
                                return "osl";
                        }else if(res.length == 2 && res.indexOf("2")!=-1){
                                return "generic";
                        }else if(res.length == 2 && res.indexOf("2")==-1){
                                return "ilt";
                        }
                    }else{
                            return "generic";
                    }
            }

            function getTrainingTypeDivs(bannerItems){
                    var tmpDivList = [];
                    for(var i=0;i<bannerItems.length;i++){
                            var tType = angular.element(bannerItems)[i].dataset.tt;
                            if(scope.selectedTrainingType == ''){
                                tmpDivList.push(angular.element(bannerItems)[i]);
                            }else if(tType == scope.selectedTrainingType){
                                tmpDivList.push(angular.element(bannerItems)[i]);
                            }else if(tType == 'generic'){
                                tmpDivList.push(angular.element(bannerItems)[i]);
                            }

                    }

                    return tmpDivList;
            }

            var currentActiveDot = 0;

            function getCurrentActiveDot(){
                for(var i=0;i<bannerCarouselDot.length;i++){
                    var clsName = angular.element(bannerCarouselDot[i])[0].className;
                    if(clsName.indexOf("active")!=-1){
                        currentActiveDot = i;
                        break;
                    }
                }
            }
            getCurrentActiveDot();
            getOLOffers(bannerItems);

            angular.element(closeBtnObj).on('click',function(event){
                event.preventDefault();
                angular.element(bannerObj).addClass("hidden_class");
                angular.element(bannerCollapsedStrip).removeClass("hidden_class");
            });
            angular.element(bannerCollapsedStrip).on('click',function(event){
                event.preventDefault();
                angular.element(bannerObj).removeClass("hidden_class");
                angular.element(bannerCollapsedStrip).addClass("hidden_class");
            });
            var currentSelected = 0;
            var nxtSelected = 0;

            angular.element(bannerCarouselBtn).on('click',function(event){
                event.preventDefault();
                var typeData = angular.element(this)[0].dataset.type;
                carouselBtnAction(typeData);
            });


            angular.element(bannerCarouselDot).on('click',function(event){
                event.preventDefault();
                var indexData = angular.element(this)[0].dataset.index;
                if(indexData > currentActiveDot){
                    var diff = indexData - currentActiveDot;
                    for(var i=0;i<diff;i++)
                        carouselBtnAction('nxt');
                }else if(indexData < currentActiveDot){
                    var diff = currentActiveDot - indexData;
                    for(var i=0;i<diff;i++)
                        carouselBtnAction('prev');
                }

                //currentActiveDot=indexData;

            });

            if( bannerObj ) {
            scope.$watch('selectedTrainingType', function(newval){
                var tmpDivsList = getTrainingTypeDivs(bannerItems);
                if(tmpDivsList.length == 0){
                    bannerObj.style.display = "none";
                    document.getElementsByClassName("key-feature-offers")[0].style.display ='none';
                }else{
                    bannerObj.style.display = "block";
                    document.getElementsByClassName("key-feature-offers")[0].style.display ='block';
                }
                for(var i=0;i<bannerCarouselDot.length;i++){
                    if(tmpDivsList.length > 1){
                        angular.element(bannerCarouselDot[i]).removeClass("active");
                        angular.element(bannerCarouselDot[i]).removeClass("hidden_class");
                       if(i>tmpDivsList.length-1){
                           angular.element(bannerCarouselDot[i]).addClass("hidden_class");
                           angular.element(bannerCarouselDot[i])[0].setAttribute('data-index','-1');
                       }else{
                           angular.element(bannerCarouselDot[i])[0].setAttribute('data-index',i);
                       }
                    }else{
                        angular.element(bannerCarouselDot[i]).addClass("hidden_class");
                        angular.element(bannerCarouselDot[i])[0].setAttribute('data-index','-1');
                    }

                }
                currentSelected = 0;
                nxtSelected = 0;
                currentActiveDot = 0;

                for(var i=0;i<bannerItems.length;i++){
                    if(angular.element(bannerItems[i])[0].className.indexOf("hidden_class") == -1)
                        angular.element(bannerItems[currentSelected]).addClass("hidden_class");
                }
                angular.element(tmpDivsList[nxtSelected]).removeClass("hidden_class");
                if(tmpDivsList.length > 1){
                    angular.element(bannerCarouselDot[currentActiveDot]).removeClass("hidden_class");
                    angular.element(bannerCarouselDot[currentActiveDot]).addClass("active");
                    angular.element(bannerCarouselBtn).removeClass("hidden_class");
                }else{
                    angular.element(bannerCarouselBtn).addClass("hidden_class");
                }

            }, true);
            }

            function carouselBtnAction(typeData){
                var tmpDivsList = getTrainingTypeDivs(bannerItems);
                angular.element(bannerCarouselDot[currentActiveDot]).removeClass("active");

                for(var i=0;i<tmpDivsList.length;i++){
                    var clsName = angular.element(tmpDivsList[i])[0].className;
                    if(clsName.indexOf("hidden_class") == -1){
                        currentSelected = i;
                        if(typeData == 'prev'){
                            if(currentSelected > 0){
                                nxtSelected = currentSelected-1;
                            }else{
                                nxtSelected = tmpDivsList.length-1;
                            }
                        }else if(typeData == 'nxt'){
                            if(currentSelected < tmpDivsList.length-1){
                                nxtSelected = currentSelected+1;
                            }else{
                                nxtSelected = 0;
                            }
                        }
                        currentActiveDot = nxtSelected;
                        break;
                    }
                }
                angular.element(tmpDivsList[currentSelected]).addClass("hidden_class");
                angular.element(tmpDivsList[nxtSelected]).removeClass("hidden_class")
                angular.element(bannerCarouselDot[currentActiveDot]).addClass("active");

            }

            (angular.element(elem)).on('mouseover',function(){
               stopSlide=1;
            }).on('mouseout',function(){
                stopSlide=0;
            });

            $interval(function(){
                if(stopSlide==0)
                    angular.element((elem[0]).getElementsByClassName("banner_btn")[1]).triggerHandler('click');

            },3000);

        }
    };
})
.directive('newWindowButton', function($window) {
    return {
        restrict: 'A',
        scope: {
            openUrl:"@openUrl"
        },
        link: function(scope, elem,attrs) {

            angular.element(elem).on('click',function(event){
                event.preventDefault();
                window.open(scope.openUrl,'_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');
            });
        }
    };
})
.directive('twitterTextShare', function($window) {
    return {
        restrict: 'A',
        link: function(scope, elem,attrs) {
            var text = "", selObj = null;
            var twitterSpan = (elem[0]).getElementsByClassName("twitter-highlight");
            var openUrl = "";
            var url = twitterSpan[0].getAttribute('data-url');
            angular.element($window).on('mouseup',function(event){
                event.preventDefault();

                if (window.getSelection) {
                    selObj = window.getSelection();
                    text = selObj.toString();
                } else {
                    return false;
                }

                if( selObj.rangeCount ) {
                    var startCont = selObj.getRangeAt(0).startContainer;
                    var endCont = selObj.getRangeAt(0).endContainer;

                    if( !closest(startCont) || !closest(endCont) ) {
                        hideTwitterIcon();
                        return false;
                    }
                } else {
                    return false;
                }

                var coordinates = getSelectionCoords();
                var x = coordinates.x;
                var y = coordinates.y-7;
                if(text.length > 1){
                    if((text.length) > 95){
                        text = text.substring(0,95);
                        text = text+"...";
                    }
                    showTwitterIcon(x,y);
                    openUrl = "https://www.twitter.com/share?text="+text+"&url="+url+"&via=simplilearn";
                }else{
                    hideTwitterIcon();
                }

            });

            angular.element(twitterSpan).on('click',function(){
                window.open(openUrl,'_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');
            });

            angular.element($window).on('scroll',function(){
                hideTwitterIcon();
                clearSelection();
            });

            var showTwitterIcon = function(x,y) {
                twitterSpan[0].style.position = "fixed";
                twitterSpan[0].style.top = y+"px";
                twitterSpan[0].style.left = x+"px";
                twitterSpan[0].style.display = 'inline-block';
            };

            var hideTwitterIcon = function() {
                twitterSpan[0].style.position = "";
                twitterSpan[0].style.top = "";
                twitterSpan[0].style.left = "";
                twitterSpan[0].style.display = 'none';
            };

            var clearSelection = function() {
                if (window.getSelection) {
                    window.getSelection().removeAllRanges();
                } else if (document.selection) {
                    document.selection.empty();
                }
            };

            var closest = function(el) {
                while (el) {
                    if ( el.id === attrs.id ) {
                        return true;
                    }

                    el = el.parentNode;
                }

                return false;
            };

            var getSelectionCoords =function() {
                var sel = null, range, rects, rect;
                var x = 0, y = 0;
                if (window.getSelection) {
                    sel = window.getSelection();
                    if (sel.rangeCount) {
                        range = sel.getRangeAt(0).cloneRange();
                        if (range.getClientRects) {
                            range.collapse(false);
                            rects = range.getClientRects();
                            if (rects.length > 0) {
                                rect = range.getClientRects()[0];
                                x = rect.right;
                                y = rect.top;
                            }
                        }
                        if (x == 0 && y == 0) {
                            var span = document.createElement("span");
                            if (span.getClientRects) {
                                span.appendChild( document.createTextNode("\u200b") );
                                range.insertNode(span);
                                rect = span.getClientRects()[0];
                                x = rect.right;
                                y = rect.top;
                                var spanParent = span.parentNode;
                                spanParent.removeChild(span);
                                spanParent.normalize();
                            }
                        }
                    }
                }
                return { x: x, y: y};
            };
        }
    };
})
.directive('dirHideBodyClick', function(HelperService) {
    return {
        restrict: 'A',
        scope: {
            invokerClass:"@",
            containerClass:"@",
            callbackFn:'&'
        },
        link: function(scope) {
            var hf = HelperService;

            var closestCallback = function() {
                if ( (scope.invokerClass && hf.$(this).hasClass(scope.invokerClass) )
                     || (scope.containerClass && hf.$(this).hasClass(scope.containerClass)) ) {
                     return true;
                }
            };

            hf.$(document).onHybridClick(function(e) {
                var validClick = hf.$(e.target).closest(closestCallback);

                if( (!validClick) ) {
                    scope.$apply(function() {
                        scope.callbackFn();
                        e.stopPropagation();
                    });
                }
            });
        }
    };
})
.directive('dirAnyDynamicHtml', function ($compile) {
  return {
    restrict: 'EA',
    replace: true,
    link: function (scope, ele, attrs) {
        scope.$watch(attrs.dirAnyDynamicHtml, function(html) {
          ele.html(html);
          $compile(ele.contents())(scope);
        });
    }
  };
})

.directive('dirWindowOnload', function () {
  return {
    restrict: 'A',
    scope:{dirWindowOnload:'&'},
    link: function (scope, ele, attrs) {
        angular.element(document).ready(function() {
            scope.dirWindowOnload();
        });
    }
  };
})
.directive('dirConstructJw', function($rootScope) {
    return {
        restrict: 'A',
        link: function (scope, ele, attrs) {
            var divId = attrs.dirConstructJw;
            if( !divId ) {
                console.log('Error in dirConstructJw : jwplayer divId empty');
                return false;
            }

            if (!jwplayer(divId).setup) {
                console.log('Error in dirConstructJw : jwplayer setup error');
                return false;
            }

            var width = attrs.plWidth;
            var height = attrs.plHeight;

            if( !width || !height ) {
                width = 682;
                height = 384;
            }

            $rootScope.jwplayerObj = jwplayer(divId).setup({
                file: attrs.vidUrl,
                image: attrs.vidImg,
                base: staticUrl + 'core/js/jwplayer/',
                width: width,
                height: height,
                startparam: 'start',
                fallback: false,
                icons: true
            });
        }
    };
})
.directive('dirDiagHov', function($timeout, HelperService, $rootScope) {        //enables diagonal navigation ability in menu
    return {
        restrict: 'A',
        scope:{
            level: '@',
            showFn: '&dirDiagHov'
        },
        link: function (scope, ele, attrs) {
          angular.element(document).ready(function() {

            var hf = HelperService, isTouchDevice = false;

            var init = function() {
                hf.dataStorage('m_oldx', 0);
                hf.dataStorage('m_oldy', 0);
                hf.dataStorage('m_timeoutId', null);
                hf.dataStorage('m_timeoutEnable', false);
                hf.dataStorage('m_timeoutDelay', 500);
            }();

            var isDelayReqd = function(e, data) {
                var delay = false;                              //default we load immediately

                if (e.pageX > data.m_oldx && e.pageY > data.m_oldy) {         //bottom-right direction
                    delay = true;
		}
		else if (e.pageX > data.m_oldx && e.pageY < data.m_oldy) {    //top-right direction
                    delay = true;
		}

                hf.dataStorage('m_oldx', e.pageX);
                hf.dataStorage('m_oldy', e.pageY);
                return delay;
            };

            var checkSubCategoryLoad = function(e, delay, data) {
                var activeElement = e.target || e.srcElement;
		if(!delay) {                            //load without delay
                    showSubCategory(activeElement);
                    return true;
		}
		if(data.m_timeoutEnable) {              //Ignore if already load triggered with setTimeout, otherwise it'll overwrite
                    return true;
		}

		hf.dataStorage('m_timeoutEnable', true);
		var timeoutID = $timeout(function () {
                    showSubCategory(activeElement);
                }, data.m_timeoutDelay);

		hf.dataStorage('m_timeoutId', timeoutID);
            };

            var isParent = function() {
                if( hf.$(this).elem() == ele[0] ) {
                    return true;
                }
            };

            var showSubCategory = function(activeElement) {
                if(activeElement && (activeElement == ele[0] || hf.$(activeElement).closest(isParent)) )  {
                    scope.$apply(function() {
                        scope.showFn();
                    });
                }

                var data = hf.dataStorage();

                if(data.m_timeoutId){
                    $timeout.cancel(data.m_timeoutId);
                    hf.dataStorage('m_timeoutId', null);
                    hf.dataStorage('m_timeoutEnable', false);
                }
            };

            ele.on('touchstart', function() {
                isTouchDevice = true;
            });

            hf.$(ele[0]).onHybridClick(function(e) {   //for touch based devices
                // Toggle level active class
                var menuDom = e.target;
                if(scope.level == 2 && angular.element(menuDom).hasClass("menu_arrow")) {
                    menuDom = e.target.parentElement;
                }
                var levelActiveClass = "active_level_" + scope.level;
                var currentActiveSatus = angular.element(menuDom).hasClass(levelActiveClass);
                var existingDom = document.getElementsByClassName(levelActiveClass);
                angular.element(existingDom).removeClass(levelActiveClass);
                if(!currentActiveSatus) {
                    angular.element(menuDom).addClass(levelActiveClass);
                }
                var overlapEl=document.getElementById('overlap-id');
                if(overlapEl){
                    var overlapClasslist=overlapEl.classList;
                    if(overlapClasslist)
                    overlapClasslist.remove('overlap-cls');
                }
                
                e.preventDefault();
                if(isTouchDevice === true || isIpad) {
                    if((!$rootScope.mobWidthFlag && !$rootScope.hybridWidthFlag)) {
                        e.preventDefault();
                    }

                    e.stopPropagation();
                    ele.off('mousemove');
                    scope.$apply(function() {
                        scope.showFn();
                    });
                }
            });
            // Diagonal mouse event delay
            var mouseEventDelayFlag = true;
            setInterval(function() {
                mouseEventDelayFlag = true;
            }, 50);
            ele.on('mousemove', function(e) {
                e.stopPropagation();
                e.preventDefault();
                if(mouseEventDelayFlag) {
                    var data = hf.dataStorage();
                    var delay = isDelayReqd(e, data);       //check for diagonal mouse movement
                    // If not diagonal move change menu
                    if(!delay) {
                        checkSubCategoryLoad(e, delay, data);
                    }
                    mouseEventDelayFlag = false;
                }

            });
          });
        }
    };
})
.directive('dirLazyHov', function($timeout, HelperService, $window) {       //displays menu contents on hover with a delay
    return {
        restrict: 'A',
        scope:{
            showFn: '&dirLazyHov',
            hideFn:'&hideMenu',
            isVisible:'@visibility',
            direction:'@'
        },
        link: function (scope, ele, attrs) {

          angular.element(document).ready(function() {

            var hf = HelperService,
                initDelay = 150,
                activeFlag = false;         //active flag is used to prevent opening the menu contents when a user's cursor passes over the menu

            var direction = scope.direction;

            var init = function() {
                hf.dataStorage('mm_oldx', 0);
                hf.dataStorage('mm_oldy', 0);
                hf.dataStorage('mm_keepActive', false);
            }();

            var isDelayReqd = function(e, data) {
                var delay = false;                              //default we load immediately

                if(!direction) {
                    //do nothing
                }
                else if (direction.indexOf('b-r') !== -1 && e.pageY > data.mm_oldy && e.pageX >= data.mm_oldx) {         //bottom-right direction
                    delay = true;
		}
                else if (direction.indexOf('b-l') !== -1 && e.pageY > data.mm_oldy && e.pageX <= data.mm_oldx) {         //bottom-left direction
                    delay = true;
		}

                hf.dataStorage('mm_oldx', e.pageX);
                hf.dataStorage('mm_oldy', e.pageY);

                return delay;
            };

            ele.on('mouseleave', function() {
                var data = hf.dataStorage();
                activeFlag = false;                 //onmouseleave mark activeFlag as false
                if(data.mm_keepActive) {            //if delay is required , do not hide
                    return;
                }
                scope.$apply(function() {
                    scope.hideFn();
                });
            });

            ele.on('touchstart', function() {   //for touch based devices
                ele.off('mousemove');
                ele.off('mouseleave');
                scope.$apply(function() {
                    if(!scope.$eval(scope.isVisible)) {
                        scope.showFn();
                    } else {
                        scope.hideFn();
                    }
                });
            });

            ele.on('mousemove', function(e) {
                e.stopPropagation();

                var data = hf.dataStorage();

                var keepActive = isDelayReqd(e, data);      //check for diagonal mouse movement
                hf.dataStorage('mm_keepActive', keepActive);
                activeFlag = true;                 //onmousemove mark activeFlag as true

                if(keepActive) {
                    return;
                }
                $timeout(function(){
                    if(activeFlag) {//display menu contents only if mouse leave has not been fired in the timeout period
                        scope.$apply(function() {
                            scope.showFn();
                        });
                    }
                }, initDelay);
            });
          });
        }
    };
})
        .directive('cloudSearchResultData', function ($http) {
            return {
                restrict: 'A',
                scope: {
                    cloudSearchResultData: '&',
                    sActClass: '='
                },
                link: function (scope, ele, attrs) {
                    angular.element(document).ready(function () {
                        scope.cloudSearchResultData();
                    });

                }
            };
        })
.directive('lecturePageStickyChapters', function ($window) {
    return {
        scope: {
            isIpad: '=isIpad'
        },
        restrict: 'A',
        replace: false,
        link: function (scope, elem, attrs) {
            var windowEl = angular.element($window);
            var divHeight = function (ele) {
                var x = 0;
                while (ele) {
                    x += ele.offsetTop;
                    ele = ele.offsetParent;
                }
                return x;
            }

            var formObj = document.getElementsByClassName("left_container")[0];
            var divHgt = divHeight(formObj);
            var minHeight = 55//document.getElementsByClassName("left_course_details")[0].offsetTop;
            var middleHgt = document.getElementsByClassName("mid_container")[0];

            windowEl.on('scroll', function () {
                if(middleHgt.offsetHeight>formObj.offsetHeight-minHeight){
                    if((window.pageYOffset+formObj.offsetHeight-minHeight) > (middleHgt.offsetHeight)) {
                        formObj.style.position = 'absolute';
                        formObj.style.bottom = '0px';
                        formObj.style.top = '';
                        angular.element(document.getElementsByClassName('mid_container')).addClass('mid_fixed_cont');
                    }else if ((window.pageYOffset) > (divHgt-minHeight)) {
                        angular.element(document.getElementsByClassName('mid_container')).addClass('mid_fixed_cont');
                        formObj.style.position = 'fixed';
                        formObj.style.bottom = '';
                        formObj.style.top = '55px';
                    }else{
                        formObj.style.position = '';
                        formObj.style.bottom = '';
                        formObj.style.top = '';
                        angular.element(document.getElementsByClassName('mid_container')).removeClass('mid_fixed_cont');
                    }
                }
            });
        }
    };
})
.directive('dirHybridClick', function () {
    return {
        restrict: 'A',
        scope: {
            clickFn: '&dirHybridClick'
        },
        link: function (scope, ele) {
            var fireAction = function() {
                scope.$apply(function() {
                    scope.clickFn();
                });
            };

            ele.on('click', function() {
                fireAction();
            });

            ele.on('touchstart', function() {   //for touch based devices
                ele.off('click');
                fireAction();
            });
        }
    };
})
.directive('dirMouseleave', function () {
    return {
        restrict: 'A',
        scope: {
            leaveFn: '&dirMouseleave'
        },
        link: function (scope, ele) {
            ele.on('mouseleave', function() {
                scope.$apply(function() {
                    scope.leaveFn();
                });
            });

            ele.on('touchstart', function() {   //for touch based devices
                ele.off('mouseleave');
            });
        }
    };
})
.directive('dirTrigger', function ($window) {
    return {
        restrict: 'A',
        link: function (scope, ele, attrs) {
            angular.element(document).ready(function(){
                if(attrs.dirTrigger == 1) {
                    ele.triggerHandler(attrs.triggerevt);
                }
            });
        }
    };
})
.directive('lecturePageStickyResources',function($window){
    return{
        scope: {
            isIpad: '=isIpad'
        },
        restrict: 'A',
        replace: false,
        link: function (scope, elem, attrs) {
            var windowEl = angular.element($window);
            var divHeight = function (ele) {
                var x = 0;
                while (ele) {
                    x += ele.offsetTop;
                    ele = ele.offsetParent;
                }
                return x;
            }

            var formObj = document.getElementsByClassName("right_container_r")[0];
            var divHgt = divHeight(formObj);
            var minHeight = 55//document.getElementsByClassName("left_course_details")[0].offsetTop;
            var middleHgt = document.getElementsByClassName("mid_container")[0];

            windowEl.on('scroll', function () {
                if((window.pageYOffset+formObj.offsetHeight-minHeight) > (middleHgt.offsetHeight)) {
                    formObj.style.position = 'absolute';
                    formObj.style.bottom = '0px';
                    formObj.style.top = '';
                    formObj.style.borderLeft = '1px solid #e7e7e7';
                }else if ((window.pageYOffset) > (divHgt-minHeight)) {
                    formObj.style.position = 'fixed';
                    formObj.style.bottom = '';
                    formObj.style.top = '55px';
                    formObj.style.borderLeft = '1px solid #e7e7e7';
                }else{
                    formObj.style.position = '';
                    formObj.style.bottom = '';
                    formObj.style.top = '';
                    formObj.style.borderLeft = '';
                }
            });
        }
    }
})
.directive('dirAddIframe', function($window, $compile) {
    return {
        restrict: 'A',
        replace: false,
        link: function(scope, ele, attrs) {
            $window.addEventListener('load', function() {
                var props = angular.fromJson(attrs.dirAddIframe);
                var iframe = document.createElement('iframe');
                for(var prop in props) {
                    iframe.setAttribute(prop, props[prop]);
                }
                ele.append(iframe);
                $compile(ele.contents())(scope);
            });
        }
    };
})
.directive('dirYoutubeEmbed', function ($http, YoutubeApiService) {
    return {
        restrict: 'A',
        scope:{
            vidStatus:'=',
            onStateChange:'&'
        },
        link: function (scope, ele, attrs) {
            if( !document.getElementsByTagName('script') || document.getElementsByTagName('script')[0].src != "https://www.youtube.com/iframe_api" ) {
                var tag = document.createElement('script');

                tag.src = "https://www.youtube.com/iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            }

            var onPlayerReady = function() {
                if(typeof attrs.vidStatus !== 'undefined') {
                    scope.$watch('vidStatus', function(newVal, oldVal) {
                        if( newVal === oldVal ) {
                            return;
                        }
                        else if(newVal === 'play') {
                            player.playVideo();
                        } else if(newVal === 'pause') {
                            player.pauseVideo();
                        } else if(newVal === 'stop') {
                            player.stopVideo();
                        }
                    });
                }
            };

            var onPlayerStateChange = function(pData) {
                scope.onStateChange({state:pData});
            };

            var onPlayerError = function() {
                $http.get(baseApiUrl+'?method=logYoutubeError', {params:{source:ele[0].src}});        //log if error occurred
            };

            var player;
            var playerEvents =  {'onReady': onPlayerReady, 'onError': onPlayerError};

            if(typeof attrs.onStateChange !== 'undefined') {
                playerEvents['onStateChange'] = onPlayerStateChange;
            }

            YoutubeApiService.onReady(function() {
                player = new YT.Player(ele[0], {
                    events:playerEvents
                });
            });
        }
    };
})
.directive('dirStickyFooter', function($window,$rootScope) {
    return {
        restrict: 'A',
        link: function (scope, ele, attrs) {
            $window.addEventListener('load', function() {
                var windowEl = angular.element($window);
                var threshold = 50;

                if( window.pageYOffset > threshold ) {
                    ele.addClass(attrs.dirStickyFooter);
                }

                windowEl.on('scroll', function () {
                    if (window.pageYOffset > threshold) {          //considering 50px as the threshold limit after which footer can be shown
                        if( (typeof $rootScope.isSemBundle != 'undefined' && $rootScope.isSemBundle && typeof $rootScope.templateId != 'undefined' && $rootScope.templateId == 2 )) {
                            ele.addClass(attrs.dirStickyFooter); 
                            ele.addClass('float-chat-visible');
                        } else {
                           ele.addClass(attrs.dirStickyFooter);  
                        }
                    } else {
                        ele.removeClass(attrs.dirStickyFooter);
                    }
                });
            });
        }
    };
})
        .directive('linkedinWindow', function () {
            return {
                restrict: 'A',
                scope: {
                    postUrl: '@',
                },
                link: function (scope, ele, attrs) {
                    ele.on('click', function () {
                        window.open(attrs.postUrl, '', 'width=477,height=401');
                    });
                }
            }
        })
.directive('dirMobileTooltip', function() {
            return {
               scope:true,
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    elem.on('focus', function() {
                        if(!isDesktopDevice()){
                            var parentObj = angular.element(elem).parent();
                            parentObj = parentObj[0];
                            var toolTipObj = parentObj.getElementsByClassName("mobile_tooltip");
                            toolTipObj[0].style.display = "block";
                        }

                    });
                    elem.on('blur', function() {
                        if(!isDesktopDevice()){
                            var parentObj = angular.element(elem).parent();
                            parentObj = parentObj[0];
                            var toolTipObj = parentObj.getElementsByClassName("mobile_tooltip");
                            toolTipObj[0].style.display = "";
                        }
                    });
                }
            };
})
.directive('dirSwipeTouch', function() {
            return {
               scope:{
                   callbackFn:'&'
               },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var touchStarted = false, // detect if a touch event is sarted
                    currX = 0,
                    currY = 0,
                    cachedX = 0,
                    cachedY = 0;

                    var getPointerEvent = function(event) {
                                        return event;
                                    };

                    elem.on('touchstart mousedown', function(e) {
                        e.preventDefault();
                        var pointer = getPointerEvent(e);
                        cachedX = currX = pointer.pageX;
                        cachedY = currY = pointer.pageY;
                        touchStarted = true;

                        // detecting if after 200ms the finger is still in the same position
                        setTimeout(function (){
                            if ((cachedX === currX) && !touchStarted && (cachedY === currY)) {
                                //tap event
                                scope.$apply(function() {
                                    scope.callbackFn();
                                });
                            }
                        },200);
                    });
                    elem.on('touchend mouseup touchcancel', function(e) {
                        e.preventDefault();
                        // here we can consider finished the touch event
                        touchStarted = false;

                    });
                    elem.on('touchmove mousemove', function(e) {
                        e.preventDefault();
                        var pointer = getPointerEvent(e);
                        currX = pointer.pageX;
                        currY = pointer.pageY;
                        if(touchStarted) {
                             // here you are swiping
                             scope.$apply(function() {
                                scope.callbackFn();
                            });

                        }
                    });

                }
            };
})
        .directive('topLevelAccordion', function() {
            return {
                scope: {
                    enableScroll: '@enableScroll',
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    var mainObj = elem.parent();
                    var doc = mainObj[0].getElementsByClassName('plus_minus');
                    var scrollLimit = 50;/* 50 is sticky banner height */

                    var divHeight = function(ele) {
                        var x = 0;
                        while (ele) {
                            x += ele.offsetTop;
                            ele = ele.offsetParent;
                        }
                        return x;
                    };

                    var slideAction = function(elemObj) {
                        if(typeof scope.enableScroll !== 'undefined' || scope.enableScroll == 0) {
                                return true;
                        }
                        var parentObj = elemObj.parentNode;
                        var heightDiff = (divHeight(parentObj) - window.pageYOffset - scrollLimit);
                        var pageYOffset = window.pageYOffset;
                        if (heightDiff >= 150) {
                            window.scrollBy(0, 150);
                            if (pageYOffset == window.pageYOffset) {
                                return false;
                            }
                            setTimeout(function() {
                                slideAction(elemObj, heightDiff);
                            }, 10);
                        } else if (150 >= heightDiff && heightDiff >= 100) {
                            window.scrollBy(0, 100);
                            if (pageYOffset == window.pageYOffset) {
                                return false;
                            }
                            setTimeout(function() {
                                slideAction(elemObj, heightDiff);
                            }, 10);
                        } else if (100 >= heightDiff && heightDiff >= 60) {
                            window.scrollBy(0, 60);
                            if (pageYOffset == window.pageYOffset) {
                                return false;
                            }
                            setTimeout(function() {
                                slideAction(elemObj, heightDiff);
                            }, 10);
                        } else {
                            window.scrollBy(0, (divHeight(parentObj) - window.pageYOffset) - scrollLimit);
                            return false;
                        }
                        return true;
                    };
                    var showFirstLevel = function(obj) {
                        var ul = angular.element(obj).find('ul');
                        var f_s = 0;
                        var f_t = 0;
                        for (var i = 0; i < ul.length; i++) {
                            var ulParent = angular.element(ul[i]).parent();
                            var chilLenght = ul[i].children.length;

                            if (angular.element(ul[i]).hasClass('top_level_cls') && f_t == 0) {
                                var accdTitle = ulParent[0].querySelector('div.accord-head a');
                                angular.element(accdTitle).removeClass('expand').addClass('collapse');
                                angular.element(ul[i]).removeClass('acc_height').addClass('acc_height_auto');
                                f_t = 1;
                            } else if (angular.element(ul[i]).hasClass('sub_level_cls') && f_s == 0 && chilLenght > 0) {
                                var accdTitle = ulParent[0].getElementsByClassName('acc-arrow');
                                angular.element(accdTitle[0]).removeClass('plus').addClass('minus');
                                angular.element(ul[i]).removeClass('acc_height').addClass('acc_height_auto')
                                f_s = 1;
                            } else if (angular.element(ul[i]).hasClass('low_level_cls') && chilLenght > 0) {
                                var accdTitle = ulParent[0].getElementsByClassName('acc-arrow');
                                angular.element(accdTitle[0]).removeClass('plus').addClass('minus');
                                angular.element(ul[i]).removeClass('acc_height').addClass('acc_height_auto');
                                return;
                            }
                        }
                    };
                    if (attrs.level == 1) {
                        //showFirstLevel(elem);
                    }

                    var closeSubCls = function(eleObj) {
                        if (eleObj.length > 0) {
                            for (var i = 0; i < eleObj.length; i++) {
                                if (angular.element(eleObj[i]).hasClass('minus') || angular.element(eleObj[i]).hasClass('plus')) {
                                    angular.element(eleObj[i]).removeClass('minus').addClass('plus');
                                }

                            }
                        }
                    }

                    elem.on('click', function() {

                        if (angular.element(this.getElementsByClassName('t_plus_minus')).hasClass('collapse')) {
                            angular.element(this.getElementsByClassName('acc_height_auto')).removeClass('acc_height_auto').addClass('acc_height');
                            angular.element(this.getElementsByClassName('t_plus_minus')).removeClass('collapse').addClass('expand');
                            closeSubCls(doc);
                            return;
                        } else {
                            angular.element(document.getElementsByClassName('acc_height_auto')).removeClass('acc_height_auto').addClass('acc_height');
                            angular.element(document.getElementsByClassName('t_plus_minus')).removeClass('collapse').addClass('expand');
                            closeSubCls(doc);
                        }
                        slideAction(this.getElementsByClassName('t_plus_minus')[0]);
                        showFirstLevel(this);
                    });

                    //find all sublevels of accordion
                    var subLevelObj = angular.element(elem)[0].querySelectorAll("div.sub_level");
                    angular.element(subLevelObj).bind("click", function(e) {
                        e.stopImmediatePropagation();

                        var parentDiv = angular.element(this).parent().find('ul');
                        var subLevel = angular.element(angular.element(parentDiv[0]).find('li'));
                        var lowLevel = subLevel[0].querySelector('span.acc-arrow');
                        var lowLevelUl = subLevel[0].querySelector('ul.low_level_cls');

                        var elemCls = angular.element(angular.element(this)[0].querySelector('span.plus_minus'));
                        if (elemCls.hasClass('minus')) {
                            elemCls.removeClass('minus').addClass('plus');
                        } else {
                            slideAction(this);
                            var closeAllLis = angular.element(subLevelObj).parent();
                            for (var k = 0; k < closeAllLis.length; k++) {
                                angular.element(closeAllLis[k].getElementsByClassName('acc_height_auto')).removeClass('acc_height_auto').addClass('acc_height');
                                angular.element(closeAllLis[k].getElementsByClassName('plus_minus')).removeClass('minus').addClass('plus');
                            }
                            elemCls.removeClass('plus').addClass('minus');
                        }


                        var subL = 1;
                        for (var j = 0; j < parentDiv.length; j++) {
                            if (angular.element(parentDiv[j]).hasClass('sub_level_cls')) {
                                if (angular.element(parentDiv[j]).hasClass('acc_height_auto') && subL == 1) {
                                    angular.element(parentDiv[j]).removeClass('acc_height_auto').addClass('acc_height');
                                    if (angular.element(lowLevel).hasClass('plus')) {
                                        angular.element(lowLevel).removeClass('plus').addClass('minus');
                                    } else if (angular.element(lowLevel).hasClass('minus')) {
                                        angular.element(lowLevel).removeClass('minus').addClass('plus');
                                    }
                                    if (angular.element(lowLevelUl).hasClass('low_level_cls')) {
                                        angular.element(lowLevelUl).removeClass('acc_height_auto').addClass('acc_height');
                                    }
                                    break;
                                } else if (angular.element(parentDiv[j]).hasClass('acc_height') && subL == 1) {
                                    angular.element(parentDiv[j]).removeClass('acc_height').addClass('acc_height_auto');
                                    if (angular.element(lowLevel).hasClass('plus')) {
                                        angular.element(lowLevel).removeClass('plus').addClass('minus');
                                    } else if (angular.element(lowLevel).hasClass('minus')) {
                                        angular.element(lowLevel).removeClass('minus').addClass('plus');
                                    }
                                    if (angular.element(lowLevelUl).hasClass('low_level_cls')) {
                                        angular.element(lowLevelUl).removeClass('acc_height').addClass('acc_height_auto');
                                    }
                                    break;
                                }
                            }
                        }
                        return;
                    });

                    //third level accordion
                    var lowLevelObj = angular.element(elem)[0].querySelectorAll("div.low_level");
                    angular.element(lowLevelObj).bind("click", function(e) {
                        e.stopImmediatePropagation();
                        var parentDiv = angular.element(this).parent();
                        var ul = parentDiv[0].querySelector('ul.low_level_cls');
                        var ulLenght = angular.element(ul)[0].children.length;

                        if (angular.element(angular.element(this).children()[0]).hasClass('minus') && ulLenght > 0) {
                            angular.element(angular.element(this).children()[0]).removeClass('minus').addClass('plus');
                            angular.element(ul).removeClass('acc_height_auto').addClass('acc_height');
                        } else if (ulLenght > 0) {
                            var allLis = angular.element(this).parent().parent().children();
                            for (var li = 0; li < allLis.length; li++) {
                                var mCls = angular.element(allLis[li].querySelectorAll('span.plus_minus'));
                                var hCls = angular.element(allLis[li].querySelectorAll('ul.acc_height_auto'));
                                if (mCls.hasClass('minus')) {
                                    mCls.removeClass('minus').addClass('plus');
                                    hCls.removeClass('acc_height_auto').addClass('acc_height');
                                }
                            }
                            slideAction(this);
                            angular.element(angular.element(this).children()[0]).removeClass('plus').addClass('minus');
                            angular.element(ul).removeClass('acc_height').addClass('acc_height_auto');
                        }
                        return;
                    });
                }
            };
        })
        .directive('dirAddbIframe', function($compile) {
            return {
                restrict: 'A',
                replace: false,
                link: function(scope, ele, attrs) {
                    var props = angular.fromJson(attrs.dirAddbIframe);
                    var iframe = document.createElement('iframe');
                    for (var prop in props) {
                        iframe.setAttribute(prop, props[prop]);
                    }
                    ele.append(iframe);
                    $compile(ele.contents())(scope);
                }
            };
        })
.directive('stickyMenu', function ($window) {
    return {
        scope: {
            topPostion: '@topPostion',
            stickyStyle: '=stickyStyle',
            offsetHeight: '@offsetHeight',
            displayHeight: '@displayHeight',
            stickyComponentDisplay: '=stickyComponentDisplay'
        },
        restrict: 'A',
        replace: false,
        link: function (scope, elem, attrs) {
            var windowEl = angular.element($window);
            var divHeight = function (ele) {
                var x = 0;
                while (ele) {
                    x += ele.offsetTop;
                    ele = ele.offsetParent;
                }
                return x;
            }
            var minHeight = elem[0].offsetTop;

            var handler = function () {
                if (window.pageYOffset > minHeight - parseInt(scope.offsetHeight)) {
                    angular.element(elem).addClass('menu-fixed');
                    scope.stickyComponentDisplay = {'display': 'inline-block'};
                } else {
                    angular.element(elem).removeClass('menu-fixed');
                    scope.stickyComponentDisplay = {'display': 'none'};
                }

                if (!!scope.displayHeight) {
                    if (window.pageYOffset > scope.displayHeight) {
                        scope.stickyStyle['display'] = 'block';
                    } else {
                        scope.stickyStyle['display'] = 'none';
                    }
                }
            }
            windowEl.on('scroll', scope.$apply.bind(scope, handler));
            handler();
        }
    };
})
        .directive('dirSearchLoadMore', function($window,$timeout) {
            return {
                restrict: 'A',
                replace: false,
                link: function(scope, element, attrs) {
                   var temp = false;
                   var loadCnt = 1;
                   var loadMore = function (el) {
                        var top = el.offsetTop;
                        var height = el.offsetHeight;

                        while (el.offsetParent) {
                            el = el.offsetParent;
                            top += el.offsetTop;
                        }
                        if(top == 0){
                            return false;
                        }
                        return (
                                top >= window.pageYOffset &&
                                (top + height) <= (window.pageYOffset + window.innerHeight)
                                );
                    }
                    angular.element($window).bind('scroll', function() {
                        scope.listCnt = attrs.searchListCount;
                        var status = loadMore(element[0]);
                        if (status) {
                            if (loadCnt < 6 && temp === true) {
                                temp = false;
                                $timeout(function() {
                                    scope.$apply(attrs.dirSearchLoadMore);
                                });
                                loadCnt++;
                            }
                        }
                    });
                    scope.$watch('listCnt',function(){
                        temp = true;
                    });
                }
            };
        })
    .directive('dirEmailTagging', function() {
        return {
            scope: true,
            restrict: 'EA',
            link: function(scope, elem, attr) {
                var emailList = [];
                var noVal = 1;
                elem.on('keydown',function(e){
                    if (e.keyCode === 13){
                        e.preventDefault();
                    }
                    var activeEle = angular.element(document.activeElement);
                    var parentElement = elem[0].children[0];
                    noVal = 1;
                    if(activeEle.hasClass('referee_mails') && e.keyCode == 8 && angular.element(parentElement.lastElementChild)[0].children[0].value){
                        noVal = 0;
                    }
                });
                elem.on('keyup click', function(e) {
                    var activeEle = angular.element(document.activeElement);
                    var new_email = scope.referee_mails;
                    if(new_email){
                        new_email = new_email.replace(/[,;]+$/,'');
                    }
                    var ele = document.getElementsByClassName(e.target.className);
                    var parentElement = elem[0].children[0];
                    var liList = parentElement.children;
                    var lastLi = liList.length >= 2 ? liList.length - 1 : 0;
                    if (angular.element(ele).hasClass('remove')) {
                        var emailIdToRemove = ele[0].getAttribute("data-email-id");
                        var existingEmailList = scope.email_list;
                        if(existingEmailList.length==0){
                            existingEmailList=document.getElementsByClassName('email_list')[0].innerHTML;
                        }
                        if(existingEmailList.length > 0 ){
                            var existingEmailListArr = existingEmailList.split(',');
                            var indexToRemove = existingEmailListArr.indexOf(emailIdToRemove);
                            if(indexToRemove > -1){
                                existingEmailListArr.splice(indexToRemove,1);
                                emailList=existingEmailListArr;
                                scope.email_list = existingEmailListArr.join(',');
                                scope.$apply();
                            }
                        }
                        //console.log(scope.email_list);
                        parentElement.removeChild(ele[0].parentNode);
                    } else if (e.keyCode == 8 && lastLi > 0 && (activeEle.hasClass('referee_mails')) && noVal) { //backspace
                        rMail = angular.element(liList[lastLi - 1]).find('b');
                        rMail = rMail[0].innerText;
                        if (validEmail(rMail) && emailList.length > -1) {
                            emailList.splice(emailList.indexOf(rMail), 1);
                            scope.email_list = emailList.join(',');
                            scope.$apply();
                        }
                        parentElement.removeChild(liList[lastLi - 1]);
                    } else if (e.keyCode == 188 || e.keyCode == 186 || e.keyCode == 32 || e.keyCode == 13 || e.keyCode == 27) {
                        if (typeof new_email != 'undefined' && !new_email) {
                            return;
                        }
                        var liCls = 'e_invalid';
                        var a = 1;
                        /*if(scope.email_list && scope.email_list.length> 0){
                                    var existingEmailList = scope.email_list;
                                    var existingEmailListArr = existingEmailList.split(',');
                                    emailList=existingEmailListArr;
                        }else{
                                var existingEmailList=document.getElementsByClassName('email_list')[0].innerHTML;
                                if(existingEmailList.length){
                                   var existingEmailListArr = existingEmailList.split(',');
                                   emailList=existingEmailListArr; 
                                }
                        }*/
                        if(typeof document.getElementsByClassName('email_list')[0] !=="undefined"){
                            var existingEmailList=document.getElementsByClassName('email_list')[0].innerHTML;
                            if(existingEmailList.length){
                               var existingEmailListArr = existingEmailList.split(',');
                               emailList=existingEmailListArr;
                            }
                        }
                        if (validEmail(new_email)) {
                            if (duplicateCheck(emailList, new_email)) {
                                a = 0;
                            } else if (validDomain(new_email)) {
                                liCls = 'e_valid';
                                
                                emailList.push(new_email);
                                scope.email_list = emailList.join(',');
                                scope.$apply();
                            }else{
                                a = 0;
                            }
                        }
                        if (a && typeof new_email !=="undefined") {
                            var n = Date.now();
                            var newLi = document.createElement("li");
                            newLi.className = liCls;
                            newLi.innerHTML = "<b>" + new_email + "</b><span class='remove " + n + "' data-email-id="+new_email+">X</span>";
                            insertAfter(liList[lastLi], newLi);
                        }
                        angular.element(parentElement.lastElementChild)[0].children[0].value = '';
                        angular.element(parentElement.lastElementChild)[0].children[0].removeAttribute('style');
                    }else{
                        angular.element(parentElement.lastElementChild)[0].children[0].focus();
                        if(new_email && new_email.length>19 && activeEle.hasClass('referee_mails')){
                            var _l = new_email.length+1;
                            activeEle.css({'width':(_l*10)+'px'});
                        }
                    }
                        var _tmp = scope.pEList;
                        scope.pEList = liList.length > 1 ? 1 : 0;
                        if (_tmp !== scope.pEList) {
                            scope.$apply();
                        }
                });

                var validEmail = function(email) {
                    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    return re.test(email);
                };

                var validDomain = function(email) {
                    var r = true;
                    var domains = ['simplilearn.com', 'test.com'];
                    var splitEmail = email.split('@');
                    if (typeof splitEmail[1] != 'undefined' && splitEmail[1]) {
                        domains.forEach(function(value) {
                            if (value === splitEmail[1]) {
                                r = false;
                                return;
                            }
                        });
                    }
                    return r;
                };

                var duplicateCheck = function(emailArray, email) {
                    if (!emailArray.length) {
                        return false;
                    }
                    var r = false;
                    emailArray.forEach(function(value) {
                        if (value === email) {
                            r = true;
                            return;
                        }
                    });
                    return r;
                };

                var insertAfter = function(referenceNode, newNode) {
                    referenceNode.parentNode.insertBefore(newNode, referenceNode);
                };
            }
        };
    })
        .directive('validNumber', function () {
            return {
                require: '?ngModel',
                link: function (scope, element, attrs, ngModelCtrl) {
                    if (!ngModelCtrl) {
                        return;
                    }

                    ngModelCtrl.$parsers.push(function (val) {
                        if (angular.isUndefined(val)) {
                            var val = '';
                        }

                        var clean = val.replace(/[^-0-9\.]/g, '');
                        var negativeCheck = clean.split('-');
                        var decimalCheck = clean.split('.');
                        if (!angular.isUndefined(negativeCheck[1])) {
                            negativeCheck[1] = negativeCheck[1].slice(0, negativeCheck[1].length);
                            clean = negativeCheck[0] + '-' + negativeCheck[1];
                            if (negativeCheck[0].length > 0) {
                                clean = negativeCheck[0];
                            }

                        }

                        if (!angular.isUndefined(decimalCheck[1])) {
                            decimalCheck[1] = decimalCheck[1].slice(0, 2);
                            clean = decimalCheck[0] + '.' + decimalCheck[1];
                        }

                        if (val !== clean) {
                            ngModelCtrl.$setViewValue(clean);
                            ngModelCtrl.$render();
                        }
                        return clean;
                    });

                    element.bind('keypress', function (event) {
                        if (event.keyCode === 32) {
                            event.preventDefault();
                        }
                    });
                }
            };
        })

        .directive('validNumberOnly', function () {
            return {
                require: '?ngModel',
                link: function (scope, element, attrs, ngModelCtrl) {
                    if (!ngModelCtrl) {
                        return;
                    }

                    ngModelCtrl.$parsers.push(function (val) {
                        if (angular.isUndefined(val)) {
                            var val = '';
                        }

                        var clean = val.replace(/[^0-9]/g, '');
                        var negativeCheck = clean.split('-');
                        var decimalCheck = clean.split('.');
                        if (!angular.isUndefined(negativeCheck[1])) {
                            negativeCheck[1] = negativeCheck[1].slice(0, negativeCheck[1].length);
                            clean = negativeCheck[0] + '-' + negativeCheck[1];
                            if (negativeCheck[0].length > 0) {
                                clean = negativeCheck[0];
                            }

                        }

                        if (!angular.isUndefined(decimalCheck[1])) {
                            decimalCheck[1] = decimalCheck[1].slice(0, 2);
                            clean = decimalCheck[0] + '.' + decimalCheck[1];
                        }

                        if (val !== clean) {
                            ngModelCtrl.$setViewValue(clean);
                            ngModelCtrl.$render();
                        }
                        return clean;
                    });

                    element.bind('keypress', function (event) {
                        if (event.keyCode === 32) {
                            event.preventDefault();
                        }
                    });
                }
            };
        })
        .directive('scrollLinkWithActive', function() {
            return {
                scope: {
                    scrollTo: '@scrollTo',
                    offsetHeight: '@offsetHeight'
                },
                restrict: 'A',
                replace: false,
                link: function(scope, elem, attrs) {
                    elem.on('click', function(event) {
                        event.preventDefault();
                        if( scroll_running_status == 1 ) {
                            return false;
                        }
                        var scrollToObj = document.getElementsByClassName(scope.scrollTo)[0];
						if(typeof scrollToObj != 'undefined'){
							var mmyht = divHeight(scrollToObj) - parseInt(scope.offsetHeight);
							if (window.pageYOffset < mmyht){
								scrollDownAnimation(scrollToObj,scope.offsetHeight);
							}else if (window.pageYOffset > mmyht){
								scrollUpAnimation(scrollToObj,scope.offsetHeight);
							}
						}else{
							return false;
						}
                    });

                    var scrollDownAnimation = function(scrollToObj,htt) {
						var myht = divHeight(scrollToObj) - parseInt(htt);
                        scroll_running_status = 1;
                        var moveBy = 500;
                        var winPageYOffset = Math.ceil(window.pageYOffset);

                        if (winPageYOffset >= myht || ((window.innerHeight + winPageYOffset) >= document.body.offsetHeight) ) {     //if scrolled to reqd element or end of page reached
                            scroll_running_status = 0;
                            return false;
                        } else {

							if (150 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 500) {
								moveBy = 150;
							}
							if (50 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 150) {
								moveBy = 50;
							}
							if (0 < (myht - winPageYOffset) && (myht - winPageYOffset) <= 50) {
								moveBy = (myht - winPageYOffset);
							}

                            window.scrollBy(0, moveBy);
                            setTimeout(function() {
                                scrollDownAnimation(scrollToObj,htt);
                            }, 50);
                        }
                    }

                    var scrollUpAnimation = function(scrollToObj,htt) {
						var myht = divHeight(scrollToObj) - parseInt(htt);
                        scroll_running_status = 1;
                        var moveBy = -500;
                        if (window.pageYOffset <= myht ) {
                            scroll_running_status = 0;
                            return false;
                        } else {

							if (150 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 500) {
								moveBy = -150;
							}
							if (50 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 150) {
								moveBy = -50;
							}
							if (0 < (window.pageYOffset - myht) && (window.pageYOffset - myht) <= 50) {
								moveBy = -(window.pageYOffset - myht);
							}

                            window.scrollBy(0, moveBy);
                            setTimeout(function() {
                                scrollUpAnimation(scrollToObj,htt);
                            }, 50);
                        }
                    }

                    var divHeight = function(ele) {
                        var x = 0;
                        while (ele) {
                            x += ele.offsetTop;
                            ele = ele.offsetParent;
                        }
                        return x;
                    }


                    // check if the element is on viewport start
                    var elementInViewport = function (el) {
                        var top = el.offsetTop;
                        var left = el.offsetLeft;
                        var width = el.offsetWidth;
                        var height = ((el.offsetHeight) - 55);
                        while (el.offsetParent) {
                            el = el.offsetParent;
                            top += el.offsetTop;
                            left += el.offsetLeft;
                        }
                        return (
                                top < (window.pageYOffset + window.innerHeight) &&
                                left < (window.pageXOffset + window.innerWidth) &&
                                (top + height) > window.pageYOffset &&
                                (left + width) > window.pageXOffset
                                );
                    }
                    // check if the element is on viewport end
                    var checkOfset = function (elem, bodyTop) {
                        if (elem !== undefined) {
                            var elem_ofset = (parseInt(elem.getBoundingClientRect().top) - 55) - (parseInt(bodyTop) + 50);
                        }
                        return elem_ofset;
                    }

                    var contentIsInViewport = function (elem, bodyTop) {
                        return parseInt(Math.abs(bodyTop)) >= parseInt(checkOfset(elem, bodyTop)) && elementInViewport(elem);
                    }

                    var menu_elem = document.getElementById(scope.scrollTo);
                    var content_elem = document.getElementsByClassName(scope.scrollTo)[0];
                    scope.$watch(
                            function (scope) {
                                var body_top = document.body.getBoundingClientRect().top;
                                if (contentIsInViewport(content_elem, body_top) && content_elem != null && !angular.isUndefined(content_elem)) {
                                    if (menu_elem != null && !angular.isUndefined(menu_elem)) {
                                        menu_elem.classList.add("active");
                                    }
                                } else {
                                    if (menu_elem != null && !angular.isUndefined(menu_elem)) {
                                        menu_elem.classList.remove("active");
                                    }
                                }

                            }
                    );


                }
            };
        })
        /**
         * Override email validation
         * Add ng-sl-email-validation="1" attribute in the input field
         * or input type should be email
         */
        .directive('type', function() {
            //var EMAIL_REGEXP = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]{2,}$/;
            var EMAIL_REGEXP = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return {
                require: '?ngModel',
                priority: 1,
                link: function (scope, dom, attrs, ngModel) {

                    // Init mailcheck libray
                    var mailcheckLibDom = document.getElementById('mailcheck-js');
                    if(!mailcheckLibDom) {
                        window.onload = function() {
                            mailcheckLibDom = document.createElement("script");
                            mailcheckLibDom.type = "text/javascript";
                            mailcheckLibDom.id = "mailcheck-js";
                            mailcheckLibDom.src = "https://www.simplilearn.com/ice9/js/mailcheck.js";
                            if(!document.getElementById('mailcheck-js')) {
                                document.body.appendChild(mailcheckLibDom);
                            }
                        }
                    }

                    if ((typeof attrs.type == 'string' && attrs.type.toLowerCase() == 'email' || dom.attr('ng-sl-email-validation') == 1) && ngModel && ngModel.$parsers) {
                        var hasSuggesion = !(typeof attrs.suggestion == 'string' && attrs.suggestion.toLowerCase() == '0');

                        // Define global function for reset suggession box
                        if(typeof window.MailcheckDirective == 'undefined') {
                            window.MailcheckDirective = {};
                            window.MailcheckDirective.resetSuggessionBox = function() {
                                // Clear email suggession box
                                var suggessionDoms = document.querySelectorAll(".suggestion-box");
                                for(var si in suggessionDoms) {
                                    var val = suggessionDoms[si];
                                    val.innerText = '';
                                }
                            }
                        }

                        // Email suggestion dom - on blur //
                        var suggestionDom = null;
                        if(hasSuggesion) {
                            dom.bind('blur', function (e) {
                                if(hasSuggesion && suggestionDom) {
                                    // Suggest email. Mailcheck will available only after the library load
                                    if(typeof Mailcheck != "undefined" && Mailcheck) {
                                        Mailcheck.run({
                                          email: ngModel.$viewValue,
                                          suggested: function(suggestion) {
                                            suggestionDom.innerHTML = "Did you mean <a href='' data-email=''>"+suggestion.full+"</a> ?";
                                          },
                                          empty: function() {
                                            suggestionDom.innerHTML = "";
                                          }
                                        });
                                    }
                                }
                            });

                            var parentDom = dom[0].parentElement;
                            if (parentDom.querySelector(".suggestion-box")) {
                                var suggestionDom = parentDom.querySelector(".suggestion-box");
                            } else {
                                var suggestionDom = document.createElement("span");
                                suggestionDom.className = 'suggestion-box';
                                // Click event
                                suggestionDom.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    if(this.querySelector("a")) {
                                        var value = this.querySelector("a").innerText;
                                        ngModel.$setViewValue(value);
                                        ngModel.$render();
                                        scope.$apply();
                                        suggestionDom.innerHTML = "";
                                        validateEmail();
                                    }
                                });
                                parentDom.appendChild(suggestionDom);
                            }
                        }

                        var validateEmail = function() {
                            if (!EMAIL_REGEXP.test(ngModel.$viewValue)) {
                                if(ngModel.$dirty) {
                                    ngModel.$setValidity("email", false);
                                }
                            } else {
                                ngModel.$setValidity("email", true);
                                ngModel.$setValidity("required", true);
                            }
                            return ngModel.$viewValue || undefined;
                        }
                        // Reset existing validation
                        ngModel.$parsers = [];
                        // Add custom validation
                        ngModel.$parsers.push(validateEmail);
                    }
                }
            }
        })
        .directive('dirSemSlCarousel', function (HelperService, $rootScope, $timeout, $window) {
            return {
                scope: {
                    sem_mobile_template: '@semMobileTemplate',
                    is_sem_mobile_course_page: '@isSemMobileCoursePage',
                    disable_slide: '@disableSlide',
                    mobile_slide:'@mobileSlide',
                },
                link: function (scope, element, attrs) {
                    var carouselScreen, carouselList, carouselItems, carouselItemWidth, carouselItemsLength, carouselItemsVisible,
                            carouselItemsLength, carouselPrevBtn, carouselNxtBtn, maxSlides, currentSlide, hf = HelperService, isSliding, templateId, enableSlideDefault;
                    var initCarousel = function () {
                        carouselScreen = element[0].getElementsByClassName('c_screen')[0];
                        carouselList = element[0].getElementsByClassName('c_list')[0];
                        carouselPrevBtn = element[0].getElementsByClassName('c_prev')[0];
                        carouselNxtBtn = element[0].getElementsByClassName('c_next')[0];
                        carouselItems = angular.element(carouselList).children();
                        carouselItemWidth = carouselItems[0].offsetWidth;
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen, carouselItems, carouselItemsLength);
                        maxSlides = (carouselItemsLength % carouselItemsVisible) == 0 ? (carouselItemsLength / carouselItemsVisible) : (parseInt(carouselItemsLength / carouselItemsVisible) + 1);
                        currentSlide = 0;
                        carouselList.style.position = "relative";
                        addTransitionStyle(carouselList, "0.3s");
                        addTransformStyle(carouselList, 0);
                        carouselList.style.width = "6000px";
                        isSliding = 0;
                        enableSlideDefault = true;
                        angular.element(carouselPrevBtn).on('click', function () {
                            enableSlideDefault = isSilderEnabled();
                            if (enableSlideDefault) {
                                slideRight();
                            }
                        });
                        angular.element(carouselNxtBtn).on('click', function () {
                            enableSlideDefault = isSilderEnabled();
                            if (enableSlideDefault) {
                                slideLeft();
                            }
                        });
                        hf.$(carouselScreen).onSwipeLeft(function ($event) {
                            var currentTarget = $event.target;
                            enableSlideDefault = isSilderEnabled();
                            if (enableSlideDefault && scope.is_sem_mobile_course_page == 1 && scope.sem_mobile_template == 1 && $rootScope.isSemMobile && (currentTarget.closest('li'))) {
                                var currentUl = currentTarget.closest('li').parentNode;
                                var parentNode = currentUl.parentNode;
                                var currentIndex = currentSlide + 1 ;
                                var bulletElms = parentNode.getElementsByClassName('c_bullet_mobile');
                                if (currentIndex >= bulletElms.length) {
                                    currentIndex = 0;
                                }
                                var c_bullet_mobile_cls = 'c_bullet_mobile_' + (currentIndex);
                                for (var i = 0; i < bulletElms.length; i++) {
                                    if (bulletElms[i].classList.contains('active'))
                                        bulletElms[i].classList.remove('active');
                                }
                                if (typeof parentNode.getElementsByClassName(c_bullet_mobile_cls)[0] !== "undefined" && parentNode.getElementsByClassName(c_bullet_mobile_cls)[0] !== null)
                                    parentNode.getElementsByClassName(c_bullet_mobile_cls)[0].classList.add('active');
                                slideLeft();
                            } else if (enableSlideDefault && scope.is_sem_mobile_course_page == 0) {
                                slideLeft();
                            }
                        });
                        hf.$(carouselScreen).onSwipeRight(function ($event) {
                            var currentTarget = $event.target;
                            enableSlideDefault = isSilderEnabled();
                            if (enableSlideDefault && scope.is_sem_mobile_course_page == 1 && scope.sem_mobile_template == 1 && $rootScope.isSemMobile && (currentTarget.closest('li'))) {
                                var currentUl = currentTarget.closest('li').parentNode;
                                var parentNode = currentUl.parentNode;
                                var bulletElms = parentNode.getElementsByClassName('c_bullet_mobile');
                                var currentIndex = currentSlide -1;
                                if (currentIndex < 0 ) {
                                    currentIndex = parseInt(bulletElms.length)-1;
                                }
                                var c_bullet_mobile_cls = 'c_bullet_mobile_' + (currentIndex);
                                var bulletElms = parentNode.getElementsByClassName('c_bullet_mobile');
                                for (var i = 0; i < bulletElms.length; i++) {
                                    if (bulletElms[i].classList.contains('active'))
                                        bulletElms[i].classList.remove('active');
                                }
                                if (typeof parentNode.getElementsByClassName(c_bullet_mobile_cls)[0] !== "undefined" && parentNode.getElementsByClassName(c_bullet_mobile_cls)[0] !== null)
                                    parentNode.getElementsByClassName(c_bullet_mobile_cls)[0].classList.add('active');
                                slideRight();
                            } else if (enableSlideDefault && scope.is_sem_mobile_course_page == 0) {
                                slideRight();
                            }

                        });

                        //getCurrentTransformVal();
                        //addEmptyLis(carouselList);
                    }

                    var addEmptyLis = function(carouselList){
                        carouselItems = angular.element(carouselList).children();
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                        var aa = carouselItemsLength%carouselItemsVisible;
                        if(aa != 0){
                            var bb = carouselItemsVisible-aa;
                            var liList = [];
                            for(var i=0;i<bb;i++){
                                var li = document.createElement("li");
                                li.style.border = "none";
                                li.style.float = "left";
                                li.style.width = carouselItemWidth+"px";
                                li.className = "c_list_item c_index_"+(carouselItemsLength+i+1)+" empty_li";
                                liList[i] = li;
                            }
                            for(var i=0;i<bb;i++){
                                carouselList.appendChild(liList[i]);
                            }
                        }
                    }

                    var removeEmptyLis = function(carouselList){
                        var carouselItemsAll = angular.element(carouselList).children();
                        for(var i=0;i<carouselItemsAll.length;i++){
                            var carouselItemObj = carouselItemsAll[i];
                            if(carouselItemObj.className.indexOf("empty_li")!=-1){
                                carouselList.removeChild(carouselItemsAll[i]);
                            }
                        }
                    }
                    var calculateBlocksToMove = function(carouselScreen,carouselItems,carouselItemsLength){
                        var citemstomove = 0;
                        for(var i=0;i<carouselItemsLength;i++){
                            if(carouselItems[i].offsetWidth > 0){
                                citemstomove = Math.floor(carouselScreen.offsetWidth/carouselItems[i].offsetWidth);
                                break;
                            }
                        }
                        return citemstomove;
                    }
                    var addTransitionStyle = function(carouselList,transformVal){
                        carouselList.style.transition = "0.3s";
                        carouselList.style.setProperty("-webkit-transition", transformVal);
                        carouselList.style.setProperty("-moz-transition", transformVal);
                        carouselList.style.setProperty("-ms-transition", transformVal);
                        carouselList.style.setProperty("-o-transition", transformVal);
                    }
                    var addTransformStyle = function(carouselList,presentTransformVal){
                        carouselList.style.transform = "translate3d("+presentTransformVal+"px, 0px, 0px)";
                        carouselList.style.setProperty("-webkit-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-moz-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-ms-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-o-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                    }
                    var slideLeft = function(){
                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide < maxSlides-1){
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3s");
                                addTransformStyle(carouselList,presentTransformVal);
                                currentSlide++;
                                isSliding=0;
                            }else{
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3");
                                addTransformStyle(carouselList,presentTransformVal);
                                addTransitionStyle(carouselList,"");
                                addTransformStyle(carouselList,0);
                                currentSlide = 0;
                                isSliding=0;
//                                $timeout(function(){
//                                    addTransitionStyle(carouselList,"");
//                                    addTransformStyle(carouselList,0);
//                                    currentSlide = 0;
//                                    isSliding=0;
//                                },10);
                            }
                        }
                    }

                    var slideRight = function(){

                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide == 0){
                                addTransitionStyle(carouselList,"");
                                presentTransformVal = getCurrentTransformVal()-(carouselItemWidth*(carouselItemsLength));
                                addTransformStyle(carouselList,presentTransformVal);
                                presentTransformVal = getCurrentTransformVal()+(carouselItemWidth*carouselItemsVisible);
                                addTransitionStyle(carouselList,"0.5s");
                                addTransformStyle(carouselList,presentTransformVal);
                                currentSlide = maxSlides-1;
                                isSliding=0;
                            }else{
                                if(currentSlide <= maxSlides){
                                    presentTransformVal = presentTransformVal+(carouselItemsVisible*carouselItemWidth);
                                    addTransitionStyle(carouselList,"0.3s");
                                    addTransformStyle(carouselList,presentTransformVal);
                                    currentSlide--;
                                    isSliding=0;
                                }
                            }
                        }
                    }

                    var getCurrentTransformVal = function(){
                        var transformStr = carouselList.style.transform;
                        var modifiedTransformStr = transformStr.substring(transformStr.indexOf("3d(")+3,transformStr.indexOf(",",transformStr.indexOf("3d(")));
                        modifiedTransformStr = modifiedTransformStr.replace("px","");
                        modifiedTransformStr = parseInt(modifiedTransformStr);
                        return modifiedTransformStr;
                    }
                    var isSilderEnabled=function(){
                        var enableSlideDefault=true;
                        if (typeof scope.disable_slide !== "undefined" && parseInt(scope.disable_slide) > 0) {
                            enableSlideDefault=false;
                        }
                        if (typeof scope.mobile_slide !== "undefined" && parseInt(scope.mobile_slide) > 0) {
                            enableSlideDefault=true;
                        }
                        return enableSlideDefault;
                    }
                    initCarousel();

                    $rootScope.$on('orientationChanged', function(isOrientationChanged){
                        if(isOrientationChanged){
                            isSliding=1;
                            $timeout(function(){
                                removeEmptyLis(carouselList);
                                addEmptyLis(carouselList);
                                addTransitionStyle(carouselList,"");
                                addTransformStyle(carouselList,0);
                                carouselItems = angular.element(carouselList).children();
                                carouselItemsLength = carouselItems.length;
                                carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                                maxSlides = (carouselItemsLength%carouselItemsVisible)==0?(carouselItemsLength/carouselItemsVisible):(parseInt(carouselItemsLength/carouselItemsVisible)+1);
                                currentSlide = 0;
                                isSliding=0;
                            },300);
                        }
                    });


                }
            }
        })
        .directive('dirHomePageCarousel',function(HelperService,$rootScope,$timeout,$window){
            return {
                scope: {
                    is_mobile: '@isMobile',
                    enable_nav_on_mobile:'@enableNavOnMobile',
                    is_mom_program : '@isMomProgram'
                },
              link: function(scope, element, attrs){
                     var carouselScreen, carouselList, carouselItems, carouselItemWidth, carouselItemsLength, carouselItemsVisible,currentSlideId,
                             carouselItemsLength, carouselPrevBtn, carouselNxtBtn, maxSlides, currentSlide,hf = HelperService,isSliding,isMomAdvisorClick;
                    var initCarousel = function(){
                        carouselScreen = element[0].getElementsByClassName('c_screen')[0];
                        carouselList = element[0].getElementsByClassName('c_list')[0];
                        carouselPrevBtn = element[0].getElementsByClassName('c_prev')[0];
                        carouselNxtBtn = element[0].getElementsByClassName('c_next')[0];
                        carouselItems = angular.element(carouselList).children();
                        carouselItemWidth = carouselItems[0].offsetWidth;
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                        maxSlides = (carouselItemsLength%carouselItemsVisible)==0?(carouselItemsLength/carouselItemsVisible):(parseInt(carouselItemsLength/carouselItemsVisible)+1);
                        currentSlide = 0;
                        updateStepInfoData();
                        if(document.getElementById("c_slide_"+parseInt(currentSlide)))
                        $rootScope.currentSlideId=document.getElementById("c_slide_"+parseInt(currentSlide)).getAttribute("data-slide-id");
                        carouselList.style.position = "relative";
                        addTransitionStyle(carouselList,"0.3s");
                        addTransformStyle(carouselList,0);
                        carouselList.style.width = "6000px";
                        isSliding=0;
                        isMomAdvisorClick=false;
                        angular.element(carouselPrevBtn).on('click',function($event){
                           isMomAdvisorClick=true;
                           slideRight($event);
                        });
                        angular.element(carouselNxtBtn).on('click',function($event){
                            isMomAdvisorClick=true;
                            slideLeft($event);
                        });
                        hf.$(carouselScreen).onSwipeLeft(function($event) {
                            isMomAdvisorClick=false;
                             if (parseInt(scope.is_mobile) > 0 && parseInt(scope.enable_nav_on_mobile) > 0) {
                                var currentTarget = $event.target;
                                if (currentTarget.closest('li') != null) {
                                    var currentUl = currentTarget.closest('li').parentNode;
                                    var parentNode = currentUl.closest(".c_carousel");
                                    var parentNodeId = parentNode.getAttribute('id');
                                    var parentObj = document.getElementById(parentNodeId);
                                    var bulletElms = parentObj.getElementsByClassName('c_bullet_mobile_hg');
                                    var currentIndex = currentSlide + 1;
                                    if (currentIndex >= bulletElms.length) {
                                        currentIndex = 0;
                                    }
                                    var c_bullet_mobile_cls = 'c_bullet_mobile_hg_' + (currentIndex);
                                    for (var i = 0; i < bulletElms.length; i++) {
                                        if (bulletElms[i].classList.contains('active'))
                                            bulletElms[i].classList.remove('active');
                                        if (bulletElms[i].classList.contains('active-view-more-course-advisor'))
                                            bulletElms[i].classList.remove('active-view-more-course-advisor');
                                    }
                                    if (typeof parentObj.getElementsByClassName(c_bullet_mobile_cls)[0] !== "undefined" && parentObj.getElementsByClassName(c_bullet_mobile_cls)[0] !== null)
                                        parentObj.getElementsByClassName(c_bullet_mobile_cls)[0].classList.add('active');
                                  slideLeft($event);
                                }
                            } else {
                                slideLeft($event);
                            }
                             
                        });
                        hf.$(carouselScreen).onSwipeRight(function($event) {
                            isMomAdvisorClick=false;
                            if (parseInt(scope.is_mobile) > 0 && parseInt(scope.enable_nav_on_mobile) > 0) {
                                var currentTarget = $event.target;
                                if (currentTarget.closest('li') != null) {
                                    var currentUl = currentTarget.closest('li').parentNode;
                                    var parentNode = currentUl.closest(".c_carousel");
                                    var parentNodeId = parentNode.getAttribute('id');
                                    var parentObj = document.getElementById(parentNodeId);
                                    var bulletElms = parentObj.getElementsByClassName('c_bullet_mobile_hg');
                                    var currentIndex = currentSlide - 1;
                                    if (currentIndex < 0) {
                                        currentIndex = parseInt(bulletElms.length) - 1;
                                    }
                                    var c_bullet_mobile_cls = 'c_bullet_mobile_hg_' + (currentIndex);
                                    for (var i = 0; i < bulletElms.length; i++) {
                                        if (bulletElms[i].classList.contains('active'))
                                            bulletElms[i].classList.remove('active');
                                        if (bulletElms[i].classList.contains('active-view-more-course-advisor'))
                                            bulletElms[i].classList.remove('active-view-more-course-advisor');
                                    }
                                    if (typeof parentObj.getElementsByClassName(c_bullet_mobile_cls)[0] !== "undefined" && parentObj.getElementsByClassName(c_bullet_mobile_cls)[0] !== null)
                                        parentObj.getElementsByClassName(c_bullet_mobile_cls)[0].classList.add('active');
                                    slideRight($event);
                                }

                            } else {
                                slideRight($event);
                            }
                        });
                        getCurrentTransformVal();
                        addEmptyLis(carouselList);
                        $timeout(function () {
                            navigationBulletHandleOnOrientationChange();

                        }, 100);
                    }
                    
                    var updateStepInfoData = function() {
                        angular.element(element[0]).attr('data-current-slide', currentSlide+1);
                    }

                    var addEmptyLis = function(carouselList){
                        carouselItems = angular.element(carouselList).children();
                        carouselItemsLength = carouselItems.length;
                        carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                        var aa = carouselItemsLength%carouselItemsVisible;
                        if(aa != 0){
                            var bb = carouselItemsVisible-aa;
                            var liList = [];
                            for(var i=0;i<bb;i++){
                                var li = document.createElement("li");
                                li.style.border = "none";
                                li.style.float = "left";
                                li.style.width = carouselItemWidth+"px";
                                li.className = "c_list_item c_index_"+(carouselItemsLength+i+1)+" empty_li";
                                liList[i] = li;
                            }
                            for(var i=0;i<bb;i++){
                                carouselList.appendChild(liList[i]);
                            }
                        }
                    }

                    var removeEmptyLis = function(carouselList){
                        var carouselItemsAll = angular.element(carouselList).children();
                        for(var i=0;i<carouselItemsAll.length;i++){
                            var carouselItemObj = carouselItemsAll[i];
                            if(carouselItemObj.className.indexOf("empty_li")!=-1){
                                carouselList.removeChild(carouselItemsAll[i]);
                            }
                        }
                    }
                    var calculateBlocksToMove = function(carouselScreen,carouselItems,carouselItemsLength){
                        var citemstomove = 0;
                        for(var i=0;i<carouselItemsLength;i++){
                            if(carouselItems[i].offsetWidth > 0){
                                citemstomove = Math.floor(carouselScreen.offsetWidth/carouselItems[i].offsetWidth);
                                break;
                            }
                        }
                        return citemstomove;
                    }
                    var addTransitionStyle = function(carouselList,transformVal){
                        carouselList.style.transition = "0.3s";
                        carouselList.style.setProperty("-webkit-transition", transformVal);
                        carouselList.style.setProperty("-moz-transition", transformVal);
                        carouselList.style.setProperty("-ms-transition", transformVal);
                        carouselList.style.setProperty("-o-transition", transformVal);
                    }
                    var addTransformStyle = function(carouselList,presentTransformVal){
                        carouselList.style.transform = "translate3d("+presentTransformVal+"px, 0px, 0px)";
                        carouselList.style.setProperty("-webkit-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-moz-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-ms-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                        carouselList.style.setProperty("-o-transform", "translate3d("+presentTransformVal+"px, 0px, 0px)");
                    }
                    var bulletTransition=function(slide,event){
                        var currentTarget = event.currentTarget;
                        var parentNode=currentTarget.parentNode;
                        var parentNodeId=parentNode.getAttribute('id');
                        var parentObj=document.getElementById(parentNodeId);
                        if(parentObj !=null && parentObj.getElementsByClassName("view-more-btn")){
                                var parentElm= parentObj.getElementsByClassName("view-more-btn")[0];
                                var childElmLength=parseInt(parentElm.children.length);
                                var currentBulletIndex,nextBulletIndex=0;
                                var nextElemToHighLight='';
                                for(var i=0;i<childElmLength;i++){
                                    var childElm=parentElm.children[i];
                                    if (childElm.classList.contains('active')) {
                                    if (slide == 'left') {
                                        nextBulletIndex = parseInt(i) + 1;
                                        parentElm.children[i].classList.remove('active');
                                        if (parentElm.children[i].classList.contains('active-view-more-course-advisor'))
                                            parentElm.children[i].classList.remove('active-view-more-course-advisor');
                                        if (parseInt(nextBulletIndex) < childElmLength) {
                                            parentElm.children[nextBulletIndex].classList.add('active');
                                        } else {
                                            nextBulletIndex = 0;
                                            parentElm.children[nextBulletIndex].classList.add('active');
                                        }
                                    }
                                    if (slide == 'right') {
                                        nextBulletIndex = parseInt(i) > 0 ? parseInt(i) - 1:parseInt(childElmLength)-1;
                                        if (parseInt(nextBulletIndex) < childElmLength) {
                                            parentElm.children[i].classList.remove('active');
                                             if (parentElm.children[i].classList.contains('active-view-more-course-advisor'))
                                            parentElm.children[i].classList.remove('active-view-more-course-advisor');
                                            parentElm.children[nextBulletIndex].classList.add('active');
                                        } 
                                    }

                                    break;
                                }
                                }
                            }
                    }

                    var slideLeft = function(event){
                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide < maxSlides-1){
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3s");
                                addTransformStyle(carouselList,presentTransformVal);
                                currentSlide++;
                                isSliding=0;
                                updateStepInfoData();
                            }else{
                                currentSlide=0;
                                var copiedObjs = [];
                                var clonedObjs = [];
                                for(var i=0;i<carouselItemsLength;i++){
                                    copiedObjs[i] = carouselList.children[i];
                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                }
                                //append elements to the end of the list
                                for(var i=0;i<carouselItemsLength;i++){
                                    carouselList.appendChild(clonedObjs[i]);
                                }
                                presentTransformVal = presentTransformVal-(carouselItemsVisible*carouselItemWidth);
                                addTransitionStyle(carouselList,"0.3");
                                addTransformStyle(carouselList,presentTransformVal);
                                $timeout(function(){
                                    for(var i=0;i<carouselItemsLength;i++){
                                        carouselList.removeChild(copiedObjs[i]);
                                    }
                                    addTransitionStyle(carouselList,"");
                                    addTransformStyle(carouselList,0);
                                    currentSlide = 0;
                                    isSliding=0;
                                    updateStepInfoData();
                                },300);
                            }
                            if(document.getElementById("c_slide_"+parseInt(currentSlide)))
                            currentSlideId=document.getElementById("c_slide_"+parseInt(currentSlide)).getAttribute("data-slide-id");
                            $rootScope.currentSlideId=currentSlideId;
                            if(parseInt(scope.is_mobile) === 0 && parseInt(scope.enable_nav_on_mobile) === 0){
                                bulletTransition('left',event);
                            }
                            if(parseInt(scope.is_mom_program) && isMomAdvisorClick){
                                bulletTransition('left',event);
                            }
                        }
                    }

                    var slideRight = function(event){
                        if(isSliding == 0){
                            isSliding = 1;
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemsLength = carouselItems.length;
                            var presentTransformVal = getCurrentTransformVal();
                            if(currentSlide == 0){
                                var copiedObjs = [], clonedObjs = [];
                                for(var i=0;i<carouselItemsLength;i++){
                                    copiedObjs[i] = carouselList.children[carouselItemsLength - (i + 1)];
                                    clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                }
                                addTransitionStyle(carouselList,"");
                                //append elements to the end of the list
                                for(var i=0;i<clonedObjs.length;i++){
                                    carouselList.insertBefore(clonedObjs[i], carouselList.firstChild);
                                }
                                presentTransformVal = getCurrentTransformVal()-(carouselItemWidth*(carouselItemsLength));
                                addTransformStyle(carouselList,presentTransformVal);
                                setTimeout(function(){
                                    presentTransformVal = getCurrentTransformVal()+(carouselItemWidth*carouselItemsVisible);
                                    addTransitionStyle(carouselList,"0.3s");
                                    addTransformStyle(carouselList,presentTransformVal);
                                    for(var i=0;i<carouselItemsLength;i++){
                                        carouselList.removeChild(copiedObjs[i]);
                                    }
                                    currentSlide = maxSlides-1;
                                    isSliding=0;
                                    updateStepInfoData();
                                },200);

                            }else{
                                if(currentSlide <= maxSlides){
                                    presentTransformVal = presentTransformVal+(carouselItemsVisible*carouselItemWidth);
                                    addTransitionStyle(carouselList,"0.3s");
                                    addTransformStyle(carouselList,presentTransformVal);
                                    currentSlide--;
                                    isSliding=0;
                                }
                                updateStepInfoData();
                            }
                            if(document.getElementById("c_slide_"+parseInt(currentSlide)))
                            currentSlideId=document.getElementById("c_slide_"+parseInt(currentSlide)).getAttribute("data-slide-id");
                            $rootScope.currentSlideId=currentSlideId;
                            if(parseInt(scope.is_mobile) === 0 && parseInt(scope.enable_nav_on_mobile) === 0){
                               bulletTransition('right',event);
                           }
                           if(parseInt(scope.is_mom_program) && isMomAdvisorClick){
                               bulletTransition('right',event);
                           }
                        }
                    }

                    var getCurrentTransformVal = function(){
                        var transformStr = carouselList.style.transform;
                        var modifiedTransformStr = transformStr.substring(transformStr.indexOf("3d(")+3,transformStr.indexOf(",",transformStr.indexOf("3d(")));
                        modifiedTransformStr = modifiedTransformStr.replace("px","");
                        modifiedTransformStr = parseInt(modifiedTransformStr);
                        return modifiedTransformStr;
                    }
                    var resetNavigationBullet = function () {
                        try {
                            var bulletElms = document.getElementsByClassName('c_bullet_mobile_hg');
                            if (bulletElms.length > 0) {
                                var bulletIndex = 0;
                                var c_bullet_mobile_cls = 'c_bullet_mobile_hg_' + (bulletIndex);
                                for (var i = 0; i < bulletElms.length; i++) {
                                    if (bulletElms[i].classList.contains('active'))
                                        bulletElms[i].classList.remove('active');
                                }
                                if (typeof document.getElementsByClassName(c_bullet_mobile_cls)[0] !== "undefined" && document.getElementsByClassName(c_bullet_mobile_cls)[0] !== null)
                                    document.getElementsByClassName(c_bullet_mobile_cls)[0].classList.add('active');
                            }
                        }
                        catch (e) {}
                    }
                    var navigationBulletHandleOnOrientationChange = function () {
                        var parentObj = document.getElementById('happy-graduates-carousel');
                        try {
                            if (parentObj !== null) {
                                var viewMoreBtn = parentObj.getElementsByClassName("view-more-btn");
                                if (viewMoreBtn !== null) {
                                    var viewMoreObj = viewMoreBtn[0];
                                    if (viewMoreObj !== null && typeof viewMoreObj !== "undefined") {
                                        if (window.matchMedia("(orientation: landscape)").matches) {
                                            viewMoreObj.classList.add('hide');
                                        }
                                        if (window.matchMedia("(orientation: portrait)").matches) {
                                            viewMoreObj.classList.remove('hide');
                                        }
                                    }
                                }
                            }
                        } catch (e) {}
                    }
                    initCarousel();
                    $rootScope.$on('orientationChanged', function(isOrientationChanged){
                        if(isOrientationChanged){
                            isSliding=1;
                            $timeout(function(){
                                removeEmptyLis(carouselList);
                                addEmptyLis(carouselList);
                                addTransitionStyle(carouselList,"");
                                addTransformStyle(carouselList,0);
                                carouselItems = angular.element(carouselList).children();
                                carouselItemsLength = carouselItems.length;
                                carouselItemsVisible = calculateBlocksToMove(carouselScreen,carouselItems,carouselItemsLength);
                                maxSlides = (carouselItemsLength%carouselItemsVisible)==0?(carouselItemsLength/carouselItemsVisible):(parseInt(carouselItemsLength/carouselItemsVisible)+1);
                                currentSlide = 0;
                                isSliding=0;
                                resetNavigationBullet();
                                navigationBulletHandleOnOrientationChange();
                                updateStepInfoData();
                            },300);
                        }
                    });
                }
            }
        })
        .directive('dirUserCookieConsent', function (HelperService, $rootScope, $window) {
            return {
                scope: {
                },
                link: function (scope, element, attrs) {
                    var consentButton, consentContainer;
                    var initUserCookieConsent = function () {
                        $rootScope.isgdprCookieSet = false;
                        var isGdprCookieExist = checkIfGdprCookieExist();
                        var euContainer = document.getElementsByClassName('eu-container')[0];
                        if (typeof isGdprCookieExist !== "undefined" && isGdprCookieExist) {
                            $rootScope.isgdprCookieSet = true;
                            euContainer.remove();
                            var atpElem = document.getElementById('eu_sticky_visible');
                            if (atpElem) {
                                var atpElemClasslist = atpElem.classList;
                                if (atpElemClasslist)
                                    atpElemClasslist.remove('eu_sticky_visible');
                            }
                        } else {
                            euContainer.classList.remove("hide");
                        }

                        consentButton = element[0].getElementsByClassName('gdpr-user-cookie-consent')[0];
                        angular.element(consentButton).on('click', function ($event) {
                            var cname = user_params.gdprCookieName;
                            var cvalue = 1;
                            var d = new Date();
                            d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                            var expires = "expires=" + d.toUTCString();
                            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain=.simplilearn.com";
                            euContainer.remove();
                            var atpElem = document.getElementById('eu_sticky_visible');
                            if (atpElem) {
                                var atpElemClasslist = atpElem.classList;
                                if (atpElemClasslist)
                                    atpElemClasslist.remove('eu_sticky_visible');
                            }
                        });
                    }
                    var checkIfGdprCookieExist = function () {
                        var c_name = user_params.gdprCookieName;
                        var i, x, y, ARRcookies = document.cookie.split(";");
                        for (i = 0; i < ARRcookies.length; i++) {
                            x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
                            y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
                            x = x.replace(/^\s+|\s+$/g, "");
                            if (x == c_name) {
                                return unescape(y);
                            }
                        }
                    }
                    initUserCookieConsent();
                }
            }
        }) /*------------- End : Common.js-----------*/ 

 /*------------- Begin : AgencyAccountLoadingController.js-----------*/ 

/* global baseUrl, baseApiUrlNocache, currentEnterpriseCartObj, angular */

angular.module('Simplilearn')
        .controller('agencyAccLoadingStatusCtrl', ['LocService', '$cookies', 'PostReqService', '$scope', '$timeout', '$http', '$location', '$window', 'ScopeService', '$interval', function (LocService, $cookies, PostReqService, $scope, $timeout, $http, $location, $window, ScopeService, $interval) {
                $scope.baseUrl = baseUrl;
                $scope.baseApiUrlNocache = baseApiUrlNocache;
                $scope.currentCartInfo = JSON.parse(currentEnterpriseCartObj);
                $scope.currentCartId = $scope.currentCartInfo.currentCartId;
                $scope.timer = 5000;
                $scope.myTimeout;
                function getAccountStatus() {
                    $timeout.cancel($scope.myTimeout);
                    var params = {
                        cartId: $scope.currentCartId,
                        method: 'getEnterpriseAccountStatus'
                    };
                    PostReqService.sendPostRequest($scope.baseApiUrlNocache, params)
                            .then(function (response) {
                                if (response.data.status === true) {
                                    var accountInfo=response.data;
                                    var redirectURL = decodeURIComponent(accountInfo.data.lmsUrl);
                                    $window.location.href = redirectURL;
                                } else {
                                    $scope.myTimeout = $timeout(function () {
                                        getAccountStatus();
                                    }, $scope.timer);
                                }
                            });
                }

                getAccountStatus();




            }]);

 /*------------- End : AgencyAccountLoadingController.js-----------*/ 

 /*------------- Begin : AgencyCompanyDetailsController.js-----------*/ 

/* global companyInfo */

angular.module('Simplilearn')
        .controller('agencyCompanyDetailCtrl', ['LocService', '$cookies', 'PostReqService', '$scope', '$timeout', '$http', '$location', '$window', 'ScopeService','$rootScope', function (LocService, $cookies, PostReqService, $scope, $timeout, $http, $location, $window, ScopeService, $rootScope) {
                $scope.baseUrl = baseUrl;
                $scope.baseApiUrlNocache = baseApiUrlNocache;
                $scope.learnerCount = '';
                $scope.companyListData = [];
                $scope.countryData = [];
                $scope.customerName = '';
                $scope.email = '';
                $scope.companyConfirmEmail = '';
                $scope.phone = '';
                $scope.cartEmprty = false;
                $scope.agencyName = {'agency_id':''};
                $scope.agencyMgrEmail = '';
                $scope.lmsUrlDomain = '.' + lmsDomain;
                $scope.agencyData = {};
                $scope.helpers = new helpers();
                $scope.isManager = false;
                $scope.saveError = false;
                $scope.lmsUrlSaved = '';
                $scope.checkoutInView = false;
                $scope.invalidLearnerLimit = false;
                $scope.domainErr = false;
                $scope.domainList = [];
                $scope.goBackToCart = function () {
                    var redirectURL = $scope.baseUrl + 'cart-b2b';
                    $window.location.href = redirectURL;
                };
                $scope.gid = '';

                    function isElementInViewport (el) {

                        //special bonus for those using jQuery
                        if (typeof jQuery === "function" && el instanceof jQuery) {
                            el = el[0];
                        }

                        var rect = el.getBoundingClientRect();
                        return (
                            rect.top >= 0 &&
                            rect.left >= 0 &&
                            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
                            rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */
                        );
                    }

                    $scope.setScroll = function () {
                        window.onscroll = function changeClass(){
                            var el=document.getElementById('stickyCheckout');
                            if(!isElementInViewport(el) && !$scope.cartEmprty){
                                document.getElementById('stickyCheckout').classList.add('sticky-footer-invisible');

                            } else {
                                document.getElementById('stickyCheckout').classList.remove('sticky-footer-invisible');
                            }
                            var scrollPosY = window.pageYOffset | document.body.scrollTop;
                            if(scrollPosY > 100) {
                                //$scope.cartFooterClass=true;
                                document.getElementById('stickyCheckout').classList.add('sticky-footer-wpp');
                            }
                            else{
                                document.getElementById('stickyCheckout').classList.remove('sticky-footer-wpp');

                            }
                        }
                    }

                $scope.toggleLearnerType = function (learnerType) {
                    var paramsArr = {'customer_type': learnerType};
                    PostReqService.sendPostRequest(baseUrlAjax+"cart-b2b/update-cart-cusomter-type", paramsArr)
                    .then(function (response) {
                        if (response.data.status == 'success'){
                            if(learnerType == 'individual'){
                                var grandTotal = response.data.pricing_data.grand_total;
                                var totalAmount = response.data.pricing_data.total;
                                var serviceTaxRate = response.data.pricing_data.service_tax_rate;
                                var serviceTax = response.data.pricing_data.service_tax;
                                var quantity = 1;
                                angular.forEach(response.data.pricing_data, function(value, key) {
                                    if(key !== 'grand_total'){
                                        angular.element(document.getElementById('price_'+key)).html(value);
                                        angular.element(document.getElementById('learner_count_'+key)).val(quantity);
                                        if(response.data.pricing_data.display_discount_percent){
                                            var discount_percent = response.data.pricing_data.display_discount_percent + '% off';
                                            angular.element(document.getElementById('disccart_'+key)).html(discount_percent);
                                        }
                                    }
                                    $scope.numberdisabled = true;
                                });
                                $scope.learnerCount = true;
                                angular.element(document.getElementsByClassName('cart_grand_total')).html(grandTotal);
                                angular.element(document.getElementsByClassName('total-amount')).html(totalAmount);
                                angular.element(document.getElementsByClassName('service_tax_rate')).html(serviceTaxRate);
                                angular.element(document.getElementsByClassName('service_tax')).html(serviceTax);
                            }else{
                                $scope.learnerCount = false;
                                $scope.numberdisabled = false;
                            }
                        } else {
                            return false;
                        }
                    });
                };
                $scope.remove = function(id) {
                    var elem = document.getElementById(id);
                    return elem.parentNode.removeChild(elem);
                }
                $scope.removeItemFormCart = function (itemKey) {
                    var paramsArr = {'item_key':itemKey};
                    PostReqService.sendPostRequest(baseUrlAjax+"cart-b2b/remove-item", paramsArr)
                    .then(function (response) {
                        if (response.data.status == 'success'){
                            var grandTotal = response.data.pricing_data.grand_total;
                            var totalAmount = response.data.pricing_data.total;
                            var serviceTaxRate = response.data.pricing_data.service_tax_rate;
                            var serviceTax = response.data.pricing_data.service_tax;
                            if(grandTotal === 0){
                                grandTotal += '.00';
                                $scope.cartEmprty = true;
                            }else{
                                $scope.cartEmprty = false;
                            }
                            $scope.remove(itemKey);
                            angular.element(document.getElementsByClassName('cart_grand_total')).html(grandTotal);
                            angular.element(document.getElementsByClassName('total-amount')).html(totalAmount);
                            angular.element(document.getElementsByClassName('service_tax_rate')).html(serviceTaxRate);
                            angular.element(document.getElementsByClassName('service_tax')).html(serviceTax);
                        } else {
                            $scope.isValidResponse = false;
                        }
                    });
                };

                $scope.getAgencyInfo = function () {
                    if(typeof $scope.agencyName != 'undefined' && typeof $scope.agencyName.agency_id != 'undefined'){
                        var agency = $scope.agencyData[$scope.agencyName.agency_id];
                        if(Array.isArray(agency.domains) && agency.domains[0]){
                            $scope.domainList = [];
                            for(i in agency.domains[0]){
                                $scope.domainList.push(agency.domains[0][i]['name']);
                            }
                            $scope.companyDetailForm.email.$setValidity("email", true);
                            $scope.domainErr  = false;

                        }
                        if(agency.gid != null && agency.gid != ''){
                            $scope.gid = agency.gid;
                            $scope.agencyMgrEmail = agency.manager_email;
                            $scope.agencyError = false;
                        } else {
                            $scope.gid = '';
                            $scope.agencyMgrEmail = '';
                            $scope.companySfAccId = '';
                            if($scope.lmsUrlSaved != ''){
                                $scope.lmsUrl = $scope.lmsUrlSaved.replace($scope.lmsUrlDomain,'');
                                $scope.lmsUrlSaved = '';
                            }
                            $scope.saveError = false;
                            $scope.agencyError = true;
                        }
                        var agencyUrl = agency.lms_url;
                        $scope.lmsUrl = agencyUrl.replace($scope.lmsUrlDomain,'');
                        $scope.companySfAccId = agency.companySfAccId;
                        $scope.mgrError  = false;
                    }

                };


                $scope.updateLearnCount = function (itemKey) {
                    var learnerCount = angular.element(document.getElementById('learner_count_'+itemKey)).val();
                    if(isNaN(learnerCount) || learnerCount <= 0){
                        $scope.invalidLearnerLimit = true;
                        return false;
                    }
                    $scope.invalidLearnerLimit = false;
                    var paramsArr = {'item_key':itemKey,'learner_count':learnerCount };
                    PostReqService.sendPostRequest(baseUrlAjax+"cart-b2b/update-item-count", paramsArr)
                    .then(function (response) {
                        if (response.data.status == 'success'){
                            var grandTotal = response.data.pricing_data.grand_total;
                            var totalAmount = response.data.pricing_data.total;
                            var serviceTaxRate = response.data.pricing_data.service_tax_rate;
                            var serviceTax = response.data.pricing_data.service_tax;
                            var itemPrice = response.data.pricing_data.display_unit_price;
                            angular.element(document.getElementById('price_'+itemKey)).html(itemPrice);
                            angular.element(document.getElementsByClassName('cart_grand_total')).html(grandTotal);
                            angular.element(document.getElementsByClassName('total-amount')).html(totalAmount);
                            angular.element(document.getElementsByClassName('service_tax_rate')).html(serviceTaxRate);
                            angular.element(document.getElementsByClassName('service_tax')).html(serviceTax);
                            if(response.data.pricing_data.display_discount_percent){
                                var discount_percent = response.data.pricing_data.display_discount_percent + '% off';
                                angular.element(document.getElementById('disccart_'+itemKey)).html(discount_percent);
                            }
                        } else {
                            $scope.isValidResponse = false;
                        }
                    });
                };

                 $scope.onBackKeyDown  = function(){
                    window.history.go(-1);
                 }

                 $scope.filterValue = function($event){//alert($event.which);
                    if($event.which != 8 && isNaN(String.fromCharCode($event.which))){
                        $event.preventDefault();
                    }
                };

                $scope.qtyValue = function($event,itemKey){
                    var learnerCount = angular.element(document.getElementById('learner_count_'+itemKey)).val();
                    //alert(learnerCount);
                    if($event.which !=8 && $event.which !=0){
                        if( (!learnerCount && $event.which == 48) || isNaN(String.fromCharCode($event.which))){
                            $event.preventDefault();
                        }
                    }
                };

                $scope.getCompanyList = function (email, personName, phone, agency_id, agency_name, isManager, lms_url) {
                    var myinterval = setInterval(function(){
                        if(typeof $rootScope.queryPhoneCode != 'undefined' && $rootScope.queryPhoneCode != 'null' && $rootScope.queryPhoneCode != null){
                            $scope.phoneCode = $rootScope.queryPhoneCode;
                            clearInterval(myinterval);
                        }
                    }, 1000);
                    $scope.isManager = (isManager == 1) ? true : false;
                    $scope.customerName = personName;
                    $scope.email = email;
                    $scope.companyConfirmEmail = email;
                    $scope.phone = phone;
                    var timeStampInMs = window.performance && window.performance.now && window.performance.timing && window.performance.timing.navigationStart ? window.performance.now() + window.performance.timing.navigationStart : Date.now();

                    $http
                    .get(baseUrlAjax+"cart-b2b/get-agency-list?time="+timeStampInMs)
                        .success(function(response){
                            if (response.status == 'success'){
                                $scope.agencyCount = response.company_list.agencyCount;
                                var i = 0;
                                angular.forEach(response.company_list.agencyData, function (value,key) {
                                    if(key && value){
                                        $scope.agencyData[key] = value;
                                    }
                                });
                                angular.forEach(response.company_list.agencies, function (value,key) {
                                    if(key >= 0 && value){
                                        $scope.companyListData.push({'agency_id':value[0],'agency_name':value[1]});
                                        i++;
                                        if(i == $scope.agencyCount){
                                            if(agency_id != ''){
                                                $scope.agencyName = {'agency_id':agency_id, 'agency_name': agency_name};
                                                $scope.lmsUrlSaved = lms_url;
                                                $scope.getAgencyInfo();
                                            }
                                            else if($scope.agencyCount == 1){
                                                $scope.agencyName = $scope.companyListData[0];
                                                $scope.getAgencyInfo();
                                            }
                                        }

                                    }
                                });


                            }
                        })
                        .error(function(){
                           return false;
                        });
                };

                $scope.matchEmail = function () {
                    if($scope.isManager && $scope.agencyMgrEmail != '' && $scope.email!='' && $scope.agencyMgrEmail != $scope.email){
                        $scope.companyDetailForm.email.$setValidity("email", false);
                        $scope.mgrError  = true;
                        return false;
                    } else{
                         $scope.companyDetailForm.email.$setValidity("email", true);
                         $scope.mgrError  = false;
                         return true;
                    }
                };
                //Proceed To Payment.
                $scope.proceddToSsvc = function (form) {
                    if(typeof $scope.agencyName == 'undefined' || $scope.agencyName == 0){
                        $scope.agencyNameClass = 'error_field';
                    } else {
                        var agency = $scope.agencyData[$scope.agencyName.agency_id];
                        if (typeof agency.gid !== 'undefined' && agency.gid !== null && agency.gid !== '') {
                            $scope.gid = agency.gid
                            $scope.agencyError = false;
                            $scope.agencyNameClass = '';
                        } else {
                            $scope.saveError = false;
                            $scope.agencyError = true;
                            return false;
                        }
                    }
                    if (!form.$valid || $scope.agencyNameClass != '') {
                        return $scope.helpers.FormNotValid(form);
                    }
                    if(!$scope.matchEmail()){
                        return $scope.helpers.FormNotValid(form);
                    }
                    if(typeof $scope.lmsUrl != 'undefined'){
                        var n = $scope.lmsUrl.search($scope.lmsUrlDomain);
                    } else {
                        $scope.lmsUrl = '';
                    }
                    var lmsUrl = '';
                    if($scope.lmsUrl != ''){
                        if(n == -1)
                            lmsUrl = $scope.lmsUrl + $scope.lmsUrlDomain;
                        else
                            lmsUrl = $scope.lmsUrl;
                    }


                    if(Array.isArray($scope.domainList)){
                        var emailDomain =  $scope.email.split('@');
                        if(emailDomain[1] && $scope.domainList.indexOf(emailDomain[1]) == -1){
                            $scope.companyDetailForm.email.$setValidity("email", false);
                            $scope.saveError = false;
                            $scope.domainErr  = true;
                            return false;
                        }
                    }

                    var agency = $scope.agencyName;
                    var customerName = $scope.customerName;
                    var email = $scope.email;
                    var phone = $scope.phone;
                    var phoneCode = $scope.phoneCode;
                    var agencyMgrEmail = $scope.agencyMgrEmail;
                    var paramsArr = {
                        'gid': $scope.gid,
                        'companySfAccId': $scope.companySfAccId,
                        'agencyName': typeof agency.agency_name != 'undefined' ? agency.agency_name : '',
                        'agencyId': typeof agency.agency_id != 'undefined' ? agency.agency_id : '',
                        'customerName': customerName,
                        'email': email,
                        'phone': phone,
                        'phoneCode': phoneCode,
                        'lmsUrl': httpProtocol + '//' + lmsUrl,
                        'lmsManagerEmail': agencyMgrEmail
                    };
                    $scope.saveError = false;
                    PostReqService.sendPostRequest(baseUrlAjax+"cart-b2b/update-cart-learners", paramsArr)
                    .then(function (response) {
                        if (response.data.status == 'success'){
                            $window.location.href = response.data.ssvc;
                        } else {
                            $scope.isValidResponse = false;
                            $scope.saveError = true;
                        }
                    });
                };

                 LocService.getCountryData().then(function(data) {
                    $scope.countryData = data;
                    LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                    $scope.selected_country = LocService.getCurrentCountry();
                    $scope.queryCountryId = $scope.selected_country.id;
                    $scope.queryPhoneCode = "+"+$scope.selected_country.phnCode+"-";
                    $scope.cookie_country_name = $scope.selected_country.name;
                    $scope.countryDataHeaderDropDown = $scope.countryData;
                });

            }]);
 /*------------- End : AgencyCompanyDetailsController.js-----------*/ 

 /*------------- Begin : AgencyDetailsController.js-----------*/ 

angular.module('Simplilearn')
        .controller('agencyDetailsCtrl', ['LocService', '$cookies', 'PostReqService', '$scope', '$timeout', '$http', '$location', '$window', 'ScopeService', function (LocService, $cookies, PostReqService, $scope, $timeout, $http, $location, $window, ScopeService) {
                $scope.agentName = 'WPP';
                $scope.baseApiUrlNocache = baseApiUrlNocache;
                $scope.currentURL = baseUrl;
                $scope.btnDis = false;
                $scope.agencyNameError = false;
                $scope.agencyCodeError = false;

                $scope.agencyAutoPop = function () {
                    var params = {
                        method: 'agencyName'
                    };
                    PostReqService.sendPostRequest($scope.baseApiUrlNocache, params)
                            .then(function (output) {
                                $scope.agencyNameAutoComplete = output.data;
                            });
                };
                $scope.agencyAutoPop();

                //send data
                $scope.agencySubmit = function () {
                    if ($scope.wppAgencyForm.$valid) {
                        $scope.btnDis = true;
                        var params = {
                            agencyName: $scope.wpp.agencyName,
                            agencyCode: $scope.wpp.agencyCode,
                            method: 'validateAgency'
                        };
                        PostReqService.sendPostRequest($scope.baseApiUrlNocache, params)
                                .then(function (output) {
                                    if (output.data.error) {
                                        $scope.agencyNameError = true;
                                        $scope.agencyCodeError = true;
                                        $scope.errorMsg = output.data.error;
                                        $scope.btnDis = false;
                                    } else {
                                        if (output.data.data.agencyCode && output.data.data.agencyName) {
                                            $scope.btnDis = true;
                                            $scope.agencyNameError = false;
                                            $scope.agencyCodeError = false;
                                            var redirectURL = $scope.currentURL + 'wpp/catalog';
                                            $window.location.href = redirectURL;
                                        } else {
                                            $scope.agencyNameError = true;
                                            $scope.agencyCodeError = true;
                                            $scope.errorMsg = output.data.error;
                                            $scope.btnDis = false;
                                        }
                                    }
                                });
                    } else {
                        $scope.submittedBtnlClickedWithError = true;
                    }
                }

                //Define Suggestions List
                $scope.suggestions = [];
                //Define Selected Suggestion Item
                $scope.selectedIndex = -1;

                //Function To Call On ng-change
                $scope.search = function (agencyName) {
                    $scope.suggestions = [];
                    var myMaxSuggestionListLength = 0;
                    for (var i = 0; i < $scope.agencyNameAutoComplete.length; i++) {
                        var searchItemsSmallLetters = angular.lowercase($scope.agencyNameAutoComplete[i]);
                        var searchTextSmallLetters = angular.lowercase(agencyName);
                        if (searchItemsSmallLetters.indexOf(searchTextSmallLetters) !== -1) {
                            $scope.suggestions.push($scope.agencyNameAutoComplete[i]);
                            myMaxSuggestionListLength += 1;
                            if (myMaxSuggestionListLength === 5) {
                                break;
                            }
                        }
                    }
                };

                //Keep Track Of Search Text Value During The Selection From The Suggestions List  
                $scope.$watch('selectedIndex', function (val) {
                    if (val !== -1) {
                        $scope.wpp.agencyName = $scope.suggestions[$scope.selectedIndex];
                    }
                });


                //Text Field Events
                //Function To Call on ng-keydown
                $scope.checkKeyDown = function (event) {
                    if (event.keyCode === 40) {//down key, increment selectedIndex
                        event.preventDefault();
                        if ($scope.selectedIndex + 1 < $scope.suggestions.length) {
                            $scope.selectedIndex++;
                        } else {
                            $scope.selectedIndex = 0;
                        }
                    } else if (event.keyCode === 38) { //up key, decrement selectedIndex
                        event.preventDefault();
                        if ($scope.selectedIndex - 1 >= 0) {
                            $scope.selectedIndex--;
                        } else {
                            $scope.selectedIndex = $scope.suggestions.length - 1;
                        }
                    } else if (event.keyCode === 13) { //enter key, empty suggestions array
                        event.preventDefault();
                        $scope.suggestions = [];
                        $scope.selectedIndex = -1;
                    } else if (event.keyCode === 27) { //ESC key, empty suggestions array
                        event.preventDefault();
                        $scope.suggestions = [];
                        $scope.selectedIndex = -1;
                    } else {
                        $scope.search();
                    }
                };

                //ClickOutSide
                var exclude1 = document.getElementById('textFiled');
                $scope.hideMenu = function ($event) {
                    //make a condition for every object you wat to exclude
                    if ($event.target !== exclude1) {
                        $scope.suggestions = [];
                        $scope.selectedIndex = -1;
                    }
                };
                //======================================

                //Function To Call on ng-keyup
                $scope.checkKeyUp = function (event) {
                    if (event.keyCode !== 8 || event.keyCode !== 46) {//delete or backspace
                        if (!angular.isUndefined($scope.wpp.agencyName) && $scope.wpp.agencyName === "") {
                            $scope.suggestions = [];
                            $scope.selectedIndex = -1;
                        }
                    }
                };
                //======================================

                //List Item Events
                //Function To Call on ng-click
                $scope.AssignValueAndHide = function (index) {
                    $scope.wpp.agencyName = $scope.suggestions[index];
                    $scope.suggestions = [];
                    $scope.selectedIndex = -1;
                };
                //======================================


                // Explore our course scroll starts here
                $window.smoothScroll = function (target) {
                    var target = document.getElementById(target);
                    var scrollContainer = target;
                    do { //find scroll container
                        scrollContainer = scrollContainer.parentNode;
                        if (!scrollContainer)
                            return;
                        scrollContainer.scrollTop += 1;
                    } while (scrollContainer.scrollTop == 0);

                    var targetY = 0;
                    do { //find the top of target relatively to the container
                        if (target == scrollContainer)
                            break;
                        targetY += target.offsetTop;
                    } while (target = target.offsetParent);

                    scroll = function (c, a, b, i) {
                        i++;
                        if (i > 30)
                            return;
                        c.scrollTop = a + (b - a) / 30 * i;
                        setTimeout(function () {
                            scroll(c, a, b, i);
                        }, 10);
                    }
                    // start scrolling
                    scroll(scrollContainer, scrollContainer.scrollTop, targetY, 0);
                };
                //                Explore our course scroll ends here

            }]);
 /*------------- End : AgencyDetailsController.js-----------*/ 

 /*------------- Begin : AgencyPaymentCompleteController.js-----------*/ 

angular.module('Simplilearn')
        .controller('agencyPaymentCompleteCtrl', ['LocService', '$cookies', 'PostReqService', '$scope', '$timeout', '$http', '$location', '$window', 'ScopeService', function (LocService, $cookies, PostReqService, $scope, $timeout, $http, $location, $window, ScopeService) {
                $scope.baseApiUrlNocache = baseApiUrlNocache;
                $scope.currentURL = baseUrl;
                $scope.proceedToSetup = function (url) {
                    var redirectURL = $scope.currentURL + 'wpp/account-loading-status';
                    $window.location.href = redirectURL;
                };

            }]);
 /*------------- End : AgencyPaymentCompleteController.js-----------*/ 

 /*------------- Begin : ArticleListController.js-----------*/ 

angular.module('Simplilearn')
.controller('ArticleListCtrl', function($http,PostReqService){

    this.articles = new Array();
    this.limitReached = 0;
    this.infoMsg = '';
    this.infoMsgClass = '';
    this.baseUrl = baseUrl;
    this.staticUrl = staticUrl;
    this.commentsCount = 0;
    this.article_id = 0;
    var self = this;

    this.articleId = function (article_id) {
        if (article_id) {
            var articleParams = {'method':'updateViewCount','a_id':article_id};
            PostReqService.sendPostRequest(baseApiUrlNocache,articleParams);
        }
    }

    this.loadMoreArticles = function( pFilter, pCategory ) {

        $http.get(baseUrlAjax + "resources/load-more-articles",
                {params:
                            {filter: pFilter, tag:pCategory}
                }
        ).success(function(data) {
                self.articles = self.articles.concat(data.articles.content);

                if( data.articles.content.length === 0 ) {
                    self.limitReached = 1;
                    self.infoMsg = 'You have browsed through all our articles. No more articles to display.';
                    self.infoMsgClass = "success_text";
                }

        }).error(function() {
            self.infoMsg = "Some error occurred. Please try again later.";
            self.infoMsgClass = "error_text";
        });

    };

    var gaForArticles = function() {
       var ga = new gaEventsTracker();

       this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
           ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
       };
    };

    self.ga = new gaForArticles();
}); /*------------- End : ArticleListController.js-----------*/ 

 /*------------- Begin : ArticlesColdLeadgenController.js-----------*/ 

angular.module('Simplilearn')
        .controller('ArticlesColdLeadgenController', function($scope, $timeout) {
            
           
            $scope.popupStyle = {display:'none'};
            $scope.init = function(name){
                $timeout(function(){
                    $scope.popupStyle = {display:'block'};
                    $scope.gaACLC.gaFireEventsGeneric('frscoldleadformpop',name);
                },30000);
            }
            $scope.closePopup = function(){
                $scope.popupStyle = {display:'none'};
            }
            
            var gaForLVCPass = function() {
            var ga = new gaEventsTracker();

            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
            };
         };

         $scope.gaACLC = new gaForLVCPass();
            
});

 /*------------- End : ArticlesColdLeadgenController.js-----------*/ 

 /*------------- Begin : BundleController.js-----------*/ 

angular.module('Simplilearn')
        .controller('BundleController', function($scope,$document,$rootScope,$http,YoutubeApiService,$timeout,PostReqService,LocService,$cookies, LeadService) {
            $scope.helpers = new helpers();
            $scope.isCrsVideoVisible = 0;
            $scope.videoState = '';
            $scope.defVideoState = '';
            $scope.integratedFormDisplayStatus = 0;
            $scope.videoUrl = '';
            $scope.hasValidation = true;
            $scope.isEuro=user_params.isEuro;
            var crsPreview = {};
            $scope.primaryCrs = {};
            $scope.primaryCrs[1] = 1;
            var showReviews = {};
            $scope.coursePreview = {};
            $scope.crsAboutC = {};
            $scope.crsAboutM = {};
            $scope.crsClassroomS = {};
            /** start - intro video **/
            $scope.introVideo = null;
            $scope.introPlayer = null;
            var PHONE_MAX_LENGTH = 15;
            var youtubePlayer=null;
            $scope.showBundleAgenda = false;
            $scope.cAgreeCheck = false;

            this.init = function() {
                $scope.isAagreeCheckDirty = false;
            };

            // add phone country code
            LocService.getCountryData().then(function(data) {
                $scope.countryData = data;
                LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.queryCountryId = $scope.selected_country.id;
                $scope.queryPhoneCode = "+"+$scope.selected_country.phnCode+"-";
                $scope.inQueryPhoneCode = "+"+$scope.selected_country.phnCode+"-";
                $scope.cookie_country_name = $scope.selected_country.name;
                $scope.countryDataHeaderDropDown = $scope.countryData;
            });
            $scope.introVideoInit = function() {
                YoutubeApiService.onReady(function () {
                    var player;
                    var playerId = 'courseIntroVideo';
                    var playButtonId = 'play-button-intro-main';

                        var popupDom = document.querySelector('#courseIntroVideoPopup > iframe');
                        if(!popupDom) {
                            return ;
                        }
                        initIntroVideoPopupStatus = true;
                        popupDom.setAttribute('id', 'courseIntroVideoPopupIframe');
                        playerId = 'courseIntroVideoPopupIframe';
                        playButtonId = 'play-button-intro-popup';

                    youtubePlayer = new YT.Player(playerId, {});
                    $scope.introVideo = document.getElementById(playerId);
                    if(!$scope.introVideoOverlayStatus){
                        $scope.playVideo($scope.introVideo);
                    }
                    var videoState = null;
                });
            }
            $scope.breadcrumEvent = function($event,productType,url,name,id) {
                var gotoLink = ''
                if(typeof $event != 'undefined')
                    gotoLink = $event.target.parentNode.href;
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('breadcrumclick', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
                breadcrumEvent(productType,gotoLink,name,id);
            }

            $scope.defaultFunction = function(courseIds) {
                if (document.readyState === 'complete') {
                    $scope.fetchCoursePreview(courseIds);
                } else {
                    window.addEventListener('load', $scope.fetchCoursePreview(courseIds));
                }
                webengage.onReady(function (data) {
                    var url_string = window.location.href;
                    var url = new URL(url_string);
                    var source = url.searchParams.get("referrer");
                    if (typeof source != "undefined" && source == 'home') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_clicks_on_product_card_on_homepage",
                            event_data: {
                                'sl_page_type': 'home',
                            },
                            common: "product",
                        });
                    }
                    if (typeof source != "undefined" && source == 'product-category') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_product_on_category_page_clicked",
                            event_data: {
                                'sl_page_type': 'course list',
                            },
                            common: "product"
                        });
                    }
                    if (typeof source != "undefined" && source == 'search') {
                       var eventData=WebTracking.eventReq.getDataFromUserParams(['sl_product_id', 'sl_product_name','sl_product_category','sl_product_category_id','sl_product_type','sl_product_image','sl_event_time','sl_user_type']);   
                        eventData.sl_search_term = getParameterByName('tag')||'';
                        eventData.sl_page_type = 'search page';
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_search_user_clicks_on_a_search_result",
                            event_data:eventData,
                        });
                    }
                });
            }
            $scope.productViewed = function () {
                produtPageViewedEvent();
                try {
                    LeadService.createAutoLead();
                } catch (e) {
                    console.error("SL:Error auto lead failed", e);
                }
            }
            $scope.fetchCoursePreview = function(courseIds) {
                if (typeof courseIds != 'undefined' && courseIds != '') {
                    $http.get(baseApiUrl + "?method=getBundlePreviews",
                            {params: {
                                    "courseId": courseIds
                                }
                            })
                            .then(function(response) {
                                if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == 200) {
                                    var result = response.data;
                                    for (var key in result) {
                                        if (result.hasOwnProperty(key)) {
                                            window.localStorage["cp_data_" + key] = JSON.stringify(result[key]);
                                        }
                                    }
                                }
                            });
                }
            }

            $scope.setReviewsStatus = function($event,no,val){
                $event.preventDefault();
                showReviews[no] = val;
            }

            $scope.getReviewStatus = function(id){
                if(typeof showReviews[id] != 'undefined'){
                    return showReviews[id];
                }
                return 0;
            }
            $scope.playVideo = function(domObj) {
                //console.log('playVideo')
                if($scope.introPlayer && $scope.introPlayer.playVideo) {
                    $scope.introPlayer.playVideo();
                } else if(domObj && domObj.contentWindow) {
                    $timeout(function () {domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*')}, 500);
                }
            }
            $scope.showCrsVideo = function(vUrl) {
                $scope.videoUrl = vUrl;
                $scope.isCrsVideoVisible = 1;
                $scope.videoState = '';
                $timeout(function () {$scope.introVideoInit();}, 100);
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_eng_intro_video_clicked",
                    common : "product"
                });
            };

            $scope.hideCrsVideo = function() {
                $scope.videoUrl = '';
                $scope.isCrsVideoVisible = 0;
                $scope.videoState = 'stop';
                var videoDurationPlayedInSec = typeof youtubePlayer !=="undefined" && typeof youtubePlayer.j !=="undefined" && typeof youtubePlayer.j.currentTime !=="undefined" ? Math.round(youtubePlayer.j.currentTime) : 0;
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_eng_intro_video_closed",
                    event_data: {
                      'sl_intro_watched_duration' : videoDurationPlayedInSec,
                    },
                    common : "product"
                });
            };

            $scope.showDefVideo = function(vUrl) {
                $scope.isDefVideoVisible = 1;
                $scope.defVideoState = '';
            };

            $scope.hideDefVideo = function() {
                $scope.isDefVideoVisible = 0;
                $scope.defVideoState = 'stop';
            };
            $scope.crsPreview = {};
            $scope.setCpreviewStatus = function($event, id, type, val,courseName) {
                $event.preventDefault();
                $scope.ga.gaFireInteractiveEvents('clickoncoursecontenttab',user_params.user_id + ' || ' + document.URL + ' || ' + courseName);

                if (typeof $scope.crsPreview[id] == 'undefined') {
                    $scope.crsPreview[id] = {};
                }
                if($scope.crsPreview[id][type] == 1)
                    $scope.crsPreview[id][type] = 0;
                else
                    $scope.crsPreview[id][type] = 1;
                var secVid = 2 - type;
                var secVidId = 2;
                if( secVid == 0) secVidId = 1;
                if( $scope.crsPreview[id][secVidId] != 'undefined')
                    $scope.crsPreview[id][secVidId] = 0;
                if(typeof $scope.crsClassroomS[id] != 'undefined'){
                    $scope.crsClassroomS[id][secVidId] = 0;
                    //$scope.crsClassroomS[id][2] = 0;
                }
                if (typeof $scope.crsAboutC[id] != 'undefined')
                    $scope.crsAboutC[id][secVidId] = 0;
//                if (id == 1 && $scope.crsPreview[id][type] != 0) {
//                    $scope.primaryCrs[1] = 1;
//                } else if (id == 1 && type == 2 && $scope.crsPreview[id][type] == 1) {
//                    $scope.primaryCrs[1] = 0;
//                }
            }

            $scope.getCpreviewStatus = function(id,type){
                if(typeof $scope.crsPreview[id] != 'undefined'){
                    return $scope.crsPreview[id][type];
                }
                return 0;
            }

            $scope.getClassroomClasses = function(id, type, second){
                var classStr = '';
                var secVid = 2 - type;
                var secVidId = 2;
                if( secVid == 0) secVidId = 1;

                if($scope.getClassroomSStatus(id,type)){
                    classStr += 'collapse-box';
                }
                if(second && ($scope.getClassroomSStatus(id,type) || $scope.getCpreviewStatus(id,type))){
                    classStr += ' hidden';
                }
                if(second && ($scope.getClassroomSStatus(id,secVidId)
                        || $scope.getCpreviewStatus(id,secVidId)
                        || $scope.getAboutCStatus(id,secVidId))){
                    classStr += ' hide-buttons';
                }
                return classStr;
            }
            $scope.getClassroomClassesO = function(id, type){
                var classStr = '';
                if($scope.getClassroomSStatus(id,type)){
                    classStr += 'collapse-box';
                }
                if(($scope.getClassroomSStatus(id,type) == 0 && $scope.getCpreviewStatus(id,type) == 0)){
                    classStr += ' hidden';
                }
                return classStr;
            }

            $scope.getPreviewClasses = function(id, type){
                var classStr = '';
                var secVid = 2 - type;
                var secVidId = 2;
                if( secVid == 0) secVidId = 1;

                if($scope.getCpreviewStatus(id,type)){
                    classStr += 'collapse-box';
                }
                if(($scope.getClassroomSStatus(id,type) || $scope.getCpreviewStatus(id,type))){
                    classStr += ' hidden';
                }

                if(($scope.getClassroomSStatus(id,secVidId)
                        || $scope.getCpreviewStatus(id,secVidId)
                        || $scope.getAboutCStatus(id,secVidId))){
                    classStr += ' hide-buttons';
                }

                return classStr;
            }

            $scope.getPreviewClassesO = function(id, type){
                var classStr = '';
                if($scope.getCpreviewStatus(id,type)){
                    classStr += 'collapse-box';
                }
                if(($scope.getClassroomSStatus(id,type) == 0 && $scope.getCpreviewStatus(id,type) == 0)){
                    classStr += ' hidden';
                }
                return classStr;
            }

            $scope.setClassroomSStatus = function($event, id, type,cObj) {
                $event.preventDefault();
                var isAccordionCollapse=true;
                var currentElement=$event.currentTarget;
                if(typeof currentElement !=="undefined" && currentElement && currentElement.classList){
                    isAccordionCollapse=currentElement.classList.contains("collapse-box");
                }else{
                    isAccordionCollapse=false;
                }
                if (typeof $scope.crsClassroomS[id] == 'undefined') {
                    $scope.crsClassroomS[id] = {};
                }
                if($scope.crsClassroomS[id][type] == 1)
                    $scope.crsClassroomS[id][type] = 0;
                else
                    $scope.crsClassroomS[id][type] = 1;
                var secVid = 2 - type;
                var secVidId = 2;
                if( secVid == 0) secVidId = 1;
                if( $scope.crsClassroomS[id][secVidId] != 'undefined')
                    $scope.crsClassroomS[id][secVidId] = 0;
                if(typeof $scope.crsPreview[id] != 'undefined'){
                    $scope.crsPreview[id][secVidId] = 0;
//                    $scope.crsPreview[id][2] = 0;
                }
                if (typeof $scope.crsAboutC[id] != 'undefined')
                    $scope.crsAboutC[id][secVidId] = 0;

                if (typeof cObj != 'undefined') {
                    try {
                        var cData = JSON.parse(cObj);
                        if (typeof cData['sl_sub_product_category'] != 'undefined' && typeof cData['sl_sub_product_name'] != 'undefined' && typeof cData['sl_sub_product_id'] != 'undefined'
                                && typeof cData['sl_sub_product_image'] != 'undefined' && typeof cData['sl_sub_product_category_id'] != 'undefined' && !isAccordionCollapse) {
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_eng_class_info_clicked",
                                event_data:cData ,
                                common: "product",
                            });
                        }
                    } catch (e) {
                        console.error('SL:Error', e);
                    }
                }
            }

            $scope.getClassroomSStatus = function(id,type){
                if(typeof $scope.crsClassroomS[id] != 'undefined'){
                    return $scope.crsClassroomS[id][type];
                }
                return 0;
            }


            $scope.setAboutCStatus = function($event, id, type) {
                $event.preventDefault();
                if (typeof $scope.crsAboutC[id] == 'undefined') {
                    $scope.crsAboutC[id] = {};
                }
                var secVid = 2 - type;
                var secVidId = 2;
                if( secVid == 0) secVidId = 1;
                if($scope.crsAboutC[id][type] == 1)
                    $scope.crsAboutC[id][type] = 0;
                else
                    $scope.crsAboutC[id][type] = 1;
                if (typeof $scope.crsAboutC[id] != 'undefined')
                $scope.crsAboutC[id][secVidId] = 0;
                if(typeof $scope.crsClassroomS[id] != 'undefined'){
                    $scope.crsClassroomS[id][secVidId] = 0;
                }
                if(typeof $scope.crsPreview[id] != 'undefined'){
                    $scope.crsPreview[id][secVidId] = 0;
                }
            }

            $scope.getAboutCStatus = function(id,type){
                if(typeof $scope.crsAboutC[id] != 'undefined'){
                    return $scope.crsAboutC[id][type];
                }
                return 0;
            }

            $scope.setAboutMStatus = function($event, id, type) {
                $event.preventDefault();
                if (typeof $scope.crsAboutM[id] == 'undefined') {
                    $scope.crsAboutM[id] = {};
                }
                if(typeof $scope.crsAboutM[id] != 'undefined' && $scope.crsAboutM[id][type] == 1){
                    $scope.crsAboutM[id][type] = 0;
                    if( $scope.crsPreview[id][type] != 'undefined')
                        $scope.crsPreview[id][type] = 0;
                    if( $scope.crsClassroomS[id][type] != 'undefined')
                        $scope.crsClassroomS[id][type] = 0;
                }
                else
                    $scope.crsAboutM[id][type] = 1;
            }

            $scope.getAboutMStatus = function(id,type){
                if(typeof $scope.crsAboutM[id] != 'undefined'){
                    return $scope.crsAboutM[id][type];
                }
                return 0;
            }
            var ga = new gaEventsTracker();
            $scope.ga = ga;
            $scope.gaFireMasterProgramCourseClick = function(courseName) {
                ga.gaFireInteractiveEvents('subslearningpathClick',user_params.user_id + ' || ' + document.URL + ' || ' + courseName);
            }
            $scope.gaFirejobAssistClick = function($event) {
                ga.gaFireInteractiveEvents('jobassistclick',user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
            }
             $scope.gaOnEnroll = function(){
                    ga.gaFireInteractiveEvents('enrollBundle',user_params.user_id + ' || ' + document.URL);
            }

            $scope.gaOnSticky = function (courseName, name) {
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_eng_page_sticky_top_nav_show_section_change",
                    event_data: {
                        'sl_product_page_section': name
                    },
                    common: "product"
                });
                ga.gaFireInteractiveEvents('bundlestickyClick',user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + name);
            }

            $scope.gaOnFAQ = function (courseName, title,accordionId) {
                var isAccordionOpen = checkIfAccordionIsOpen(accordionId);
                if(isAccordionOpen){
                    WebTracking.eventReq.triggerEvent({
                    event_id: "sl_eng_product_faq_question_explored",
                    event_data: {
                        'sl_product_faq_question': title || '',
                    },
                    common: "product",
                });
                ga.gaFireInteractiveEvents('faqclickedopen',user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + title);
                }
            }

            $scope.gaOnDesc = function(courseName, title,accordionId){
                var isAccordionOpen = checkIfAccordionIsOpen(accordionId);
                if(isAccordionOpen){
                    WebTracking.eventReq.triggerEvent({
                    event_id: "sl_eng_product_description_explored",
                    event_data: {
                        'sl_product_description_question': title,
                    },
                    common: "product",
                });
                    ga.gaFireInteractiveEvents('mdclickedopen',user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + title);
                }
            }

            $scope.showBundleAgendaPopUp = function (agendaUrl, isB2b, btnText) {
                var siteModule = 'bundle agenda';
                $scope.submitAgendaUrl = agendaUrl;
                //console.log(aaa;
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_module_initiated",
                    event_data: {
                      'sl_lead_button_text' : btnText || '',
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : siteModule,
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                //var bundleAgendaCookie = getCookieByName('_cpruid');
                var bundleAgendaCookie = getCookieByName('_user_ld_info');
                var agendaLeadCreated = false;
                if (typeof bundleAgendaCookie !== "undefined") {
                    var bundle_id = user_params.bundle_id;
                    bundle_id = 'b' + bundle_id;
                    var cookieCourseIds = bundleAgendaCookie.split(',');
                    if (cookieCourseIds.indexOf(bundle_id) !== -1) {
                        agendaLeadCreated = true;
                    }
                }
                ga.gaFireInteractiveEvents('leadformclicked', user_params.user_id + ' || ' + document.URL  + ' || ' + user_params.bundle_name + ' || ' + 'bundle agenda');

                // logic added if not logged in
                if(!$scope.isEuro){
                    if (typeof isB2b !== 'undefined' && isB2b) {
                        if ($rootScope.isLoggedIn) {
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl, false, true);
                        } else {
                            agendaLeadCreated = true;
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl, agendaLeadCreated, true);
                        }
                    } else {
                        if(bundleAgendaCookie || LeadService.isSkipPopup(siteModule)) {
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,true);
                        }else {
                            $scope.showBundleAgenda = true;
                        }
                    }
                }

                if ($scope.isEuro && ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')) {
                    var optinSet = typeof getCookieByName(user_params.OPTIN_COOKIE) != 'undefined' ? true : false;
                    var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if (!optinSet || (optin && !bundleAgendaCookie)) {
                        $scope.showBundleAgenda = true;
                    } else if(optin == true && bundleAgendaCookie) {
                        $scope.submitBundleAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,false);
                    }  else {
                        $scope.submitBundleAgendaLead($scope.submitAgendaUrl,false,true);
                    }
                } else if($scope.isEuro && ($cookies[user_params.enterpriseCountCookieName] !== 'undefined')) {
                    $scope.submitBundleAgendaLead($scope.submitAgendaUrl,false,true);
                }
            }
            $scope.submitIndegratedForm = function () {
                if ($scope.indegratedForm.$invalid) {
                    return $scope.helpers.FormNotValid($scope.indegratedForm);
                } else {
                    var userEmail = $scope.indegratedForm.userEmail.$modelValue;
                    var userPhone = $scope.inQueryPhoneCode + $scope.indegratedForm.userPhone.$modelValue;
                    var userName = $scope.indegratedForm.userName.$modelValue;
                    var obj3 = {
                        name: userName,
                        email: userEmail,
                        phone: userPhone,
                        queryTxt: "Apply Now Integrated Program",
                        query: "Apply Now Integrated Program",
                        agreeToContact: 1,
                        queryTyp: 'integrated-program-popup',
                        bundleId: user_params.bundle_id,
                        bundleName: user_params.bundle_name
                    };
                    obj3['customerType'] = 'B2C';
                    obj3['leadTrainingType'] = 'Not Sure';
                    obj3['leadSourceString'] = document.URL;
                    obj3['tagName'] = 'program application';
                    obj3['leadSource'] = fetchUTMSource();
                    obj3['type'] = 'program application';
                    obj3['productTypeId'] = user_params.productTypeId;
                    obj3['billingTypeId'] = user_params.billingTypeId;
                    obj3['method'] = 'saveCallback';
                    obj3['GCLID'] = getGCLID();
                    obj3['lead_delay_time'] = user_params.leadCreateAfter;

                    PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function (data) {
                            if (data != null) {
                                if (data.data.status == 'Success') {
                                    //Open in new Page new form
                                    //Close Popup
                                    var user = {};
                                    user.email = encodeURIComponent(userEmail);
                                    user.key = data.data.result.key;
                                    user.url_current = window.location;
                                    user.bundle_name = user_params.bundle_name;
                                    var paramsArr = user;
                                    paramsArr.method = 'generateUserHash',
                                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (data) {
                                       var resData = data.data;
                                       if(resData && resData.status == 'success' && resData.data && resData.data.auh) {
                                          window.open(user_params.integrated_program_form + '?step='+resData.data.auh,"_self");
                                          document.querySelector('body').classList.remove('body_fixed');
                                       } else{
                                          $scope.integratedQueryStatusClass = "error_msg";
                                          $scope.integratedQueryStatusMsg = "There was some problem, please try again.";
                                       }
                                    });

                                    $scope.integratedFormDisplayStatus = 0;
                                } else {
                                    $scope.integratedQueryStatusClass = "error_msg";
                                    $scope.integratedQueryStatusMsg = "There was some problem, please try again.";
                                }
                            }
                            //$scope.integratedFormDisplayStatus = {'display':'none'};
                        });
                }
            }

            $scope.$watch('userPhone', function(newValue) {

                if($scope.indegratedForm && $scope.indegratedForm.userPhone) {
                    if (isNaN(newValue)) {
                        $scope.indegratedForm.userPhone.$setValidity('required', false);
                    } else if (newValue.length > PHONE_MAX_LENGTH) {
                        $scope.indegratedForm.userPhone.$setValidity('required', false);
                    }
                }
	    });
            $scope.$watch('phone', function(newValue) {
               if($scope.hasValidation)
                    {
                    if($scope.previewLeadForm && $scope.previewLeadForm.phone) {
                    setPhoneValidity($scope.previewLeadForm.phone, newValue);
                }
	    }});

            $scope.$watch('cAgreeCheck', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.cAgreeCheck && $scope.isEuro);
            });

            var setPhoneValidity = function(fieldModel, newValue) {
                if (isNaN(newValue)) {
                    fieldModel.$setValidity('phone', false);
                } else if (newValue.length > PHONE_MAX_LENGTH) {
                    fieldModel.$setValidity('phone', false);
                } else {
                    fieldModel.$setValidity('phone', true);
                }
            }
            var leadInitiated = false;
            $scope.intiateLead = function () {
                if (!leadInitiated) {
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_initiated_lead_form",
                        event_data: {
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'bundle agenda',
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                    leadInitiated = true;
                }
            }

            $scope.submitBundleAgendaLead = function (agendaUrl, fetchFromDwnAgenda, isValidate, isFormSubmit) {
                var siteModule = 'bundle agenda';
                isFormSubmit = (typeof isFormSubmit == 'undefined') ? false : isFormSubmit;
                var userEmail = '';
                var userPhone = '';
                var userName = '';
                if (isValidate) {

                } else
                {
                    if ($scope.hasValidation) {

                        userEmail = $scope.previewLeadForm.email.$modelValue;
                        userPhone = $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue;
                        userName = $scope.previewLeadForm.email.$modelValue;
                        if ($scope.previewLeadForm.$invalid) {
                            if ($scope.previewLeadForm.email.$invalid) {
                                $scope.previewLeadForm.email.$setViewValue($scope.previewLeadForm.email.$viewValue);
                            }
                            if ($scope.previewLeadForm.phone.$invalid) {
                                $scope.previewLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                            }
                            return;
                        }
                        if (!$scope.cAgreeCheck) {
                            return;

                        }
                    }
                }

                if (user_params.isEuro) {
                    if ($scope.cAgreeCheck) {
                        setCookie(user_params.OPTIN_COOKIE, 1, 90);
                    } else if (isFormSubmit || getCookieByName(user_params.OPTIN_COOKIE) != 1) {
                        setCookie(user_params.OPTIN_COOKIE, 0, 90);
                    }
                }


                ga.gaFireInteractiveEvents('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.bundle_name + ' || ' + siteModule);
                window.open($scope.submitAgendaUrl, '_blank');

                var cpvCookieSet = typeof getCookieByName(user_params.CPV_COOKIE) != 'undefined' ? true : false;
                var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                if (user_params.isEuro && !optin) {
                    $rootScope.showBundleAgenda = false;
                    $scope.hideAgendLeadPopup();
                    return;
                }
                if (fetchFromDwnAgenda === false || fetchFromDwnAgenda === null) {
                    webengage.onReady(function () {
                        var dwnAgendaCookieCIds = getCookieByName('_user_ld_info');
                        if ((typeof dwnAgendaCookieCIds !== "undefined" && dwnAgendaCookieCIds) || ($rootScope.isLoggedIn || LeadService.isSkipPopup(siteModule))) {
                            var userInfo = [];
                            if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                                userInfo = webengage.state.getForever().uattr;
                                userEmail = userInfo.we_email;
                                userPhone = userInfo.we_phone;
                            }
                        }
                        var webEngageLeadParams = [];
                        if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                            webEngageLeadParams = webengage.state.getForever().uattr;
                        }
                        var eventData = {
                            'sl_lead_type': 'b2c',
                            'sl_site_module': siteModule,
                            'sl_user_email': userEmail,
                            'sl_user_phone': userPhone || '',
                            'sl_email_opt_in': true,
                            'sl_sms_opt_in': true
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_first_name'] !== "undefined" && webEngageLeadParams['we_first_name']) {
                            eventData.sl_user_first_name = webEngageLeadParams['we_first_name'];
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_last_name'] !== "undefined" && webEngageLeadParams['we_last_name']) {
                            eventData.sl_user_last_name = webEngageLeadParams['we_last_name'];
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_submitted_lead_form",
                            event_data: eventData,
                            common: "product",
                            user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                        });
                        /*
                         * Old Params
                         var obj3 = {
                         name: userName,
                         email: userEmail,
                         phone: userPhone,
                         queryTxt: "Downloaded Bundle Agenda",
                         query: "Downloaded Bundle Agenda",
                         agreeToContact: $scope.cAgreeCheck,
                         queryTyp: 'bundle-agenda-popup',
                         bundleId: user_params.bundle_id,
                         bundleName: user_params.bundle_name
                         };
                         obj3['customerType'] = 'B2C';
                         obj3['leadTrainingType'] = 'Not Sure';
                         obj3['leadSourceString'] = document.URL;
                         obj3['tagName'] = 'bundle agenda';
                         obj3['leadSource'] = fetchUTMSource();
                         obj3['type'] = 'bundle agenda';
                         obj3['productTypeId'] = user_params.productTypeId;
                         obj3['billingTypeId'] = user_params.billingTypeId;
                         obj3['method'] = 'saveCallback';
                         obj3['GCLID'] = getGCLID();
                         obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                         obj3['fetch_from_cpr_uid'] = false;
                         obj3['save_bpr'] = 1;
                         obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));
                         */
                        var obj3 = {

                            sl_user_first_name: userName,
                            sl_user_last_name: userName,
                            queryTxt: "Downloaded Bundle Agenda",
                            sl_user_message: "Downloaded Bundle Agenda",
                            queryTyp: 'bundle-agenda-popup',
                            sl_product_id: user_params.bundle_id,
                            sl_product_name: user_params.bundle_name
                        };
                        obj3['sl_user_type'] = 'B2C';
                        obj3['leadTrainingType'] = 'Not Sure';
                        obj3['leadSourceString'] = document.URL;
                        obj3['sl_site_module'] = 'bundle agenda';
                        obj3['sl_utm_src'] = fetchUTMSource();
                        obj3['b2cQueryType'] = 'bundle agenda';
                        obj3['productTypeId'] = user_params.productTypeId;
                        obj3['billingTypeId'] = user_params.billingTypeId;
                        //obj3['method'] = 'saveSLLeadInfo';
                        obj3['GCLID'] = getGCLID();
                        obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                        //obj3['fetch_from_cpr_uid'] = false;
                        obj3['save_bpr'] = 1;
                        obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));
                        var locatorCookie = getCookieByName('locatori9');
                        var locatorCookieObj = JSON.parse(locatorCookie);
                        obj3['countryId'] = locatorCookieObj.country_id;
                        obj3['countryName'] = locatorCookieObj.country_name.replace(/\+/g, ' ');
                        obj3['cityId'] = locatorCookieObj.city_id;
                        obj3['cityName'] = locatorCookieObj.name;

                        var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                        var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(obj3, webEngageLeadFormParams);
                        var applicationContentType = 'json';
                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                                .then(function (data) {
                                    if (data != null) {
                                        if (data.status == 200 && data.data.status == "success") {
                                            //setCookie('_cpruid', data.data.cpr_uid, 90);
                                            var dACId = 'b' + user_params.bundle_id;
                                            if (dwnAgendaCookieCIds) {
                                                var dwnAgendaCookieCIdArr = dwnAgendaCookieCIds.split(",");
                                                var bundle_id = 'b' + user_params.bundle_id;
                                                dwnAgendaCookieCIdArr.push(bundle_id);
                                                var dACId = dwnAgendaCookieCIdArr.join(",");
                                            }
                                            setCookie('_user_ld_info', dACId, 90);
                                            $rootScope.isPreviewLeadCreated = true;
                                        } else {
                                            $scope.popupStatusMsg = "There was some problem, please try again.";
                                        }
                                    }
                                    $rootScope.showBundleAgenda = false;
                                    $scope.hideAgendLeadPopup();
                                });
                    });

                }
            }

            $scope.hideAgendLeadPopup = function(status){
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_form_closed",
                    event_data: {
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'bundle agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                this.showBundleAgenda = status;
            }
            $scope.disableAgendLeadPopup = function(status){
                this.showBundleAgenda = status;
            }

            $scope.agreeCheck = function() {
		$scope.cAgreeCheck=!$scope.cAgreeCheck;
		$scope.isAagreeCheckDirty = true;
            }

            var setCookie = function(cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                var expires = "expires="+ d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires +";path="+path+";";
            }

            $scope.addRemoveClassInBody = function(val){
            var class_name = 'popup_open_body';
             if(val == 1){
                 document.body.classList.add(class_name);
             } else {
                 document.body.classList.remove(class_name);
             }
            };
            $scope.gaGdprOptInCheckbox=function(event){
                if (user_params.isEuro && event.target.checked){
                    var pGaKey="gdprOptinCheckboxChecked";
                    var pGaLabel= user_params.user_id + ' || ' + user_params.bundle_name + ' || ' + 'bundle agenda';
                     ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                }
            };
            $scope.gaOnEMIKnowMoreClick = function(){
                ga.gaFireInteractiveEvents('masterProgramEmiKnowMore',user_params.user_id + ' || ' + document.URL);
            };
            $scope.gaOnEMIEnrollClick = function(){
                ga.gaFireInteractiveEvents('masterProgramEmiEnroll',user_params.user_id + ' || ' + document.URL);
            };
            this.getCourseAdvisorView = function(){
                 WebTracking.eventReq.triggerEvent({
                    event_id: "sl_eng_course_advisor_viewed",
                    common: "product",
                });
            }
            $scope.submitOnlineBundleForm = function (pCourseId, pAccessDays, pTrainingType) {
                var pageSource = window.location.href;
                $scope.onlineFormData = {"itemId": pCourseId, "accessDays": pAccessDays, 'trainingTypeId': pTrainingType, 'pageSource': pageSource};
            };
            $scope.submitOnlineBundleB2bForm = function (companyId,productId, productTypeId, accessDays,trainingTypeId,b2bCountryId,b2bPricingId) {
                var pageSource = window.location.href;
                $scope.onlineBundleB2bFormData = {"company_id": companyId,"product_id": productId, "product_type_id": productTypeId, 'accessDays': accessDays, 
                    'trainingTypeId': trainingTypeId,'b2b_country_id': b2bCountryId,'b2b_pricing_id': b2bPricingId,'pageSource': pageSource};
            };
            
        })
        
        
 /*------------- End : BundleController.js-----------*/ 

 /*------------- Begin : BundlePreviewCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('BundlePreviewCtrl', function(CpService, $scope, $cookies) {

	this.coursePreviewData = null;
	this.Math = window.Math;
        this.sectionName = "Modules Included";
        this.showDetailsFlag = 0;
        this.accordionStatus = 0;
        this.ga;
        $scope.stickyComponentDisplay = {'display':'none'};
        $scope.bundlePreviewClicked=0;
        $scope.courseId ;
	var self = this;



        $scope.$watch(function () { return self.accordionStatus; }, function(newVal){
            if( newVal === 1 ) {
                self.showDetailsFlag = 0;
            }
        });

        this.handleBundlePreviewClick = function(courseId,courseName,bundleId,bundleName,$event){

            if($scope.bundlePreviewClicked==0){
                var bundleList = document.getElementsByClassName("bundle_preview_container");
                for(var i=0;i<bundleList.length;i++){
                    var bundleObj = bundleList[i];
                    var angularEle = angular.element(bundleObj);
                   if(angularEle.scope().bundlePreviewClicked == 1){
                        angularEle.scope().bundlePreviewClicked = 0;
                    }
                }
                $scope.bundlePreviewClicked=1;
                $scope.courseId = courseId;
                user_params.course_id = courseId;
                user_params.course_name = courseName;
                user_params.bundle_id = bundleId;
                user_params.bundle_name = bundleName;
                self.ga.gaFireEventsGeneric('subsCourseExpand',courseName);
            }else{
                $scope.bundlePreviewClicked=0;
            }

        }

        this.handleVideoLinkClick = function(elearningId, lessons, lessonObj, sectionId) {
            return CpService.handleVideoLinkClick(elearningId, lessons, lessonObj, sectionId, $cookies[user_params.enterpriseCountCookieName]);
        };

        this.hidePreview = function(){
           return CpService.hidePreview();
        };

        this.getSectionIframeSrc = function(){
          return CpService.getIframeSrc();
        };

        this.showPreviewStatus = function(){
            return CpService.getShowPreviewStatus();
        };

        this.setShowDetails = function() {
            this.showDetailsFlag = ( this.showDetailsFlag === 1 ) ? 0 : 1;
        };

        this.shouldShowDetails = function() {
            return this.showDetailsFlag;
        };

        var gaForLVCPass = function() {
            var ga = new gaEventsTracker();

            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
            };
         };

         self.ga = new gaForLVCPass();
});
 /*------------- End : BundlePreviewCtrl.js-----------*/ 

 /*------------- Begin : BuySubsController.js-----------*/ 

angular.module('Simplilearn')
.controller('BuySubsController', function($scope, $http, $rootScope) {

    this.userName = '';
    this.userEmail = '';
    this.productId = '';
    this.accessDays = '';
    this.isRequestPending = false;
    this.errorMsg = '';
    this.alternateAccessDays = '';
    this.subsNote = '';
    this.subsNoteAction = '';

    var self = this;

    self.helpers = new helpers();

    /*$scope.$watch(function () { return self.userEmail; }, function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        if( !email_rgx.test(newValue) ){
            $scope.buySubsForm.user_email.$setValidity('email', false);
        }
        else {
            $scope.buySubsForm.user_email.$setValidity('email', true);
        }
    });*/

    this.init = function( pProductId, pAccessDays, pName, pEmail, pErrorMsg ) {
        this.userName = pName;
        this.userEmail = pEmail;
        this.productId = pProductId;
        this.accessDays = pAccessDays;
        this.errorMsg = pErrorMsg;
    };

    this.submitForm = function(pForm, pEvent,cName) {
        if( typeof pEvent.preventDefault !== 'undefined' ) {
            pEvent.preventDefault();
        }
        else {
            pEvent.returnValue  = false;
        }

        if (!pForm.$valid) {
            self.errorMsg = 'Oops! Please ensure all fields are valid.';

            return self.helpers.FormNotValid(pForm);
        }

        this.isRequestPending = true;
        this.errorMsg = '';

        $http.get(
            baseUrlAjax+"buy-subscription/proceed",
            {
                params : {
                    'product_id':self.productId,
                    'access_days':self.accessDays,
                    'user_name':self.userName,
                    'user_email':self.userEmail
                }
            }
        )
        .success(function(data){
            self.isRequestPending = false;
            self.errorMsg = '';
            if( data && data.status == 'success' && data.redirect ) {
                $scope.gaSubscriptionPage.proceedSub(cName);
                window.location = data.redirect;
            } else if( data && data.status == 'displayInfo' ) {
                self.subsExistsData = data;
                $rootScope.toggleModalDisplay('js_sub_exists_pop','block',null);
            } else {
                if( data.msg ) {
                    self.errorMsg = data.msg;
                } else {
                    self.errorMsg = 'Some error occurred. Please try again later.';
                }
            }
        })
        .error(function() {
            self.isRequestPending = false;
            self.errorMsg = 'Some error occurred. Please try again later.';
        });
    };

    this.changePlan = function() {
        self.isRequestPending = true;
        $http.get(
            baseUrlAjax+"buy-subscription/change-plan",
            {
                params : {
                    'product_id':self.productId,
                    'access_days':self.alternateAccessDays,
                }
            }
        )
        .success(function(data){
            self.isRequestPending = false;
            self.errorMsg = '';
            if( data && data.status == 'success' ) {
                var temp = self.alternateAccessDays;
                self.alternateAccessDays = self.accessDays;
                self.accessDays = temp;
                self.subsNote = data.subsNote;
                self.subsNoteAction = data.subsNoteAction;
            } else {
                if( data.msg ) {
                    self.errorMsg = data.msg;
                } else {
                    self.errorMsg = 'Some error occurred. Please try again later.';
                }
            }
        })
        .error(function() {
            self.isRequestPending = false;
            self.errorMsg = 'Some error occurred. Please try again later.';
        });
    };

    var gaForSubscriptionPage = function () {
        var ga = new gaEventsTracker();

        this.proceedSub = function(course){
            ga.gaFireInteractiveEvents('proceedToPayPal',course);
        };
        this.changeSubPlan = function(msg,cname){
            if(typeof msg!='undefined'){
                if(msg.indexOf('monthly')>0){
                    ga.gaFireInteractiveEvents('changeSubsAPlan',cname);
                }else{
                    ga.gaFireInteractiveEvents('changeSubsMPlan',cname);
                }
            }
        }
    };

    $scope.gaSubscriptionPage = new gaForSubscriptionPage();
}); /*------------- End : BuySubsController.js-----------*/ 

 /*------------- Begin : CaldonAuthorDetailCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('CaldonAuthorDetailCtrl',function ($scope,$http,$rootScope,PostReqService,engagementMatrix) {
    
    $scope.socialShareToggle = function($event,thisToggle){
        $event.stopPropagation();
        $event.preventDefault();
        if (thisToggle.isStateToggle == undefined) {
            thisToggle.isStateToggle = false;    
        }
        thisToggle.isStateToggle = !thisToggle.isStateToggle; 
                 
    }
    webengage.onReady(function () {
         var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_frs_author_name','sl_frs_author_designation', 'sl_frs_author_bio', 'sl_frs_author_linkedin_url', 'sl_frs_author_twitter_url', 'sl_frs_author_image', 'sl_page_type', 'sl_user_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_frs_eng_user_lands_on_frs_authors_page",
                    event_data: eventData
                });
    });
    $scope.socialShareToggleOnLoad = function($event,id){
        $event.stopPropagation();
        $event.preventDefault();
        var divId = document.getElementById('share_social_'+id).parentNode.id;
        var divElement = document.getElementById(divId);
        var ulElement = document.getElementById('hare_social_ul_'+id);
        var isShareTouch = angular.element(divElement).hasClass('shareTouch');
        if (isShareTouch == false) {
            divElement.classList.remove("shareNoTouch");
            divElement.classList.add("shareTouch");
            ulElement.classList.remove("no-touch");
            ulElement.classList.add("touch");
        }
        else {
            divElement.classList.remove("shareTouch");
            divElement.classList.add("shareNoTouch");
            ulElement.classList.remove("touch");
            ulElement.classList.add("no-touch");
        }
    }

    $scope.share = {
            update: function (id,resourceName,platform) {
                if (id) {
                    var dataObj = {
                        type: 'shares',
                        contentId: id,
                        isAjax: 1
                    };
                    console.log(dataObj);
                    engagementMatrix.update(dataObj);
                    var label = resourceName + "|" + platform;
                    if (user_params.email) {
                        label += label + "|" + user_params.email;
                    }
                        var eventObj = {
                                 'eventType': 'listingresourceShared',
                                 'label'    :   label
                        };
                        CaldonGA.triggerEvent.gagInitiate(eventObj);
                }
            }
        };
        var contentReadState;
        this.setContentToRead = function(pVal) {
            contentReadState = pVal;
            if (contentReadState === 1) {
                window.scrollTo(0,0);
            }else{
                angular.element(document.getElementById('authorContent')).removeClass('hidden');
                angular.element(document.getElementById('readLessId')).removeClass('hidden');
            }
        };
        
        this.getContentToExpand = function() {
            if( typeof contentReadState === 'undefined' ) {
                contentReadState = 1;
               
            }
            
            return contentReadState;
        };
        
});


 /*------------- End : CaldonAuthorDetailCtrl.js-----------*/ 

 /*------------- Begin : CaldonContentListCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('CaldonContentListCtrl',function ($scope,$http,$rootScope,$document,PostReqService,engagementMatrix) {

    $scope.categoryId = 0;
    $scope.menuFocus = 0;
    $scope.baseUrl = baseUrl;
    $scope.baseApiUrlNocache = baseApiUrlNocache;
    $scope.siteBaseApiUrlNocache = siteBaseApiUrlNocache;
    $scope.contentLists = contentList.data.contents;
    $scope.segmentName = contentList.data.segment;
    $scope.seo_url = contentList.data.seo_url;
    $scope.filter = contentList.data.filter;
    $scope.frontendUrl = frontendUrl;
    $scope.page = 2;
    $scope.total_page_number = contentList.data.total_page_number;

            angular.element($document).ready(function () {
                if (getParameterByName('referrer') == "frs_home") {
                    webengage.onReady(function () {
                        WebTracking.setUserParams('sl_page_type', 'frs category page');
                        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_frs_segment_id','sl_frs_segment_name','sl_page_type','sl_user_type']);
                            eventData['sl_page_type'] = "frs homepage";
                            if(eventData['sl_frs_segment_name'] == "Other Segments"){
                                eventData['sl_frs_segment_id'] = 0;
                            }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_frs_nav_view_all_resources_clicked_on_homepage",
                            event_data: eventData
                        

                        });
                    });
                }

            });
    var paramsDetail={
            filter:$scope.filter,
            method:'loadFrsSegments'
        }
    PostReqService.sendPostRequest(siteBaseApiUrlNocache+'?method=loadFrsSegments', paramsDetail)
     .then(function(output) {
        $scope.segments = output.data;
        // console.log("segments "+$scope.segments);
    });
    $scope.FilterArticles = function(val) {
       return $scope.filter === val;
    };
    $scope.makeurl = function(val,id,thisObj){
        if (val) {
            var title = val.toLowerCase();
            thisObj.urlVal = $scope.baseUrl+'resources/'+title.replace(/\s+/g, '-')+'/'+$scope.filter;
        }
    };

    $scope.marketingUrl = function(val,id,type,thisObj){
        if (val) {
            var title = val.toLowerCase();
            thisObj.urlVal = $scope.baseUrl+'resources/'+title.replace(/\s+/g, '-')+'/'+type;
        }
    };

    $scope.isEmpty=function(object){
       return object.length ? true :false;
    };
    $scope.createFilterUrl = function(url,thisObj){
        var test = decodeURIComponent(url);
        var decodedUrl = decodeURI(test);
        //if ($scope.filter === 'latest') {
        thisObj.seoUrl=$scope.frontendUrl+'/'+decodeURI(decodedUrl);
        //}else{
            //thisObj.seoUrl=$scope.frontendUrl+'/'+ decodeURI(decodedUrl);
        //}
    }
    $scope.latestUrl = function(val,thisObj){
        var test = decodeURIComponent($scope.seo_url);
        var decodedUrl = decodeURI($scope.seo_url);
        thisObj.latestUrl =  $scope.frontendUrl+decodedUrl+'/'+val;
    }
    $scope.popularUrl = function(val,thisObj){
          var test = decodeURIComponent($scope.seo_url);
        var decodedUrl = decodeURI($scope.seo_url);
        thisObj.popularUrl = $scope.frontendUrl+decodedUrl+'/'+val;
    }

    $scope.ViewMore = function () {
        var paramsDetail={
            filter:$scope.filter,
            p:$scope.page,
            segment:$scope.segmentName,
            type:contentList.data.type,
            method:'getFrsContentListApi'
        };
        var eventObj = {
            'eventType': 'listingviewmoreClicked',
        };
        CaldonGA.triggerEvent.gagInitiate(eventObj);

        PostReqService.sendPostRequest( siteBaseApiUrlNocache+'?method=getFrsContentListApi', paramsDetail)
        .then(function(output) {
            $scope.page++;
           $scope.contentLists.push.apply($scope.contentLists,output.data.data.contents);
        });
    };
    $scope.socialShareToggle = function($event,thisToggle){
        $event.stopPropagation();
        $event.preventDefault();
        if (thisToggle.isStateToggle == undefined) {
            thisToggle.isStateToggle = false;
        }
        thisToggle.isStateToggle = !thisToggle.isStateToggle;

    }

    $scope.socialShareToggleOnLoad = function($event,id){
        $event.stopPropagation();
        $event.preventDefault();
        var divId = document.getElementById('share_social_'+id).parentNode.id;
        var divElement = document.getElementById(divId);
        var ulElement = document.getElementById('hare_social_ul_'+id);
        var isShareTouch = angular.element(divElement).hasClass('shareTouch');
        if (isShareTouch == false) {
            divElement.classList.remove("shareNoTouch");
            divElement.classList.add("shareTouch");
            ulElement.classList.remove("no-touch");
            ulElement.classList.add("touch");
        }
        else {
            divElement.classList.remove("shareTouch");
            divElement.classList.add("shareNoTouch");
            ulElement.classList.remove("touch");
            ulElement.classList.add("no-touch");
        }
    }


//    $scope.share = {
//                update: function (detail) {
//                    if (typeof detail !== "undefined" && Object.getOwnPropertyNames(detail).length > 0) {
//                        var dataObj = {
//                            type: 'shares',
//                            contentId: detail._id.$id,
//                            isAjax: 1
//                        };
//                    }
//                    engagementMatrix.update(dataObj);
//                }
//    };
//


     $scope.share = {
            update: function (id,resourceName,platform) {
                if (id) {
                    var dataObj = {
                        type: 'shares',
                        contentId: id,
                        isAjax: 1
                    };
                    //console.log(dataObj);
                    engagementMatrix.update(dataObj);
                    var label = '';
                    if (user_params.user_id) {
                        label += user_params.user_id + " || ";
                    }
                    label += platform;
                        var eventObj = {
                                 'eventType': 'sharingiconclick',
                                 'label'    :   label + ' || ' + document.URL
                        };
                        CaldonGA.triggerEvent.gagInitiate(eventObj);

                }

            }
        };

    $scope.like = {
       update: function (detail) {
           if (typeof detail !== "undefined" && Object.getOwnPropertyNames(detail).length > 0) {
               var dataObj = {
                   type: 'likes',
                   contentId: detail._id.$id,
                   isAjax: 1
               };
           }
           engagementMatrix.update(dataObj);
       }
    };
            $scope.segmentChangeEvent = function (segment, segment_id) {
                var label = '';
                if (user_params.user_id) {
                    label += user_params.user_id + ' || ';
                }
                label += segment;
                var eventObj = {
                    'eventType': 'listingchangeSegment',
                    'label': label + ' || ' + document.URL
                };
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_frs_segment_id', 'sl_frs_segment_name', 'sl_page_type', 'sl_user_type']);
                eventData['sl_frs_previous_segment_name'] = eventData['sl_frs_segment_name'];
                if (eventData['sl_frs_previous_segment_name'] == 'Other Segments') {
                    eventData['sl_frs_previous_segment_id'] = 0;
                } else {
                    eventData['sl_frs_previous_segment_id'] = parseInt(eventData['sl_frs_segment_id']);
                }
                eventData['sl_frs_segment_name'] = segment;
                if (eventData['sl_frs_segment_name'] == 'Other Segments') {
                    eventData['sl_frs_segment_id'] = 0;
                } else {
                    eventData['sl_frs_segment_id'] = parseInt(segment_id);
                }
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_frs_eng_user_change_segment_filter_on_frs_pages",
                    event_data: eventData

                });
                CaldonGA.triggerEvent.gagInitiate(eventObj);
            };

    $scope.resourceCardGaEvent=function(type,title,url){

        var label = type ;
        if(url){
            label +=  "|" + url;
        }
        if(title){
             label += "|" + title;
        }
        var eventObj = {
                    'eventType': 'listingresourceCard',
                    'label': label
                };
        CaldonGA.triggerEvent.gagInitiate(eventObj);

    };

})
 /*------------- End : CaldonContentListCtrl.js-----------*/ 

 /*------------- Begin : CaldonHomeCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('CaldonHomeCtrl', function ($http, $scope, $location, $document, PostReqService) {
            $scope.segmentName = 'All Segments';
            $scope.categoryId = 0;
            $scope.menuFocus = 0;
            $scope.baseUrl = baseUrl;
            $scope.baseApiUrlNocache = baseApiUrlNocache;
            $scope.siteBaseApiUrlNocache = siteBaseApiUrlNocache;
            $scope.segmentLists = output.data.segments;
            $scope.filter = output.data.filter;
            $scope.page = 2;
            $scope.total_page_number = output.data.total_page_number;
            var self = this;
            // console.log("segmentLists "+ output);
            webengage.onReady(function () {
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_frs_eng_user_lands_on_frs_homepage",
                    event_data: {
                        'sl_page_type': 'frs homepage'
                    }
                });

            });
            var paramsDetail = {
                filter: $scope.filter,
                method: 'loadFrsSegments'
            }
            PostReqService.sendPostRequest(siteBaseApiUrlNocache + '?method=loadFrsSegments', paramsDetail)
                    .then(function (output) {
                        $scope.segments = output.data;
                        // console.log("segments "+$scope.segments);         
                    });
            this.CallMoreSegements = function () {

                if ($scope.total_page_number < $scope.page) {
                    var paramsDetail = {
                        filter: $scope.filter,
                        p: $scope.page,
                        isMore: 1,
                        method: 'getFrsHomePageApi'
                    }
                    PostReqService.sendPostRequest($scope.baseApiUrlNocache, paramsDetail)
                            .then(function (output) {
                                var more = new Array(output.data.data.segments);
                                if (more[0].content.length > 0) {
                                    $scope.segmentLists.push.apply($scope.segmentLists, more);
                                }
                            });
                }
            }
            this.CallMoreSegements();
            $scope.FilterArticles = function (val) {
                return $scope.filter === val;
            };
            $scope.toggled = function (isopen) {
            }
            $scope.createFilterUrl = function (url, thisObj) {
                var test = decodeURIComponent(url);
                var decodedUrl = decodeURI(test);
                if ($scope.filter === 'latest') {
                    thisObj.seoUrl = $scope.baseUrl + decodeURI(decodedUrl) + '/' + $scope.filter;
                } else {
                    thisObj.seoUrl = $scope.baseUrl + decodeURI(decodedUrl);
                }
            }
            $scope.ViewMore = function () {
                var paramsDetail = {
                    filter: $scope.filter,
                    p: $scope.page,
                    method: 'getFrsHomePageApi'
                }
                var eventObj = {
                    'eventType': 'homeviewmoreClicked',
                };
                CaldonGA.triggerEvent.gagInitiate(eventObj);
                PostReqService.sendPostRequest($scope.baseApiUrlNocache, paramsDetail)
                        .then(function (output) {
                            $scope.page++;
                            $scope.segmentLists.push.apply($scope.segmentLists, output.data.data.segments);
                            self.CallMoreSegements();
                        });

            };

            $scope.makeurl = function (val, id, thisObj) {
                if (val) {
                    var title = val.toLowerCase();
                    thisObj.urlVal = $scope.baseUrl + 'resources/' + title.replace(/\s+/g, '-') + '/' + $scope.filter;
                }
            };
            $scope.latestUrl = function (val, thisObj) {
                thisObj.latestUrl = $scope.baseUrl + 'resources/' + val;
            };
            $scope.popularUrl = function (val, thisObj) {
                thisObj.popularUrl = $scope.baseUrl + 'resources/' + val;
            };

            $scope.triggerMoreGAEvent = function (segment) {
                var eventObj = {
                    'eventType': 'homeviewmoreSegmentClicked',
                    'label': segment
                };
                CaldonGA.triggerEvent.gagInitiate(eventObj);

            };

            $scope.triggerRightScrollEvent = function (segment) {
                var eventObj = {
                    'eventType': 'homeScrollSegment',
                    'label': segment
                };
                CaldonGA.triggerEvent.gagInitiate(eventObj);

            };

            window.addEventListener('scroll', function () {

            }, false);

        })
        .directive('calDirSlCarousel', function (HelperService, $rootScope, $timeout, $window) {
            return {
                link: function (scope, element, attrs) {
                    $timeout(function () {


                        var carouselScreen, carouselList, carouselItems, carouselItemWidth, carouselItemsLength, carouselItemsVisible,
                                carouselItemsLength, carouselPrevBtn, carouselNxtBtn, maxSlides, currentSlide, hf = HelperService, isSliding;

                        var initCarousel = function () {
                            carouselScreen = element[0].getElementsByClassName('c_screen')[0];
                            carouselList = element[0].getElementsByClassName('c_list')[0];
                            carouselPrevBtn = element[0].getElementsByClassName('c_prev')[0];
                            carouselNxtBtn = element[0].getElementsByClassName('c_next')[0];
                            carouselItems = angular.element(carouselList).children();
                            carouselItemWidth = carouselItems[0].offsetWidth;
                            carouselItemHeight = carouselItems[0].offsetHeight;
                            carouselItemsLength = carouselItems.length;
                            carouselItemsVisible = calculateBlocksToMove(carouselScreen, carouselItems, carouselItemsLength);
                            maxSlides = (carouselItemsLength % carouselItemsVisible) == 0 ? (carouselItemsLength / carouselItemsVisible) : (parseInt(carouselItemsLength / carouselItemsVisible) + 1);
                            currentSlide = 0;
                            carouselList.style.position = "relative";
                            addTransitionStyle(carouselList, "0.3s");
                            addTransformStyle(carouselList, 0);
                            // carouselList.style.width = (carouselItemsLength*carouselItemWidth)+"px";
                            carouselList.style.width = "10000px";
                            isSliding = 0;
                            angular.element(carouselPrevBtn).on('click', function () {
                                slideRight();
                            });
                            angular.element(carouselNxtBtn).on('click', function () {
                                slideLeft();
                            });
                            if (!$rootScope.mobWidthFlag) {
                                hf.$(carouselScreen).onSwipeLeft(function () {
                                    slideLeft();
                                });
                                hf.$(carouselScreen).onSwipeRight(function () {
                                    slideRight();
                                });
                            }
                            getCurrentTransformVal();
                            addEmptyLis(carouselList);
                        }

                        var addEmptyLis = function (carouselList) {
                            carouselItems = angular.element(carouselList).children();
                            carouselItemsLength = carouselItems.length;
                            carouselItemsVisible = calculateBlocksToMove(carouselScreen, carouselItems, carouselItemsLength);
                            var aa = carouselItemsLength % carouselItemsVisible;
                            if (aa != 0) {
                                var bb = carouselItemsVisible - aa;
                                var liList = [];
                                for (var i = 0; i < bb; i++) {
                                    var li = document.createElement("li");
                                    li.style.border = "none";
                                    li.style.float = "left";
                                    li.style.width = carouselItemWidth + "px";
                                    li.style.height = carouselItemHeight + "px";
                                    li.className = "c_list_item c_index_" + (carouselItemsLength + i + 1) + " empty_li";
                                    liList[i] = li;
                                }
                                for (var i = 0; i < bb; i++) {
                                    carouselList.appendChild(liList[i]);
                                }
                            }
                        }

                        var removeEmptyLis = function (carouselList) {
                            var carouselItemsAll = angular.element(carouselList).children();
                            for (var i = 0; i < carouselItemsAll.length; i++) {
                                var carouselItemObj = carouselItemsAll[i];
                                if (carouselItemObj.className.indexOf("empty_li") != -1) {
                                    carouselList.removeChild(carouselItemsAll[i]);
                                }
                            }
                        }
                        var calculateBlocksToMove = function (carouselScreen, carouselItems, carouselItemsLength) {
                            var citemstomove = 0;
                            for (var i = 0; i < carouselItemsLength; i++) {
                                if (carouselItems[i].offsetWidth > 0) {
                                    citemstomove = Math.round(carouselScreen.offsetWidth / carouselItems[i].offsetWidth);
                                    break;
                                }
                            }
                            return citemstomove;
                        }
                        var addTransitionStyle = function (carouselList, transformVal) {
                            carouselList.style.transition = "0.3s";
                            carouselList.style.setProperty("-webkit-transition", transformVal);
                            carouselList.style.setProperty("-moz-transition", transformVal);
                            carouselList.style.setProperty("-ms-transition", transformVal);
                            carouselList.style.setProperty("-o-transition", transformVal);
                        }
                        var addTransformStyle = function (carouselList, presentTransformVal) {
                            carouselList.style.transform = "translate3d(" + presentTransformVal + "px, 0px, 0px)";
                            carouselList.style.setProperty("-webkit-transform", "translate3d(" + presentTransformVal + "px, 0px, 0px)");
                            carouselList.style.setProperty("-moz-transform", "translate3d(" + presentTransformVal + "px, 0px, 0px)");
                            carouselList.style.setProperty("-ms-transform", "translate3d(" + presentTransformVal + "px, 0px, 0px)");
                            carouselList.style.setProperty("-o-transform", "translate3d(" + presentTransformVal + "px, 0px, 0px)");
                        }
                        var slideLeft = function () {
                            if (isSliding == 0) {
                                isSliding = 1;
                                carouselItems = angular.element(carouselList).children();
                                carouselItemWidth = carouselItems[0].offsetWidth;
                                carouselItemsLength = carouselItems.length;
                                var presentTransformVal = getCurrentTransformVal();
                                if (currentSlide < maxSlides - 1) {
                                    presentTransformVal = presentTransformVal - (carouselItemsVisible * carouselItemWidth);
                                    addTransitionStyle(carouselList, "0.3s");
                                    addTransformStyle(carouselList, presentTransformVal);
                                    currentSlide++;
                                    isSliding = 0;
                                } else {
                                    currentSlide = 0;
                                    var copiedObjs = [];
                                    var clonedObjs = [];
                                    for (var i = 0; i < carouselItemsLength; i++) {
                                        copiedObjs[i] = carouselList.children[i];
                                        clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                    }
                                    //append elements to the end of the list
                                    for (var i = 0; i < carouselItemsLength; i++) {
                                        carouselList.appendChild(clonedObjs[i]);
                                    }
                                    presentTransformVal = presentTransformVal - (carouselItemsVisible * carouselItemWidth);
                                    addTransitionStyle(carouselList, "0.3");
                                    addTransformStyle(carouselList, presentTransformVal);
                                    $timeout(function () {
                                        for (var i = 0; i < carouselItemsLength; i++) {
                                            carouselList.removeChild(copiedObjs[i]);
                                        }
                                        addTransitionStyle(carouselList, "");
                                        addTransformStyle(carouselList, 0);
                                        currentSlide = 0;
                                        isSliding = 0;
                                    }, 300);
                                }
                            }
                        }

                        var slideRight = function () {
                            if (isSliding == 0) {
                                isSliding = 1;
                                carouselItems = angular.element(carouselList).children();
                                carouselItemWidth = carouselItems[0].offsetWidth;
                                carouselItemsLength = carouselItems.length;
                                var presentTransformVal = getCurrentTransformVal();
                                if (currentSlide == 0) {
                                    var copiedObjs = [], clonedObjs = [];
                                    for (var i = 0; i < carouselItemsLength; i++) {
                                        copiedObjs[i] = carouselList.children[carouselItemsLength - (i + 1)];
                                        clonedObjs[i] = copiedObjs[i].cloneNode(true);
                                    }
                                    addTransitionStyle(carouselList, "");
                                    //append elements to the end of the list
                                    for (var i = 0; i < clonedObjs.length; i++) {
                                        carouselList.insertBefore(clonedObjs[i], carouselList.firstChild);
                                    }
                                    presentTransformVal = getCurrentTransformVal() - (carouselItemWidth * (carouselItemsLength));
                                    addTransformStyle(carouselList, presentTransformVal);
                                    setTimeout(function () {
                                        presentTransformVal = getCurrentTransformVal() + (carouselItemWidth * carouselItemsVisible);
                                        addTransitionStyle(carouselList, "0.3s");
                                        addTransformStyle(carouselList, presentTransformVal);
                                        for (var i = 0; i < carouselItemsLength; i++) {
                                            carouselList.removeChild(copiedObjs[i]);
                                        }
                                        currentSlide = maxSlides - 1;
                                        isSliding = 0;
                                    }, 200);

                                } else {
                                    if (currentSlide <= maxSlides) {
                                        presentTransformVal = presentTransformVal + (carouselItemsVisible * carouselItemWidth);
                                        addTransitionStyle(carouselList, "0.3s");
                                        addTransformStyle(carouselList, presentTransformVal);
                                        currentSlide--;
                                        isSliding = 0;
                                    }
                                }
                            }
                        }

                        var getCurrentTransformVal = function () {
                            var transformStr = carouselList.style.transform;
                            var modifiedTransformStr = transformStr.substring(transformStr.indexOf("3d(") + 3, transformStr.indexOf(",", transformStr.indexOf("3d(")));
                            modifiedTransformStr = modifiedTransformStr.replace("px", "");
                            modifiedTransformStr = parseInt(modifiedTransformStr);
                            return modifiedTransformStr;
                        }
                        initCarousel();

                        $rootScope.$on('orientationChanged', function (isOrientationChanged) {
                            if (isOrientationChanged) {
                                isSliding = 1;
                                $timeout(function () {
                                    removeEmptyLis(carouselList);
                                    addEmptyLis(carouselList);
                                    addTransitionStyle(carouselList, "");
                                    addTransformStyle(carouselList, 0);
                                    carouselItems = angular.element(carouselList).children();
                                    carouselItemsLength = carouselItems.length;
                                    carouselItemsVisible = calculateBlocksToMove(carouselScreen, carouselItems, carouselItemsLength);
                                    maxSlides = (carouselItemsLength % carouselItemsVisible) == 0 ? (carouselItemsLength / carouselItemsVisible) : (parseInt(carouselItemsLength / carouselItemsVisible) + 1);
                                    currentSlide = 0;
                                    isSliding = 0;
                                }, 300);
                            }
                        });
                    }, 300);

                }
            }
        });
 /*------------- End : CaldonHomeCtrl.js-----------*/ 

 /*------------- Begin : CareerController.js-----------*/ 

angular.module('Simplilearn')
.controller('CareerController', function(){
    this.constructVidPlayer = function(divId, vidUrl, vidImg) {
		jwplayer(divId).setup({
			file: vidUrl,
			image: vidImg,
			base: staticUrl + 'core/js/jwplayer/',
			width: 655,
			height: 385,
			startparam: 'start',
			//skin: staticUrl + 'core/js/jwplayer/skin_base64_new.xml',
			fallback: false,
			icons: true
		})

		return true;
	};
}); /*------------- End : CareerController.js-----------*/ 

 /*------------- Begin : CartController.js-----------*/ 

angular.module('Simplilearn')
.controller('CartCtrl', function($http, $timeout, LocService, $cookies, $window,$scope,$rootScope, PaymentEventService) {

    var default_last_label = {
        'name' : 'Project Management',
        'url' : 'project-management'
    };

    this.lastLabel = default_last_label;
    this.personName = '';
    this.email = '';
    this.phone = '';
    this.coupon = '';
    this.serviceTax = '';
    this.grandTotal = '';
    this.grandTotalActual='';
    this.cartData = new Array();
    this.numOfItems = 0;
    this.showInfoMsg = 0;
    this.countryData = null;
    this.selected_country = null;
    this.helpers = new helpers();
    this.invalidCouponMessageDisplay = 'none';
    this.couponApplied = false;
    this.isRequestPending = 0;
    this.updateErrMsg = null;
    this.isIpad = isIpad;
    this.baseUrl = baseUrl;
    this.couponTxt = '';
    this.couponDiscount=0;
    this.couponCurrency='';
    this.otherCouponTxt='';
    this.otherCouponError=false;
    $scope.otherCouponApply=false;
    this.offerCoupons = [];
    this.classroomExists = 0;
    this.subsExistsData = {};
    this.freeTrialUsedData = {'freeTrialUsed':1};
    this.subsName = '';

    var self = this;
    var Math = window.Math;
    var isPaymentConflictVisible = false;

    this.initialize = function(couponCode,couponDiscount,couponCurrency) {
        self.couponTxt = couponCode;
        self.couponDiscount=couponDiscount;
        self.couponCurrency=couponCurrency;
        $timeout(function(){
            self.showInfoMsg = 0;
        }, 5000);

        LocService.getCountryData().then(function(data) {
            self.countryData = data;

            //set current country using cookie
            LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

            //get current country
            self.selected_country = LocService.getCurrentCountry();

            //this.personPhone = '+'+this.selected_country.phnCode+'-';
        });
    };

    this.init_CartDetails = function( pCourseId, pBatchId, pAccessDays, pQty, pUnitPrice, pTotPrice, pTrainingType ) {
        var new_data = {"courseId":pCourseId, "batchId":pBatchId, "accessDays":pAccessDays, "qty":pQty, "unitPrice":pUnitPrice, "totPrice":pTotPrice, "trainingTypeId":pTrainingType,
                        "showDetailsFlag":0, "detailsLabel":"details"};
        this.cartData.push(new_data);

        this.numOfItems = getNumberOfCartItems();

//        updateCartCookieVal();
    };

    this.createOffersBlock = function(code,desc,validTill,savedAmount){
        var offerObj = {'code':code,'desc':desc,'validTill':validTill,'savedAmount':savedAmount};
        self.offerCoupons.push(offerObj);
    }

    this.removeCoupon = function(pEvent) {
        self.isRequestPending = 1;
        $http
            .post(baseUrlAjax+"cart/remove-coupon")
            .success(function(data){
                self.couponApplied = false;
                self.invalidCouponMessageDisplay = 'none';
                self.coupon = '';
                self.couponTxt = '';
                updateCartData(data.cart, false);
                self.isRequestPending = 0;
            })
            .error(function() {
                self.isRequestPending = 0;
            });
        if (pEvent) {
            if( typeof pEvent.preventDefault !== 'undefined' ) {
                pEvent.preventDefault();
            }
            else {
                pEvent.returnValue  = false;
            }
        }
    }

    this.applyCoupon = function($event, pIsKeyboardEvent, pCoupon) {
                if( typeof pCoupon !== 'undefined') {
                    var coupon = angular.copy(pCoupon);
                }
                else {
                    var coupon = angular.copy(self.coupon);
                }
		if( typeof $event.keyCode === 'undefined' ||
                        (!$event.keyCode && !this.isIpad && pIsKeyboardEvent) ||
                        (!$event.keyCode && !pIsKeyboardEvent) ||
                        $event.keyCode == 13 )
                {
                        if( typeof $event.preventDefault !== 'undefined' ) {
                                $event.preventDefault();
                        }
                        else {
                            $event.returnValue  = false;
                        }

                        self.invalidCouponMessageDisplay = 'none';
			if(coupon == ''){
                            return false;
			}else{
                            $scope.gaCartControllerJs.gaCouponTry(coupon);
                            self.isRequestPending = 1;
				$http
				.post(baseUrlAjax+"cart/apply-coupon", {"code":coupon})
				.success(function(data){
					if (data.status == 'success'){
                                            self.couponTxt = coupon;
                                            $scope.gaCartControllerJs.gaCouponSuccess(coupon);
						self.couponApplied = true;
						self.invalidCouponMessageDisplay = 'none';
						updateCartData(data.cart);
                                                self.isRequestPending = 0;
                                                $rootScope.toggleModalDisplay('cart_offer_pop','none',$event);
                                                self.couponDiscount=data.cart.general.totalDiscount;
                                                self.couponCurrency=data.cart.general.currency;
					} else {
                                                self.isRequestPending = 0;
                                                var gaObj = new gaEventsTracker();
                                                gaObj.gaFireOnCartPageInvalidCouponSubmit(data.messages);
                                            $scope.gaCartControllerJs.gaCouponFail(data.messages);
                                            if(self.otherCouponTxt != ''){
                                                self.otherCouponError=true;
                                                $scope.otherCouponApply=false;
                                                $rootScope.toggleModalDisplay('cart_offer_pop','block',$event);
                                            }else{
                                                self.couponApplied = false;
						self.invalidCouponMessageDisplay = 'block';
                                            }

					}
				})
                                .error(function() {
                                    self.isRequestPending = 0;
                                    if(self.otherCouponTxt != ''){
                                        self.otherCouponError=true;
                                        $scope.otherCouponApply=false;
                                        $rootScope.toggleModalDisplay('cart_offer_pop','block',$event);
                                    }
                                });
			}
		}
    };

    this.submitForm = function(form, pEvent,gaPassName,gaBundleName) {
        setFormVars(gaPassName,gaBundleName);
        return true;
        if( typeof pEvent.preventDefault !== 'undefined' ) {
            pEvent.preventDefault();
        }
        else {
            pEvent.returnValue  = false;
        }

        if (!form.$valid) {
            return this.helpers.FormNotValid(form);
        }

        var index = 0;
        for(var prop in self.cartData) {
            if(self.cartData[prop]) {
                index = prop;
                break;
            }
        }

        sendUpdateRequest(index, 0, 1, pEvent,gaPassName,gaBundleName);
    };

    var setFormVars = function(gaPassName,gaBundleName) {
        this.phone = $rootScope.queryPhoneCode+this.phone;
	$rootScope.queryPhoneCode = "";
        if(gaPassName!=''){
            $scope.gaCartControllerJs.gaCartLVC(gaPassName);
        }
        if(gaBundleName!=''){
            $scope.gaCartControllerJs.gaCartBundle(gaBundleName);
        }
        document.getElementById('cartForm').submit();
    };

	$scope.$watch(angular.bind(this, function() {
        return this.phone;
    }), function(newValue) {
		if(isNaN(newValue)){
			$scope.cartForm.cartPhone.$setValidity('required', false);
		}else if(newValue.length > 10){
			$scope.cartForm.cartPhone.$setValidity('required', false);
		}

	});

	$scope.$watch(angular.bind(this, function() {
        return this.coupon;
    }), function(newValue) {
		if(newValue == ''){
			self.invalidCouponMessageDisplay = 'none';
		}

	});

        $scope.$watch(angular.bind(this, function() {
            return this.otherCouponTxt;
        }), function(newValue) {
            if(typeof newValue != 'undefined' && newValue != ''){
                $scope.otherCouponApply=true;
            }else{
                $scope.otherCouponApply=false;
            }
        });

    this.changeAccessDays = function( pIndex, pDays ) {
        if(typeof this.cartData[pIndex]['accessDays'] !== 'undefined' && !!this.cartData[pIndex]['accessDays'] && this.cartData[pIndex]['accessDays'] == pDays) {
            return false;
        }
        sendUpdateRequest( pIndex, pDays, 0, 0 );
    };

    this.changeQty = function( pIndex ) {

			if(self.cartData[pIndex].qty != '' && self.cartData[pIndex].qty > 0 && !isNaN(self.cartData[pIndex].qty)){
				self.cartData[pIndex].qty = parseInt(self.cartData[pIndex].qty);
				sendUpdateRequest( pIndex, null, 0, 0 );
			}else{
				self.cartData[pIndex].qty = '';
				return false;
			}



    };

    this.checkQty = function( pIndex ) {
        if(!self.cartData[pIndex].qty) {
            self.cartData[pIndex].qty = 1;
            sendUpdateRequest( pIndex, null, 0, 0 );
        }
    };

    this.removeItem = function( pIndex ) {
        self.isRequestPending = 1;
        $http.get(baseUrlAjax+"cart/remove-cart-item",
                        {
                            params: {
                                        "itemId":self.cartData[pIndex].courseId,
                                        "batchId":self.cartData[pIndex].batchId,
                                        "accessDays":self.cartData[pIndex].accessDays,
                                        "trainingTypeId":self.cartData[pIndex].trainingTypeId
                                    }
                        }
                )
                .success(function(data){
                    if( !data || !data.cart ) {
                        self.updateErrMsg = 'Some error occurred. Please try again.';
                        removeUpdateErrMsg();
                        self.isRequestPending = 0;
                        return;
                    }
                    self.cartData[pIndex] = null;
                    self.numOfItems = getNumberOfCartItems();
                    if(data.cart) {
                        updateCartData(data.cart);
                    }
//                    updateCartCookieVal();
                    self.isRequestPending = 0;

                    if(!self.numOfItems && typeof data.primary_label !== 'undefined' && data.primary_label.name) {
                        self.lastLabel = data.primary_label;
                        self.lastLabel.url = self.lastLabel.url.replace(/^\/+/,"");      //remove slashes from beginning of url
                    }
                    
                    var eventData = PaymentEventService.getItemAttributeByIndex(pIndex);
                    var commonData = WebTracking.eventReq.getDataFromUserParams(['sl_page_type', 'sl_product_price_symbol', 'sl_order_id', 'sl_currency']);
                    for(var key in commonData) {
                        eventData[key] = commonData[key];
                    }
                    WebTracking.eventReq.triggerEvent({event_id: "sl_pay_user_removes_item_from_cart", event_data: eventData});
                })
                .error(function(data){
                    console.log('error');
                    self.isRequestPending = 0;
                });
    };

    var sendUpdateRequest = function( pIndex, pDays, pFormSubmitFlag, pMainEvent,gaPassName,gaBundleName ) {
        self.isRequestPending = 1;
        $http.get(baseUrlAjax+"cart/update-cart-item",
                        {
                            params: {
                                        "itemId":self.cartData[pIndex].courseId,
                                        "batchId":self.cartData[pIndex].batchId,
                                        "trainingTypeId":self.cartData[pIndex].trainingTypeId,
                                        "accessDays":self.cartData[pIndex].accessDays,
                                        "newAccessDays":(pDays === null) ? self.cartData[pIndex].accessDays : pDays,
                                        "quantity":self.cartData[pIndex].qty,
                                        "email":self.email,
                                        "phone":self.phone,
                                        "personName":self.personName,
                                        "proceedFlag":pFormSubmitFlag
                                    }
                        }
                )
                .success(function(data){
                    var rv = updateCartData(data);
                    self.isRequestPending = 0;

                    if( !rv ) {
                        self.updateErrMsg = 'Some error occurred. Please try again.';
                        removeUpdateErrMsg();
                    }

                    if( pFormSubmitFlag === 1 && rv ) {
                        if( data.general.userAlreadySubscribed ) {
                            self.subsExistsData = data.general.userAlreadySubscribed;
                            $rootScope.toggleModalDisplay('js_sub_exists_pop','block',null);
                            preventDefaultEvent(pMainEvent);
                            $scope.gaCartControllerJs.gaFireEventsGeneric('subsCartPopup', self.subsExistsData.title);
                            if( self.subsExistsData.state == 'freeTrialExpired' ) {
                                $scope.gaCartControllerJs.gaFireEventsGeneric('subsCartFnlPayToProceedMsg', self.subsName);
                            }
                        } else {
                            setFormVars(gaPassName,gaBundleName);
                        }
                    }
                    else if( pFormSubmitFlag === 1 && !!pMainEvent && !rv ) {
                        preventDefaultEvent(pMainEvent);
                    }

                    if(data && data.status == 'failed' && data.msg) {
                        self.updateErrMsg = data.msg;
                    }
                })
                .error(function(data){
                    console.log('error');
                    self.isRequestPending = 0;
                    self.updateErrMsg = 'Some error occurred. Please try again.';
                    removeUpdateErrMsg();
                    if( pFormSubmitFlag === 1 && !!pMainEvent ) {
                        preventDefaultEvent(pMainEvent);
                    }
                });
    };

    var preventDefaultEvent = function(pMainEvent) {
        if( typeof pMainEvent.preventDefault !== 'undefined' ) {
                pMainEvent.preventDefault();
        }
        else {
            pMainEvent.returnValue  = false;
        }
    };

    var removeUpdateErrMsg = function() {
        $timeout(function(){
            self.updateErrMsg = 0;
        }, 5000);
    };

    var updateCartData = function(data, callRemoveCoupon) {
        if (typeof callRemoveCoupon == 'undefined') {
            callRemoveCoupon = true;
        }
        if(!data || ( typeof data.general == 'undefined' )) {
            return false;
        }

        //self.personName = (!data.general.person_name) ? self.personName : data.general.person_name;
        //self.email = (!data.general.email) ? self.email : data.general.email;
        //self.phone = (!data.general.phone) ? self.phone : data.general.phone;

                if (callRemoveCoupon && !data.general.coupon) {
                    self.removeCoupon();
                } else {
                    self.coupon = data.general.coupon;
                }

		self.serviceTax	= data.general.service_tax;
		self.grandTotal = data.general.grand_total;
                self.grandTotalActual = parseFloat(Math.round(data.general.grand_total_actual * 100) / 100).toFixed(2);
        //incrementPrice(removeCommas(self.serviceTax), removeCommas(data.general.service_tax), null, 'serviceTax', data.general.service_tax);
        //incrementPrice(removeCommas(self.grandTotal), removeCommas(data.general.grand_total), null, 'grandTotal', data.general.grand_total);

        if(typeof data[0] === 'undefined' || !data[0]) {
            return true;
        }

        for( var prop in self.cartData ) {
            if( !self.cartData[prop] ) {
                continue;
            }

            if( self.cartData[prop].courseId == data[0].course_id ) {
                if( data[0].hasOwnProperty('batch_id') && data[0].batch_id == self.cartData[prop].batchId ) {
                    self.cartData[prop].qty = data[0].qty;
					self.cartData[prop].unitPrice = data[0].display_unit_price;
					self.cartData[prop].totPrice = data[0].display_total_price;
                    //incrementPrice(removeCommas(self.cartData[prop].unitPrice), removeCommas(data[0].price), prop, 'unitPrice', data[0].price);
                    //incrementPrice(removeCommas(self.cartData[prop].totPrice), removeCommas(data[0].total_price), prop, 'totPrice', data[0].total_price);
                    break;
                }
                else if( data[0].hasOwnProperty('access_days') && self.cartData[prop].accessDays && self.cartData[prop].trainingTypeId == data[0].trainingType_id ) {
                    self.cartData[prop].qty = data[0].qty;
                    self.cartData[prop].accessDays = data[0].access_days;
					self.cartData[prop].unitPrice = data[0].display_unit_price;
					self.cartData[prop].totPrice = data[0].display_total_price;
                    //incrementPrice(removeCommas(self.cartData[prop].unitPrice), removeCommas(data[0].price), prop, 'unitPrice', data[0].price);
                    //incrementPrice(removeCommas(self.cartData[prop].totPrice), removeCommas(data[0].total_price), prop, 'totPrice', data[0].total_price);
                    break;
                }
            }
        }

//        updateCartCookieVal();

        self.offerCoupons = [];
        var offerLength = (data['general']['offers']).length;
        for(var i=0;i<offerLength;i++){
            var offerObj = data['general']['offers'][i];
            self.offerCoupons.push({'code':offerObj.code,'desc':offerObj.desc,'validTill':offerObj.validity,'savedAmount':offerObj.saveAmt});
        }
        self.couponDiscount = data['general']['totalDiscount'];
        return true;
    };

    this.toggleDetails = function( pIndex ) {
        if( self.cartData[pIndex].showDetailsFlag === 0 ) {
            self.cartData[pIndex].showDetailsFlag = 1;
            self.cartData[pIndex].detailsLabel = 'hide details';
        }
        else {
            self.cartData[pIndex].showDetailsFlag = 0;
            self.cartData[pIndex].detailsLabel = 'details';
        }
        var eventData = PaymentEventService.getItemAttributeByIndex(pIndex);
        var commonData = WebTracking.eventReq.getDataFromUserParams(['sl_page_type', 'sl_product_price_symbol', 'sl_order_id', 'sl_currency', 'sl_page_type']);
        for (var key in commonData) {
            eventData[key] = commonData[key];
        }
        WebTracking.eventReq.triggerEvent({event_id: "sl_pay_user_clicks_on_details_in_cart", event_data: eventData});
    };

    var incrementPrice = function(from, to, index, key, actualVal) {/*
        var obj = null;

        if( index !== null ) {
            obj = self.cartData[index];
        }
        else {
            obj = self;
        }

        obj[key] = removeCommas(obj[key]);

        if( from < to ) {
            $incr = 75;
        }
        else if( from > to ) {
            $incr = -75;
        }
        else {
            obj[key] = actualVal;
            return;
        }

        var interval = 50;
        var limit = 2000;
        var time_cnt = 0;

        var timerId = $interval(function(){
            time_cnt += interval;

            obj[key] += $incr;

            if( time_cnt >= limit || obj[key] === to || Math.abs(obj[key] - to) < Math.abs($incr) ) {
                obj[key] = actualVal;
                $interval.cancel(timerId);
            }
        }, interval);*/
    };

    var removeCommas = function(str) {
        if(!str || (typeof str !== "string") ) {
            return 0;
        }

        str = str.replace( /\,/g, '' );
        str = parseInt( str, 10 );

        return str;
    };

    this.validatePhone = function() {

        var regexph = /^\+\d{1,4}-?\d{5,10}$/;

        if( this.phone.match(regexph) == null ) {
            return false;
        }
        else {
            return true;
        }
    };

    var updateCartCookieVal = function() {
        var cart_count = 0;

        for( var prop in self.cartData ) {
            if( self.cartData[prop] ) {
                cart_count += parseInt(self.cartData[prop].qty);
            }
        }

        document.cookie = "cart_items="+cart_count+";path="+baseUrl;
    };


    var getNumberOfCartItems = function() {
        var item_count = 0;
        self.classroomExists = 0;

        for( var prop in self.cartData ) {
            if( self.cartData[prop] ) {
                item_count++;

                self.classroomExists = (self.cartData[prop]['batchId']) ? 1 : self.classroomExists;
            }
        }

        return item_count;
    };

    this.setPaymentConflictVisibility = function(pVal) {
        isPaymentConflictVisible = pVal;
    };

    this.isPaymentConflictVisible = function() {
        return isPaymentConflictVisible;
    };

    this.purgeAndAddToCart = function( pItemId, pBatchId, pAccessDays, pPaymentType ) {
        self.isRequestPending = 1;
        $http
            .get(baseUrlAjax+"cart/purge-cart-and-add-item",
            {
                params:{'itemId':pItemId, 'batchId':pBatchId, 'accessDays':pAccessDays, 'paymentType':pPaymentType, 'phone':self.phone, 'personName':self.personName, 'email':self.email}
            })
            .success(function(data){
                self.isRequestPending = 0;
                self.setPaymentConflictVisibility(false);
                if(data && data.status == 'success' && data.redirectUrl) {
                    window.location = data.redirectUrl;
                } else {
                    if(data && data.status == 'failure' && data.msg) {
                        self.updateErrMsg = data.msg;
                        removeUpdateErrMsg();
                    } else {
                        self.updateErrMsg = 'Some error occurred. Please try again.';
                        removeUpdateErrMsg();
                    }
                }
            })
            .error(function() {
                self.isRequestPending = 0;
                self.updateErrMsg = 'Some error occurred. Please try again.';
                removeUpdateErrMsg();
            });
    };

    //called from a separate controller scope
    this.openLiveChat = function( pUrl ) {
        _ss_track.api.live_chat_click();
    };

    this.init_liveChat = function() {
        setTimeout(function(){ //methinks required not...
                    var head= document.getElementsByTagName('head')[0];
                    var script= document.createElement('script');
                    script.type= 'text/javascript';
                    script.src= 'https://server.iad.liveperson.net/hc/24435859/?cmd=mTagRepstate&site=24435859&buttonID=13&divID=lpButDivID-1316506592981&bt=1&c=1';
                    script.async = true;
                    head.appendChild(script);
        }, 10000);
    };
    this.logoClick = function (frontendUrl) {
        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_event_time','sl_page_type','sl_user_type','sl_utm_src','sl_user_email_hash']);
        eventData['sl_destination_link'] = frontendUrl || '';
        eventData['sl_destination_page_type'] = 'home';
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_nav_user_clicks_on_simplilearn_logo",
            event_data: eventData,
        });
    };
    var gaClassForCartPage = function() {
        var ga = new gaEventsTracker();
        this.gaCouponTry = function(name) {
            ga.gaFireInteractiveEvents('cartpagecoupontry', name);
        }
        this.gaCouponSuccess = function(name) {
            ga.gaFireInteractiveEvents('cartpagecouponsuccess', name);
        }
        this.gaCouponFail = function(nameWithFailReason) {
            ga.gaFireInteractiveEvents('cartpagecouponfail', nameWithFailReason);
        }
        this.gaCartProceedToPay = function() {
            ga.gaFireOnCartProceedClick();
        }
        this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
            ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
        };

        this.gaCartLVC = function(cName){
           ga.gaFireInteractiveEvents('OnPorceedLvcPassClick', cName);
        }

        this.gaCartBundle = function (cName) {
            ga.gaFireInteractiveEvents('OnPorceedBundleClick', cName);
        }
    };
    $scope.gaCartControllerJs = new gaClassForCartPage();

    this.applyOffers = function(coupon,pEvent){
        self.applyCoupon(pEvent,0, coupon);
    }        
}); /*------------- End : CartController.js-----------*/ 

 /*------------- Begin : CategoryPageCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('CategoryPageCtrl', function(YoutubeApiService, $scope, $http, $rootScope, $location, $timeout) {
    this.isCrsVideoVisible = 0;
    this.videoState = '';

    /** start - intro video **/
    this.introVideo = null;
    this.introPlayer = null;
    var self = this;
    this.introVideoInit = function(type) {
        YoutubeApiService.onReady(function () {
            var player;
            var playerId = 'courseIntroVideo';
            var playButtonId = 'play-button-intro-main';

                var popupDom = document.querySelector('#courseIntroVideoPopup iframe');
                if(!popupDom) {
                    return ;
                }
                initIntroVideoPopupStatus = true;
                popupDom.setAttribute('id', 'courseIntroVideoPopupIframe');
                playerId = 'courseIntroVideoPopupIframe';
                playButtonId = 'play-button-intro-popup';

            player = new YT.Player(playerId, {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
            self.introVideo = document.getElementById(playerId);
            if(!self.introVideoOverlayStatus){
                self.playVideo(self.introVideo);
            }
            var videoState = null;
            function onPlayerStateChange(event) {
                self.introPlayer = event.target;
                // Reply button
                if(videoState == null) {
                    $timeout(function () {
                       var playButton = document.getElementById(playButtonId);
                       playButton.addEventListener("click", function() {
//                           console.log('Video play', self.introVideoOverlayStatus);
                           self.introAnnotation = true;
                           self.playVideo(self.introVideo);
                           self.hideIntrovideoOverlay();
                       });
                   });
                }
                videoState = event;

                // On complete
                $timeout(function () {
                    // console.log(videoState.data);
                    if (videoState.data == YT.PlayerState.ENDED) {
                        //console.log("End");
                        self.stopVideo();
                        self.showIntrovideoOverlay(self.introVideo);
                    }
                }, 100);
            }
        });
    }

    $scope.breadcrumEvent = function($event,productType,url,name,id) {
        var gotoLink = ''
        if(typeof $event != 'undefined')
            gotoLink = $event.target.parentNode.href;
        var ga = new gaEventsTracker();
        ga.gaFireInteractiveEvents('breadcrumclick', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
        breadcrumEvent(productType,gotoLink,name,id);
    }

    this.initIntroVideo = function() {
        self.introVideoInit('main');
    }

    this.initIntroVideoPopup = function() {
        self.introVideoInit('popup');
    }

    this.showCoursePreview = function(type) {
        type = type || 'base';
        $scope.gaMCategoryCtrlJs.gaFireGeneral('CoursePreviewIntrovideoClick', type);

        //self.hideIntrovideoOverlay();
        self.hideCatVideo();
        //self.pauseVideo(self.introVideo);

        $timeout(function() {
            var button = document.getElementsByClassName('course-preview-button')[0];
            if(button) {
                button.click();
            }
        }, 0);
    }

    this.stopVideo = function(domObj) {
        //console.log('stopVideo')
        if(self.introPlayer && self.introPlayer.stopVideo) {
            self.introPlayer.stopVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
        }
    }

    this.pauseVideo = function(domObj) {
        //console.log('pauseVideo')
        if(self.introPlayer && self.introPlayer.pauseVideo) {
            self.introPlayer.pauseVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
        }
    }

    this.playVideo = function(domObj) {
        //console.log('playVideo')
        if(self.introPlayer && self.introPlayer.playVideo) {
            self.introPlayer.playVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
        }
    }

    this.introVideoOverlayStatus = false;
    this.showIntrovideoOverlay = function() {
        this.introVideoOverlayStatus = true;
        document.querySelector('#courseIntroVideoMobOverlay').style.display = 'block';
    }

    this.hideIntrovideoOverlay = function() {
        this.introVideoOverlayStatus = false;
        document.querySelector('#courseIntroVideoMobOverlay').style.display = 'none';
    }
    /** end - intro video **/
    this.initCatName = function(catName) {
        $scope.catName = catName;
        webengage.onReady(function (data) {
            WebTracking.eventReq.triggerEvent({
                event_id : "sl_eng_product_page_viewed",
                common : "product"
            });
            if (getParameterByName('referrer') == "corporate-training") {
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_product_category', 'sl_product_category_id', 'sl_product_type']);
                eventData.sl_page_type = 'corp train page';
                WebTracking.eventReq.triggerEvent({ 
                    event_id : "sl_corptrain_eng_user_clicks_on_category", 
                    event_data: eventData
                });
            }
        });
    };

    this.showCatVideo = function() {
        this.isCrsVideoVisible = 1;
        this.videoState = '';
        self.initIntroVideo();
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_video_click', $scope.catName);
    };

    $scope.videoClosedOnce = false;
    this.hideCatVideo = function() {
        this.isCrsVideoVisible = 0;
        this.videoState = 'stop';
        if(!$scope.videoClosedOnce){
            $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_modal_closed', $scope.catName);
            $scope.videoClosedOnce = true;
        }
    };

    this.popCourseClick = function(url,cId,cName,cImage) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('categorycourseclick',  user_params.user_id + ' || ' + document.URL + ' || ' + url + ' || Popular');
    };

    this.allCourseClick = function() {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('viewmorecoursesclick', user_params.user_id + ' || ' + document.URL);
    };

    this.catPartnerClick = function(partnerName) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_partner_click', user_params.user_id + ' || ' + document.URL);
    };

    this.catAdvisorSocialClick = function($event) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_advisor_social_click', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
    };

    this.catAdvisorLeftClick = function() {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_advisor_scroll_left', $scope.catName);
    };

    this.catAdvisorRightClick = function() {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_advisor_scroll_right', $scope.catName);
    };

    this.catAlumniSocialClick = function(alumniName) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_alumni_social_click',  alumniName + ' || ' + $scope.catName);
    };

    this.courseCardClick = function(url,cId,cName,cImage,cRating) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('categorycourseclick',  user_params.user_id + ' || ' + document.URL + ' || ' + url + ' || Normal');
    };

    this.mastersCardClick = function(mastersPName,mpId,mpName,mpImage,mpRating) {
        $scope.gaMCategoryCtrlJs.gaFireGeneral('Category_master_program_click',  mastersPName + ' || ' + $scope.catName);
    };

    this.setHash = function(path) {
        $location.path(path);
        $scope.gaMCategoryCtrlJs.gaFireGeneral('coursestickyheader',  path);

    }
    this.scrollToHash = function() {
        if( !!$location.path() ) {
            var path = $location.path();
            var hash = path.substr(path.indexOf('/')+1);
            $timeout(function() {
                var button = document.getElementsByClassName(hash + '-button')[0];
                if(button) {
                    button.click();
                }
            }, 300);
        }
    };
    var gaClassForCategory = function() {
        var ga = new gaEventsTracker();
        this.gaFireGeneral = function(cat, label) {
            if (typeof label !== 'undefined' && label) {
                ga.gaFireInteractiveEvents(cat, label);
            } else {
                ga.gaFireInteractiveEvents(cat);
            }
        }
    }

    $scope.gaMCategoryCtrlJs = new gaClassForCategory();
});

 /*------------- End : CategoryPageCtrl.js-----------*/ 

 /*------------- Begin : CloudSearchCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('CloudSearchCtrl', function ($scope, $http, $rootScope, $sce, $window,$timeout,$cookies) {
            var self = this;
            self.helpers = new helpers();
            $scope.displaySpinner = {'display': 'block'};
            var keyword_search_query = '';
            $scope.categoryFilterData = '';
            $scope.queryParsers = ['simple', 'lucene'];
            $scope.bQueryString = 'business';
            $scope.tQueryString = 'technology';
            $scope.isClearFilters = 0;
            $scope.defaultQueryParser = $scope.queryParsers[0];
            $scope.operatorsStringForSimpleSearch = '%2C%22operators%22%3A%5B%22whitespace%22%5D';
            $scope.operatorsString = $scope.operatorsStringForSimpleSearch;
            $scope.defaultSearchString = '*';
            $scope.includeHighlights = 1;
            $scope.fieldsString = '%22fields%22%3A%5B%22title%5E4%22%2C%22tags%5E3%22%2C%22locations%5E2%22%2C%22content%5E1%22%5D';
            $scope.bTFieldsString = '%22fields%22%3A%5B%22tags%5E2%22%5D';
            $scope.filterClick = 1;
            $scope.catShow = 0;
            $scope.result_count = 0;
            $scope.itemFilterData = '';
            $scope.itemShow = 0;
            $scope.moreResources = '';
            $scope.courseListData = new Array();
            $scope.triggerFilterLogic = 0;
            $scope.rstTot = 0;
            $scope.rstTotDisplay = 0;
            $scope.queryTag = '';
            $scope.query = '';
            $scope.searchResultsTitleDisplay = false;
            $scope.queryDisplay = '';
            $scope.currentCallBack = false;
            $scope.selectedAtleastOne = false;
            $scope.pageC = 1;
            $scope.querySearch='';
            $scope.promiseForAjax = 0;
            $scope.loading = false;
            $scope.showBadge = false;
            $scope.checkedImage = 'selected_img';
            $scope.uncheckedImage = 'default_img';
            $scope.secondaryItemTypes = [];
            $scope.sortOrder = 'simple_order';
            this.searchType=false;
            $scope.data='';
            $scope.result='';
            $scope.bTSortOrder = 'business_technology_results_order';
            $scope.displayFilter = 0;
            $scope.eventCount = false;
            if ($rootScope.mobWidthFlag || $rootScope.hybridWidthFlag) {
                $scope.mobileView = false;
                $scope.filtersDisplay = false;
            } else {
                $scope.mobileView = true;
                $scope.filtersDisplay = true;
            }
            $scope.eventData = {};
            $scope.searchQueryString = '';
            $scope.toggleFiltersMobile = function () {
                $scope.mobileView = ($scope.mobileView === false) ? true : false;
                if ($rootScope.mobWidthFlag || $rootScope.hybridWidthFlag) {
                    $scope.filtersDisplay = $scope.mobileView;
                }
            };

            var w = angular.element($window);
            w.bind('resize', function () {
                $rootScope.setSizeFlags();
            })
//            $rootScope.$watch('mobWidthFlag', function (n, o) {
//                if ($rootScope.mobWidthFlag) {
//                    $scope.mobileView = false;
//                    $scope.filtersDisplay = false;
//                } else {
//                    $scope.mobileView = true;
//                    $scope.filtersDisplay = true;
//                }
//            })
            $scope.cloudSearchOnload = function () {
                if ($scope.filterClick) {
                    $scope.pageC = 1;
                }
                $scope.loadButton = 0;
                $scope.selectedAtleastOne = false;
                $scope.errMsg = '';
                if ($scope.pageC == 1) {
                    $scope.displaySpinner = {'display': 'block'};
                }
                $scope.curr_url = window.location.href;
                $scope.suggestedSearch = '';
                $scope.querySearch = getParameterByName('tag') ||'';
                $scope.querySearch= encodeURIComponent($scope.querySearch);
                if (!$scope.query) {
                    $scope.query = getParameterByName('tag');
                }
                if($scope.query == null) {
                    $scope.query = '';
                }
                $scope.query = $scope.query.trim();
                if($scope.query == '' ) {
                    $scope.query = 'all';
                }
                $scope.searchResultsTitleDisplay = true;
                $scope.queryDisplay = $scope.query;

                if (typeof $scope.query == 'undefined' || $scope.query == '') {
                    $scope.query = 'all';
                    $scope.searchResultsTitleDisplay = false;
                }
                if ($scope.query == 'all') {
                    $scope.query = $scope.defaultSearchString;
                    $scope.defaultQueryParser = $scope.queryParsers[1];
                    $scope.operatorsString = '';
                    $scope.includeHighlights = 0;
                }

                if ($scope.query == $scope.tQueryString || $scope.query == $scope.bQueryString) {
                    $scope.includeHighlights = 0;
                    $scope.fieldsString = $scope.bTFieldsString;
                }

                if ($scope.query == $scope.defaultSearchString || $scope.query == $scope.tQueryString || $scope.query == $scope.bQueryString) {
                    $scope.queryDisplay = '';
                }

                if($scope.query == $scope.tQueryString || $scope.query == $scope.bQueryString) {
                    $scope.sortOrder = $scope.bTSortOrder;
                }

                $scope.showHideBadge();
                $scope.resCntSt = 0;
                $scope.rstTot = 0;
                $scope.rstTotDisplay = 0;
                $scope.result_count = 0;
                $scope.courseTag = 0;
                $scope.conditionForSearch = user_params.conditionForSearch;
                $scope.resultPerPage = parseInt(user_params.limitOfSearch);
                $scope.osl = '';
                $scope.ilt = '';
                $scope.finalAjax = false;
                var from = 0; //type of call to aws. 0 to execut only seach query. 1,2,3 to execute search, filter

                if ($scope.curr_url.indexOf('#/')) {
                    $scope.curr_url = $scope.curr_url.replace('#/', '');
                }

                if ($scope.pageC > 1) {
                    var page = "&start=" + ($scope.pageC - 1) * $scope.resultPerPage;
                } else {
                    var page = '';
                }
                var search_tags = ['item_type', 'star_ratings', 'image_url', 'no_of_learners', 'title', 'level', 'page_url', 'no_of_views', 'author', 'additional_details'];
                var search_options = "&q.parser=" + $scope.defaultQueryParser + "&q.options=%7B%22defaultOperator%22%3A%22" + $scope.conditionForSearch + "%22%2C" + $scope.fieldsString + $scope.operatorsString + "%7D";
                var facet_tags = "&facet.category={}&facet.item_type={}&size=" + $scope.resultPerPage + "&sort=" + $scope.sortOrder+ "+desc&";
                var highlights = "&highlight.content=%7B%22max_phrases%22%3A4%2C%22format%22%3A%22text%22%2C%22pre_tag%22%3A%22%3Cb%3E%22%2C%22post_tag%22%3A%22%3C%2Fb%3E%22%7D&highlight.locations=%7B%22max_phrases%22%3A3%2C%22format%22%3A%22text%22%2C%22pre_tag%22%3A%22%3Cb%3E%22%2C%22post_tag%22%3A%22%3C%2Fb%3E%22%7D";
                var search_query = encodeURIComponent($scope.query);
                

                keyword_search_query = search_options + facet_tags + "&return=" + search_tags.join() + highlights;
                if ($scope.queryTag !== encodeURIComponent($scope.query)) {
                    if ($scope.curr_url.indexOf('&') < 0) {
                        from = 1;
                        $scope.finalAjax = true;
                    }
                    categoryFacet(keyword_search_query, 1, search_query, true);
                    $scope.queryTag = encodeURIComponent($scope.query);
                }
                if (from == 0) {
                    var q_category = getParameterByName('category');
                    var q_item_type = getParameterByName('item_type');
                    var q_i = 1;
                    var c_cat, c_item, cloud_q;
                    c_cat = c_item = cloud_q = '';
                    if (q_category) {
                        c_cat = splitConcat('category', q_category);
                        c_cat = c_cat != 'undefined' ? c_cat : "";
                        q_i = q_i + 1;
                    }
                    if (q_item_type) {
                        c_item = splitConcat('item_type', q_item_type);
                        c_item = c_item != 'undefined' ? c_item : '';
                        q_i = q_i + 1;
                    }
                    var cloud_query = search_options;
                    if (q_i > 1) {
                        cloud_q = "(and+" + c_cat + c_item + ")";
                    } else if (q_i == 1) {
                        cloud_q = c_cat + c_item;
                    }
                    cloud_q = cloud_q != '' ? "&fq=" + (cloud_q.replace(/ /g, "+")) : '';
                    cloud_query = cloud_query + cloud_q;
                    cloud_query = cloud_query + "&return=" + search_tags.join();
                    cloud_query = cloud_query + facet_tags + page + highlights;

                    var refreshFeed = false;
                    if ($scope.filterClick) {
                        refreshFeed = true;
                    }
                    var interval = setInterval(function () {
                        if ($scope.promiseForAjax == 1) {
                            $scope.finalAjax = true;
                            if ($scope.suggestedSearch) {
                                search_query = $scope.suggestedSearch;
                            }
                            categoryFacet(cloud_query, 3, search_query, refreshFeed);
                            clearInterval(interval);
                        }
                    }, 50);
                }
            };

            $scope.showHideBadge = function() {
                var itemTypes = getParameterByName('item_type');
                if(typeof itemTypes == "undefined") {
                    $scope.showBadge = true;
                } else {
                    var totalSelectedItems = itemTypes.split(',');
                    if(totalSelectedItems.length > 1) {
                        $scope.showBadge = true;
                    } else {
                        $scope.showBadge = false;
                    }
                }
            }

            $scope.loadMore = function () {
                $scope.pageC++;
                $scope.loading = true;
                $scope.cloudSearchOnload();
                $scope.searchPageGa.gaEvent('searchloadmore', user_params.user_id + ' || ' + document.URL + ' || ' + $scope.pageC);
            }
            function splitConcat(facet, facet_type) {
                if (facet_type) {
                    facet_type = facet_type.split(',');

                    if (facet_type.length > 1) {
                        var concat = '(or ';
                        for (var i = 0; i < facet_type.length; i++) {
                            concat = concat + " " + facet + ":'" + facet_type[i] + "'%20";
                        }
                        return concat + ')';
                    } else {
                        return facet + ":'" + facet_type[0] + "'";
                    }
                }
            }
            function getParameterByName(name) {
                if ($scope.curr_url.indexOf(name) > 0) {
                    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                            results = regex.exec($scope.curr_url);
                    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                }
            }

            formatResponse = function (response, from, refreshFeed) {
                if (from == 1) {
                    var category = formatFacetData('category', response['facets']['category']['buckets']);
                    var item_type = formatFacetData('item_type', response['facets']['item_type']['buckets']);
                    var resCount = 0 ;
                    var proCount = 0;
                    if (response['facets']['item_type']['buckets']) {
                        for (i = 0; i < response['facets']['item_type']['buckets'].length; i++) {
                            if (response['facets']['item_type']['buckets'][i] && response['facets']['item_type']['buckets'][i]['value']) {
                                if (response['facets']['item_type']['buckets'][i]['value'] == 'webinar' || response['facets']['item_type']['buckets'][i]['value'] == 'article' || response['facets']['item_type']['buckets'][i]['value'] == 'ebook' || response['facets']['item_type']['buckets'][i]['value'] == 'video') {
                                    resCount = resCount + response['facets']['item_type']['buckets'][i]['count'];
                                } else if (response['facets']['item_type']['buckets'][i]['value'] == 'course' || response['facets']['item_type']['buckets'][i]['value'] == 'bundle') {
                                    proCount = proCount + response['facets']['item_type']['buckets'][i]['count'];
                                }
                            }
                        }
                    }
                    $scope.eventData = {
                        'sl_search_term': getParameterByName('tag') ||'',
                        'sl_number_of_resources_shown':Number(resCount),
                        'sl_number_of_products_shown': Number(proCount),
                    }
                }
                if (from == 3 || from == 1) {
                    $scope.resCntSt = response['hits']['start'] + 1;

                    $scope.rstTot = response['hits']['found'];
                    if ($scope.rstTot == 0) {
                        $scope.resCntSt = 0;
                    }
                    $scope.result_count = response['hits']['start'] + response['hits']['hit'].length;

                    if ($scope.result_count < $scope.rstTot) {
                        if ($scope.finalAjax) {
                            $scope.loadButton = 1;
                        }
                    } else {
                        $scope.loadButton = 0;
                    }

                    if ($scope.finalAjax) {
                        $scope.displaySpinner = {'display': 'none'};
                        $scope.prepareCourseList(response['hits']['hit'], refreshFeed);
                        $scope.rstTotDisplay = $scope.rstTot;
                        if (!$scope.eventCount) {
                            var searchResutls = [];
                            if (response['hits']['hit']) {
                                for (i = 0; i < response['hits']['hit'].length; i++) {
                                    var id = (response['hits']['hit'][i].id) ? response['hits']['hit'][i].id : '';
                                    var name = response['hits']['hit'][i]['fields'].title || '';
                                    var pId = 0;
                                    var productType = '';
                                    if (id.indexOf("course") !== -1) {
                                        pId = id.replace("course-", '');
                                        productType = 'course';
                                    } else if (id.indexOf("bundle") !== -1) {
                                        pId = id.replace("bundle-b", '');
                                        productType = 'bundle';
                                    } else {
                                        pId = id.substring(id.indexOf("-") + 1)
                                        productType = id.substr(0, id.indexOf('-'));
                                    }
                                    var productData = {};
                                    if (id.indexOf("course") !== -1 || id.indexOf("bundle") !== -1) {
                                        productData = {
                                            'sl_product_name': name || '',
                                            'sl_product_id': parseInt(pId) || 0,
                                            'sl_product_type': productType || '',
                                        };
                                    } else {
                                        productData = {
                                            'sl_frs_resource_name': name || '',
                                            'sl_frs_resource_id': pId || '',
                                            'sl_frs_resource_type': productType || '',
                                        };
                                    }
                                    searchResutls[i] = productData;
                                    if (i == 4) {
                                        break;
                                    }
                                }
                            }
                            $scope.eventData['sl_search_top_search_results'] = (Object.keys(searchResutls).length > 0) ? searchResutls : '';
                            $scope.eventData['sl_number_of_search_results'] = Number($scope.rstTotDisplay);
                            $scope.eventData['sl_search_has_no_result']='';
                            if(Number($scope.rstTotDisplay)==0){
                               $scope.eventData['sl_search_has_no_result']=true;
                            }
                            else{
                                $scope.eventData['sl_search_has_no_result']=false;
                            }
                            webengage.onReady(function (data) {

                                WebTracking.eventReq.triggerEvent({
                                    event_id: "sl_search_user_views_search_result",
                                    event_data: $scope.eventData,
                                    common: "product"
                                });
                            });
                            $scope.eventCount = true;
                        }
                    }

                    if(response['hits'].found){
                        $scope.displayFilter = 1;
                    }else if (response['hits']['hit'].length == 0) {
                        $scope.displayFilter = $scope.displayFilter==1?1:0;
                        if ($scope.finalAjax) {
                            $scope.errMsg = "Your search did not match any content.";
                        }
                    }

                }

                if (typeof category !== 'undefined' && category != '') {
                    $scope.catShow = 1;
                    $scope.categoryFilterData = category;
                }
                if (typeof item_type !== 'undefined' && item_type[0] != '') {
                    $scope.itemShow = 1;
                        $scope.itemFilterData = item_type[0];
                }
                if (typeof item_type !== 'undefined' && item_type[1] != '') {
                        $scope.moreResources = item_type[1];
                }

                if (!$scope.triggerFilterLogic) {
                    setTimeout(function () {
                        facet_aligner();
                    }, 1000);
                    $scope.triggerFilterLogic = 1;
                }
                checkIfAnyFacetSelected();
                $scope.search_image_lazyload();
            };

            function checkIfAnyFacetSelected() {
                var facets = document.getElementsByClassName('facets');
                for (var i = 0; i < facets.length; i++) {
                    if (angular.element(facets[i]).hasClass($scope.checkedImage)) {
                        $scope.selectedAtleastOne = true;
                        break;
                    }
                }
            }

            searchEnter = function (event, search_bar_counter) {
                var x = event.which || event.keyCode || window.event;
                if (x == 13) {
                    searchRes(search_bar_counter);
                }
            }
            searchRes = function (search_bar_counter) {
                var search_page_text = document.getElementsByClassName('search_page_text_cls');              
                if(typeof search_page_text[search_bar_counter] == 'undefined') {
                    search_bar_counter = 0;
                }
                if (search_page_text[search_bar_counter].value.trim() == '' || search_page_text[search_bar_counter].value.trim() == null) {
                    search_page_text[search_bar_counter].focus();
                    return false;
                } else {
                    $scope.searchPageGa.searchClick('Search_tab_header', user_params.user_id + ' || ' + document.URL + ' || ' + search_page_text[search_bar_counter].value);
                    document.getElementsByClassName("search_page_form_cls")[search_bar_counter].action = $scope.formUrl;               
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_nav_user_completes_search",
                        event_data : {
                           'sl_search_term' : search_page_text[search_bar_counter].value || '',
                            'sl_search_type':'search page',
                        },
                        common: "product",
                    });
                }
                document.getElementsByClassName('search_page_form_cls')[search_bar_counter].submit();
                
            }

            formatFacetData = function (facet, data) {
                if (facet == 'item_type') {
                    var result = '';
                    var cR = '';
                    var bR = '';
                    var moreRes = '';
                    var resourceAll = new Array();
                    var resourceCount = 0;

                    for (var i in data) {
                        if(data[i].value != 'course' && data[i].value != 'bundle') {
                            $scope.secondaryItemTypes.push(data[i].value);
                        }
                    }

                    var secondaryFacetAllLength = $scope.secondaryItemTypes.length;
                    var secondaryFacetTempLength = 0;

                    for (var i in data) {
                        var checkbox_check = getCheckbox(data[i].value);
                        if($scope.secondaryItemTypes.indexOf(data[i].value) >= 0 && checkbox_check == $scope.checkedImage) {
                            secondaryFacetTempLength += 1;
                        }
                    }

                    var checkAll = 0;
                    if(secondaryFacetTempLength == secondaryFacetAllLength) {
                        checkAll = 1;
                    }

                    for (var i in data) {
                        var fcVal = encodeURI(encodeURIComponent(data[i].value));
                        var check = '';
                        var checkbox_check = getCheckbox(fcVal);
                        if(checkbox_check == $scope.checkedImage){
                           check = 'checked';
                        }
                        if (data[i].value == 'course') {
                            //cR = "<li><a class='remember_me " + checkbox_check + "  facets' fc_type='learning_options' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox href='#' >" + ucwords(data[i].value) + "</a> (" + data[i].count + ")</li>";
                            cR = "<li><span class='form-checkbox label-wraps'><label><input class='facets " + checkbox_check + "'  custom-checkbox fc_type='learning_options' fc_name='" + facet + "' fc_val='" + fcVal + "' type='checkbox' "+check+"><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>" + ucwords(data[i].value) + "</span></label></span> <span ng-click='$event.stopPropagation()' class='label-counts caption'>(" + data[i].count + ")</span></li>";
                        } else if (data[i].value == 'bundle') {
                            //bR = "<li><a class='remember_me " + checkbox_check + "  facets' fc_type='learning_options' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox href='#' >Masters Program</a> (" + data[i].count + ")</li>";
                            bR = "<li><span class='form-checkbox label-wraps'><label><input  class='facets " + checkbox_check + "' fc_type='learning_options' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox type='checkbox' "+check+" ><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>Master's Program</span></label></span> <span class='label-counts caption'  ng-click='$event.stopPropagation()' >(" + data[i].count + ")</span></li>";
                        } else {
                            resourceCount = resourceCount + data[i].count;
                            if(checkAll) {
                                checkbox_check=$scope.uncheckedImage;
                                check = '';
                            }
                            resourceAll.push(fcVal);
                            //moreRes = moreRes + "<li><a class='remember_me " + checkbox_check + "  facets' fc_type='more_resources' fc_name='" + facet + "' fc_val='" + data[i].value.replace(/ /g, "+") + "' custom-checkbox href='#' >" + ucwords(data[i].value) + "</a> (" + data[i].count + ")</li>";
                            moreRes = moreRes + "<li><span class='form-checkbox label-wraps'><label><input  class='label-txt "+ checkbox_check + "  facets' onclick='resourcefilter()' fc_type='more_resources' fc_name='" + facet + "' fc_val='" + data[i].value.replace(/ /g, "+") + "' custom-checkbox type='checkbox' "+check+" ><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>" + ucwords(data[i].value) + "</span></label></span> <span class='label-counts caption' ng-click='$event.stopPropagation()' >(" + data[i].count + ")</span></li>";
                        }
                    }

                    if (resourceAll.length > 0) {
                        //moreRes = "<li><a class='remember_me " + ((checkAll)?$scope.checkedImage:$scope.uncheckedImage) + " facets' fc_type='more_resources' fc_name='item_type' fc_val='" + resourceAll.join(',') + "' custom-checkbox href='#' >All</a> (" + resourceCount + ")</li>" + moreRes;
                        moreRes = "<li><span class='form-checkbox label-wraps'><label><input  class='" + ((checkAll)?$scope.checkedImage:$scope.uncheckedImage) + " facets' onclick='resourcefilter()' fc_type='more_resources' fc_name='item_type' fc_val='" + resourceAll.join(',') + "' custom-checkbox  type='checkbox' "+((checkAll)?'checked':'')+" ><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>All</span></label></span> <span class='label-counts caption' ng-click='$event.stopPropagation()' >(" + resourceCount + ")</span></li>" + moreRes;
                    }
                    return [cR + bR, moreRes];
                } else if (typeof data !== 'undefined') {
                    var result = '';
                    for (i in data) {
                        var check = '';
                        var fcVal = encodeURI(encodeURIComponent(data[i].value));
                        var checkbox_check = getCheckbox(fcVal);
                        if(checkbox_check == $scope.checkedImage){
                           check = 'checked';
                        }
                        if (facet == 'category') {
                            //result = result + "<li><a class='remember_me " + checkbox_check + "  facets' fc_type='category' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox href='#' >" + data[i].value + "</a> (" + data[i].count + ")</li>";
                            result = result + "<li><span class='form-checkbox label-wraps'><label><input class='" + checkbox_check + "  facets' onclick='catfilter()' fc_type='category' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox  type='checkbox' "+check+"><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>" + data[i].value + "</span></label></span> <span class='label-counts caption' ng-click='$event.stopPropagation()' >(" + data[i].count + ")</span></li>";
                        } else {
                            //result = result + "<li><a class='remember_me " + checkbox_check + "  facets' fc_type='other' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox href='#' >" + ucwords(data[i].value) + "</a> (" + data[i].count + ")</li>";
                            result = result + "<li><span class='form-checkbox label-wraps'><label><input class='" + checkbox_check + "  facets'  fc_type='other' fc_name='" + facet + "' fc_val='" + fcVal + "' custom-checkbox type='checkbox' "+check+"><span class='checkbox-material'><span class='check'></span></span><span class='label-txt'>" + ucwords(data[i].value) + "</span></label></span> <span class='label-counts caption' ng-click='$event.stopPropagation()' >(" + data[i].count + ")</span></li>";
                        }
                    }
                    return result;
                }
                return false;
            }
            getCheckbox = function (item) {
                curr_url = window.location.href;
                if (curr_url.indexOf('#/') > 0) {
                    curr_url = curr_url.split('#/')
                    if (curr_url[1].indexOf(item) > 0) {
                        return $scope.checkedImage;
                    }
                } else {
                    if (curr_url.indexOf(item) > 0) {
                        return $scope.checkedImage;
                    }
                }
                return $scope.uncheckedImage;
            }

            $scope.prepareCourseList = function (data, refreshFeed) {
                if (typeof data !== 'undefined') {
                    if (refreshFeed) {
                        $scope.courseListData = new Array();
                        $scope.filterClick = 0;
                    }
                    for (var i in data) {
                        var highlights = '';
                        data[i]['fields']['title'] = data[i]['fields']['title'].replace(/<\/?[^>]+(>|$)/g, "");
                        if(!$scope.includeHighlights) {
                            data[i]['highlights']['content'] = data[i]['highlights']['content'].replace(/<\/?[^>]+(>|$)/g, "");
                        }
                        highlights = $scope.contentMaker(data[i]['highlights']['content']) + "...";
//                        if (data[i]['highlights']['content'].indexOf('<b>') >= 0) {
//                            highlights = highlights + data[i]['highlights']['content'].substring(0, 150) + "...";
//                        }
                        if (data[i]['highlights']['locations'].indexOf('<b>') >= 0) {
                            var val = data[i]['highlights']['locations'].match(/<b>(.*?)<\/b>/g);
                            var city_list = ".. available in " + val.join() + "..";
                            if (highlights) {
                                highlights = highlights.substring(0, (highlights.length - city_list.length));
                            }
                            highlights = highlights + city_list;
                        }
                        if (highlights) {
                            data[i]['fields']['highlights'] = highlights;
                        }
                        data[i]['fields']['plcholder_image_url'] = user_params.defaultPlaceholderImage;
                        data[i]['fields']['counter'] = i;
                        $scope.courseListData.push(data[i]['fields']);
                    }
                    $scope.loading = false;
                }
            }

            $scope.contentMaker = function(content) {
                var totalLength = content.length;

                var returnString = '';
                for(var i=0; i< totalLength; i+=150) {
                    var tempString = content.substring(i, (i+150));
                    if(tempString.indexOf('<b>') >= 0 && tempString.indexOf('</b>') >= 0) {
                        var aString = tempString;
                        var tempI = i;
                        var start = 0;
                        var end = 0;
                        while(1) {
                            if(tempI == 0) {
                                break;
                            }
                            if(content[tempI] == ' ') {
                                start = tempI + 1;
                                break;
                            }
                            tempI--;
                        }
                        var tempI = (i+150);
                        while(1) {
                            if(tempI >= content.length) {
                                break;
                            }
                            if(content[tempI] == ' ') {
                                end = tempI - 1;
                                break;
                            }
                            tempI++;
                        }
                        returnString = content.substring(start, end);
                        break;
                    }
                }
                if(returnString == '') {
                    returnString = content.substring(0,150);
                }
                return returnString;
            }
            newUrl = function (new_url) {
                if (!new_url) {
                    new_url = '';
                }
                if (typeof (history.pushState) != "undefined") {
                    window.history.pushState(null, null, "#" + new_url);
                } else {
                    window.location.hash = new_url;
                }
                $scope.cloudSearchOnload();
            };

            clearFilters = function () {
                $scope.categoryFilterData = '';
                $scope.itemFilterData = '';
                $scope.moreResources = '';
                $scope.queryTag = '';
                $scope.isClearFilters = 1;
                $scope.searchPageGa.gaEvent('searchclearfilters', user_params.user_id + ' || ' + document.URL);

                newUrl();
            }

            catfilter = function(){
                $scope.searchPageGa.gaEvent('searchcatfilter', user_params.user_id + ' || ' + document.URL);
            }

            resourcefilter = function(){
                $scope.searchPageGa.gaEvent('searchresourcefilter', user_params.user_id + ' || ' + document.URL);
            }

            categoryFacet = function (query, type, search_query, refreshFeed) {
                var urlObj = self.helpers.makeValidApiUrl('cloudSearch');
                var cached = urlObj.cached;
                if($scope.isClearFilters) {
                    $scope.isClearFilters = 0;
                    cached = false;
                }
                $scope.searchQueryString = search_query;
                //removing caching
                var noCache = 0;
                $http.get(urlObj.url,
                {   params: {query: query, param: search_query, loc: typeof $cookies.locatori9 !== "undefined" && typeof JSON.parse($cookies.locatori9).country_name !== "undefoned" ? JSON.parse($cookies.locatori9).country_name : "","no-cache":noCache},
                    cache: cached
		})
                        .success(function (data, status) {
                            if (typeof data !== 'undefined' && data != 1) {
                                var result = angular.fromJson(data);
                                if (result.suggested) {
                                    $scope.suggestedSearch = result.suggested.replace(/%20/g, " ");
                                    $scope.query = result.suggested.replace(/%20/g, " ");
                                    $scope.queryTag = encodeURIComponent($scope.query);
                                }
                                formatResponse(angular.fromJson(result['result']), type, refreshFeed);
                                if (type == 1) {
                                    $scope.promiseForAjax = 1;
                                }
                                if (!printGaInConsole) {
                                    console.clear();
                                }
                            }
                        })
                        .error(function (data, status) {
                            categoryFacet(query, type);
                        });
            };

            $scope.clickHeaderSearchButton = function() {
                angular.element(document.getElementsByClassName('nav_search_flag')).on('click', function () {
                    if (window.pageYOffset > 110) {
                        var searchBar = angular.element(document.getElementsByClassName('sticky-search'));
                        var promise = 0;
                        if (searchBar[0].style.display == "none") {
                            promise = 1;
                        } else {
                            promise = 0
                        }
                        if (promise == 1) {
                            promise = 0;
                            var counter = -50;
                            searchBar[0].style.display = "block";
                            var interVal = setInterval(
                                    function () {
                                        counter += 2;
                                        searchBar[0].style.top = counter + "px";
                                        if (counter >= -5) {
                                            clearInterval(interVal);
                                        }
                                    }, 1);
                        }
                    }

                })
            }

            $scope.clickHeaderSearchButton();

            facet_aligner = function () {
                angular.element(document.getElementsByClassName('category-listing')).on('click', function () {
                    $scope.searchPageGa.gaFOFC(this);
                    $scope.toggleFiltersMobile();
                    $scope.filterClick = 1;
                    $timeout(function(){
                        urlCreator();
                    });
                });
            }

            function onlyUnique(value, index, self) {
                return self.indexOf(value) === index;
            }
            urlCreator = function (page) {
                var facets = document.getElementsByClassName('facets');
                var category = '';
                var item_type = new Array();
                for (var i = 0; i < facets.length; i++) {
                    var fact_type = facets[i].getAttribute('fc_name');
                    var fact_val = facets[i].getAttribute('fc_val');

                    if (angular.element(facets[i]).hasClass($scope.checkedImage) && typeof fact_type !== 'undefined') {
                        if (fact_type === 'category') {
                            category = category + fact_val + ','
                        } else if (fact_type === 'item_type') {
                            item_type.push(fact_val)
                        }
                    }
                }

                var new_url = '';
                if (category != '') {
                    new_url = new_url + "&category=" + category
                    new_url = new_url.substring(0, new_url.length - 1);
                }
                if (item_type.length > 0) {
                    var unique = item_type.join(',').split(",").filter(onlyUnique);
                    new_url = new_url + "&item_type=" + unique.join(",")
                }
                if (page) {
                    new_url = new_url + "&page=" + page;
                }
                newUrl(new_url);
            }

            ucwords = function (str) {
                return (str + '')
                        .replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g, function ($1) {
                            return $1.toUpperCase();
                        });
            }

            $scope.to_trusted = function (pHtml) {
                return $sce.trustAsHtml(pHtml);
            };

            $scope.search_image_lazyload = function () {
                for (var i = 0; i < $scope.courseListData.length; i++) {
                    $scope.courseListData[i]['plcholder_image_url'] = $scope.courseListData[i]['image_url'];
                }
            }

            var gaForSearchPage = function() {
                var ga = new gaEventsTracker();
                //fire on filter click
                this.gaFOFC = function(eventObj) {
                    var elem = angular.element(eventObj);
                    if(elem.hasClass($scope.checkedImage)) {
                        ga.gaFireInteractiveEvents('searchpagefilterclick', elem[0].getAttribute("fc_val") + ' - checked', elem[0].getAttribute("fc_type"));
                    }
                    if(elem.hasClass($scope.uncheckedImage)) {
                        ga.gaFireInteractiveEvents('searchpagefilterclick', elem[0].getAttribute("fc_val") + ' - unchecked', elem[0].getAttribute("fc_type"));
                    }
                }
                this.searchClick = function(category,label){
                    if(label != 'undefined' && label)
                        ga.gaFireInteractiveEvents(category,label);
                    else
                        ga.gaFireInteractiveEvents(category);
                }
                this.gaEvent = function(category,label){
                    if(label != 'undefined' && label)
                        ga.gaFireInteractiveEvents(category,label);
                    else
                        ga.gaFireInteractiveEvents(category);
                }
                //fire on feed click
                this.gFOFeedC = function(itemType, counter) {
                    ga.gaFireInteractiveEvents('searchpagefeedclick', counter, itemType);
                }
            }
            $scope.searchPageGa = new gaForSearchPage();
            
           
           
            $scope.searchInitiate = function(){
                    if(!this.searchType){
                        this.searchType = true;
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_initiates_search",
                            event_data : {
                           'sl_search_type' : 'search page',
                        },
                            common: "product",
                        });
                    }
                }

        });
 /*------------- End : CloudSearchCtrl.js-----------*/ 

 /*------------- Begin : ContactFormController.js-----------*/ 

angular.module('Simplilearn')
.controller('ContactFormController', function($location, $scope,$http,$anchorScroll,YoutubeApiService,$timeout,$rootScope,LocService,PostReqService) {
        $scope.isAtpVideoVisible = 0;
        $scope.videoState = '';
        $scope.videoUrl = '';
	$scope.queryStatusClass = "";
	$scope.queryStatusMsg = "";
	$scope.formName = "";
        $scope.hasValidation = true;
        $scope.isEuro=user_params.isEuro;
	$scope.helpers = new helpers();
	$scope.queryAgree = 0;
        $scope.atpqueryAgree = 0;
        $scope.displayAtpMsg = 0;
        $scope.onSubmitClass = "";
	$scope.queryFormDivStyle = {'display':'block'};
	$scope.querySuccessDivStyle = {'display':'none'};
        $scope.toggleFormDisplay = {'display':'none'};
        $scope.selected_course = '';
        $scope.queryStatusSuccess = false;
        $scope.downloadBrochurePopup = 0;
        $scope.downloadedBrochure = 0;
        $scope.isGsaPage=false;
        $scope.isGoScroll=false;
        $scope.isGoScrollText="View All";
        $scope.hideGdpText=false;
        $scope.downloadClicked = 0;
	var prodTypeId= null;
        var BillingTypeId = null;
        var courseId = null;
        var courseName = null;
        var trainingType = null;
        var customerType = null;
        var tagName = null;
        var tagType = null;
        var ga = new gaEventsTracker();
        var isLead = 0;
        var siteModule='';
        this.setHash = function (path) {
            $location.path(path);
        }
        this.scrollToHash = function() {
        if( !!$location.path() ) {
            var path = $location.path();
            var hash = path.substr(path.indexOf('/')+1);
            $timeout(function() {
                var button = document.getElementsByClassName(hash + '-button')[0];
                if(button) {
                    button.click();
                }
            }, 300);
        }
    };

     $scope.gotoTop = function() {
         if($scope.isGoScroll){
            $scope.isGoScroll=false;
            $scope.isGoScrollText="View All";
            document.getElementById('scrollArea').classList.remove('active');
            document.getElementById('scrollArea').scrollIntoView(true);
         }else{
             $scope.isGoScroll=true;
             $scope.isGoScrollText="View Less";
             document.getElementById('scrollArea').classList.add('active');
         }
    };

	$scope.init = function(formName){
		$scope.formName = formName;
	}
        $scope.init_agreechkbox = function(){
		$scope.atpqueryAgree = 1;
	}

    // Get user hash & auto fill

    var initUserHash = function() {
        var userWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
            var user = (newValue && newValue.email)?newValue:oldValue;
            if(user && user.email && typeof user == 'object' && typeof $scope.queryForm != 'undefined' ) {
                if(typeof user.name !='undefined' && user.name.length != 0) {
                    $scope.queryForm.queryName.$setViewValue($scope.queryForm.queryName.$viewValue || user.name)
                    $scope.queryForm.queryName.$render();
                }
                if(typeof user.email !='undefined' && user.email.length != 0 ) {
                    $scope.queryForm.queryEmail.$setViewValue($scope.queryForm.queryEmail.$viewValue || user.email)
                    $scope.queryForm.queryEmail.$render();
                }
               if(typeof user.phone !='undefined' && (user.phone.length != 0)) {
                    $scope.queryForm.userPhone.$setViewValue($scope.queryForm.userPhone.$viewValue || user.phone)
                    $scope.queryForm.userPhone.$render();
               }
                userWatch(); // stop listen
            }
        });
    };
    initUserHash();


            $scope.initDropQueryForm = function () {
                prodTypeId = arguments[0];
                BillingTypeId = arguments[1];
                courseId = arguments[2];
                courseName = arguments[3];
                trainingType = arguments[4];
                customerType = arguments[5];
                tagName = arguments[6];
                tagType = arguments[7];
                webengage.onReady(function () {
                    if (sl_page_type == 'reseller page') {
                        if (document.referrer == "") {
                            WebTracking.setUserParams('sl_user_type', "b2b");
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_eng_web_page_viewed",
                            common: "product"
                        });
                    }
                });
            };

        // Independent form init
        this.initDropQueryForm = function (data) {
            prodTypeId = data.prodTypeId || '';
            BillingTypeId = data.BillingTypeId || '';
            courseId = data.courseId || '';
            courseName = data.courseName || '';
            trainingType = data.trainingType || '';
            customerType = data.customerType || '';
            tagName = data.siteModule || '';
            tagType = data.tagType || '';
            isLead = data.isLead || 0;
            siteModule = data.siteModule || '';
        };

        $scope.showForm = function (pageName,siteModule,hideGdpText) {
                if((typeof hideGdpText != 'undefined' && hideGdpText==1)){
                    $scope.hideGdpText=true;
                    $scope.hasValidation=true;
                } else if($scope.isEuro) {
                    $scope.hideGdpText=false;
                    $scope.hasValidation=false;
                } else if(!$scope.isEuro) {
                    $scope.hasValidation=true;
                }
        	$scope.queryFormDivStyle = {'display':'block'};
        	$scope.querySuccessDivStyle = {'display':'none'};
        	$scope.queryStatusSuccess = false;
                if(typeof pageName !=='undefined' && $scope.isGsaPage){
                     if(typeof $rootScope.isLeadSubmitted =='undefined'){
                       ga.gaFireInteractiveEvents('gsaleadformclick', user_params.user_id + ' || ' + document.URL + ' || ' + siteModule);
                     }
                }
                else {
                  ga.gaFireInteractiveEvents('atpleadformclick', user_params.user_id + ' || ' + document.URL + ' || atp');
                }
        };
            $scope.setDownloadBrochureValuesATP = function () {
                $scope.downloadClicked = 1;
                if ($scope.queryStatusSuccess) {
                    $scope.downloadBrochureATPform();
                } else {
                    tagName = 'atp brochure';
                    $scope.downloadBrochurePopup = 1;
                    document.getElementsByClassName("popup_heading_atp")[0].innerHTML = 'Download Brochure';
                    document.getElementsByClassName("popup_button_atp")[0].innerHTML = 'DOWNLOAD';
                    $scope.showForm();
                }
                WebTracking.setUserParams('sl_lead_button_text', 'DOWNLOAD BROCHURE');
                WebTracking.setUserParams('sl_site_module', "atp brochure");

                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_lead_button_text', 'sl_lead_type', 'sl_page_type', 'sl_site_module', 'sl_user_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_module_initiated",
                    event_data: eventData
                });
            };
            $scope.closeFormEvent = function () {
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_site_module', 'sl_user_type', 'sl_lead_type', 'sl_page_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_form_closed",
                    event_data: eventData
                });
            }
            $scope.moduleFormInitiate =function (){
                WebTracking.setUserParams('sl_lead_button_text', 'GET IN TOUCH');
                WebTracking.setUserParams('sl_site_module', "atp");

                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_lead_button_text', 'sl_lead_type', 'sl_page_type', 'sl_site_module', 'sl_user_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_module_initiated",
                    event_data: eventData
                });
            }
            
        $scope.onEscapeFieldValuechanges = function () {
                  tagName = 'atp';
                  $scope.downloadBrochurePopup = 0;
                  if(typeof document.getElementsByClassName("popup_heading_atp")[0] !='undefined') {
                     document.getElementsByClassName("popup_heading_atp")[0].innerHTML = 'Request more information';   
                  }
                  if(typeof document.getElementsByClassName("popup_button_atp")[0] !='undefined') {
                      document.getElementsByClassName("popup_button_atp")[0].innerHTML = 'SUBMIT';
                  }
        };

            $scope.downloadBrochureATPform = function () {
                if (typeof user_params.ATP_BROCHURE_URL == "string") {
                    var name = user_params.ATP_BROCHURE_URL.split('?')[0];
                    name = name.split('/')[name.split('/').length - 1];
                    var link = document.createElement('a');
                    link.href = user_params.ATP_BROCHURE_URL;
                    link.download = name;
                    link.dispatchEvent(new MouseEvent('click'));
                    $scope.downloadedBrochure = 1;
                    document.querySelector('body').classList.remove('body_fixed');
                }
                //window.open('https://www.simplilearn.com/ice9/ebooks/atp_brochure.pdf','_blank');

            };
            var formInitiated = false;
            $scope.initiateEvent = function (pageName) {
                if (!formInitiated) {
                    if (typeof pageName !== 'undefined') {
                        WebTracking.setUserParams('sl_site_module', siteModule);
                        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_lead_type', 'sl_page_type', 'sl_site_module', 'sl_user_type']);

                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_initiated_lead_form",
                            event_data: eventData
                        });
                        ga.gaFireInteractiveEvents('gsaleadprocessinit', user_params.user_id + ' || ' + document.URL + ' || ' + siteModule);
                        formInitiated = true;
                    } else {
                        if ($scope.downloadClicked == 1) {
                            WebTracking.setUserParams('sl_site_module', 'atp brochure');
                            $scope.downloadClicked = 0;
                        } else {
                            WebTracking.setUserParams('sl_site_module', 'atp');
                        }
                        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_page_type', 'sl_event_time', 'sl_user_type', 'sl_lead_type', 'sl_site_module']);
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_initiated_lead_form",
                            event_data: eventData
                        });
                        ga.gaFireInteractiveEvents('atpleadprocessinit', user_params.user_id + ' || ' + document.URL + ' || atp');
                        formInitiated = true;
                    }
                }
            };
        
        
         $scope.partnersSpeakArrow = function(){
            ga.gaFireInteractiveEvents('atptestimonialsarrow', user_params.user_id + ' || ' + document.URL);
        }

        $scope.stickyHeaderClick = function(tabname){
            ga.gaFireInteractiveEvents('atpstickyheader', user_params.user_id + ' || ' + document.URL + ' || ' + tabname);
        }


	$scope.submitContactForm = function(form){
                /**
                 * If Euro and Download Brochure Clicked Then Download The Brochure
                 */
                if((parseInt($scope.downloadBrochurePopup)===1) && (!$scope.hasValidation)){
                      $scope.downloadBrochureATPform();
                      $scope.queryStatusSuccess=true;
                      return;
                }
                if ((tagName != undefined && user_params.SITE_MODULE_GSA_BROCHURE != undefined ) && (tagName == user_params.SITE_MODULE_GSA_BROCHURE) &&  (!$scope.hasValidation)) {
                    if (typeof $rootScope.downloadBrochureCourseList == 'function') {
                        $rootScope.downloadBrochureCourseList();
                        $rootScope.toggleModalDisplay('gsa-brochure-form', 'none');
                    }
                    return;
                }
                // Clear email suggession box
                if(MailcheckDirective && MailcheckDirective.resetSuggessionBox) {
                    MailcheckDirective.resetSuggessionBox();
                }

		if (!form.$valid) {

			$scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
			$scope.queryStatusClass = "error error_msg hidden";
			return $scope.helpers.FormNotValid(form);
		}

                if($scope.selected_course){
                    var courseObj = JSON.parse($scope.selected_course);
                    courseId = courseObj.id;
                    courseName = courseObj.name;
                }
                if($scope.isGsaPage){
                    ga.gaFireInteractiveEvents('gsaleadsubmit', user_params.user_id + ' || ' + document.URL + ' || ' + siteModule);
                }else{
                    ga.gaFireInteractiveEvents('atpleadsubmit', user_params.user_id + ' || ' + document.URL + ' || atp');
                }
                if($scope.jobTitle == undefined) {
                    $scope.jobTitle = '';
                }
                if($scope.hearAboutUs == undefined ) {
                    $scope.hearAboutUs = '';
                }
                if($scope.userUrl == undefined ) {
                    $scope.userUrl = '';
                }
                if($scope.queryTxt == undefined) {
                    $scope.queryTxt = '';
                }
                var postParams = {method: 'saveContactFormAction', name: $scope.queryName, email: $scope.queryEmail, phone: $rootScope.queryPhoneCode + $scope.userPhone, urlLI: $scope.userUrl, queryTxt: $scope.queryTxt, agreeToContact: $scope.queryAgree, formName: $scope.formName,
                    productTypeId: prodTypeId, billingTypeId: BillingTypeId, courseId: courseId, courseName: courseName, leadTrainingType: trainingType,
                    leadSource: fetchUTMSource(), leadSourceString: document.URL, customerType: customerType, tagName: tagName, type: tagType, query: $scope.cCompany, GCLID: getGCLID(), jobTitle: $scope.jobTitle, hearAboutUs: $scope.hearAboutUs,
                    isLead: isLead
                }; //@review is this required?
                
                postParams['Latest_Lead_Source__c'] = GetUTMParams('utmcsr')
                postParams['Latest_Lead_Source_Detail__c'] = GetUTMParams('utmcmd');
                postParams['UTM_Medium__c'] = GetUTMParams('utmcmd');
                postParams['Device_Type__c'] = 'Website';

                $scope.queryStatusMsg = "";
		$scope.queryStatusClass = "";

                PostReqService.sendPostRequest(baseApiUrlNocache, postParams).then(function(data){
                    if(data == null){
                        $scope.queryStatusMsg = "Some error occurred. Please try again later.";
			$scope.queryStatusClass = "error error_msg";
                    }else{
                        if(data.data.status == "Success"){
                            $rootScope.isLeadSubmitted = true;
                            // Update user hash
                            var user = $rootScope.userInfo || {};
                            user.name = $scope.queryName || user.name;
                            user.email = $scope.queryEmail || user.email;
                            user.phone = $scope.userPhone || user.phone || '';
                            user.phoneCode = $scope.queryPhoneCode || $scope.currentCountry.phnCode || user.phoneCode || '';
                            PostReqService.setUserHash(user);


                            $scope.hearAboutUs = "";
                            $scope.jobTitle = "";
                            $scope.queryName = "";
                            $scope.queryEmail = "";
                            $scope.userPhone = "";
//                            $scope.cCompany = "";
                            $scope.userUrl = "";
                            $scope.queryPhone = "+" + $scope.queryPhoneCode.replace("+", "").replace("-", "") + "-";
                            $scope.queryAgree = 0;
                            $scope.queryForm.$setPristine();
                            $scope.queryFormDivStyleAffilate = {'display':'none'};
                            $scope.querySuccessDivStyle = {'display':'block'};
                            $scope.queryStatusSuccess = true;
                            $scope.displayAtpMsg = 1;
                            $scope.onSubmitClass = "atp-after-submit";
                            $timeout(function(){
                                $scope.querySuccessDivStyle = {'display':'none'};
                                $scope.queryFormDivStyleAffilate = {'display':'block'};
                                $scope.queryStatusSuccess = false;
                                $scope.displayAtpMsg = 0;
                                $scope.onSubmitClass = "";
                                $scope.downloadBrochurePopup = 0;
                            },10000);
                            var phoneNumber = String($scope.queryPhone+user.phone);
                            var nameDiv = user.name.split(/ (.+)/);
                            var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_site_module', 'sl_lead_type', 'sl_page_type']);
                            eventData['sl_email_opt_in'] = true;
                            eventData['sl_sms_opt_in'] = true;
                            eventData['sl_user_type'] = 'b2b';
                            eventData['sl_user_first_name'] = typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "";
                            eventData['sl_user_last_name'] = typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "";
                            eventData['sl_user_email'] = user.email;
                            eventData['sl_user_phone'] = phoneNumber;
                            eventData['sl_user_country'] = $scope.currentCountry.name;
                            eventData['sl_user_company'] = $scope.cCompany;
                            eventData['sl_lead_user_message'] = $scope.queryTxt;
                            // $scope.queryTxt = "";
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_lead_user_submitted_lead_form",
                                event_data: eventData,
                                user_attributes: ['sl_user_first_name','sl_user_last_name', 'sl_event_time', 'sl_user_email', 'sl_user_phone', 'sl_user_country', 'sl_user_company', 'sl_email_opt_in', 'sl_sms_opt_in']

                            });
                            // SITE_MODULE_GSA_BROCHURE
                            if(tagName == user_params.SITE_MODULE_GSA_BROCHURE) {
                                if(typeof $rootScope.downloadBrochureCourseList == 'function') {
                                    $rootScope.downloadBrochureCourseList();
                                    $rootScope.toggleModalDisplay('gsa-brochure-form', 'none');
                                }
                                return;
                            }

                            if($scope.downloadBrochurePopup == 1){
                                $scope.downloadBrochureATPform();
                            }
                            
                        }else{
                            if(data.data.urlError != undefined){
                                $scope.queryStatusMsg = data.data.msg;
                            } else
                            //@review following should be a part of an html file or use ng-init (many similar)
                            $scope.queryStatusMsg = "Some error occurred. Please try again later.";
                            $scope.queryStatusClass = "error error_msg";
                        }
                        
                    }

                });
	}

        $scope.agreeQueryForm = function($event){
		$event.preventDefault();
		if($scope.queryAgree == 1)
			$scope.queryAgree = 0;//@review should use null
		else
			$scope.queryAgree = 1;
                    //@review should use return statement
	}
        $scope.atpagreeQueryForm = function(){
		if($scope.atpqueryAgree == 1)
			$scope.atpqueryAgree = 0;//@review should use null
		else
			$scope.atpqueryAgree = 1;
                    //@review should use return statement
	}
        $scope.playVideo = function(domObj) {
                //console.log('playVideo')
                if($scope.introPlayer && $scope.introPlayer.playVideo) {
                    $scope.introPlayer.playVideo();
                } else if(domObj && domObj.contentWindow) {
                    $timeout(function () {domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*')}, 500);
                }
            }
            $scope.showAtpVideo = function(vUrl) {
                $scope.videoUrl = vUrl;
                $scope.isAtpVideoVisible = 1;
                $scope.videoState = '';
                ga.gaFireInteractiveEvents('atpintrovideoclick', user_params.user_id + ' || ' + document.URL + ' || atp');

                $timeout(function () {
                    var atpIframe = document.querySelector("#atpIntroVideoPopup iframe");
                    angular.element(atpIframe).attr("id", "atp-video");
                    var videoDom = document.getElementById("atp-video");
                    videoDom.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                }, 700);
            };

            $scope.hideAtpVideo = function() {
                $scope.videoUrl = '';
                $scope.isAtpVideoVisible = 0;
                $scope.videoState = 'stop';
            };

        $scope.$watch('atpqueryAgree', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.atpqueryAgree && $scope.isEuro);
            });
	$scope.$watch('userPhone', function(newValue) {
            // console.log(tagName);
            if($scope.hasValidation || tagName == undefined || tagName == "atp")
                    {
                if($scope.queryForm && $scope.queryForm.userPhone) {
                    if(isNaN(newValue)){
                            $scope.queryForm.userPhone.$setValidity('required', false);
                    }else if(newValue.length > 15){
                            $scope.queryForm.userPhone.$setValidity('required', false);
                    }
                }
                //@review no else?
                //@review can use return statement.
	}});
        $scope.gaGdprOptInCheckbox=function(event,name,sitemodule){
            if (user_params.isEuro && event.target.checked){
                var pGaKey="gdprOptinCheckboxChecked";
                var pGaLabel= user_params.user_id + ' || ' + name + ' || ' + sitemodule;
                 ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
            }
        }
});

 /*------------- End : ContactFormController.js-----------*/ 

 /*------------- Begin : ContactUsPageController.js-----------*/ 

angular.module('Simplilearn')
.controller('ContactUsPageController', function($scope,$http,$rootScope,$location,$window,PostReqService) {
	
	$scope.helpers = new helpers();
	$scope.addressCount = 5;
	$scope.addressIndex = 0;
	$scope.faqTag = "General";
	$scope.currentCountry = null;	
	$scope.queryFormDivStyle = {'display':'block'};
	$scope.querySuccessDivStyle = {'display':'none'};
        $scope.faqTabObj = {};
        $scope.urlHash = '';
	
	$scope.contactMe = 1;
	$scope.agreeClicked = 0;
        
        $scope.initialize = function() {
            if( !!$location.path() ) {
                var path = $location.path();
                path = path.substr(path.indexOf('/')+1);
                $scope.urlHash = path;
            }
        };
        
        $scope.setHashTab = function() {
            if( $scope.urlHash == '' ) {
                $scope.faqTag = "General";
            }
            else if( typeof $scope.faqTabObj[$scope.urlHash] !== 'undefined' ) {
                $scope.faqTag = $scope.faqTabObj[$scope.urlHash];
            }
        };
        
        $scope.storeFaqTab = function(pTab, pTabHashTag) {
            $scope.faqTabObj[pTabHashTag] = pTab;
        };
	
        $scope.isCurrentTag = function(pTag) {
            if( $scope.urlHash == pTag ) {
                return 1;
            } else {
                return 0;
            }
        };
        
	$scope.openLiveChat = function( pUrl ) {
             _ss_track.api.live_chat_click();
	};
	
	$scope.showPrevAddress = function(){
		if($scope.addressIndex > 0){
			$scope.addressIndex--;
		}else{
			$scope.addressIndex = $scope.addressCount-1;
		}
	}
	
	$scope.showNxtAddress = function(){
		if($scope.addressIndex < $scope.addressCount-1){
			$scope.addressIndex++;
		}else{
			$scope.addressIndex = 0;
		}
	}
	
	$scope.showFaqTab = function($event,tabName, tabHashTag){
		$event.preventDefault();
		$scope.faqTag = tabName;
                
                $location.path(tabHashTag);
	}
	
	$scope.submitContactTrainerForm = function(form){
		if (!form.$valid) {
			
			$scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
			$scope.queryStatusClass = "error_msg hidden";
			return $scope.helpers.FormNotValid(form);
		}else if($scope.contactMe == 0 && $scope.agreeClicked == 1){
			return false;
		}
		var postParams = {method:'saveContactFormAction',name:$scope.userName, email:$scope.userEmail, phone:$rootScope.queryPhoneCode+$scope.userPhone, queryTxt:$scope.userQuery, agreeToContact:$scope.contactMe, formName:"Contact Us"};
		$scope.queryStatusMsg = "";
		$scope.queryStatusClass = ""; 
                
                PostReqService.sendPostRequest(baseApiUrlNocache, postParams).then(function(data){
                    if(data == null){
                        $scope.queryStatusMsg = "Some error occurred. Please try again later.";
			$scope.queryStatusClass = "error_msg"; 
                    }else{
                        if(data.status == "Success"){
                            $scope.userQuery = "";
				$scope.userName = "";
				$scope.userEmail = "";
				$scope.userPhone = "";
				$scope.contactMe = 1;
				$scope.agreeClicked = 0;
				$scope.contactTrainerForm.$setPristine();
				
				$scope.queryFormDivStyle = {'display':'none'};
				$scope.querySuccessDivStyle = {'display':'block'};
                        }else{
                            $scope.queryStatusMsg = "Some error occurred. Please try again later.";
                            $scope.queryStatusClass = "error_msg";
                        }
                    }
                });
            
	}
	
	
	$scope.initContactPageForm = function(){
		
		
	}
	
	$scope.agreeQueryForm = function($event){
		$event.preventDefault();
		$scope.agreeClicked = 1;
		if($scope.contactMe == 1)
			$scope.contactMe = 0;//@review should use null
		else
			$scope.contactMe = 1;
                    //@review should use return statement
	}
	
});

 /*------------- End : ContactUsPageController.js-----------*/ 

 /*------------- Begin : CorporateLeadController.js-----------*/ 

angular.module('Simplilearn')
.controller('CorporateLeadController', function(CorporateLeadService, LocService, $cookies, $http, $scope, $location,$timeout,PostReqService){
    
    var self = this;
    
    self.user_params = user_params;
    self.sectionClassName = 'form_lead_corp';
    
    self.helpers = new helpers();
    self.countryData = {},
    self.selected_country = null,
    self.courseData = new Array({"name":"Select Course", "id":''});
    self.ifNotSel = '';
    self.personName = '',
    self.personEmail = '',
    self.phoneCode = '',
    self.personPhone = '',
    self.companyName = '',
    self.selectedTrainingType = 0,
    self.userQuery = '',
    self.agreeToContactCheck = null,
    self.selected_course = null;
    self.displaySpinner = {'display':'none'};
    self.genericErrMsgText = '',
    self.successMsgText = '';
    self.ignoreReq={};
    self.agreeToContactClicked = 0;
    self.productTypeId = 0;
    self.billingTypeId = 0;
    self.noRadioBtn = '';
    self.disableSubmit = false;
    self.corHomePage = 0;
	self.requestSent = 0;
	self.responseStatus=0;
        self.Xclicked = 0;
    
    self.xClicked = function(){
        self.Xclicked = 1;
    }
    self.setLeadFormStatus = function( pStatus ) {
        self.successMsgText = '';
        CorporateLeadService.setLeadFormStatus( pStatus );
    };
    
    self.getLeadFormStatus = function() {
        var formStatus = CorporateLeadService.getLeadFormStatus();
        
        return formStatus;
    };
    
    self.productTypeData = function(productTypeId,billingTypeId){
        self.productTypeId = productTypeId;
        self.billingTypeId = billingTypeId;
    }
    
    self.updateSelected = function () {
        if(self.selected_course.id == 'undefined' || self.selected_course.id < 1 || self.selected_course == null){
            self.ifNotSel = 'error_field';
            return false;
        }else{
            self.ifNotSel = '';
        }
        return false;
    }
    
    self.submitCorporateLeadGenForm = function(pForm, pSiteModule, pInvocation) {
        self.displaySpinner = {'display':'none'};
        if (!pForm.$valid) {
            self.trainingTypeClicked = 1,
            self.agreeToContactClicked = 1;
            self.genericErrMsgText = 'Oops! Please ensure all fields are valid.';
            self.successMsgText = '';
            self.updateSelected();
            self.noRadioBtn = self.selectedTrainingType==0?'error_field':'';
            if(typeof document.getElementsByClassName(self.sectionClassName)[0] != 'undefined') {
                //document.getElementsByClassName(self.sectionClassName)[0].scrollTo(0,0);                
            }
            return self.helpers.FormNotValid(pForm);
        }else if(self.updateSelected === false){
        }else if(self.agreeToContactCheck === null){
            self.agreeToContactClicked = 1;
        }else if(self.selectedTrainingType==0){
            self.noRadioBtn = self.selectedTrainingType==0?'error_field':'';
        }else {
            self.displaySpinner = {'display':'block'};
            self.disableSubmit = true;
            self.successMsgText = '';
            self.genericErrMsgText = '';
            
            var paramsArr = {
                'method':'createB2BLead',
                'name': self.personName,
                'email': self.personEmail,
                'phoneNumber': self.personPhone,
                'courseId': self.selected_course.id,
                'courseName': self.selected_course.name,
                'companyName': self.companyName,
                'trainingTypes': self.selectedTrainingType,
                'userQuery': self.userQuery,
                'countryName': JSON.parse($cookies.locatori9).country_name,
                'countryId': JSON.parse($cookies.locatori9).country_id,
                'cityId': JSON.parse($cookies.locatori9).city_id,
                'cityName': JSON.parse($cookies.locatori9).name,
                'areaCode': self.phoneCode,
                'tag_name': pSiteModule,
                'productTypeId': self.productTypeId,
                'billingTypeId': self.billingTypeId,
                'agreeToContact': ((self.agreeToContactCheck) ? 1 : 0),
                'GCLID': getGCLID()
            };
            self.requestSent = 1;
            PostReqService.sendPostRequest(baseApiUrlNocache,paramsArr)
                    .then(function(response) {
                        var data = response.data;
                        if (response == null || !data.success) {
                            self.successMsgText = '';
                            self.genericErrMsgText = data.message?data.message:"Some error occurred. Please try again later.";
                            self.disableSubmit = false;
                            self.responseStatus = 0;
                            self.requestSent = 0;
                        } else if (data.success) {
                            clearLeadGenForm();
                            self.responseStatus = 1;
                            self.requestSent = 0;
                            self.successMsgText = "Thanks for the information, Our inhouse support team will get back to you within 1 business day";
                            self.genericErrMsgText = "";
                            CorporateLeadService.setGaPositionData('Home', 'Top');
                            self.ga.gaFireOnLeadCapture(pInvocation);
                            if (typeof setUpDataLayer != 'undefined') {
                                setUpDataLayer('leadCapture', 'b2bLeadCapture', {});
                            }
                            $timeout(function() {
                                if (self.Xclicked == 0) {
                                    self.setLeadFormStatus(false);
                                }
                                self.Xclicked = 0;
                            }, 3000);
                        } else {
                            self.successMsgText = '';
                            self.responseStatus = 0;
                            self.requestSent = 0;
                            if (typeof data.message !== 'undefined' && data.message) {
                                self.genericErrMsgText = data.message;
                            }else {
                                self.genericErrMsgText = "Some error occurred. Please try again later.";
                            }
                        }
                        self.disableSubmit = false;

                    });
                    self.displaySpinner = {'display':'none'};
        }
    };

    self.getCountryData = function() {
        LocService.getCountryData().then(function(data) {
            self.countryData = data;
            
            //set current country using cookie
            LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

            self.selected_country = LocService.getCurrentCountry();
            self.phoneCode = '+'+self.selected_country.phnCode+'-';
        });
    };
    
    self.getCourseData = function() {
        var urlObj = self.helpers.makeValidApiUrl('getAllCourses');
        $http.get(urlObj.url, {cache: urlObj.cached})
        .success(function(data) {
            self.courseData = self.courseData.concat(data.content);
            if(self.selected_course === null){
                self.selected_course = self.courseData[0];
            }
        });
    };
    
    self.setAgreeToContactStatus = function() {
        self.agreeToContactClicked = 1;

        if( self.agreeToContactCheck ) {
            self.agreeToContactCheck = null;
        }
        else {
            self.agreeToContactCheck = true;
        }
    };
    self.setSelectedTrainingType = function() {
        self.trainingTypeClicked = 1;        
        self.noRadioBtn = self.selectedTrainingType=='0'?'error_field':'';
    };
    
    self.setSelectedTrainingTypes = function(pSelectVal) {
        self.trainingTypeClicked = 1;        
        if( pSelectVal == self.selectedTrainingType ) {
            self.selectedTrainingType = 0;
        }else {
            self.selectedTrainingType = pSelectVal;
        }
        self.corHomePage = 1;
    };
    
    $scope.$watch(function () { return self.personPhone; }, function(newValue) {
        if( isNaN(newValue) ){
            $scope.frmCorpLeadGen.phone.$setValidity('phone', false);
        }
        else if( newValue.length < 7 ) {
            $scope.frmCorpLeadGen.phone.$setValidity('phone', false);
        }
        else {
            $scope.frmCorpLeadGen.phone.$setValidity('phone', true);            
        }
    });
    
    /*$scope.$watch(function () { return self.personEmail; }, function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        
        if( !email_rgx.test(newValue) ){
            $scope.frmCorpLeadGen.email.$setValidity('email', false);
        }
        else {
            $scope.frmCorpLeadGen.email.$setValidity('email', true);            
        }
    });*/
   
    self.checkVars = function(type) {
        if (type == 1) {
            if (self.companyName) {
                self.ignoreReq[1] = 'ignore-req';
            } else {
                self.ignoreReq[1] = '';
            }
        } else if (type == 2) {
            if (self.userQuery) {
                self.ignoreReq[2] = 'ignore-req';
            } else {
                self.ignoreReq[2] = '';
            }
        }
    }
   var clearLeadGenForm = function() {
        self.personName = '';
        self.personEmail = '';
        self.phoneCode = '+'+self.selected_country.phnCode+'-';
        self.personPhone = '',
        self.userQuery = '',
        self.selected_course = self.courseData[0];
        self.genericErrMsgText = '';
        self.successMsgText = '';
        self.companyName = '';
        if (self.corHomePage == 0) {
            self.selectedTrainingType = 0;
        }
        $scope.frmCorpLeadGen.$setPristine();
   };
   
   var gaLeadCaptureClass = function() {
       var ga = new gaEventsTracker();
       this.tabName = '';
       this.position = '';
       
       this.gaFireOnLeadCapture = function(pInvocation) {
           if( pInvocation == 'course' ) {
                var currentPageType = gaGetCurrentPageType();
                
                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagecorporateleadcapture', 'Corporate Lead - Course Page Generic');
                    ga.gaFireInteractiveEvents('coursepagegenericcorporatesuccess');
                } else if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepagecorporateleadcapture', 'Corporate Lead - Course Page ILT');                        
                    ga.gaFireInteractiveEvents('coursepageclassroomcorporatesuccess');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepagecorporateleadcapture', 'Corporate Lead - Course Page OSL');                        
                    ga.gaFireInteractiveEvents('coursepageonlinecorporatesuccess');
                }
           }
           else if( pInvocation == 'corporate' ) {
                ga.gaFireInteractiveEvents('corporatewebsiteleadcapture', 'B2b Pages - Home/Customers/Why Simplilearn/Courses');
               
                var tabName = CorporateLeadService.getGaPageTab();
                var position = CorporateLeadService.getGaPagePosition();
                
                ga.gaFireInteractiveEvents('corporateleadsuccess', tabName + ' | ' + position);                          
           }
       };
       
       var gaGetCurrentPageType = function() {
            var path = $location.path();
            path = path.substr(path.indexOf('/')+1);
            var returnType = 'generic';
            
            if(path == 'ilt') {
                returnType = 'classroom';
            } 
            else if (path == 'osl') {
                returnType = 'online';
            }
            
            return returnType;
        };
    };
    
    self.ga = new gaLeadCaptureClass();
}); /*------------- End : CorporateLeadController.js-----------*/ 

 /*------------- Begin : CorporatePortalController.js-----------*/ 

angular.module('Simplilearn')
.controller('CorporatePortalController', function($scope,CorporateLeadService, $timeout,$rootScope){

    var self = this;
    var mobileMenuStatus = false,
        coursePopupStatusObj = {},
        selectedIndustryIndex = 'All';
        $scope.isMobile = 0;
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
        $scope.isMobile = 1;
    self.industryList = (typeof industryObj !== 'undefined') ? industryObj : null;

    self.setLeadFormStatus = function( pStatus ) {
        CorporateLeadService.setLeadFormStatus( pStatus );
    };

    self.getLeadFormStatus = function() {
        return CorporateLeadService.getLeadFormStatus();
    };

    self.toggleMobileMenu = function() {
        if( mobileMenuStatus ) {
            mobileMenuStatus = false;
        }
        else {
            mobileMenuStatus = true;
        }
    };

    self.getMobileMenuStatus = function() {
        return mobileMenuStatus;
    };

    self.setCoursePopupStatus = function(pIndex, pStatus) {
        if( pStatus !== null ) {
            coursePopupStatusObj[pIndex] = pStatus;
        }
        else if( typeof coursePopupStatusObj[pIndex] === 'undefined' ) {
            coursePopupStatusObj[pIndex] = true;
        }
        else if( coursePopupStatusObj[pIndex] === true ) {
            coursePopupStatusObj[pIndex] = false;
        }
        else {
            coursePopupStatusObj[pIndex] = true;
        }

        for( var index in coursePopupStatusObj ) {
            if( index != pIndex ) {
                coursePopupStatusObj[index] = false;
            }
        }
    };

    self.getCoursePopupStatus = function(pIndex) {
        if( typeof coursePopupStatusObj[pIndex] !== 'undefined' ) {
            return coursePopupStatusObj[pIndex];
        }
        else {
            return false;
        }
    };
    $rootScope.gaFireOnHomePgClickHeader = function (topNavName,destinationUrl) {
        var ga = new gaEventsTracker();
        ga.gaFireInteractiveEvents('dobubleNavClickedGeneric', user_params.user_id + ' || ' + document.URL + ' || ' + topNavName + ' || ' + destinationUrl);
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_nav_user_clicks_on_a_link_in_top_Nav",
            event_data: {
                'sl_destination_link': destinationUrl || '',
                'sl_destination_page_type': topNavName || '',
            },
            common: "product",
        });
    }
    self.setSelectedIndustryIndex = function(pIndex) {
        selectedIndustryIndex = pIndex;
    };

    self.getSelectedIndustryIndex = function() {
        return selectedIndustryIndex;
    };

    self.isSelectedIndustryIndex = function(pIndex) {
        if(selectedIndustryIndex == pIndex) {
            return true;
        }
        else {
            return false;
        }
    };
    
    $timeout(function () {
        var dom = document.getElementsByClassName('cpt-customer-indust');
        if(!dom || !dom[0]) {
            return;
        }
        if(dom[0].getElementsByClassName('bx-next')) {
            var next = dom[0].getElementsByClassName('bx-next')[0];
            next.addEventListener("click", function () {
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('corpclientstories', user_params.user_id + ' || ' + document.URL);
            });
        }
    }, 8000);

    var gaForCorporateClass = function() {
       var ga = new gaEventsTracker();

       this.gaFireOnHomePgClick = function() {
           ga.gaFireInteractiveEvents('corporatehomepageclick');
       };

       this.gaFireOnClientsPgClick = function() {
           ga.gaFireInteractiveEvents('corporateclientspageclick');
       };

       this.gaFireOnCourseCardClick = function(url) {
           ga.gaFireInteractiveEvents('corpcourseclick', user_params.user_id + ' || ' + document.URL + ' || ' + url);
       };

       this.gaFireOnCoursePgClick = function() {
           ga.gaFireInteractiveEvents('corporatecoursepageclick');
       };

       this.gaFireOnCompetencyPgClick = function() {
           ga.gaFireInteractiveEvents('corporatecompetencypageclick');
       };

       this.gaFireOnLeadFormOpen = function(pTabName, pPosition) {
           CorporateLeadService.setGaPositionData(pTabName, pPosition);
           ga.gaFireInteractiveEvents('corporateleadtry', pTabName + ' | ' + pPosition);
       };

       this.gaFireOnLeadersTabClick = function() {
           ga.gaFireInteractiveEvents('corporatehomeleadersclick');
       };

       this.gaFireOnExpertsTabClick = function() {
           ga.gaFireInteractiveEvents('corporatehomeexpertsclick');
       };

       this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
           ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
       };
    };

    self.ga = new gaForCorporateClass();
    
    $scope.previewEvent = function() {
        webengage.onReady(function () {
            user_params.sl_user_type = (document.referrer)?'b2c':'b2b';
            WebTracking.eventReq.triggerEvent({ 
                event_id : "sl_eng_web_page_viewed", 
                event_data: WebTracking.eventReq.getDataFromUserParams(['sl_page_type'])
            });
        });
    }
    $scope.courseAdvisorEvent = function(index) {
        index = index?index-1:0;
        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_course_advisors', 'sl_page_type']);
        eventData.sl_course_advisors = eventData.sl_course_advisors || [];
        eventData.sl_current_course_advisors = '';
        if(Array.isArray(eventData.sl_course_advisors)) {
            eventData.sl_current_course_advisors = eventData.sl_course_advisors[index];
        }
        WebTracking.eventReq.triggerEvent({ 
            event_id : "sl_corptrain_eng_user_explores_course_advisor", 
            event_data: eventData
        });
    };
    $scope.reviewEvent = function (domId) {
        var index = 0;
        var review = {};
        setTimeout(function() {
            try {
                var dom = document.getElementById(domId);
                index = angular.element(dom).attr('data-current-slide') - 1;
                var reviewDom = dom.querySelector('[c_pos="' + index + '"]');
                if(reviewDom) {
                    review.linkedinUrl = '';
                    review.personName = '';
                    review.designation = '';
                    review.content = '';
                    if(reviewDom.querySelector(".profile-pic img") && reviewDom.querySelector(".profile-pic img").src) {
                        review.linkedinUrl =  reviewDom.querySelector(".profile-pic img").src;
                    }
                    if(reviewDom.querySelector(".name_author") && reviewDom.querySelector(".name_author").innerText) {
                        review.personName =  reviewDom.querySelector(".name_author").innerText;
                    }
                    if(reviewDom.querySelector(".desig_author") && reviewDom.querySelector(".desig_author").innerText) {
                        review.designation =  reviewDom.querySelector(".desig_author").innerText;
                    }
                    if(reviewDom.querySelector(".quote_descrip_p") && reviewDom.querySelector(".quote_descrip_p").innerText) {
                        review.content =  reviewDom.querySelector(".quote_descrip_p").innerText;
                    }
                }
            } catch (e) {
                console.error("SL:Error", e);
            }
            var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_page_type']);
            eventData.sl_product_review_user_details = review;

            WebTracking.eventReq.triggerEvent({
                event_id: "sl_corptrain_eng_user_explores_review_carousal",
                event_data: eventData
            });
        }, 200)
    }
}); /*------------- End : CorporatePortalController.js-----------*/ 

 /*------------- Begin : CourseAgendaCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('CourseAgendaCtrl', function (LocService, $scope, $rootScope, PostReqService, $cookies, $timeout) {
    self = this;
     $scope.showCourseAgenda = false;
     $scope.submitCourseAgendaPopUp = function (agendaUrl, btnText) {
        WebTracking.eventReq.triggerEvent({
            event_id : "sl_lead_module_initiated",
            event_data: {
              'sl_lead_button_text' : btnText || '',
              'sl_lead_type' : 'b2c',
              'sl_site_module' : 'course agenda',
            },
            common : "product",
            user_attributes: ['sl_lead_type']
        });
        var agendaCookie = getCookieByName('_cagnd54345');
        if(agendaCookie){
            window.open(agendaUrl,'_blank');
        }else{
            $scope.showCourseAgenda = true;
        }
    }

    $scope.hideAgendLeadPopup = function(status){
        this.showCourseAgenda = status;
    }
});
 /*------------- End : CourseAgendaCtrl.js-----------*/ 

 /*------------- Begin : CourseGroupController.js-----------*/ 

angular.module('Simplilearn')
.controller('CourseGroupCtrl', function(){

    var currentGroup = null;
    
    this.setCurrGroup = function( pGrpName ) {
        currentGroup = pGrpName;
    };
    
    this.isCurrGroup = function( pGrpName ) {
        return currentGroup !== null && currentGroup === pGrpName;
    }
});

 /*------------- End : CourseGroupController.js-----------*/ 

 /*------------- Begin : CourseListController.js-----------*/ 

angular.module('Simplilearn')
.controller('CourseListController', function($scope,$rootScope,$http,FilterService,TabSwitchService) {

	$scope.filterLocVisibleStatus = {'display':'none'}; //@review can come from config
	$scope.selectedTrainingType = null;
	$scope.listcount = "0";
	$rootScope.ttHash = "";
        var showMobFiltersFlag = 0;
        $scope.coursePageIsIpad = isMobile;
	
	$scope.init = function(sendReqStatus,trainingType){
		FilterService.setFilterValues({course : {category:[], provider:[],courseType:[],courselevel:[],learningOption:[],offer:[]}, ebooks:{category:[], provider:[],courseType:[],courselevel:[],learningOption:[],offer:[]}, tests:{category:[], provider:[],courseType:[],courselevel:[],learningOption:[],offer:[]} });
		TabSwitchService.setTabStyle({courseTabStyle:{'display':'true'},ebooksTabStyle:{'display':'none'},testsTabStyle:{'display':'none'}});
		var tabStyles = TabSwitchService.getTabStyle();
		$scope.coursesTabStyle=tabStyles.courseTabStyle;
		$scope.ebooksTabStyle=tabStyles.ebooksTabStyle;
		$scope.testsTabStyle=tabStyles.testsTabStyle;
		TabSwitchService.setCurrentTab("all");
		
		if( (typeof getParameterByName('training_type') != 'undefined' && getParameterByName('training_type') != '') || trainingType){
			var trainingTypeVal = getParameterByName('training_type') ?  getParameterByName('training_type') : trainingType;
			var typeVall = 'courseType';
			
			var nameVall = '';
			if(trainingTypeVal == '1'){
				nameVall = 'Classroom';
                                $rootScope.ttHash = '/ilt';
                                TabSwitchService.setCurrentTab("Classroom");
			}else if(trainingTypeVal == '2'){
				nameVall = 'Online Self Learning';
                                $rootScope.ttHash = '/osl';
                                TabSwitchService.setCurrentTab("Online Self Learning");
			}else if(trainingTypeVal == '3'){
				nameVall = 'Virtual Classroom';
			}
			//alert(nameVall);
			if(nameVall != ''){
				FilterService.updateFilter(typeVall,nameVall,'course');
				var allFilters = document.querySelectorAll('[data-ftab="course"]');
				var allFiltersLen = allFilters.length;
				for(var i=0;i<allFiltersLen;i++){
					if(allFilters[i]['dataset']['ftype'] == typeVall && allFilters[i]['dataset']['fname'] == nameVall){
						allFilters[i].children[0].className = allFilters[i].children[0].className.replace("default_img","selected_img");
						$scope.listcount = "Showing.."+allFilters[i]['dataset']['fcount']+" results";
					}
				}
			}
			
		}
		
	}	
	
	$scope.clearFilter = function($event,tabType){
		$event.preventDefault();
		var filterWrapperClass = "courses_tab_filter";
		if(tabType == 'course'){
			FilterService.filterValues.course = {category:[], provider:[],courseType:FilterService.filterValues.course.courseType,courselevel:[],learningOption:[],offer:[]};
			filterWrapperClass = "courses_tab_filter";
		}else if(tabType == 'ebooks'){
			FilterService.filterValues.ebooks = {category:[], provider:[],courseType:[],courselevel:[],learningOption:[],offer:[]};
			filterWrapperClass = "ebooksTabStyle";
		}else if(tabType == 'tests'){
			FilterService.filterValues.tests = {category:[], provider:[],courseType:[],courselevel:[],learningOption:[],offer:[]};
			filterWrapperClass = "testsTabStyle";
		}//@review no defualt case. very dangerous.
		//FilterService.updateFilter('','',tabType);
                //@review no return statement
		
		var filterWrapper = document.getElementsByClassName(filterWrapperClass)[0];
                var inputs = filterWrapper.getElementsByClassName("checked_check");
                for (var i = 0, l = inputs.length; i < l; ++i) {
                    if (inputs[i].checked) {
                        inputs[i].checked = false;
                    }
                }
	}
	
	$scope.updateFilter=function(filterName,filterValue,typeVal){
                var filters = FilterService.updateFilter(filterName,filterValue,typeVal); //@review should be return statement
		if (filters.courseType.length == 1) {
                    if (filters.courseType[0] == 'Classroom') {
                        $rootScope.ttHash = '/ilt';
                    } else if (filters.courseType[0] == 'Online Self Learning') {
                        $rootScope.ttHash = '/osl';
                    }
                } else {
                    $rootScope.ttHash = '';
                }
		setTimeout(function(){
			window.scrollBy(0, -(window.pageYOffset-(divHeight(document.getElementsByClassName("middle-course-list")[0])-70)));
		},250);
	}
        
        $scope.clearTrainingTypes = function($event){
            $event.preventDefault();
            TabSwitchService.setCurrentTab('all');
            FilterService.filterValues.course = {category:FilterService.filterValues.course.category, provider:FilterService.filterValues.course.provider,courseType:[],courselevel:FilterService.filterValues.course.courselevel,learningOption:FilterService.filterValues.course.learningOption,offer:FilterService.filterValues.course.offer};
            $rootScope.ttHash = '';
        }
        
        $scope.setTrainingType = function($event,trainingType){
            $event.preventDefault();
            TabSwitchService.setCurrentTab(trainingType);
            FilterService.filterValues.course = {category:FilterService.filterValues.course.category, provider:FilterService.filterValues.course.provider,courseType:[trainingType],courselevel:FilterService.filterValues.course.courselevel,learningOption:FilterService.filterValues.course.learningOption,offer:FilterService.filterValues.course.offer};
            var filters = FilterService.filterValues.course;
            
            /* removed ilt and osl hash tag urls from course list page for new course page : @bhijit */
        }
	
	$scope.filterVisible = function(category,provider,courseType,courselevel,learningOption,offer,typeVar){
		var showResult = FilterService.filterVisible(category,provider,courseType,courselevel,learningOption,offer,typeVar);
		return showResult;
		
	}
	
	$scope.changeTabState = function(tabStyle){
		var tabStyles = TabSwitchService.getTabStyle();
		
		if(tabStyle == 'coursesTabStyle'){
			return tabStyles.courseTabStyle;
		}else if(tabStyle == 'ebooksTabStyle'){
			return tabStyles.ebooksTabStyle;
		}else if(tabStyle == 'testsTabStyle'){
			return tabStyles.testsTabStyle;
		} //@review no defualt case. very dangerous.
	}
        
        $scope.toggleFiltersMobile = function() {
            if( showMobFiltersFlag === 1 ) {
                showMobFiltersFlag = 0;
            }
            else {
                showMobFiltersFlag = 1;
            }
        };
        
        $scope.showFiltersMobile = function() {
            if( !($rootScope.mobWidthFlag || $rootScope.hybridWidthFlag) ) {
                return 1;
            }
            
            return showMobFiltersFlag;
        };
	
	$scope.changeTabs = function($event,tabType){
		$event.preventDefault();
		TabSwitchService.showTabs(tabType); //@review should be return statement
		
	}
	
	$scope.updateTabClass = function(tabName){
		if(tabName == TabSwitchService.getCurrentTab()){
			return "active"; //@review Should come from a constant or config
		}else{
			return "";
		}
	}
	
	$scope.showFilterLoc = function($event){
		$event.preventDefault();
		
		if($scope.filterLocVisibleStatus.display == 'block'){
			$scope.filterLocVisibleStatus =  {'display':'none'};
		}else{
			$scope.filterLocVisibleStatus =  {'display':'block'};
		}//@review should use return true for concern.
	}
	
	$scope.changeLocation = function($event,cityId){
		$event.preventDefault();
		$http({
			method: 'GET',
			url: baseApiUrl,
			params: {cityId:cityId,method:'changeLocation'},
		 }).success(function(data){
			location.reload();
		}).error(function(){
			alert("Some error occurred. Please try again later.");
		});//@review must use return true for concern. This is async so will not know weather fired
	}
	
	var divHeight = function(ele) {
		var x = 0;
		while (ele) {
			x += ele.offsetTop;
			ele = ele.offsetParent;
		}
		return x;
	}
        var gaClassForCourseList = function() {
            var ga = new gaEventsTracker();
            this.gaFireCourseListSelectCourse = function($event, name) {
                ga.gaFireInteractiveEvents('courselistpageselectcourse', name);
            }
            
            this.gaFireCourseListCounter = function(rank) {
                ga.gaFireOnCourseListSearchTagCounter(rank);
            }
            
            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
            };
            
        };
        $scope.gaCourseListControllerJs = new gaClassForCourseList();
})
.service('TabSwitchService', function() {
		
	this.tabsStyle = null;
	this.currentTab = null;
	
	this.setTabStyle = function(params){
		this.tabsStyle = params;
		this.currentTab = 'coursesTab';
                //@review should use return true for concern
	}
	
	this.getTabStyle = function(){
		return this.tabsStyle;
	}
	
	this.getCurrentTab = function(){
		return this.currentTab;
	}
        
        this.setCurrentTab = function(tabName){
		this.currentTab = tabName;
	}

	this.showTabs = function(tabType){
		this.tabsStyle = {courseTabStyle:{'display':'none'},ebooksTabStyle:{'display':'none'},testsTabStyle:{'display':'none'}};
		if(tabType == 'courses'){
			this.tabsStyle.courseTabStyle = {'display':'true'};
			this.currentTab = 'coursesTab';
		}else if(tabType == 'ebooks'){
			this.tabsStyle.ebooksTabStyle = {'display':'true'};
			this.currentTab = 'ebooksTab';
		}else if(tabType == 'tests'){
			this.tabsStyle.testsTabStyle = {'display':'true'};
			this.currentTab = 'testsTab';
		}//@review no default/else. Very dangerous
                //@review should use return true for concern
	}

}); /*------------- End : CourseListController.js-----------*/ 

 /*------------- Begin : CoursePageCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('CoursePageCtrl', function(YoutubeApiService, $document,$scope, $http, LocService, $interval, $location, $rootScope,CorporateLeadService, $timeout, $compile, PostReqService, FormsAjax, LeadService) {
    $scope.helpers = new helpers();
    $scope.forms_from_ajax = null;
    $scope.lvc_disc = 0;
    $scope.osl_disc = 0;
    $scope.lvc_price = 0;
    $scope.osl_price = 0;
    $scope.cls_price = 0;
    $scope.striked_lvc_price = 0;
    $scope.striked_osl_price = 0;
    $scope.striked_cls_price = 0;
    $scope.countryId = 0;
    $scope.formPlace = 0;
    $rootScope.webEventFiredformId = 0;
    $scope.cSiteModuleCustom = '';
    $scope.cSiteModule = '';
    var youtubePlayerObj={};
    $scope.templateTitle='';
    this.init = function () {
        webengage.onReady(function (data) {

            var url_string = window.location.href;
            var url = new URL(url_string);
            var source = url.searchParams.get("referrer");
            var eventId = '';
            var eventData = {};
            switch (source) {
                case 'home':
                    eventId = "sl_nav_user_clicks_on_product_card_on_homepage";
                    eventData = {
                        'sl_page_type': 'home',
                    };
                    break;

                case 'popular-category':
                    eventId = "sl_nav_popular_course_on_category_page_clicked";
                    eventData = {
                        'sl_page_type': 'course list',
                    };

                    break;
                case 'product-category':
                    eventId = "sl_nav_product_on_category_page_clicked";
                    eventData = {
                        'sl_page_type': 'course list',
                    };
                    break;
                case 'search':
                    eventId = "sl_search_user_clicks_on_a_search_result";
                    break;
            }
            if (eventId=="sl_search_user_clicks_on_a_search_result") {
               var eventInfo=WebTracking.eventReq.getDataFromUserParams(['sl_product_id', 'sl_product_name','sl_product_category','sl_product_category_id','sl_product_type','sl_product_image','sl_event_time','sl_page_type','sl_user_type']);   
                eventInfo.sl_search_term = getParameterByName('tag')||'';
                eventInfo.sl_page_type = 'search page';
                WebTracking.eventReq.triggerEvent({
                    event_id: eventId,
                    event_data: eventInfo,
                });
            }
            else if(eventId!="sl_search_user_clicks_on_a_search_result" && eventId ){
                WebTracking.eventReq.triggerEvent({
                    event_id: eventId,
                    event_data: eventData,
                    common: "product",
                });
            }
        });
    }
    
    $scope.productViewed = function () {
        produtPageViewedEvent();
        try {
            LeadService.createAutoLead();
        } catch (e) {
            console.error("SL:Error auto lead failed", e);
        }
    }
            
    this.pageViewed = function () {
        user_params.sl_user_type = (document.referrer)?'b2c':'b2b';
        webengage.onReady(function (data) {
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_eng_web_page_viewed",
            event_data: {},
            common: "product"
        });
        });
    }
    this.setTemplateTitle = function(title, siteModule){
        $scope.templateTitle=title;
        if(typeof siteModule !== 'undefined' && siteModule) {
            $scope.cSiteModuleCustom = siteModule;
        } else {
            $scope.cSiteModuleCustom = '';
        }
    };
    this.setSiteModule = function(siteModule) {
        $scope.cSiteModule = siteModule;        
    }
    this.setHash = function(path) {
        $location.path(path);
        WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_page_sticky_top_nav_show_section_change",
          event_data: {
            'sl_product_page_section' : path
          },
          common : "product"
        });
        $scope.gCPCJ.gaFireEventsGeneric('coursestickyheader',  user_params.course_name + ' || ' + path);
    }
    var aacWatch = $rootScope.$watch('fireAacCookie', function(newValue, oldValue) {
        if(newValue == 1) {
            $rootScope.fireAacCookie = 0;
            self.showDiscountValuesCourse($scope.countryId);
        }
    });
    $scope.breadcrumEvent = function($event,productType,url,name,id) {
        var gotoLink = ''
        if(typeof $event != 'undefined')
            gotoLink = $event.target.parentNode.href;
        var ga = new gaEventsTracker();
        ga.gaFireInteractiveEvents('breadcrumclick', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
        if (name||productType=='home') {
            breadcrumEvent(productType, gotoLink, name, id);
        }        
    }
    $scope.contactEnterpriseFormAjax = function () {
        var elem = document.getElementById('enterprise_form_ajax');
        if (elem !== undefined && elem !== null && elem.innerHTML === "") {
            var all_forms = JSON.parse(user_params.forms_ajax_load);
            var ent_form_json = JSON.stringify({'enterprise_form_ajax': all_forms['enterprise_form_ajax']});
            FormsAjax.loadFormviaAjaxSL(ent_form_json, $scope);
        }

    }

    $scope.downloadAgendaUrlinit = function(agendaUrl){
        $rootScope.submitCourseAgendaPopUp = agendaUrl;
    }

    this.setOslPriceCourse = function(price_osl,fin_osl_price){
       $scope.osl_price = price_osl;
       $scope.fin_osl_price  = fin_osl_price;


    }

    this.setLvcPriceCourse = function(price_lvc,fin_lvc_price ){
       $scope.lvc_price = price_lvc;
       $scope.fin_lvc_price  = fin_lvc_price;
    }

    this.setClsPriceCourse = function(price_cls,fin_cls_price){
       $scope.cls_price = price_cls;
       $scope.fin_cls_price = fin_cls_price;
    }

    $scope.enrollMaster = function() {
        if(document.getElementsByClassName("btn-master-purchase").length > 0) {
            document.getElementsByClassName("btn-master-purchase")[0].click();
        }
    }

    this.showDiscountValuesCourse = function(country_id){
        $scope.countryId = country_id;
        var code = getCookieByName('aac');
        if(code){
          $http.get(baseApiUrl + "?method=getCouponsdicountDetails",
            { params: {
                    "aac": code,
                    "sep_tt_dic_val" : 1,
                    "courseId": user_params.course_id,
                    "country_id":country_id
                }
            })
            .then(function(response) {
                if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == 200) {
                    var result = response.data;
                    if(result.status == 'success'){
                      $scope.lvc_disc =  result.data.lvc;
                      $scope.osl_disc =  result.data.osl;
                      $scope.cls_disc =  result.data.cls;
                      $scope.fin_osl_price = Math.floor($scope.osl_price - ($scope.osl_price*($scope.osl_disc/100)));
                      $scope.fin_lvc_price = Math.floor($scope.lvc_price - ($scope.lvc_price*($scope.lvc_disc/100)));
                      $scope.fin_cls_price = Math.floor($scope.cls_price - ($scope.cls_price*($scope.cls_disc/100)));
                    }
                }
            });
        }
    }
    // auto coupon apply by url hash

// Below code is not required in this Controller as we are already using autoApplyCoupon function
//    var aacListener = $rootScope.$on('aac', function(event, value) {
//        //New Coupon to be added in aac Cookie
//        addCouponCodesToAACCookie(value);
//
//        aacListener();// stop listen
//    });

    // scrollToHash
    var hashTagListener = $rootScope.$on('hashTag', function(event, scrollHash) {
        if(scrollHash) {
            $timeout(function() {
                var button = document.getElementsByClassName(scrollHash + '-button')[0];
                if(button) {
                    button.click();

                    //Check for jump to section
                    var elem_content = document.getElementById(scrollHash + '-content');
                    if(elem_content){
                     var alreadyOpen = elem_content.style.height == 'auto' ? 1 : 0;
                     if(!alreadyOpen) {
                      button.click();
                     }
                    }
                }
            }, 300);
        }
        hashTagListener();// stop listen
    });

    $scope.popupTnC = true;
    $scope.popupName = '';
    $scope.popupEmail = '';
    $scope.popupUserPhone = '';
    var cpc = this;

    //For notify me Popup show on click. There is a controller for the same below.
    $scope.shownotifyLeadPopup = function(){
        $rootScope.shownotifyMePopUP = true;
    }

    this.loadFormsviaAjax = function(){
      $scope.form_data = null;
      FormsAjax.loadFormviaAjaxSL(user_params.forms_ajax_load,$scope);
    }

    $scope.submitCoursePagePopup = function () {
        if ($scope.coursePagePopup.$invalid) {
          return $scope.helpers.FormNotValid($scope.coursePagePopup);
        }
        var obj3 = {
          name: $scope.coursePagePopup.popupName.$viewValue,
          email: $scope.coursePagePopup.popupEmail.$viewValue,
          phone: $rootScope.popupPhoneCode + $scope.coursePagePopup.popupUserPhone.$viewValue,
          queryTxt: "Details provided in course page popup",
          query: "Details provided in course page popup",
          agreeToContact: $scope.coursePagePopup.popupTnC.$viewValue,
          queryTyp: 'course-page-popup',
          courseId: user_params.course_id,
          courseName: user_params.course_name
        };
        obj3['customerType'] = 'B2C';
        obj3['leadTrainingType'] = 'classroom';
        obj3['leadSourceString'] = document.URL;
        obj3['tagName'] = 'course-page-popup';
        obj3['leadSource'] = fetchUTMSource();
        obj3['type'] = 'course-page-popup';
        obj3['productTypeId'] = user_params.productTypeId;
        obj3['billingTypeId'] = user_params.billingTypeId;
        obj3['method'] = 'saveCallback';
        obj3['GCLID'] = getGCLID();
        PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
            .then(function (data) {
              if (data != null) {
                if (data.data.status == 'Success') {
//                  $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                  $scope.popupStatusMsg = "We have received your information. We will get back to you soon.";
                  $scope.popupName = '';
                  $scope.popupEmail = '';
                  $scope.popupUserPhone = '';
                  document.cookie = 'cppf=course-page-popup-filled';
                } else {
                  $scope.popupStatusMsg = "There was some problem, please try again.";
                }
              }
              $scope.popupStatusDisplay = true;
              $scope.popupStatus = data.data.status;
			  setTimeout(cpc.hideAllModal, 5000)
            });
      }

    this.autoApplyCoupon = function() {
        if( !!$location.path() ) {
            var path = $location.path();
            var hash = path.substr(path.indexOf('/')+1).split('=');
            if (hash[0] == 'aac') {
               addCouponCodesToAACCookie(hash[1]);
              }
            }
        }

  this.showScholarshipPopup = function () {
      if (!!$location.path()) {
        var path = $location.path();
        var hash = path.substr(path.indexOf('/') + 1).split('=');
        if (hash[0] == 'schl' && countryCode == 'US') {
          user_params.scholarship = hash[1];
          $http.get(baseApiUrl + '?method=getScholarshipEnrollModal&schl=' + hash[1]+'&course_id='+course_id).then(function (data) {
            if (data.data == '"error"') {
              return;
            }
            var popup = $compile(data.data.replace("\n", ""))($scope);
            $scope.course_name_schl = user_params.course_name;
            document.querySelector('#body_content').parentNode.appendChild(angular.element(popup)[0]);
          });
        }
      }
    }

    this.getWorkshopData = function (outcome, cityPage, https, showTxNote, titleString) {
         var ttInfo = JSON.parse(user_params.forms_ajax_load);
            ttInfo = ttInfo.ttfc || null;
          if(typeof ttInfo != 'undefined' && ttInfo != parseInt(user_params.training_type_classroom)) {
            setTimeout(function () {
            var paramsArr = {'course_id': user_params.course_id, 'cityPage':cityPage,
            'showTxNote':showTxNote,cityId:locator_data.city_id};
            //, 'titleString':titleString,'description':document.querySelector('meta[name=description]').getAttribute("content"),'https':https,'canonical': document.querySelector("link[rel='canonical']").getAttribute("href")
            //console.log(paramsArr);
            PostReqService.sendGetRequest(baseUrlAjax+"course/course-workshops", paramsArr)
            .then(function (response) {
                if(response && typeof response.data !='undefined'){
                    angular.element(document.getElementById('course-workshops')).html(response.data);
                    $compile(angular.element(document.getElementById('course-workshops')).contents())($scope);
                }
            });
        }, 4000);
        }
    }

    this.scheduleLeadPopup = function () {
      setTimeout(function () {
        var allmodals = document.getElementsByClassName('popup_country_wrapper');
        for (var i = 0; i < allmodals.length; i++) {
          if (allmodals[i].style.display == 'block') {
//            console.log('another popup is visible.');
            return;
          }
        }
        if (['input', 'select', 'textarea'].find(function(e){
          return e == document.activeElement.tagName.toLowerCase()
        })) {
//          console.log('user filling up form.');
          return;
        }
        if (document.cookie.indexOf("course-page-popup-filled") > -1) {
//          console.log(document.cookie.indexOf("course-page-popup-filled"),"User already filled up popup");
          return;
        }
        $scope.popupTnC = true;
        $rootScope.popupPhoneCode ='+'+ $rootScope.currentCountry.phnCode+'-';
        $scope.popupStatusDisplay = false;
        $http.get(baseApiUrl + '?method=getCoursePageLeadPopup').then(function (data) {
          var popup = $compile(data.data.replace("\n", ""))($scope);
          document.querySelector('#body_content').parentNode.appendChild(angular.element(popup)[0]);
        });
      }, 40000);
    }
    this.hideAllModal = function () {
      var modalObjs = document.getElementsByClassName('popup_country_wrapper');
      var modalLen = modalObjs.length;
      for(var i=0;i<modalLen;i++){
        if(modalObjs[i].style.display =='block'){
          modalObjs[i].style.display = 'none';
        }
      }
      var bodyObj = document.getElementsByTagName('body')[0];
      bodyObj.className = bodyObj.className.replace("body_fixed","");
    }

    this.statesDisplayStatus = {'display': 'none'};
    this.selectedCountry = null;
    this.countries = null;
    this.changeLocCountries = null;
    this.selectChangeLocCountry = null;
	this.selectChangeLocCity = null;
    this.selectChangeLocCities = null;
    this.stickyTrainingTypeDisplay = {'display':'none'};
	this.genericPageDisplayStatus = {'display':'block'};
	this.topOslButtonDisplay = {'display':'block'};
	this.topIltButtonDisplay = {'display':'block'};
	this.leadFormDisplay = {'display':'block'};
    this.lvcVideoDisplayStatus = {'display': 'none'};
    this.selectedTrainingType = "";
    this.corporateText = 'Interested in training your team?';
    $scope.stickyComponentDisplay = {'display': 'none'};
    $scope.headerSelectText = "Select Training Type";
    $scope.courseAdviseDirectorString = "course-advisor-wrapper";
    this.totalOffersCount = 0;
    this.olOffersCount = 0;
    this.clOffersCount = 0;
    this.setLetUsKnowTrigger = 0;
    $scope.bundlePreviewClicked = 0;
    this.isCrsVideoVisible = 0;
    this.videoState = '';

    this.isBatchInfoVisible = 0;
    this.classroomFormData = {};
    this.onlineFormData = {};
    this.lvcPassFormData = {};

    var seoExpDesc = '';
    var cityHashFlag = 0;
    var indexCityHashFlag = 0;
    var seoCityData = {};
    this.seoCurrentCity = '';
    //var showReviews = {};
    $scope.totalBatchesToShow = 5;

    this.abtVideos = {};
    this.vidStatus = {};
    this.randomCourseDir = 1;

    /** start - intro video **/
    this.introVideo = null;
    this.introPlayer = null;
    this.introVideoInit = function(type) {
        YoutubeApiService.onReady(function () {
            var player;
            var playerId = 'courseIntroVideo';
            var playButtonId = 'play-button-intro-main';

                var popupDom = document.querySelector('#courseIntroVideoPopup iframe');
                if(!popupDom) {
                    return ;
                }
                initIntroVideoPopupStatus = true;
                popupDom.setAttribute('id', 'courseIntroVideoPopupIframe');
                playerId = 'courseIntroVideoPopupIframe';
                playButtonId = 'play-button-intro-popup';

            player = new YT.Player(playerId, {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
            youtubePlayerObj=player;
            self.introVideo = document.getElementById(playerId);
            if(!self.introVideoOverlayStatus){
                self.playVideo(self.introVideo);
            }
            var videoState = null;
            function onPlayerStateChange(event) {
                self.introPlayer = event.target;
                // Reply button
                if(videoState == null) {
                    $timeout(function () {
                       var playButton = document.getElementById(playButtonId);
                       playButton.addEventListener("click", function() {
//                           console.log('Video play', self.introVideoOverlayStatus);
                           self.introAnnotation = true;
                           self.playVideo(self.introVideo);
                           self.hideIntrovideoOverlay();
                       });
                   });
                }
                videoState = event;

                // On complete
                $timeout(function () {
                    // console.log(videoState.data);
                    if (videoState.data == YT.PlayerState.ENDED) {
                        //console.log("End");
                        self.stopVideo();
                        self.showIntrovideoOverlay(self.introVideo);
                        $scope.gCPCJ.gaFireOnCoursePage('introvideowatched', user_params.user_id + ' || ' + document.URL + ' || introvideo ||' + user_params.course_name);

                    }
                }, 100);
            }
        });
    }

    this.initIntroVideo = function() {
        self.introVideoInit('main');
    }

    this.initIntroVideoPopup = function() {
        self.introVideoInit('popup');
    }

    this.showCoursePreview = function(type) {
        type = type || 'base';
        ga = new gaEventsTracker();
        ga.gaFireInteractiveEvents('CoursePreviewIntrovideoClick', type);

        //self.hideIntrovideoOverlay();
        self.hideCrsVideo();
        //self.pauseVideo(self.introVideo);

        $timeout(function() {
            var button = document.getElementsByClassName('course-preview-button')[0];
            if(button) {
                button.click();
            }
        }, 0);
    }

    this.stopVideo = function(domObj) {
        //console.log('stopVideo')
        if(self.introPlayer && self.introPlayer.stopVideo) {
            self.introPlayer.stopVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
        }
    }

    this.pauseVideo = function(domObj) {
        //console.log('pauseVideo')
        if(self.introPlayer && self.introPlayer.pauseVideo) {
            self.introPlayer.pauseVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
        }
    }

    this.playVideo = function(domObj) {
        //console.log('playVideo')
        if(self.introPlayer && self.introPlayer.playVideo) {
            self.introPlayer.playVideo();
        } else if(domObj && domObj.contentWindow) {
            domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
        }
    }

    this.introVideoOverlayStatus = false;
    this.showIntrovideoOverlay = function() {
        this.introVideoOverlayStatus = true;
        document.querySelector('#courseIntroVideoMobOverlay').style.display = 'block';
    }

    this.hideIntrovideoOverlay = function() {
        this.introVideoOverlayStatus = false;
        document.querySelector('#courseIntroVideoMobOverlay').style.display = 'none';
    }
    /** end - intro video **/

    this.playAbtCrs = function(type){
        this.abtVideos[type] = 1;
        this.vidStatus[type] = '';
        if (type == 1) {
            $scope.gCPCJ.gaFireEventsGeneric('pre_run');
        } else if (type == 2) {
            $scope.gCPCJ.gaFireEventsGeneric('flexi_pass');
        }
    }
    this.hideAbtCrs = function(type){
        this.abtVideos = {};
        this.vidStatus[type] = 'stop';
    }
    this.toggleBatchDisplay = function() {
        this.isBatchInfoVisible = (this.isBatchInfoVisible) ? 0 : 1;
    };
    this.showBatchDisplay = function() {
        this.isBatchInfoVisible = 1;
        WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_class_info_clicked",
          common : "product"
        });
        $scope.gCPCJ.gaFireOnCoursePage('viewclassschedule', user_params.user_id + ' || ' + document.URL);
    };
    this.intiateLeadFPT = function (btnText) {
      var siteModule='fpt-paper-cold';
      if(typeof user_params.sl_override_site_module !=="undefined" && user_params.sl_override_site_module){
          siteModule=user_params.sl_override_site_module;
      }
      WebTracking.eventReq.triggerEvent({
          event_id : "sl_lead_module_initiated",
          event_data: {
            'sl_lead_button_text' : btnText || '',
            'sl_lead_type' : 'b2c',
            'sl_site_module' : siteModule,
          },
          common : "product",
          user_attributes: ['sl_lead_type']
      });
    }
    this.gaOnFAQ = function (title, accordionId) {
        var isAccordionOpen = checkIfAccordionIsOpen(accordionId);
        if (isAccordionOpen) {
            WebTracking.eventReq.triggerEvent({
                event_id: "sl_eng_product_faq_question_explored",
                event_data: {
                    'sl_product_faq_question': title || '',
                },
                common: "product",
            });
            $scope.gCPCJ.gaFireOnCoursePage('faqclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
        }
    };
    this.gaOnCD = function (title, accordionId) {
        var isAccordionOpen = checkIfAccordionIsOpen(accordionId);
        if (isAccordionOpen) {
            WebTracking.eventReq.triggerEvent({
                event_id: "sl_eng_product_description_explored",
                event_data: {
                    'sl_product_description_question': title,
                },
                common: "product",
            });
            $scope.gCPCJ.gaFireOnCoursePage('cdclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
        }
    };
    this.wbEngOnMBG = function(){
          WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_money_back_guarantee_explored",
          common : "product",
      });
    };
    this.wbEngproductRatingClick = function(){
          WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_product_ratings_clicked",
          common : "product",
      });
    };
    this.wbEngOnExamAndCertfExplored = function (title, accordionId) {
        var isAccordionOpen = checkIfAccordionIsOpen(accordionId);
        if (isAccordionOpen) {
            WebTracking.eventReq.triggerEvent({
                event_id: "sl_eng_product_exam_question_explored",
                event_data: {
                    'sl_product_exam_question': title,
                },
                common: "product",
            });
            $scope.gCPCJ.gaFireOnCoursePage('faqclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
        }
    };
    this.gaOnEAC = function(title){
        $scope.gCPCJ.gaFireOnCoursePage('eacclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
    };
    this.hideBatchDisplay = function() {
      WebTracking.eventReq.triggerEvent({
        event_id : "sl_eng_class_info_popup_closed",
        common : "product"
      });
      this.isBatchInfoVisible = 0;
    };

    this.exploreWorkshops = function (cObj) {
        try {
            var courseData = {};
            if (typeof cObj != 'undefined' && cObj.length > 0 && typeof user_params.pageCategory && user_params.pageCategory == 'bundle_index') {
                courseData = JSON.parse(cObj);
            }
            WebTracking.eventReq.triggerEvent({
                event_id: "sl_eng_class_info_carousal_explored",
                event_data: courseData,
                common: "product",
            });
        } catch (err) {
            console.error('SL:Error', err);
        }

    };

    this.initSeoCityExp = function(pSeoExpDesc, pCityHashFlag, pIndexCityHashFlag) {
        cityHashFlag = pCityHashFlag;
        indexCityHashFlag = pIndexCityHashFlag;
        seoExpDesc = pSeoExpDesc;
        seoCityData = JSON.parse(user_params.seoExpCityData);

        $scope.$watch(function(){ return location.hash }, function (value) {
            if(value) {
                value = value.substr(value.indexOf('/')+1);
            } else {
                self.seoCurrentCity = '';
            }

            if(value && indexCityHashFlag && self.seoCurrentCity != value) {
                var metaRobotsElem = document.querySelector('meta[name="robots"]');
                if(metaRobotsElem) {
                    metaRobotsElem.setAttribute('content', 'index');
                }
            }

            if(!value && indexCityHashFlag && self.seoCurrentCity != value) {
                var metaRobotsElem = document.querySelector('meta[name="robots"]');
                if(metaRobotsElem) {
                    metaRobotsElem.setAttribute('content', 'noindex');
                }
            }

            if(value && cityHashFlag && self.seoCurrentCity != value) {
                self.seoCurrentCity = value;
                updateSeoCityData();
                window.scroll(0, 0);
            }
        });
    };

    var updateSeoCityData = function() {
        if(!(seoCityData[self.seoCurrentCity] && seoCityData[self.seoCurrentCity]['h1Tag']) ) {
            return;
        }

        self.h1Text = seoCityData[self.seoCurrentCity]['h1Tag'];
        self.aboutCityHead = 'About ' + seoCityData[self.seoCurrentCity]['city_name'];
        self.aboutCity = seoCityData[self.seoCurrentCity]['about_city'];

        var metaDescTag = new Array();
        metaDescTag.push(document.querySelector('meta[name=description]'));
        metaDescTag.push(document.querySelector('meta[property="og:description"]'));
        metaDescTag.push(document.querySelector('meta[name="twitter:description"]'));
        for(var i=0; i < metaDescTag.length; i++) {
            if(metaDescTag[i]) {
                metaDescTag[i].setAttribute('content', seoCityData[self.seoCurrentCity]['metaDescription']);
            }
        }

        var canonicalElem = document.querySelector('link[rel="canonical"]');
        if(canonicalElem) {
            canonicalElem.setAttribute('href', seoCityData[self.seoCurrentCity]['canonical']);
        }

        var metaUrlTags = new Array();
        metaUrlTags.push(document.querySelector('meta[property="og:url"]'));
        metaUrlTags.push(document.querySelector('meta[name="twitter:url"]'));
        for(var i=0; i < metaUrlTags.length; i++) {
            if(metaUrlTags[i]) {
                metaUrlTags[i].setAttribute('content', seoCityData[self.seoCurrentCity]['canonical']);
            }
        }

        var titleElem = document.querySelector('title');
        if(titleElem) {
            titleElem.innerHTML = seoCityData[self.seoCurrentCity]['metaTitle'];
        }

        var metaTitleTags = new Array();
        metaTitleTags.push(document.querySelector('meta[property="og:title"]'));
        metaTitleTags.push(document.querySelector('meta[name="twitter:title"]'));
        for(var i=0; i < metaTitleTags.length; i++) {
            if(metaTitleTags[i]) {
                metaTitleTags[i].setAttribute('content', seoCityData[self.seoCurrentCity]['metaTitle']);
            }
        }
    };

    var self = this;
    dwnldSchedule = function($event,startDate,endDate,countryId,courseId){
        $scope.$apply(function(){
            self.downloadSchedule($event,startDate,endDate,countryId,courseId);
        });
    }
    this.downloadSchedule = function($event,startDate,endDate,countryId,courseId,cObj){
        $event.preventDefault();        
        var courseData = {};
        if (typeof cObj != 'undefined' && cObj.length > 0 && typeof user_params.pageCategory && user_params.pageCategory == 'bundle_index') {
            courseData = JSON.parse(cObj);
        }
        WebTracking.eventReq.triggerEvent({
            event_id : "sl_eng_class_info_downloaded",
            event_data: courseData,
            common : "product",
        });
        $scope.gCPCJ.gaFireOnCoursePage('downloadschedule', user_params.user_id + ' || ' + document.URL);
        $http.get(baseApiUrl + '?method=getWorkshopScheduleCsv', {params: {startDate: startDate, endDate: endDate, countryId: countryId,courseId:courseId,'isPdf':1}})
                .success(function (data) {
                    if (data == null || typeof data.message == 'undefined') {
                        window.location = baseApiUrl + '?method=getWorkshopScheduleCsv&startDate=' + startDate + '&endDate=' + endDate + '&countryId=' + countryId+ '&courseId=' + courseId+ '&isPdf=1';
                    } else {
                        this.downloadScheduleErr = data.message;
                    }
                })
                .error(function () {
                    this.downloadScheduleErr = "Some error occurred. Please try again later.";
                });
    };

    this.submitClassroomForm = function(pCourseId, pWorkshopId, pTrainingType) {
        var pageSource = window.location.href;
        this.classroomFormData = {"itemId":pCourseId, "batchId":pWorkshopId, 'trainingTypeId':pTrainingType,'pageSource':pageSource};
    };

    this.submitOnlineForm = function(pCourseId, pAccessDays, pTrainingType) {
        var pageSource = window.location.href;
        this.onlineFormData = {"itemId":pCourseId, "accessDays":pAccessDays, 'trainingTypeId':pTrainingType,'pageSource':pageSource};
    };

    this.submitLvcPassForm = function(pCourseId, pAccessDays, pTrainingType) {
        var pageSource = window.location.href;
        this.lvcPassFormData = {"itemId":pCourseId, "accessDays":pAccessDays, 'trainingTypeId':pTrainingType,'pageSource':pageSource};
    };
    this.submitLvcPassB2bForm = function(companyId,productId, productTypeId, accessDays,trainingTypeId,b2bCountryId,b2bPricingId) {
        var pageSource = window.location.href;
        this.lvcPassB2bFormData = {"company_id": companyId,"product_id": productId, "product_type_id": productTypeId, 'accessDays': accessDays, 
                    'trainingTypeId': trainingTypeId,'b2b_country_id': b2bCountryId,'b2b_pricing_id': b2bPricingId,'pageSource': pageSource};
    };
    this.submitOnlinePassB2bForm = function(companyId,productId, productTypeId, accessDays,trainingTypeId,b2bCountryId,b2bPricingId) {
        var pageSource = window.location.href;
        this.onlineB2bFormData = {"company_id": companyId,"product_id": productId, "product_type_id": productTypeId, 'accessDays': accessDays, 
                    'trainingTypeId': trainingTypeId,'b2b_country_id': b2bCountryId,'b2b_pricing_id': b2bPricingId,'pageSource': pageSource};
    };

    var displayAllBundleCoursesFlag = 0;
    this.bundleCourseCount = null;

    var reviewExpandStateStruct = {};


	$scope.$watch('stickyComponentDisplay',function(newVal){
		if(newVal.display == 'none'){
			self.stickyTrainingTypeDisplay = {'display':'none'};
		}
	});


    this.setLetUsKnowFormOpen = function() {
        this.setLetUsKnowTrigger = 1;
        if ($rootScope.convSuccMsg) {
            $rootScope.adjustDivHeight = {'height': '440px'};
        }
        $rootScope.convSuccMsg = 0;
    }

    this.init_getLocationData = function(){
        if (typeof coursePageLocationData !== 'undefined') {
            self.changeLocCountries = coursePageLocationData;
            //self.setChangeLocCountry(self.changeLocCountries[0]);
			var countryListLength = self.changeLocCountries.length;
			//console.log(self.changeLocCountries);
			var locatorCookie = getCookieByName('locatori9');
			var locatorCookieObj = JSON.parse(locatorCookie);
			var locCountryId = locatorCookieObj.country_id;
			for(var i=0;i<countryListLength;i++){
				var cid = self.changeLocCountries[i].id;
				cid = cid.substring(cid.indexOf('-')+1);
				if(cid == locCountryId){
					self.selectChangeLocCountry = self.changeLocCountries[i];
					self.setChangeLocCountry();
				}
			}
        }
    };

    this.hiddenBatchesCount = 0;
    this.batchesCountSpan = true;
    this.toggleBatchClass = "view";
    this.classroomTrainingTypeStyle = {'display': 'block'};
    this.lvcTrainingTypeStyle = {'display': 'block'};
    this.classroomDisplay = 1;
    this.lvcDisplay = 1;
    this.slectedClassroomButton = {'display': 'none'};
    this.classroomButton = {'display': 'block'};
    this.slectedOnlineButton = {'display': 'none'};
    this.onlineButton = {'display': 'block'};
    this.classroomButtonBkgnd = "inactive";
    this.onlineButtonBkgnd = "inactive";

    this.filterCheckClasses = "remember_me selected_img";

    this.classroomStatus = {'show': false, 'batchCountShow': false, 'showAll': false};
    this.lvcStatus = {'show': false, 'batchCountShow': false, 'showAll': false};

    this.setReviewExpandState = function(pId, pVal,pRId) {
        reviewExpandStateStruct[pId] = pVal;
        if(parseInt(pVal) && parseInt(pRId) && typeof user_params.sl_product_review_user_details !=="undefined"){
                var slUserReviewsArr= user_params.sl_product_review_user_details;
                if(typeof slUserReviewsArr[pRId] !=="undefined" && slUserReviewsArr[pRId]){
                    var slProductReviewUserDetails=slUserReviewsArr[pRId];
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_eng_product_reviews_read_more_clicked",
                        event_data: {
                        'sl_product_review_user_details' : slProductReviewUserDetails || '',
                        },
                        common : "product",
                    });
                }
        }
    };
    this.wEngProductReviewUserProfileClick = function(pRId){
           if(parseInt(pRId) && typeof user_params.sl_product_review_user_details !=="undefined"){
                var slUserReviewsArr= user_params.sl_product_review_user_details;
                if(typeof slUserReviewsArr[pRId] !=="undefined" && slUserReviewsArr[pRId]){
                    var slProductReviewUserDetails=slUserReviewsArr[pRId];
                     WebTracking.eventReq.triggerEvent({
                        event_id : "sl_eng_product_user_profile_clicked",
                        event_data: {
                        'sl_product_review_user_details' : slProductReviewUserDetails || '',
                        },
                        common : "product",
                    });
                }
        }
    };
    this.getReviewExpandState = function(pId) {
        if( typeof reviewExpandStateStruct[pId] === 'undefined' ) {
            reviewExpandStateStruct[pId] = 0;
        }

        return reviewExpandStateStruct[pId];
    };

    this.getCountryModalStatus = function() {
        return LocService.getChangeCountryModalStatus();
    };

    this.setCountryModalStatus = function(statusVal,$event) {
		this.changeLocCityInvalid  = false;
		this.changeLocCountryInvalid  = false;
        LocService.setChangeCountryModalStatus(statusVal);
        $rootScope.toggleModalDisplay('choose_loc_pop',statusVal,$event);
        var timerId = $interval(function() {
            if( self.countries !== null ) {
                setSelectedCountry();
                $interval.cancel(timerId);
            }
        }, 100);
    };

    var setSelectedCountry = function() {
        var currentCountry = LocService.getCurrentCountry();

        if( self.selectedCountry === null && currentCountry !== null ) {
            for( var prop in self.countries ) {
                if( self.countries[prop]['id'] == currentCountry.id ) {
                    self.selectedCountry = self.countries[prop];
                    break;
                }
            }
        }

        if( self.selectedCountry === null ) {
            self.selectedCountry = self.countries[0];
        }
        self.selectChangeLocCountry = self.selectedCountry;
		self.setChangeLocCountry();
        //self.setChangeLocCountry(self.selectedCountry);
    };

    this.toggleCountryList = function($event) {
        $event.preventDefault();
        if (LocService.showCountryList.display == 'block')
            LocService.showCountryList.display = 'none';
        else
            LocService.showCountryList.display = 'block';
		LocService.showCityList.display = 'none';
    }

	this.toggleCityList = function($event) {
        $event.preventDefault();
        if (LocService.showCityList.display == 'block')
            LocService.showCityList.display = 'none';
        else
            LocService.showCityList.display = 'block';
		LocService.showCountryList.display = 'none';
    }

    this.countryListDisplay = LocService.showCountryList;
    this.cityListDisplay = LocService.showCityList;

    this.setChangeLocCountry = function() {
		var citiesData;
		var countryObj = self.selectChangeLocCountry;
		if(typeof countryObj != 'undefined' && countryObj != null){
			self.changeLocCountryInvalid  = false;
			if(typeof countryObj.cities[0] == 'undefined'){
				citiesData = {"0":{"id":countryObj.cities['id'],"name":countryObj.cities['name'],"course_id":countryObj.cities['course_id']}};
			}else{
				citiesData = countryObj.cities;
			}

		}else{
			citiesData = {"0":{"id":"","name":"Select City","course_id":""}};
		}
		self.changeLocCityInvalid  = false;
		self.selectChangeLocCities = citiesData;
		self.selectChangeLocCity = {"id":'',"name":'Select City',"course_id":''};

		LocService.showCountryList.display = 'none';

    }

    this.changeLocCityInvalid = false;
	this.changeLocCountryInvalid = false;
	this.changeLocation = function(currentCountry, currentCity){
        if(self.selectChangeLocCountry == null){
            self.changeLocCountryInvalid = true;
            return false;
        }else if(self.selectChangeLocCity == null || typeof self.selectChangeLocCity.id == 'undefined' || self.selectChangeLocCity.id == '' || self.selectChangeLocCity.id == null){
            self.changeLocCityInvalid = true;
            return false;
        }

        $scope.gCPCJ.gaFireOnCoursePageChangeCitySuccess(currentCountry + '-' + currentCity, self.selectChangeLocCountry.name +  '-' + self.selectChangeLocCity.name);
        var href = window.location.pathname;
        href = href + "?cityId="+self.selectChangeLocCity.id+'&redirect=pdpPage';
        var ua = navigator.userAgent.toLowerCase();
        if (isIpad != 0 || (ua.indexOf('safari') != -1 && ua.indexOf('chrome') == -1)) { //Remove redirection in case of safari and ipad
            href = href.replace('&redirect=pdpPage', '');
        }
        if (location.hash) {
            href = href + location.hash;
        }
        window.location.href = href;
    }

    this.showAllCities = function(stateObj) {
        self.allCities = stateObj.cities;
    }

    this.changeCityLoc = function(cityObj) {
        self.locFormData = {"countryId":this.selectedCountry.id,"cityId":cityObj.id,"cityName":cityObj.name};
        //LocService.changeLocCity(cityObj);
    }

	this.toggleStickyTrainingTypeSelect = function(){
		if(self.stickyTrainingTypeDisplay.display == 'none'){
			self.stickyTrainingTypeDisplay = {'display':'block'};
			setTimeout(function(){document.getElementsByClassName("dropdown_sticky_tr_a")[0].focus();},200);
		}
		else
			self.stickyTrainingTypeDisplay = {'display':'none'};
	}

    this.displayAllBundleCourses = function() {
        return displayAllBundleCoursesFlag;
    };

    this.toggleBundleCourseList = function() {
        if( displayAllBundleCoursesFlag === 1 ) {
            displayAllBundleCoursesFlag = 0;
            //window.scrollTo(0, 400);
        }
        else {
            displayAllBundleCoursesFlag = 1;
        }
    };

    this.showCrsVideo = function() {
        this.isCrsVideoVisible = 1;
        this.videoState = '';
        self.initIntroVideo();
        WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_intro_video_clicked",
          common : "product"
        });
        $scope.gCPCJ.gaFireOnCoursePage('introvideoclick', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name);
    };

    this.hideCrsVideo = function($event) {
        if(typeof $event != 'undefined')
            $event.stopPropagation();
        this.isCrsVideoVisible = 0;
        this.videoState = 'stop';
        var videoDurationPlayedInSec = typeof youtubePlayerObj !=="undefined" && typeof youtubePlayerObj.j !=="undefined" && typeof youtubePlayerObj.j.currentTime !=="undefined" ? Math.round(youtubePlayerObj.j.currentTime) : 0;
        WebTracking.eventReq.triggerEvent({
          event_id : "sl_eng_intro_video_closed",
          event_data: {
                  'sl_intro_watched_duration' : videoDurationPlayedInSec || 0,
                },
          common : "product"
        });
        $scope.gCPCJ.gaFireOnCoursePage('introvideoclosed', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name);
    };

    self.setCorporateLeadFormStatus = function( pStatus ) {
        CorporateLeadService.setLeadFormStatus( pStatus );
    };

        var gaClassForCoursePage = function() {

            var ga = new gaEventsTracker();
            //gaFireOnCityTrainingPage
            this.gFOCTP = function(fromCity, cityToGo) {
                var currentPageType = this.gaGetCurrentPageType();
                var string = fromCity + ' || ' + cityToGo;
                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericcitytraining', string);
                } else if(currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcitytraining', string);
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlinecitytraining', string);
                }
            }

            this.gaFireOnCoursePage = function(cat, label) {
                if (typeof label !== 'undefined' && label) {
                    ga.gaFireInteractiveEvents(cat, label);
                } else {
                    ga.gaFireInteractiveEvents(cat);
                }
            }

            this.gaFireOnCourseIntro = function(location) {
                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericcourseintro', location);
                } else if(currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcourseintro', location);
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlinecourseintro', location);
                }
            }


            this.gaFireGenCoursePageTrainSelect = function(switchToTraining) {
                var label = '';
                if(switchToTraining == 'ilt') {
                    label = 'classroom';
                } else if(switchToTraining == 'osl') {
                    label = 'osl';
                }

                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenerictrain', label);
                } else if(currentPageType == 'classroom') {
                    if(switchToTraining == 'osl') {
                        ga.gaFireInteractiveEvents('coursepageclassroomtrain');
                    }
                } else if(currentPageType == 'online') {
                    if(switchToTraining == 'ilt') {
                        ga.gaFireInteractiveEvents('coursepageonlinetrain');
                    }
                }
            }

            this.gaGetCurrentPageType = function() {
                var path = $location.path();
                path = path.substr(path.indexOf('/')+1);
                var returnType = 'generic';
                if(path == 'ilt') {
                    returnType = 'classroom';
                } else if (path == 'osl') {
                    returnType = 'online';
                }
                return returnType;
            }

            this.gaFireCourseAgendaClick = function() {
                ga.gaFireInteractiveEvents('leadformclicked',user_params.user_id + ' || ' + document.URL  + ' || ' + user_params.course_name+ ' || course agenda');
            }

            this.fireEnrollClick = function(type) {
              ga.gaFireInteractiveEvents(type,user_params.user_id + ' || ' + document.URL);
              if( typeof type != 'undefined' && type == 'enroll_online') {
                WebTracking.eventReq.triggerEvent({
                  event_id : "sl_pay_enroll_button_clicked_osl",
                  common : "product"
                });
              }
              if( typeof type != 'undefined' && type == 'enroll_lvc') {
                WebTracking.eventReq.triggerEvent({
                  event_id : "sl_pay_enroll_button_clicked_lvc",
                  common : "product"
                });
              }
              if( typeof type != 'undefined' && type == 'enroll_classroom'){
                 WebTracking.eventReq.triggerEvent({
                  event_id : "sl_pay_enroll_button_clicked_classroom",
                  common : "product"
                });
              }
            }

            this.gaFireCoursePageQuerySubmit = function() {
                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericqueryformsubmit');
                } else if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepageclassroomqueryformsubmit');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlinequeryformsubmit');
                }
            }
            //gaFireCoursePagePreviewTry
            this.gFCPPT = function(lesson) {
                var currentPageType = this.gaGetCurrentPageType();
                // ga.gaFireInteractiveEvents('leadformclicked',user_params.user_id + ' || ' + document.URL + ' || course preview || '+user_params.course_name + ' || '+lesson + ' || '+currentPageType);
            }

            this.gaFireOnCoursePageViewOtherTrain = function(currentLocation, selectedLocation) {
                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericviewothertrain');
                } else if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepageclassroomviewothertrain');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlineviewothertrain');
                }
            }

            this.gaFireOnCourseEnroll = function() {
                var currentPageType = this.gaGetCurrentPageType();
                if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepageclassroomenroll');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlineenroll');
                }
            }



            this.gaFireFPTClick = function($event) {
                ga.gaFireInteractiveEvents('fpt_link_course',user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
            }

            this.fireProgramAlsoViewedSection = function(gotoLink, type, name) {
              WebTracking.eventReq.triggerEvent({
                event_id : "sl_nav_people_also_bought_courses_clicked",
                event_data: {
                  'sl_destination_link' : gotoLink || '',
                  'sl_destination_product_type' : type || '',
                  'sl_destination_product_name' : name || '',
                },
                common : "product",
              });
                ga.gaFireInteractiveEvents('peopleAlsoViewedSectionClicked',user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
            }


            this.gaFireOnCourseConvenientTry = function() {
                ga.gaFireInteractiveEvents('coursepageconvenienttry');
            }

            this.gaFireOnCourseConvenientSubmit = function() {
                ga.gaFireInteractiveEvents('coursepageconvenientsubmit');
            }

            this.gaFireOnCoursePageChangeCityTry = function() {
                ga.gaFireInteractiveEvents('coursepageiltchangecitytry');
            }

            this.gaFireOnCoursePageChangeCitySuccess = function(currentLocation, selectedLocation) {
                ga.gaFireInteractiveEvents('coursepageiltchangecitysuccess', currentLocation + ' || ' + selectedLocation);
            }

            this.gaFireOnCoursePageCorporateTry = function() {
                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericcorporatetry');
                } else if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepageclassroomcorporatetry');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlinecorporatetry');
                }
            };

            this.gaFireOnCoursePageCorporateSuccess = function() {
                var currentPageType = this.gaGetCurrentPageType();

                if(currentPageType == 'generic') {
                    ga.gaFireInteractiveEvents('coursepagegenericcorporatesuccess');
                } else if(currentPageType == 'classroom') {
                    ga.gaFireInteractiveEvents('coursepageclassroomcorporatesuccess');
                } else if(currentPageType == 'online') {
                    ga.gaFireInteractiveEvents('coursepageonlinecorporatesuccess');
                }
            };

            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, user_params.user_id + ' || ' + document.URL + ' || ' + pGaLabel);
            };

            this.gaOnloadPageType = function(type,name){
                if(type === 'oneTime'){
                    ga.gaFireInteractiveEvents('onloadBundlePageType',name);
                }else if(type === 'subscription' ){
                    ga.gaFireInteractiveEvents('onloadSubsPageType',name);
                }
            }

            this.gaOnEnroll = function(){
                    ga.gaFireInteractiveEvents('enrollBundle',user_params.user_id + ' || ' + document.URL);
                    var trainingType = user_params.sl_product_training_type || '';
                    if(trainingType == 'osl') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_osl",
                            common: "product"
                        });
                    }
                    if(trainingType == 'lvc') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_lvc",
                            common: "product"
                        });
                    }
                    if(trainingType == 'classroom') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_classroom",
                            common: "product"
                        });
                    }
            }

            this.gaBuyThisItem = function(type,name){
                if(type === 'oneTime'){
                    ga.gaFireInteractiveEvents('buyThisBundle',name);
                }else if(type === 'subscription' ){
                    ga.gaFireInteractiveEvents('startFreeTrail',name);
                }
            }
            this.gaGdprOptInCheckbox = function($event,cname,sitemodule) {
                if (isEuro && $event.target.checked){
                    var pGaKey="gdprOptinCheckboxChecked";
                    var pGaLabel= user_params.user_id + ' || ' + cname + ' || ' + sitemodule;
                    ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                }
            };
        };

        $scope.gCPCJ = new gaClassForCoursePage();

//        this.setReviewsStatus = function($event, no, val) {
//            $event.preventDefault();
//            showReviews[no] = val;
//        }
//
//        this.getReviewStatus = function(id) {
//            if (typeof showReviews[id] != 'undefined') {
//                return showReviews[id];
//            }
//            return 0;
//        }

        this.setCourseDir = function() {
            var courseDirs = document.getElementsByClassName('course-directors-div'),
            countCourseDirs = courseDirs.length;
            var randomNum = this.getRandomInt(1,countCourseDirs);
            this.randomCourseDir = randomNum;
        }
        this.getCourseDir = function() {
            return this.randomCourseDir;
        }

        this.getRandomInt = function(min, max) {
            return Math.floor(Math.random() * max) + min;
          }
          this.disMarketoFrm = 0;
            this.showMarketoForm = function(val, event, type,btnText,place) {
                if (typeof event != 'undefined' && event) {
                    if (event.target.classList.contains('popup_country_wrapper')) {
                    }else{
                        return;
                    }
                }
                if (typeof place !== 'undefined') {
                    $rootScope.webEventFiredformId = place;
                }
                this.disMarketoFrm = val;
                var label = '';
                if(val == 1){
                    if(type == 'course')
                        label += 'B2b_query_course_page';
                    else if(type == 'dt-page')
                        label += 'DT_QueryBox';
                    else
                        label += 'B2b_query_course_page';
                    if(user_params.sl_page_type === 'corp train page') {
                        if(typeof $scope.cSiteModuleCustom === "string" && $scope.cSiteModuleCustom.length > 0) {
                            label = $scope.cSiteModuleCustom;                        
                        } else if(typeof $scope.cSiteModule === "string" && $scope.cSiteModule.length > 0) {
                            label = $scope.cSiteModule;                        
                        }
                    }
                    if(user_params.sl_page_type === 'corp train page' && typeof btnText == 'undefined' || !btnText && $scope.templateTitle) {
                        btnText = $scope.templateTitle;
                    }
                    WebTracking.setUserParams("sl_site_module", label);
                    WebTracking.eventReq.triggerEvent({
                      event_id : "sl_lead_module_initiated",
                      event_data: {
                        'sl_lead_button_text' : btnText || '',
                        'sl_lead_type' : 'b2b',
                        'sl_site_module' : label,
                      },
                      common : "product",
                      user_attributes: ['sl_lead_type']
                    });
                    var label = user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' +label;
                    $scope.gCPCJ.gaFireOnCoursePage('leadformclicked',label);
                }

                if(val == 0){

                    if (type == 'dt-page') {
                        label += 'DT_QueryBox';
                    } else {
                        label = 'B2b_query_course_page';
                    }
                    if(user_params.sl_page_type === 'corp train page') { 
                        if(typeof $scope.cSiteModuleCustom === "string" && $scope.cSiteModuleCustom.length > 0) {
                            label = $scope.cSiteModuleCustom;                        
                        } else if(typeof $scope.cSiteModule === "string" && $scope.cSiteModule.length > 0) {
                            label = $scope.cSiteModule;                        
                        }
                    }
                    WebTracking.eventReq.triggerEvent({
                      event_id : "sl_lead_form_closed",
                      event_data: {
                        'sl_lead_type' : 'b2b',
                        'sl_site_module' : label,
                      },
                      common : "product",
                      user_attributes: ['sl_lead_type']
                    });
                }
            };

        this.pricingRangeLearnersModal = 0;
        this.showPricingRangeLearners = function(val, event) {
            this.pricingRangeLearnersModal = val;
            if(val == 1){
                $scope.gCPCJ.gaFireOnCoursePage('Cp_LearnersRangePricing_OSL_Modal_Open',user_params.course_name + ' || ' + document.URL);
            }
        };
        this.pricingRangeLvcModal = 0;
        this.showPricingRangeLvc = function(val, event) {
            this.pricingRangeLvcModal = val;
            if(val == 1){
                $scope.gCPCJ.gaFireOnCoursePage('Cp_LearnersRangePricing_LVC_Modal_Open',user_params.course_name + ' || ' + document.URL);
            }
        };
        this.addRemoveClassInBody = function(val){
            var class_name = 'popup_open_body';
             if(val == 1){
                 //Add Class in Body
                 document.body.classList.add(class_name);
             } else {
                 //Remove Class in Body
                 document.body.classList.remove(class_name);
             }
        };
})
.controller('CoursePageClassroomCtrl',function($scope, $timeout){
    $scope.cityFilter = false;
    $scope.version = new Date().getTime();
    $scope.filterBatch = [];

    // Object equal check
    var isEquivalent = function(a, b) {
        var aProps = Object.getOwnPropertyNames(a);
        var bProps = Object.getOwnPropertyNames(b);
        if (aProps.length != bProps.length) {
            return false;
        }
        for (var i = 0; i < aProps.length; i++) {
            var propName = aProps[i];
            if (a[propName] !== b[propName]) {
                return false;
            }
        }
        return true;
    }

    $scope.initClass = function(cityPageId) {
        $scope.filterBatch = $scope.batches;
        $timeout(function () {
            if(cityPageId) {
                $scope.city = cityPageId;
            } else {
                // Set default city
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                var cityId = locatorCookieObj.default_city_id_new || null;
                if(locatorCookie) {
                    var userCityId = locatorCookieObj.city_id;
                    if($scope.cityList) {
                        for(ci in $scope.cityList) {
                            if(userCityId == $scope.cityList[ci].id) {
                                cityId = userCityId;
                            }
                        }
                    }
                }

                var cityClassFlag = false;
                if(cityId) {
                    if($scope.cityList) {
                        for(ci in $scope.cityList) {
                            if(cityId == $scope.cityList[ci].id) {
                                cityClassFlag = true;
                            }
                        }
                    }
                }

                if(cityClassFlag) {
                    $scope.city = cityId;
                } else {
                    $scope.city = Object.keys($scope.cityList)[0];
                }
            }
        },100);
    }

    $scope.$watch('city', function(newValue, oldValue) {
        var filterBatch = [];
        if(newValue) {
            for(i in $scope.batches) {
                var batch = $scope.batches[i];
                if(batch && batch.city_id == $scope.city) {
                    filterBatch.push(batch);
                }
            }
        } else {
            filterBatch = $scope.batches;
        }

        // Re render carousal
        if(!isEquivalent(filterBatch, $scope.filterBatch)) {
            angular.element(document.querySelectorAll('#classroom-carousal .c_list_item')).remove();
            $timeout(function () {
                $scope.filterBatch = filterBatch;
                $scope.trigger = new Date().getTime();
            },10);
        }
    });
})

.controller('CoursePageOnlyClassroomCtrl',function($scope, $timeout,$document,PostReqService,$compile){
    $scope.cityFilter = false;
    $scope.version = new Date().getTime();
    $scope.filterBatch = [];
    $scope.trainerPopUp = [];
    $scope.popUpOpen = 0;
    $scope.viewMoreClicked = 0;
    $scope.isCoursePageOnlyClassroom=false;
    $scope.setClassRoomFlag=function(isCoursePageOnlyClassroom){
        if(isCoursePageOnlyClassroom)
        $scope.isCoursePageOnlyClassroom=true;
    }
    angular.element($document).ready(function () {
         if($scope.isCoursePageOnlyClassroom){
              $scope.loadTemplate();
         }
    });
    $scope.loadTemplate = function () {
                var classPartialTemplateData={classroom_trainerinfo_popup:{}};
                var paramObj={};
                paramObj['template_params']=JSON.stringify(classPartialTemplateData);
                paramObj['template_page']='classroomtrainerinfo';
                PostReqService.sendPostRequest(baseApiUrlNocache + '?method=loadTemplatesThroughAjax', paramObj)
                        .then(function (data) {
                            if (data != null && data.data.status == 'success') {
                               this.form_data = data.data.data;
                               angular.forEach(this.form_data, function (value, index) {
                                    var elem = document.getElementById(index);
                                    if (elem !== undefined && elem !== null && elem.innerHTML === "") {
                                        angular.element(elem).html(value);
                                        $compile(angular.element(elem).contents())($scope);
                                    }
                                })
                            }
                        });
    }
    $scope.detailsDisplayClose = function(div_id) {
        var elem = document.getElementById(div_id);
        elem.classList.add("hide_with_height");

    }

    $scope.detailsbuttontoggle = function(div_id) {
        var elem = document.getElementById(div_id);
        (elem.classList.contains('hide_with_height')) ? elem.classList.remove("hide_with_height") : elem.classList.add("hide_with_height");
    }

    $scope.initFuncnewCRdesign = function(city_name_first){
       //All hide class
       $scope.hideAllElementsByClassName('details_section_batch');
       $scope.city = city_name_first;
    }

    $scope.hideAllElementsByClassName = function (cls_name) {
        var myClasses = document.querySelectorAll('.'+cls_name);
        for (i = 0; i < myClasses.length; i++) {
            myClasses[i].classList.add("hide_with_height");
        }
    }
    $scope.loadPopupTrainerDetails = function(trainerData){
       $scope.trainerPopUp = trainerData;
       if(trainerData){
         $scope.popUpOpen = 1;
         document.getElementById('trainer_details_popup').style.display = 'block';
       }
    }

    $scope.closePopupTrainerDetails = function(){
       $scope.trainerPopUp = [];
       $scope.popUpOpen = 0;
       document.getElementById('trainer_details_popup').style.display = 'none';
    }
})

.controller('NoWorkshopFoundController',function($scope, $rootScope,PostReqService){
	$scope.formSubmittedStyle = {'display':'none'};
	$scope.queryAgree = 1;
	$scope.helpers = new helpers();
	$scope.queryFormDivStyle = {'display':'block'};
	$scope.querySuccessDivStyle = {'display':'none'};
	$scope.queryAgree = 1;
        var PHONE_MAX_LENGTH = 15;

	$scope.agreeQueryForm = function($event){
		//$event.preventDefault();
		$scope.agreeClicked = 1;
		if($scope.queryAgree == 1)
			$scope.queryAgree = 0;//@review should use null
		else
			$scope.queryAgree = 1;
                    //@review should use return statement
	}

            $scope.submitNoWorkshopForm = function(form, dataArr) {
                if (form.$invalid) {
                    $scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
                    $scope.queryStatusClass = "error_msg hidden";
                    if ($scope.queryAgree == 0 && $scope.agreeClicked == 1) {
                        return false;
                    }
                    return $scope.helpers.FormNotValid(form);
                } else if ($scope.queryAgree == 0 && $scope.agreeClicked == 1) {
                    return false;
                }

                var paramsArr = {name: $scope.queryName, email: $scope.queryEmail, phone: $rootScope.queryPhoneCode + $scope.queryPhone, queryTxt: $scope.queryTxt, query: $scope.queryTxt, agreeToContact: $scope.queryAgree, queryTyp: 'no_workshop_found', agreeToRcvUpdate: 0, batchDate: ''};

                var obj3 = {};
                for (var attrname in paramsArr) {
                    obj3[attrname] = paramsArr[attrname];
                }
                for (var attrname in dataArr) {
                    obj3[attrname] = dataArr[attrname];
                }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                obj3['countryId'] = locatorCookieObj.country_id;
                obj3['countryName'] = $scope.currentCountry.name;
                obj3['cityId'] = locatorCookieObj.city_id;
                obj3['cityName'] = locatorCookieObj.name;
                obj3['method'] = 'saveNoWorkshopFoundData';
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function(response) {
                            var data = response.data;
                            if (data.status == "Success") {
                                var gaEventObj = new gaEventsTracker();
                                gaEventObj.gaFireOnCoursePageNoWorkshopFormSubmit();
                                obj3['customerType'] = 'B2C';
                                obj3['leadTrainingType'] = 'classroom';
                                obj3['leadSourceString'] = document.URL;
                                obj3['tagName'] = 'WorkshopNotAvailable';
                                obj3['leadSource'] = fetchUTMSource();
                                obj3['type'] = 'no_workshop';
                                obj3['productTypeId'] = user_params.productTypeId;
                                obj3['billingTypeId'] = user_params.billingTypeId;
                                obj3['method'] = 'saveCallback';
                                obj3['GCLID'] = getGCLID();
                                PostReqService.sendPostRequest(baseApiUrlNocache, obj3).then(function(data) {
                                    if (data != null) {
                                        if (data.data.status == 'Success') {
                                            setUpDataLayer('leadCapture', 'noWorkshopFound', {'leadId': data.data.result.key});
                                            $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                                            $scope.queryFormDivStyle = {'display': 'none'};
                                            $scope.querySuccessDivStyle = {'display': 'block'};
                                            $scope.queryTxt = "";
                                            $scope.queryName = "";
                                            $scope.queryEmail = "";
                                            $scope.queryPhone = "";
                                        } else if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                            $scope.queryStatusMsg = data.data.msg;
                                        }
                                    } else {
                                        $scope.queryStatusMsg = data.data.msg;
                                    }
                                });
                            } else {
                                $scope.queryStatusMsg = "Some error occurred. Please try again later."
                                $scope.queryStatusClass = "error_msg";
                            }
                        });
            }
	$scope.$watch('queryPhone', function(newValue) {
		if(isNaN(newValue)){
			$scope.noWorkshopForm.queryPhone.$setValidity('required', false);
		}else if(newValue.length > PHONE_MAX_LENGTH){
			$scope.noWorkshopForm.queryPhone.$setValidity('required', false);
		}

	});



})
.controller('ConvenientScheduleController',function($scope,LocService,$rootScope,PostReqService){
	$scope.formSubmittedStyle = {'display':'none'};

	$scope.helpers = new helpers();
	$scope.queryFormDivStyle = {'display':'block'};
	$scope.querySuccessDivStyle = {'display':'none'};
	$scope.agreeEmailClicked = 1;
	$scope.agreePhnClicked = 1;
	$scope.emailAgreeCheck = 1;
	$scope.phnAgreeCheck = 1;

	$scope.personName = '';
	$scope.personEmail = '';
	$scope.personPhone = '';
	$scope.batchDate = '';
	$scope.$watch(function() {
	  return $rootScope.resetMsgs;
	}, function(newVal) {
	  if(newVal == 1){
		$scope.queryStatusMsg = ""
		$scope.queryStatusClass = "";
	  }
	});

	var validateDate = function (testdate) {
		var date_regex = /^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(20)\d{2}$/ ;
		return date_regex.test(testdate);
	}


	$scope.setUpdatesAgreeCheck = function($event){
		//$event.preventDefault();
		$scope.agreeClicked = 1;
		if($scope.emailAgreeCheck == 1)
			$scope.emailAgreeCheck = 0;//@review should use null
		else
			$scope.emailAgreeCheck = 1;
                    //@review should use return statement
	}

	$scope.setPhnAgreeCheck = function($event){
		//$event.preventDefault();
		if($scope.phnAgreeCheck == 1)
			$scope.phnAgreeCheck = 0;//@review should use null
		else
			$scope.phnAgreeCheck = 1;
                    //@review should use return statement
	}

	$scope.$watch('batchDate',function(newVal){
		if(validateDate($scope.batchDate) == false){
			$scope.convschedForm.batchDate.$invalid = true;
		}else{
			$scope.convschedForm.batchDate.$invalid = false;
		}
	});

	$scope.$watch(
                function() {
                    if(typeof $scope.cpg != 'undefined' && typeof $scope.cpg.setLetUsKnowTrigger != 'undefined') {
                        return $scope.cpg.setLetUsKnowTrigger;
                    } else {
                        return false;
                    }
                },function(newVal){
                    if(newVal) {
                        LocService.getCountryData().then(function(data) {
                            $scope.countryDataStatic = data;
                        });
                    }
	});


            $scope.submitConvenientScheduleForm = function(form, dataArr) {
                if (form.$invalid) {
                    $scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
                    $scope.queryStatusClass = "error hidden";
                    $rootScope.adjustDivHeight = {'height':'470px'};
                    return $scope.helpers.FormNotValid(form);
                } else if ($scope.emailAgreeCheck == 0 && $scope.agreeClicked == 1) {
                    return false;
                } else if (validateDate($scope.batchDate) == false) {
                    return false;
                }

                var paramsArr = {name: $scope.personName, email: $scope.personEmail, phone: $rootScope.queryPhoneCode + $scope.personPhone, batchDate: $scope.batchDate, agreeToContact: $scope.phnAgreeCheck, agreeToRcvUpdate: $scope.emailAgreeCheck, queryTyp: 'no_convenient_sch'};
                $scope.gCPCJ.gaFireOnCourseConvenientSubmit();
                var obj3 = {};
                for (var attrname in paramsArr) {
                    obj3[attrname] = paramsArr[attrname];
                }
                for (var attrname in dataArr) {
                    obj3[attrname] = dataArr[attrname];
                }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);

                obj3['countryId'] = locatorCookieObj.country_id;
                obj3['countryName'] = $scope.currentCountry.name;
                obj3['cityId'] = locatorCookieObj.city_id;
                obj3['cityName'] = locatorCookieObj.name;
                obj3['method'] = 'saveNoWorkshopFoundData';
                $rootScope.resetMsgs = 0;
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function(response) {
                            var data = response.data;
                            if (data.status == "Success") {
                                obj3['customerType'] = 'B2C';
                                obj3['leadTrainingType'] = 'classroom';
                                obj3['leadSourceString'] = document.URL;
                                obj3['tagName'] = 'schedule';
                                obj3['leadSource'] = fetchUTMSource();
                                obj3['type'] = 'schedule';
                                obj3['productTypeId'] = user_params.productTypeId;
                                obj3['billingTypeId'] = user_params.billingTypeId;
                                obj3['method'] = 'saveCallback';
                                obj3['GCLID'] = getGCLID();
                                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                                        .then(function(data) {
                                            if (data != null) {
                                                if (data.data.status == 'Success') {
                                                    setUpDataLayer('leadCapture', 'noWorkshopFound', {'leadId': data.data.result.key});
                                                    $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                                                    form.$setPristine();
                                                    $scope.queryStatusMsg = "Your details has been successfully submitted. Our customer support team will get in touch with you soon."
                                                    $scope.queryStatusClass = "success_text";
                                                    $rootScope.convSuccMsg = 1;
                                                    $scope.personName = "";
                                                    $scope.personEmail = "";
                                                    $scope.personPhone = "";
                                                    $scope.batchDate = "";
                                                    $rootScope.convSuccMsg = 1;
                                                    $rootScope.adjustDivHeight = {'height':'215px'};
                                                } else if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                                    $scope.queryStatusMsg = data.data.msg;
                                                }
                                            } else {
                                                if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                                    $scope.queryStatusMsg = data.data.msg;
                                                }
                                            }
                                        });
                            } else {
                                $scope.queryStatusMsg = "Some error occurred. Please try again later."
                                $scope.queryStatusClass = "error";
                            }
                        });
            }


})

.controller('CourseAgendaCtrl', function (LocService,$scope, $rootScope, PostReqService, $cookies, $timeout, LeadService) {
     self = this;
     $rootScope.showCourseAgenda = false;
     $scope.isAagreeCheckDirty = false;
     $scope.cAgreeCheck = false;
     $scope.submitAgendaUrl = '';
     $scope.isEuro = user_params.isEuro;
     $scope.hasValidation = true;
     var PHONE_MAX_LENGTH = 15;
     $scope.submitCourseAgendaPopUp= function (agendaUrl, btnText) {
        var siteModule = 'course agenda';
        WebTracking.eventReq.triggerEvent({
            event_id: "sl_lead_module_initiated",
            event_data: {
                'sl_lead_button_text': btnText || '',
                'sl_lead_type': 'b2c',
                'sl_site_module': siteModule,
            },
            common: "product",
            user_attributes: ['sl_lead_type']
        });
        agendaUrl = $rootScope.submitCourseAgendaPopUp;
        $scope.submitAgendaUrl = agendaUrl;
        //    var agendaCookie = getCookieByName('_cpruid');
        var agendaCookie = getCookieByName('_user_ld_info');
        var agendaLeadCreated=false;
        if(typeof agendaCookie !=="undefined"){
            var courseId=user_params.course_id;
            courseId='c'+courseId;
            var cookieCourseIds = agendaCookie.split(',');
            if(cookieCourseIds.indexOf(courseId) !==-1){
                agendaLeadCreated=true;
            }
        }
        
        if (!$scope.isEuro) {
            if ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '') {
                if (agendaCookie || LeadService.isSkipPopup(siteModule)) {
                    $scope.submitAgendaLead($scope.submitAgendaUrl, agendaLeadCreated, true);
                } else {
                    $rootScope.showCourseAgenda = true;
                }
            }
        }
        // if country is euro and not b2b portal
        if($scope.isEuro && ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')) {
            var optinSet = typeof getCookieByName(user_params.OPTIN_COOKIE) != 'undefined' ? true : false;
            var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
            //if course preview cookie is not created and optin cookie is not created
            //show form
            if (!optinSet || (optin && !agendaCookie)) {
                $rootScope.showCourseAgenda = true;
                //if course preview cookie is set and user has opted in to create lead
                //then show course preview and create lead
            } else if(optin == true && agendaCookie) {
                $scope.submitAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,true);
                window.open($scope.submitAgendaUrl,'_blank');
            } else {
                window.open($scope.submitAgendaUrl,'_blank');
            }
          }
    }

    this.previewLeadForm = {
        phone : { error: 'Please enter a valid phone number' },
        email : { error: 'Please enter a valid email' },
        cAgreeCheck : { error: 'Please accept the agreement' }
    };
    var leadInitiated = false;
    $scope.intiateLead = function () {
        if (!leadInitiated) {
            WebTracking.eventReq.triggerEvent({
                event_id : "sl_lead_user_initiated_lead_form",
                event_data: {
                  'sl_lead_type' : 'b2c',
                  'sl_site_module' : 'course agenda',
                },
                common : "product",
                user_attributes: ['sl_lead_type']
            });
            leadInitiated = true;
        }
    }

    $scope.submitAgendaLead = function (agendaUrl, fetchFromDwnAgenda, isValidate, isFormSubmit) {
        isFormSubmit = (typeof isFormSubmit == 'undefined') ? false : isFormSubmit;
        $scope.isAagreeCheckDirty = true;
        $scope.previewLeadForm.registerStatus = false;
        var userEmail = '';
        var userPhone = '';
        var userName = '';
        if (isValidate) {

        } else {
            if ($scope.hasValidation) {
                userEmail = $scope.previewLeadForm.email.$modelValue;
                userPhone = $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue;
                userName = $scope.previewLeadForm.email.$modelValue;
                if ($scope.previewLeadForm.$invalid) {
                    if ($scope.previewLeadForm.email.$invalid) {
                        $scope.previewLeadForm.email.$setViewValue($scope.previewLeadForm.email.$viewValue);
                    }
                    if ($scope.previewLeadForm.phone.$invalid) {
                        $scope.previewLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                    }
                    return;
                }
                if (!$scope.cAgreeCheck) {
                    return;
                }
            }
        }
        if (document.getElementById("agenda_lead")) {
            document.getElementById("agenda_lead").disabled = true;
        }
        if (user_params.isEuro) {
            if ($scope.cAgreeCheck) {
                setCookie(user_params.OPTIN_COOKIE, 1, 90);
            } else if (isFormSubmit || getCookieByName(user_params.OPTIN_COOKIE) != 1) {
                setCookie(user_params.OPTIN_COOKIE, 0, 90);
            }
        }

        window.open($scope.submitAgendaUrl, '_blank');

        var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
        if (user_params.isEuro && !optin) {
            $scope.disableAgendLeadPopup();
            return;
        }

//         if (!$scope.hasValidation ) {
//              $rootScope.showCourseAgenda = false;
//              $scope.hideAgendLeadPopup();
//              return;
//         }
//         if(!userEmail){
//             return;
//         }/*

        /*
         * Old Params
         * var obj3 = {
         name: userName,
         email: userEmail,
         phone: userPhone,
         queryTxt: "Downloaded Course Agenda",
         query: "Downloaded Course Agenda",
         agreeToContact: $scope.cAgreeCheck,
         queryTyp: 'course-agenda-popup',
         courseId: user_params.course_id,
         courseName: user_params.course_name
         };
         obj3['customerType'] = 'B2C';
         obj3['leadTrainingType'] = 'Not Sure';
         obj3['leadSourceString'] = document.URL;
         obj3['tagName'] = 'course agenda';
         obj3['leadSource'] = fetchUTMSource();
         obj3['type'] = 'course agenda';
         obj3['productTypeId'] = user_params.productTypeId;
         obj3['billingTypeId'] = user_params.billingTypeId;
         obj3['method'] = 'saveCallback';
         obj3['GCLID'] = getGCLID();
         obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
         obj3['fetch_from_cpr_uid'] = false;
         obj3['save_cpr'] = 1;
         if (!$rootScope.isLoggedIn) {
         if (fetchFromCpr)
         obj3['fetch_from_cpr_uid'] = fetchFromCpr;
         }
         */

        if (fetchFromDwnAgenda === false || fetchFromDwnAgenda === null) {
            if (document.getElementById("course_agenda_popup")) {
                var elm = document.getElementById("course_agenda_popup");
                elm.style.pointerEvents = "none";
            } 
            webengage.onReady(function () {
                var siteModule = 'course agenda';
                var dwnAgendaCookieCIds = getCookieByName('_user_ld_info');
                if ((typeof dwnAgendaCookieCIds !== "undefined" && dwnAgendaCookieCIds) || LeadService.isSkipPopup(siteModule)) {
                    var userInfo = [];
                    if(typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined'){
                        userInfo = webengage.state.getForever().uattr;
                        userEmail = userInfo.we_email;
                        userPhone = userInfo.we_phone;
                    }
                }

                var webEngageLeadParams = [];
                if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                    webEngageLeadParams = webengage.state.getForever().uattr;
                }
                var eventData = {
                    'sl_lead_type': 'b2c',
                    'sl_site_module': siteModule,
                    'sl_user_email': userEmail,
                    'sl_user_phone': userPhone || '',
                    'sl_email_opt_in': true,
                    'sl_sms_opt_in': true
                }
                if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_first_name'] !== "undefined" && webEngageLeadParams['we_first_name']) {
                    eventData.sl_user_first_name = webEngageLeadParams['we_first_name'];
                }
                if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_last_name'] !== "undefined" && webEngageLeadParams['we_last_name']) {
                    eventData.sl_user_last_name = webEngageLeadParams['we_last_name'];
                }
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_user_submitted_lead_form",
                    event_data: eventData,
                    common: "product",
                    user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                });
                var obj3 = {
                    sl_user_first_name: userName,
                    sl_user_last_name: userName,
                    queryTxt: "Downloaded Course Agenda",
                    sl_user_message: "Downloaded Course Agenda",
                    sl_product_id: user_params.course_id,
                    sl_product_name: user_params.course_name
                };
                obj3['sl_user_type'] = 'B2C';
                obj3['leadTrainingType'] = 'Not Sure';
                obj3['leadSourceString'] = document.URL;
                obj3['sl_utm_src'] = fetchUTMSource();
                obj3['b2cQueryType'] = 'course agenda';
                obj3['productTypeId'] = user_params.productTypeId;
                obj3['billingTypeId'] = user_params.billingTypeId;
                obj3['GCLID'] = getGCLID();
                obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
//        if(!$rootScope.isLoggedIn){
//            if(fetchFromDwnAgenda)
//                obj3['fetch_from_cpr_uid'] = fetchFromCpr;
//        }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                obj3['countryId'] = locatorCookieObj.country_id;
                obj3['countryName'] = locatorCookieObj.country_name.replace(/\+/g, ' ');
                ;
                obj3['cityId'] = locatorCookieObj.city_id;
                obj3['cityName'] = locatorCookieObj.name;

                // lead prefil info
//        var inputData = {
//            email: userEmail,
//            phone: $scope.previewLeadForm.phone.$viewValue,
//            phoneCode: $scope.queryPhoneCode
//        };
//        var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
//        obj3['prefilled_source'] = prefilInfo.prefilled_source
//        obj3['prefillled_data'] = prefilInfo.prefillled_data
//        obj3['prefilled_modified'] = prefilInfo.prefilled_modified
                obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));
                var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(obj3, webEngageLeadFormParams);
                $scope.gCPCJ.gaFireOnCoursePage('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || course agenda');
                var applicationContentType = 'json';
                PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                        .then(function (data) {
                            if (document.getElementById("agenda_lead")) {
                                document.getElementById("agenda_lead").disabled = false;
                            }
                            if (document.getElementById("course_agenda_popup")) {
                                var elm = document.getElementById("course_agenda_popup");
                                elm.style.pointerEvents = "";
                            }
                            if (data != null) {
                                if (data.status == 200 && data.data.status == "success") {
                                    // Update user hash
                                    var user = $rootScope.userInfo || {};
                                    user.email = userEmail || user.email;
                                    user.phone = $scope.previewLeadForm.phone.$viewValue || user.phone;
                                    user.phoneCode = $scope.queryPhoneCode || user.phoneCode;
                                    PostReqService.setUserHash(user);
                                    var dACId = 'c' + user_params.course_id;
                                    if (dwnAgendaCookieCIds) {
                                        var dwnAgendaCookieCIdArr = dwnAgendaCookieCIds.split(",");
                                        var courseId = 'c' + user_params.course_id;
                                        dwnAgendaCookieCIdArr.push(courseId);
                                        var dACId = dwnAgendaCookieCIdArr.join(",");
                                    }
                                    setCookie('_user_ld_info', dACId, 90);
                                    $rootScope.isPreviewLeadCreated = true;
                                } else {
                                    $scope.popupStatusMsg = "There was some problem, please try again.";
                                    $scope.gCPCJ.gaFireOnCoursePage('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || course agenda');
                                }
                            }
                            $rootScope.showCourseAgenda = false;
                        });
            });

        }


    }

    this.init = function() {
        $scope.isAagreeCheckDirty = false;
        $timeout(function() {
            LocService.getCountryData().then(function(data) {
                $scope.countryData = data;
                LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.cookie_country_name = $scope.selected_country.name;
                $scope.countryDataHeaderDropDown = $scope.countryData;
            });
        }, 2000);

        // Get user information
        var userWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
            var user = (newValue && newValue.email)?newValue:oldValue;
            if(user && user.email && typeof user == 'object') {
                $scope.email = user.email || $scope.email;
                $scope.phone = user.phone || $scope.phone;
                setTimeout(function () {
                                    if (user.phoneCode) {
                                        $scope.queryPhoneCode = user.phoneCode;
                                        $scope.$apply()
                                    }
                        }, 100);
            }
        });
    };
    $scope.$watch('cAgreeCheck', function(newValue, oldValue) {
        $scope.hasValidation = !$scope.isEuro || ($scope.cAgreeCheck && $scope.isEuro);
    });

    /*$scope.$watch('email', function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if( !email_rgx.test(newValue) ){
            $scope.previewLeadForm.email.$setValidity('email', false);
        }
        else {
            $scope.previewLeadForm.email.$setValidity('email', true);
        }
    });*/

    $scope.$watch('phone', function(newValue, oldValue) {
        if ($scope.hasValidation) {
            if (isNaN(newValue)) {
                // console.log($scope.hasValidation);
                $scope.previewLeadForm.phone.$setValidity('phone', false);
            } else if (newValue.length > PHONE_MAX_LENGTH) {
                $scope.previewLeadForm.phone.$setValidity('phone', false);
            } else {
                $scope.previewLeadForm.phone.$setValidity('phone', true);
            }
        }
    });
    $scope.agreeCheck = function() {
        $scope.cAgreeCheck=!$scope.cAgreeCheck;
        $scope.isAagreeCheckDirty = true;
    }

    $scope.hideAgendLeadPopup = function(){
        WebTracking.eventReq.triggerEvent({
            event_id : "sl_lead_form_closed",
            event_data: {
              'sl_lead_type' : 'b2c',
              'sl_site_module' : 'course agenda',
            },
            common : "product",
            user_attributes: ['sl_lead_type']
        });
        $rootScope.showCourseAgenda = false;
    }

    $scope.disableAgendLeadPopup = function(){
        $rootScope.showCourseAgenda = false;
    }

    var setCookie = function(cname, cvalue, exdays, path) {
        path = path || "/";
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + "; " + expires +";path="+path+";";
    }
    this.init();
})

.controller('ECCouncilNotifyMeCtrl', function (LocService,$scope, $rootScope, PostReqService, $cookies, $timeout) {
    var PHONE_MAX_LENGTH = 15;
    this.notifyLeadForm = {
        phone : { error: 'Please enter a valid phone number' },
        email : { error: 'Please enter a valid email' },
        cAgreeCheck : { error: 'Please accept the agreement' }
    };
    $scope.submitNotifyMeLead = function (fetchFromCpr,isValidate) {
        $scope.isAagreeCheckDirty = true;
        //$scope.notifyLeadForm.registerStatus = false;
        var userEmail = '';
        var userPhone = '';
        var userName = '';
        if(isValidate){

        }else{
            userEmail = $scope.notifyLeadForm.email.$modelValue;
            userPhone = $scope.queryPhoneCode + $scope.notifyLeadForm.phone.$modelValue;
            userName = $scope.notifyLeadForm.email.$modelValue;
            if($scope.notifyLeadForm.$invalid) {
                if($scope.notifyLeadForm.email.$invalid) {
                    $scope.notifyLeadForm.email.$setViewValue($scope.notifyLeadForm.email.$viewValue);
                }
                if($scope.notifyLeadForm.phone.$invalid) {
                    $scope.notifyLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                }
                return;
            }
            if(!$scope.cAgreeCheck) {
                return;
            }
        }
        var obj3 = {
          name: userName,
          email: userEmail,
          phone: userPhone,
          queryTxt: "User clicked Notify Me",
          query: "User clicked Notify Me",
          agreeToContact: $scope.cAgreeCheck,
          queryTyp: 'notify-me-popup',
          courseId: user_params.course_id,
          courseName: user_params.course_name
        };
        obj3['customerType'] = 'B2C';
        obj3['leadTrainingType'] = 'Not Sure';
        obj3['leadSourceString'] = document.URL;
        obj3['tagName'] = 'Notify_me';
        obj3['leadSource'] = fetchUTMSource();
        obj3['type'] = 'Notify me';
        obj3['productTypeId'] = user_params.productTypeId;
        obj3['billingTypeId'] = user_params.billingTypeId;
        obj3['method'] = 'saveCallback';
        obj3['GCLID'] = getGCLID();
        obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
        obj3['fetch_from_cpr_uid'] = false;
        obj3['save_cpr'] = 1;
        if(!$rootScope.isLoggedIn){
            if(fetchFromCpr)
                obj3['fetch_from_cpr_uid'] = fetchFromCpr;
        }
        PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
            .then(function (data) {
               $scope.notifyMeFormSubmitStatus = true;
              if (data != null) {
                if (data.data.status == 'Success') {

                    // Update user hash
                    var user = $rootScope.userInfo || {};
                    user.email = userEmail || user.email;
                    user.phone = $scope.notifyLeadForm.phone.$viewValue || user.phone;
                    user.phoneCode = $scope.queryPhoneCode || user.phoneCode;
                    PostReqService.setUserHash(user);

                    $scope.notifyMepopupStatusMsg = "A Simplilearn representative will get back to you soon.";
                } else {
                  $scope.notifyMepopupStatusMsg = "There was some problem, please try again.";
                }
              }

            });
    }

    this.init = function() {
        self = this;
        $rootScope.shownotifyMePopUP = false;
        $scope.isAagreeCheckDirty = false;
        $scope.cAgreeCheck = false;
        $scope.isAagreeCheckDirty = false;
        $scope.notifyMeFormSubmitStatus = false;
        LocService.getCountryData().then(function(data) {
            $scope.countryData = data;
            LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
            $scope.selected_country = LocService.getCurrentCountry();
            $scope.cookie_country_name = $scope.selected_country.name;
            $scope.countryDataHeaderDropDown = $scope.countryData;
        });

        // Get user information
        var userWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
            var user = (newValue && newValue.email)?newValue:oldValue;
            if(user && user.email && typeof user == 'object') {
                $scope.email = user.email || $scope.email;
                $scope.phone = user.phone || $scope.phone;
                userWatch(); // stop listen
            }
        });
    };

    /*$scope.$watch('email', function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if( !email_rgx.test(newValue) ){
            $scope.notifyLeadForm.email.$setValidity('email', false);
        }
        else {
            $scope.notifyLeadForm.email.$setValidity('email', true);
        }
    });*/

    $scope.$watch('phone', function(newValue, oldValue) {
        if(isNaN(newValue)){
            $scope.notifyLeadForm.phone.$setValidity('phone', false);
        }else if(newValue.length > PHONE_MAX_LENGTH){
            $scope.notifyLeadForm.phone.$setValidity('phone', false);
        } else {
            $scope.notifyLeadForm.phone.$setValidity('phone', true);
        }
    });

    $scope.agreeCheck = function() {
        $scope.cAgreeCheck=!$scope.cAgreeCheck;
        $scope.isAagreeCheckDirty = true;
    }

    $scope.hidenotifyLeadPopup = function(){
        $rootScope.shownotifyMePopUP = false;
    }

    var setCookie = function(cname, cvalue, exdays, path) {
        path = path || "/";
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + "; " + expires +";path="+path+";";
    }
})
.filter('floor', function() {
    return function(input) {
        return Math.floor(input);
    };
});
 /*------------- End : CoursePageCtrl.js-----------*/ 

 /*------------- Begin : CoursePageFormController.js-----------*/ 

angular.module('Simplilearn')
.controller('CoursePageFormController', function($scope,$http,$cookies,LocService,$rootScope,LeadService,PostReqService,$timeout) {
	$scope.userName = "";
	$scope.userEmail ='';
	$scope.userPhone = ''; //@review looks wrong
	$scope.userPhoneB = '';
	$scope.userQuery = '';
        $scope.tagName = '';
	$scope.contactMe = 1;
	$scope.agreeClicked = 0;
	$scope.successDisplayStatus = {'display':'none'}; //@review can come from config
	$scope.failedDisplayStatus = {'display':'none'};//@review can come from config
	$scope.fomrDisplayStatus = {'display':'block'};//@review can come from config
	$scope.successMsg = "Thank you for reaching out to us, Our consultants will get in touch with you soon!";
	$scope.failedMsg="Some error occurred. Please try again later.";
	$scope.currentCountry = null;
	$scope.helpers = new helpers();
	$scope.selected_course = '';
	$scope.customerType = 'B2C';
        $scope.customerTypeDirty = true;
        $rootScope.partialVisibility = true;
        $scope.productTypeId='';
        $scope.billingTypeId='';
        $scope.mmSuccessMsg=false;
        $scope.courseData = new Array('{"name":"Select Course","id":"","type":"","productTypeId":"","billingTypeId":""}');
        var pageType = '';
        var userInterest = '';
        $scope.showThisFrm = 1;
        $scope.displayDiv = ($rootScope.mobWidthFlag==1 || $rootScope.hybridWidthFlag==1)?'mob_drop_query':'';
        var PHONE_MAX_LENGTH = 15;
	//alert($rootScope.queryPhoneCode);

        /** Run with controller initialization **/
        initAction();
        function initAction() {
            // Set default form to B2B, based on the sorce
            var source = getParameterByName('source');
            if(source == 'b2b_site') {
                $scope.showThisFrm = 2;
            }
        }

	$scope.form_init = function(courseId,courseName,pInterest,pPage,productTypeId,billingTypeId){
                userInterest = pInterest;
                pageType = pPage;
                $scope.productTypeId = productTypeId;
                $scope.billingTypeId = billingTypeId;

		if(courseId != '' &&  courseName != ''){
			$scope.selected_course = '{"name":"'+courseName+'","id":"'+courseId+'","type":""}';
		}else{
			$scope.selected_course = '{"name":"Select Course","id":"","type":""}';
		}
        $timeout(function() {
			LocService.getCountryData().then(function(data) {
				$scope.currentCountry = LocService.getCurrentCountry();
            });
        }, 2000);

	}

	$scope.setCustomerType = function(pCustomerType) {
            $scope.customerTypeDirty = true;

            if( $scope.customerType && $scope.customerType === pCustomerType ) {
                $scope.customerType = null;
            }
            else {
                $scope.customerType = pCustomerType;
            }
        };

        $scope.setPartialVisibility = function( pStatus ) {
                $rootScope.partialVisibility = pStatus;
        };

	$scope.updateSelect = function(){
		var courseObj = JSON.parse($scope.selected_course);
                var formObj = document.querySelectorAll('form[name="contactTrainerForm"]')[0];
		if(courseObj.id == '0' || courseObj.id == '' || courseObj.id.length == 0){
                    if(formObj.getElementsByClassName("rcb_course_select").length > 0)
			formObj.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_error select_wraper";
		}else{
                    if(formObj.getElementsByClassName("rcb_course_select").length > 0)
			formObj.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_wraper";
                    $scope.productTypeId=courseObj.productTypeId;
                    $scope.billingTypeId=courseObj.billingTypeId;
                    if(courseObj.id){
                        var selectedCID=courseObj.id;
                        var courseDetailResponse=PostReqService.getSelectedCourseDetailById(selectedCID).then(function(data){
                            $scope.selectedCourseInfo={};
                            if(data){
                                $scope.selectedCourseInfo=data;
                            }
                        });
                    }
		}

	}
	var recalculateFormHeight = function(){
            if(!isDesktopDevice()){
                if(window.innerWidth < 768){
                    $rootScope.showDrpQueryFrm.height = "550px";
                }else{
                    $rootScope.showDrpQueryFrm.height = "460px";
                }

            }
        }
	$scope.submitContactTrainerForm = function(submitUrl,dataArr, source, pageSource,isSemPage,formIndex){

            var courseObj = JSON.parse($scope.selected_course);
			$scope.customerTypeDirty = true;
                        $scope.agreeClicked = 1;
                        if (typeof isSemPage !== 'undefined' && parseInt(isSemPage)===1) {
                            $scope.contactMe=1;
                            gaPageCategory='';
                        }
                        var formObj = document.querySelectorAll('form[name="contactTrainerForm"]')[0];
		if($scope.contactTrainerForm.$invalid){
			$scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
			$scope.queryStatusClass = "error_msg error hidden";
			if(courseObj.id == '0' || courseObj.id == '' || courseObj.id.length == 0){
                            if(formObj.getElementsByClassName("rcb_course_select").length > 0)
				formObj.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_error select_wraper";
			}
                        recalculateFormHeight();
			return $scope.helpers.FormNotValid($scope.contactTrainerForm);

		}else if(courseObj.id == '0' || courseObj.id == '' || courseObj.id.length == 0){
                    if(formObj.getElementsByClassName("rcb_course_select").length > 0)
			formObj.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_error select_wraper";
                        recalculateFormHeight();
			return false;
		}else if($scope.contactMe == 0 && $scope.agreeClicked == 1){
			return false;
		}
                var request_call_back = document.getElementsByClassName('b2c_lead_form');
                if (request_call_back) {
                    for (var i = 0; i < request_call_back.length; ++i) {
                        request_call_back[i].disabled = true;
                    }
                }
		$scope.agreeClicked = 0;
                $scope.customerTypeDirty = false;
                if(!$scope.customerType){
                    $scope.customerType = 'b2c';
                }
                var userQuery = '';
                if( userInterest ) {
                    userQuery += 'This user is interested in ' + userInterest + ' <br/> Query :';
                }

                if( courseObj.type && courseObj.type != 'course' ) {    //incase of products other than course, modify userquery
                    userQuery = '';
                    userQuery += 'This user is interested in ' + courseObj.name + ' <br/> Query :';
                }
                var objName = '';
                userQuery += $scope.userQuery;
                if (pageSource == 'course list') {
                    objName = ' || ';
                    $scope.tagName = 'Category_Query_box';
                } else if (pageSource == 'masters-program') {
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name + ' || ';
                    $scope.tagName = 'b2c masters';
                }else if (pageSource == 'sem-landing-master') {
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name + ' || ';
                    $scope.tagName = 'Query box';
                }else if(pageSource == 'master_of_masters') {
                    objName = user_params.bundle_name + ' || ';
                    $scope.tagName = 'get_more_info';
                }else {
                    if(typeof user_params.course_name != 'undefined')
                        objName = user_params.course_name +  ' || ';
                    $scope.tagName = 'Query box';
                }
                    var leadSourceString=document.URL;
                    $scope.refName = $scope.userName;
                    $scope.refEmail = $scope.userEmail;
                    /*
                     * old Params
                     * var paramsArr = {name:$scope.userName,email:$scope.userEmail,phone:$scope.phoneCode+$scope.userPhone,query:userQuery,agreeToContact:$scope.contactMe,courseId:courseObj.id,courseName:courseObj.name,leadTrainingType:'Not Sure',leadSourceString:leadSourceString, customerType:$scope.customerType,tagName:$scope.tagName,leadSource:fetchUTMSource(),GCLID: getGCLID()};
                     */
                    //var paramsArr = {sl_user_first_name:$scope.userName,sl_user_last_name:$scope.userName,sl_user_email:$scope.userEmail,sl_user_phone:$scope.phoneCode+$scope.userPhone,sl_user_message:userQuery,sl_email_opt_in:$scope.contactMe,sl_sms_opt_in:$scope.contactMe,sl_product_id:courseObj.id,sl_product_name:courseObj.name,leadTrainingType:'Not Sure',leadSourceString:leadSourceString, sl_user_type:$scope.customerType,sl_site_module:$scope.tagName,sl_utm_src:fetchUTMSource(),GCLID: getGCLID()};

		 var obj3 = {};
		//for (var attrname in paramsArr) { obj3[attrname] = paramsArr[attrname]; }
		var locatorCookie = getCookieByName('locatori9');
		var locatorCookieObj = JSON.parse(locatorCookie);
		obj3['countryId'] = locatorCookieObj.country_id;
		obj3['countryName'] = locatorCookieObj.country_name .replace(/\+/g, ' ');;
		obj3['cityId'] = locatorCookieObj.city_id;
		obj3['cityName'] = locatorCookieObj.name;
                obj3['productTypeId'] = $scope.productTypeId;
                obj3['billingTypeId'] = $scope.billingTypeId;

                // lead prefil info
                var inputData = {
                    name: $scope.userName,
                    email: $scope.userEmail,
                    phone: $scope.userPhone,
                    phoneCode: $scope.phoneCode
                };
                var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
                obj3['prefilled_source'] = prefilInfo.prefilled_source
                obj3['prefillled_data'] = prefilInfo.prefillled_data
                obj3['prefilled_modified'] = prefilInfo.prefilled_modified
                obj3['lead_uid'] = generateLeadId($scope.userEmail);
                obj3['personEmail']=$scope.userEmail;
                var formType = 'b2c';
                var nameDiv = $scope.userName.split(/ (.+)/);
                /**
                 * Only In case of 'Category_Query_box' remove the below fields
                 */
                var eventData={
                        'sl_lead_type' : formType,
                        'sl_site_module' : $scope.tagName,
                        'sl_user_email': $scope.userEmail,
                        'sl_user_first_name' : typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                        'sl_user_last_name' : typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                        'sl_user_phone' : $scope.phoneCode + $scope.userPhone || '',
                        'sl_email_opt_in' : true,
                        'sl_sms_opt_in': true,
                        'sl_product_id':Number(courseObj.id),
                        'sl_product_name':courseObj.name
                }
                if (typeof obj3['productTypeId'] !== "undefined") {
                        if (parseInt(obj3['productTypeId']) === 1) {
                            eventData.sl_product_type = 'course';
                        } else if (parseInt(obj3['productTypeId']) === 2) {
                            eventData.sl_product_type = 'bundle';
                        }
                }
                var selectedCourseInfo=$scope.selectedCourseInfo || '';
                if($scope.tagName == 'Category_Query_box' || ($scope.tagName == 'Query box' &&  (typeof selectedCourseInfo !=='undefined' || selectedCourseInfo !=null ) && Object.keys(selectedCourseInfo).length > 0) || ($scope.tagName == 'b2c masters' && (typeof selectedCourseInfo !=='undefined' || selectedCourseInfo !==null ) && Object.keys(selectedCourseInfo).length > 0)){
                    /*if(!selectedCourseInfo){
                            var courseDetailResponse=PostReqService.getSelectedCourseDetailById(courseObj.id).then(function(data){
                            $scope.selectedCourseInfo={};
                            if(data){
                                $scope.selectedCourseInfo=data;
                                selectedCourseInfo=$scope.selectedCourseInfo;
                            }
                        });
                        }*/
                        if (Object.keys(selectedCourseInfo).length > 0) {
                            for (var attrname in selectedCourseInfo) {
                                eventData[attrname] = selectedCourseInfo[attrname];
                            }
                        }
                }
                 WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_user_submitted_lead_form",
                    event_data: eventData,
                    common: "product",
                    user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_user_phone'],
                });
                var webEngageLeadFormParams=WebTracking.eventReq.eventParam.event_data;
                var paramsArr = {
                                 sl_user_message:userQuery,
                                 sl_product_id:courseObj.id,
                                 sl_product_name:courseObj.name,
                                 leadTrainingType:'Not Sure',
                                 leadSourceString:leadSourceString,
                                 sl_user_type:$scope.customerType,
                                 sl_utm_src:fetchUTMSource(),
                                 GCLID: getGCLID(),
                                 b2cQueryType:'drop_query'
                                };
                for (var attrname in paramsArr) { obj3[attrname] = paramsArr[attrname]; }
                for (var attrname in dataArr) { obj3[attrname] = dataArr[attrname]; }
                if (pageSource == 'master_of_masters') {
                    obj3['b2cQueryType'] = 'drop_query_mom';
                }
                var finalB2CParamArr=PostReqService.prepareB2CLeadParameters(obj3,webEngageLeadFormParams);
		var applicationContentType='json';
                PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr,applicationContentType).then(function(data) {
                    var request_call_back = document.getElementsByClassName('b2c_lead_form');
                    if (request_call_back) {
                        for (var i = 0; i < request_call_back.length; ++i) {
                            request_call_back[i].disabled = false;
                        }
                    }
                    if (data.status == 200 && data.data.status == "success") {
                        if (data.data.message == "Success") {
                            // Update user hash
                            var user = $rootScope.userInfo || {};
                            user.name = $scope.userName || user.name || '';
                            user.email = $scope.userEmail || user.email;
                            user.phone = $scope.userPhone || user.phone || '';
                            user.phoneCode = $scope.phoneCode || user.phoneCode;
                            $scope.mmSuccessMsg=true;
                            PostReqService.setUserHash(user);
                            setUpDataLayer('leadCapture', 'dropUsAQuery', {'leadId': data.data.data.lead_id});
                            $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + objName + $scope.tagName);
                            if (typeof isSemPage !== 'undefined' && parseInt(isSemPage) === 1 && formIndex === 2) {
                                if (pageSource == 'sem-landing-course') {
                                    $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('SemCourseForm2LeadSubmit', user_params.user_id + ' || ' + document.URL + ' || ' + $scope.tagName + ' || ' + user_params.course_name + ' || ' + 'form 2');
                                }
                                if (pageSource == 'sem-landing-master') {
                                    $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('SemCourseForm2LeadSubmit', user_params.user_id + ' || ' + document.URL + ' || ' + $scope.tagName + ' || ' + user_params.bundle_name + ' || ' + 'form 2');
                                }
                            }
                            if($scope.mmSuccessMsg && typeof document.getElementById('success-msg-mm') && document.getElementById('success-msg-mm') !='undefined' && document.getElementById('success-msg-mm')) {
                                document.getElementById('success-msg-mm').style.display = 'block';
                            }
                        }
                        $scope.successDisplayStatus = {'display': 'block'};
                        $scope.fomrDisplayStatus = {'display': 'none'};
                        if ((typeof isSemPage !== 'undefined' && parseInt(isSemPage)===1) || (typeof pageType !== 'undefined' && pageType=='mom_page')) {
                            var delay = 12000;
                            if (pageType == 'mom_page') {
                                delay = 3000;
                            }
                            $timeout(function () {
                                $scope.successDisplayStatus = {'display': 'none'};
                                $scope.fomrDisplayStatus = {'display': 'block'};
                                $scope.mmSuccessMsg=false;
                                if (pageSource == 'master_of_masters') {
                                    document.getElementById('mm-lead-form').style.display = 'none';
                                }
                            }, delay);
                        }
                        if (data.response != null && typeof data.response.data.msg != 'undefined' && data.response.data.msg != '') {
                            $scope.successMsg = data.response.data.msg;
                        }
                        $scope.userName = '';
                        $scope.userEmail = '';

                        if (pageSource == 'course list') {
                            $scope.gaCoursePageFormControllerJs.gaFireCourseListQuerySubmit($scope.catTitle);
                        } else if (pageSource == 'course') {

                            $scope.gCPCJ.gaFireCoursePageQuerySubmit();
                        }

                        if (pageType == 'LVCPASS') {
                            $scope.gaCoursePageFormControllerJs.gaFireLVCPassSubmit(locatorCookieObj.country_name);
                        }
                        if (gaPageCategory != '') {
                            $scope.gaCoursePageFormControllerJs.gaFireSubscriptionQuerySubmit();
                        }
                        $scope.userQuery = '';
                        if(pageSource != 'master_of_masters') {
                            $scope.contactMe = 0;
                        }
                        $scope.contactTrainerForm.$setPristine();
                    } else {
                        $scope.failedDisplayStatus = {'display': 'block'};
                        if (data.response != null && typeof data.response.data.msg != 'undefined' && data.response.data.msg != '') {
                            $scope.failedMsg = data.response.data.msg;
                        }else{
                            $scope.failedMsg = "Some error occured. Please try again."
                        }
                        $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || ' + $scope.tagName);
                    }
		}).catch(function (data) {
                    if (document.getElementById("b2c_lead")) {
                        document.getElementById("b2c_lead").disabled = false;
                    }
                });

	}

	$scope.submitReferralQueryForm = function(submitUrl,dataArr,pageSource){
	    if(($scope.referPhone == undefined || $scope.referPhone == '')
	            && ($scope.referEmail == undefined || $scope.referEmail == '')
	            && ($scope.referPhone2 == undefined || $scope.referPhone2 == '')
	            && ($scope.referEmail2 == undefined || $scope.referEmail2 == '')
	            && ($scope.referEmail3 == undefined || $scope.referEmail3 == '')
	            && ($scope.referPhone3 == undefined || $scope.referPhone3 == '')){
            $scope.referralQueryForm.referEmail.$setValidity('required', false);
        }
        if(($scope.referPhone == undefined || $scope.referPhone == '') && $scope.referEmail != undefined){
            $scope.referralQueryForm.referPhone.$setValidity('required', false);
        }
        if(($scope.referEmail == undefined || $scope.referEmail == '') && $scope.referPhone != undefined){
            $scope.referralQueryForm.referEmail.$setValidity('required', false);
        }
        if(($scope.referPhone2 == undefined || $scope.referPhone2 == '') && $scope.referEmail2 != undefined){
            $scope.referralQueryForm.referPhone2.$setValidity('required', false);
        }
        if(($scope.referEmail2 == undefined || $scope.referEmail2 == '') && $scope.referPhone2 != undefined){
            $scope.referralQueryForm.referEmail2.$setValidity('required', false);
        }
        if(($scope.referPhone3 == undefined || $scope.referPhone3 == '') && $scope.referPhone3 != undefined){
            $scope.referralQueryForm.referPhone3.$setValidity('required', false);
        }
        if(($scope.referEmail3 == undefined || $scope.referEmail3 == '') && $scope.referPhone3 != undefined){
            $scope.referralQueryForm.referEmail3.$setValidity('required', false);
        }
        if($scope.referralQueryForm.$invalid){
            $scope.referralQueryForm.referEmail.$setValidity('required', true);
            $scope.referralQueryForm.referEmail2.$setValidity('required', true);
            $scope.referralQueryForm.referEmail3.$setValidity('required', true);
            return $scope.helpers.FormNotValid($scope.referralQueryForm);
        }
        var leadsEmailVal = [$scope.referEmail,$scope.referEmail2, $scope.referEmail3];
        var leadsPhVal = [$scope.referPhone,$scope.referPhone2, $scope.referPhone3];

        var leadSourceString=window.location.href;
        var reff = 'http://www.simplilearn.com/corporate-training';
        var params = {formid:1044,munchkinId:'788-AZS-915',_mkt_trk:'id:788-AZS-915&token:_mch-simplilearn.com-1470985701688-56063',formVid:'1044',_mktoReferrer:reff};
        var courseObj = JSON.parse($scope.selected_course);
        var formObj = document.querySelectorAll('form[name="referralQueryForm"]')[0];
        for(var i = 0; i< leadsEmailVal.length; i++){
            if(leadsEmailVal[i] != undefined){
                    if(!$scope.customerType){
                        $scope.customerType = 'B2C';
                    }
                    var userQuery = '';
                    if( userInterest ) {
                        userQuery += 'This user is interested in ' + userInterest + ' <br/> Query :';
                    }

                    if( courseObj.type && courseObj.type != 'course' ) {    //incase of products other than course, modify userquery
                        userQuery = '';
                        userQuery += 'This user is interested in ' + courseObj.name + ' <br/> Query :';
                    }

                    userQuery += $scope.userQuery;
                    if (pageSource == 'course list') {
                        $scope.tagName = 'Category_Query_Referral';
                    } else if (pageSource == 'masters-program') {
                        $scope.tagName = 'b2c masters query referral';
                    }
                    else {
                        $scope.tagName = 'Query Referral';
                    }
                    var leadSourceString=document.URL;
                    var paramsArr = {referrer_email:$scope.refEmail,referrer_name:$scope.refName,name:leadsEmailVal[i],email:leadsEmailVal[i],phone:leadsPhVal[i],query:userQuery,agreeToContact:0,courseId:courseObj.id,courseName:courseObj.name,leadTrainingType:'Not Sure',leadSourceString:leadSourceString, customerType:$scope.customerType,tagName:$scope.tagName,leadSource:fetchUTMSource(),GCLID: getGCLID()};

             var obj3 = {};
            for (var attrname in paramsArr) { obj3[attrname] = paramsArr[attrname]; }
            for (var attrname in dataArr) { obj3[attrname] = dataArr[attrname]; }
            var locatorCookie = getCookieByName('locatori9');
            var locatorCookieObj = JSON.parse(locatorCookie);
            obj3['countryId'] = locatorCookieObj.country_id;
            obj3['countryName'] = locatorCookieObj.country_name;
            obj3['cityId'] = locatorCookieObj.city_id;
            obj3['cityName'] = locatorCookieObj.name;
            obj3['productTypeId'] = $scope.productTypeId;
            obj3['billingTypeId'] = $scope.billingTypeId;
            obj3['lead_uid'] = generateLeadId($scope.userEmail);
            LeadService.createLead(obj3).then(function(data) {
                        if (data.status == true) {
                            $scope.successDisplayStatus = {'display': 'none'};
                            $scope.fomrDisplayStatus = {'display': 'block'};
                            if (data.response != null && typeof data.response.data.msg != 'undefined' && data.response.data.msg != '') {
                                $scope.successMsg = data.response.data.msg;
                            }
                            $scope.referralQueryForm.$setPristine();
                        } else {
                            $scope.failedDisplayStatus = {'display': 'block'};
                            if (data.response != null && typeof data.response.data.msg != 'undefined' && data.response.data.msg != '') {
                                $scope.failedMsg = data.response.data.msg;
                            }else{
                                $scope.failedMsg = "Some error occured. Please try again."
                            }
                        }
                });
            }
        }
        $scope.referEmail = $scope.referEmail2 = $scope.referEmail3 = '';
        $scope.referPhone = $scope.referPhone2 = $scope.referPhone3 = '';
}
	$scope.$watch('referPhone', function(newValue) {
        if(newValue != undefined && isNaN(newValue)){
            $scope.referralQueryForm.referPhone.$setValidity('required', false);
        }else if(newValue != undefined && newValue.length > PHONE_MAX_LENGTH){
            $scope.referralQueryForm.referPhone.$setValidity('required', false);
        } else if(newValue != undefined){
            $scope.referralQueryForm.referPhone.$setValidity('required', true);
        }
    });
	$scope.$watch('referPhone2', function(newValue) {
        if(newValue != undefined && isNaN(newValue)){
            $scope.referralQueryForm.referPhone2.$setValidity('required', false);
        }else if(newValue != undefined && newValue.length > PHONE_MAX_LENGTH){
            $scope.referralQueryForm.referPhone2.$setValidity('required', false);
        }else if(newValue != undefined){
            $scope.referralQueryForm.referPhone2.$setValidity('required', true);
        }
    });
	$scope.$watch('referPhone3', function(newValue) {
        if(newValue != undefined && isNaN(newValue)){
            $scope.referralQueryForm.referPhone3.$setValidity('required', false);
        }else if(newValue != undefined && newValue.length > PHONE_MAX_LENGTH){
            $scope.referralQueryForm.referPhone3.$setValidity('required', false);
        }else if(newValue != undefined){
            $scope.referralQueryForm.referPhone3.$setValidity('required', true);
        }
    });

	$scope.$watch('userPhone', function(newValue) {
		if(isNaN(newValue)){
                        if(typeof $scope.contactTrainerForm !=="undefined")
			$scope.contactTrainerForm.userPhone.$setValidity('required', false);
		}else if(newValue.length > PHONE_MAX_LENGTH){
                        if(typeof $scope.contactTrainerForm !=="undefined")
			$scope.contactTrainerForm.userPhone.$setValidity('required', false);
		}
                //@review no else?
                //@review can use return statement.
	});

        $scope.$watch('userPhoneB', function (newValue) {
            if (isNaN(newValue)) {
                if (typeof $scope.enterpriseQuery !== "undefined")
                    $scope.enterpriseQuery.userPhoneB.$setValidity('required', false);
                else if (typeof $scope.enterpriseContactUs !== "undefined")
                    $scope.enterpriseContactUs.userPhoneB.$setValidity('required', false);
                else if (typeof $scope.higherEducationBottomForm !== "undefined")
                    $scope.higherEducationBottomForm.userPhoneB.$setValidity('required', false);
                else if (typeof $scope.higherEducationTopForm !== "undefined")
                    $scope.higherEducationTopForm.userPhoneB.$setValidity('required', false);
            } else if (newValue.length > PHONE_MAX_LENGTH) {
                if (typeof $scope.enterpriseQuery !== "undefined")
                    $scope.enterpriseQuery.userPhoneB.$setValidity('required', false);
                else if(typeof $scope.enterpriseContactUs !== "undefined")
                    $scope.enterpriseContactUs.userPhoneB.$setValidity('required', false);
                else if (typeof $scope.higherEducationBottomForm !== "undefined")
                    $scope.higherEducationBottomForm.userPhoneB.$setValidity('required', false);
                else if (typeof $scope.higherEducationTopForm !== "undefined")
                    $scope.higherEducationTopForm.userPhoneB.$setValidity('required', false);
            }
            //@review no else?
            //@review can use return statement.
        });

    $scope.$watch('phoneCode', function(newValue) {
//            $scope.userPhone = '';
//            $scope.userPhoneB = '';
	});

	$scope.toggleContactMe = function(){//@review rename function to toggleContactMe: Done
		$scope.agreeClicked = 1;
		if($scope.contactMe == 0){
			$scope.contactMe = 1;
		}else{
			$scope.contactMe = 0;
		}
                //@review should use return statement
	}
	$scope.courseDropdownStatus = 0;


	$scope.courseActivated = 0;
	$scope.toggleCourseDrpDwn = function() {
		if ($scope.courseDropdownStatus === 0) {
			$scope.courseDropdownStatus = 1;
		}
		else {

			$scope.courseDropdownStatus = 0;
		}
		$scope.courseActivated = 1;
	};

	$scope.getCourseDropdownStatus = function() {
		return $scope.courseDropdownStatus;
	};

	$scope.setCurrentCourse = function(pCourse) {
		$scope.selected_course = pCourse;


	};
        var gaClassForCoursePageForm = function() {
            this.gaFireCourseListQuerySubmit = function(name) {
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('courselistpagequeryformsubmit', name);
            }
            this.gaFireOnCoursePage = function(cat, label) {
                var ga = new gaEventsTracker();
                if (typeof label !== 'undefined' && label) {
                    ga.gaFireInteractiveEvents(cat, label);
                } else {
                    ga.gaFireInteractiveEvents(cat);
                }
            }

            this.gaFireLVCPassSubmit = function(name){
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('lvcpassLead', name);
            }

            this.gaFireSubscriptionQuerySubmit = function(){
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('subsLead', '');
            }
        };
        $scope.gaCoursePageFormControllerJs = new gaClassForCoursePageForm();

        $scope.$watch(function() {
			return $rootScope.showMobDropQuery;
		  }, function(newVal) {
			if(newVal.display == 'inline-block'){
				if(!isDesktopDevice() && pageCategory != 'course_index' && pageCategory != 'course-list_index' && pageCategory != 'bundle_index' && pageCategory != 'lvc-pass_index'){
                                        var urlObj = $scope.helpers.makeValidApiUrl('getCoursesForDropQuery');
					$http.get(urlObj.url, {cache: urlObj.cached})
					.success(function(data) {
						$scope.courseData = $scope.courseData.concat(data.content);
						$scope.courseData[0] = JSON.parse($scope.courseData[0]);
						$scope.selected_course = '{"name":"Select Course","id":"","type":"","productTypeId":"","billingTypeId":""}';

					});
				}
			}
		  });

        $scope.showThisForm = function(type){
            $scope.showThisFrm = type;
        };

        $scope.displayJobTitle = false;
        if(user_params.pageCategory == 'bundle_index' || user_params.pageCategory == 'course_index'){
            $scope.displayJobTitle = true;
        }

        $scope.cFirstName= '';
        $scope.cLastName = '';
        $scope.cEmail = '';
        $scope.cCompany = '';
        $scope.jobTitle = '';
        $scope.university = '';
        $scope.cCountry = 0;
        $scope.cState = 0;
        $scope.cNoEmps = 0;
        $scope.cAgreeToCnt = 1;
        $scope.cContactMe = 1;
        $scope.displayState = 0;
        $scope.country_error = '';
        $scope.state_error = '';
        $scope.cNoEmps_error = '';
        $scope.displayMarketoMsg = 0;
        $scope.onSubmitClass = "";
        $scope.cSiteModule = '';
        $scope.formName = '';
        $scope.isFormSub=0;

        $scope.$watch('jobTitle',function(newVal){
            if(user_params.pageCategory == 'bundle_index' || user_params.pageCategory == 'course_index'){
                if( newVal !== ''){
                    $scope[$scope.formName].jobTitle.$error.required=false;
                }else{
                    if($scope.isFormSub && $scope[$scope.formName].jobTitle.$dirty)
                        $scope[$scope.formName].jobTitle.$error.required=true;
                }
            }
        });

        $scope.setFormName = function(fname){
            $scope.formName = fname;
        };
        $scope.leadFormTabClick= function(formType,pageSource,courseName,buttonText){
            var label = '';
            if(formType == 'b2b'){
                if (pageSource == 'course list') {
                    label += 'B2B_Category_Query_box';
                } else if (pageSource == 'masters-program') {
                        label += 'b2b masters';
                }
                else {
                        label += 'B2b Query box';
                }
            } else if(formType == 'b2c'){
                if (pageSource == 'course list') {
                    label += 'Category_Query_box';
                } else if (pageSource == 'masters-program') {
                        label += 'b2c masters';
                }
                else {
                        label += 'Query box';
                }
            }
            WebTracking.eventReq.triggerEvent({
                event_id : "sl_lead_query_box_toggle_clicked",
                event_data: {
                    'sl_form_toggle_active' : buttonText,
                    'sl_lead_type' : formType,
                    'sl_site_module' : label,
                },
                common : "product",
                user_attributes: ['sl_lead_type']
            });
            var label = user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + label;

            $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leadformclicked', label);
        }
        $scope.submitMarketoEnterpriseForm = function(e){

            // Clear email suggession box
            if(MailcheckDirective && MailcheckDirective.resetSuggessionBox) {
                MailcheckDirective.resetSuggessionBox();
            }
            $scope.isFormSub=1;
            var countryList = new Array('Canada','United States');
            var form = e.target.form.name;
            var stateName = '';
            $scope.updateEntCountry();
            $scope.updateStateCheck();
            $scope.numEmpCheck();

            var jobTitleFlag = false;
            if(user_params.pageCategory == 'bundle_index' || user_params.pageCategory == 'course_index'){
                if($scope.jobTitle == '' || $scope.jobTitle == 'undefined'){
                    $scope[e.target.form.name].jobTitle.$error.required=true;
                    $scope[e.target.form.name].jobTitle.$dirty=true;
                    jobTitleFlag = true;
                }else{
                    $scope[e.target.form.name].jobTitle.$error.required=false;
                    $scope[e.target.form.name].jobTitle.$dirty=false;
                }
            }
            var delay = 12000;
            if($scope.pageType == 'b2b_course_page'){
                delay = 3000;
            }
            var higherEducationForm=false;
            var isHigherEducationPage = false;
            if( user_params.pageCategory == 'higher-education-partnership-program-for-universities_index'){
                isHigherEducationPage = true;
                delay=3000;
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
		var locatorCountry = locatorCookieObj.country_name;
                $scope.cCountry=locatorCountry .replace(/\+/g, ' ');
                $scope.cNoEmps='';
                var nameDiv = $scope.cFirstName.split(/ (.+)/);
                        $scope.cFirstName = typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "";
                        $scope.cLastName = typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "";
                        //console.log("aaaab",$scope.cLastName,"aaa");
//                $scope.cLastName=$scope.cFirstName;
                if($scope.university == '' || $scope.university == 'undefined'){
                    $scope[e.target.form.name].university.$error.required=true;
                    $scope[e.target.form.name].university.$dirty=true;
                    higherEducationForm = true;
                }else{
                    $scope.cCompany=$scope.university;
                    $scope[e.target.form.name].university.$error.required=false;
                    $scope[e.target.form.name].university.$dirty=false;
                }
                if($scope.cFirstName == '' || $scope.cFirstName == 'undefined'){
                    $scope[e.target.form.name].cFirstName.$error.required=true;
                    $scope[e.target.form.name].cFirstName.$dirty=true;
                    higherEducationForm = true;
                }else{
                    $scope[e.target.form.name].cFirstName.$error.required=false;
                    $scope[e.target.form.name].cFirstName.$dirty=false;
                }
            }
            if(jobTitleFlag || higherEducationForm || $scope[form].$invalid){
                return $scope.helpers.FormNotValid($scope[form]);
            }else if($scope.cContactMe == 0 && $scope.cAgreeToCnt == 1){
                return false;
            }else{
                if(window.location.href == frontendUrl+'/agile-and-scrum/csm-certification-training'){
                    var leadSourceString=document.URL;
                    var obj3 = {
                          name: $scope.cFirstName + $scope.cLastName,
                          email: $scope.cEmail,
                          phone: $scope.phoneCode + $scope.userPhoneB,
                          query: $scope.cCompany+ " with Employe Range "+ $scope.cNoEmps,
                          agreeToContact: 1,
                          courseId: 4,
                          courseName: 'Certified ScrumMaster<sup>®</sup> (CSM)',
                          customerType:'B2B',
                          leadTrainingType:1,
                          leadSourceString:leadSourceString,
                          tagName:'b2b_query_course_page',
                          leadSource:fetchUTMSource(),
                          type:'b2b_query_course_page',
                          productTypeId:user_params.productTypeId,
                          billingTypeId:user_params.billingTypeId,
                          method:'saveCallback',
                          GCLID: getGCLID()
                        };

                        // lead prefil info
                        var inputData = {
                            name: obj3.name,
                            email: obj3.email,
                            phone: $scope.userPhoneB,
                            phoneCode: $scope.phoneCode
                        };
                        var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
                        obj3['prefilled_source'] = prefilInfo.prefilled_source
                        obj3['prefillled_data'] = prefilInfo.prefillled_data
                        obj3['prefilled_modified'] = prefilInfo.prefilled_modified

                        PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                            .then(function (data) {
                              // remove success
                            });
                }else{
                    var siteModule = $scope.cSiteModule;
                    if(typeof $scope.cSiteModuleCustom === 'string' && $scope.cSiteModuleCustom.length > 0 ) {
                        siteModule = $scope.cSiteModuleCustom;
                    }
                    if($scope.cState)
                        stateName = $scope.cState;
                    var StateCountryRequire = new Array('United States','Canada');
                    var leadSourceString=window.location.href;
                    var url = 'https://app-ab17.marketo.com/index.php/leadCapture/save2';
                    var reff = 'http://www.simplilearn.com/corporate-training';
                    var params = {formid:1044,munchkinId:'788-AZS-915',_mkt_trk:'id:788-AZS-915&token:_mch-simplilearn.com-1470985701688-56063',formVid:'1044',_mktoReferrer:reff};
                    params.FirstName = $scope.cFirstName;
                    params.LastName = $scope.cLastName;
                    params.Company = $scope.cCompany;
                    params.jobTitle = $scope.jobTitle;
                    params.Email = $scope.cEmail;
                    params.Phone = $scope.phoneCode + $scope.userPhoneB;
                    params.Country = $scope.cCountry;
                    params.State = stateName;
                    params.Employees_Range__c = $scope.cNoEmps;
                    params.Latest_Lead_Source__c = GetUTMParams('utmcsr');
                    params.Latest_Lead_Source_Detail__c = GetUTMParams('utmcmd');
                    params.Device_Type__c = 'Website';
                    params.UTM_Source__c = fetchUTMSource()
                    params.UTM_Medium__c = GetUTMParams('utmcmd');
                    params.Entry_Page__c = leadSourceString;
                    params.Site_Module__c= siteModule;
                    params.Campaign_id = $scope.camp_id;
                    params.Query_Type__c = 'B2B';
                    params.GCLID = getGCLID();
                    $scope.isPopupForm=false;
                    if(isHigherEducationPage){
                        params.Query_Type__c = 'Higher Education';
                        if(e.target.form.name == "higherEducationTopForm"){
                             $scope.isPopupForm=true;;
                        }
                    }
                    if(typeof params.Country == 'undefined' || params.Country == 0){
                        return $scope.helpers.FormNotValid($scope[form]);
                    }else if(!isHigherEducationPage && countryList.indexOf(params.Country) !== -1) {
                            if(typeof params.State == 'undefined' || params.State == 0){
                                return $scope.helpers.FormNotValid($scope[form]);
                            }
                    }
                    if(!isHigherEducationPage && (typeof params.Employees_Range__c == 'undefined' || params.Employees_Range__c == 0)){
                        return $scope.helpers.FormNotValid($scope[form]);
                    }
                    $scope.marketoLogFormSubmit(params);
                    //PostReqService.sendPostRequest(url, params);
                }
                var label = '';
                if (form == 'enterpriseContactUs') {
                    if(user_params.pageCategory == 'digital-transformation-training_index') {
                        label += 'DT_QueryBox';
                    } else {
                         label += 'B2b_query_course_page';
                    }
                } else {
                    if ($scope.pageType == 'course list') {
                        label += 'B2B_Category_Query_box';
                    } else if ($scope.pageType == 'masters-program') {
                        label += 'b2b masters';
                    }
                    else if(isHigherEducationPage){
                       label += 'Higher_Education'; 
                    }
                    else {
                        label += 'B2b Query box';
                    }
                }

                if (typeof user_params.pageCategory != 'undefined' && user_params.pageCategory == 'digital-transformation-training_index') {
                    label = 'DT_QueryBox';
                }
                if (user_params.sl_page_type === 'corp train page' && typeof user_params.sl_site_module === "string" && user_params.sl_site_module.length > 0) {
                    label = user_params.sl_site_module;
                }
                WebTracking.eventReq.triggerEvent({
                event_id : "sl_lead_user_submitted_lead_form",
                event_data: {
                    'sl_lead_type' : 'b2b',
                    'sl_user_type' : 'b2b',
                    'sl_site_module' : label,
                    'sl_user_email': $scope.cEmail,
                    'sl_user_first_name' : $scope.cFirstName,
                    'sl_user_last_name' : $scope.cLastName,
                    'sl_user_phone' : $scope.phoneCode + $scope.userPhoneB || '',
                    'sl_user_company': $scope.cCompany || '',
                    'sl_user_jobtitle': $scope.jobTitle || '',
                    'sl_user_country': $scope.cCountry || '',
                    'sl_user_state': stateName || '',
                    'sl_user_number_employees': $scope.cNoEmps || '',
                    'sl_email_opt_in' : true,
                    'sl_sms_opt_in': true
                },
                common : "product",
                user_attributes: ['sl_lead_type','sl_user_company','sl_user_country','sl_user_state','sl_user_jobtitle', 'sl_event_time','sl_user_email','sl_user_first_name','sl_user_last_name','sl_user_phone'],
                // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
            });
              
                label = user_params.user_id + ' || ' + document.URL + ' || ' + label;
                $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leadcapturequeryform',label);

                // Update user hash
                
                var user = $rootScope.userInfo || {};
                user.email = $scope.cEmail;
                var nameRes = $scope.cFirstName;
                if(typeof $scope.cLastName !== 'undefned' && $scope.cLastName !== '')
                    nameRes = $scope.cFirstName + ' ' + $scope.cLastName;
                user.name = nameRes;
                user.phone = $scope.userPhoneB || user.phone || '';
                user.phoneCode = $scope.phoneCode || user.phoneCode || '';
                var fname = $scope.cFirstName || user.firstname || '';
                var lname = $scope.cLastName || user.lastname || '';
                PostReqService.setUserHash(user);
                $scope.displayMarketoMsg = 1;
                $scope.onSubmitClass = "marketo-submitted";
                $scope[form].jobTitle.$dirty = false;
                $timeout(function(){
                    if($scope.isPopupForm && typeof user_params.pageCategory !=="undefined" && user_params.pageCategory== "higher-education-partnership-program-for-universities_index"){
                             document.getElementById("higher_ed_form").style.display='none';
                             $scope.onSubmitClass = "";
                             $scope.displayMarketoMsg = 0;
                    }else{
                    $scope.displayMarketoMsg = 0;
                    $scope.onSubmitClass = "";
                    }
                },delay);
                $scope.cFirstName = '';
                $scope.cLastName = '';
                $scope.cEmail = '';
                $scope.cCompany = '';
                $scope.jobTitle = '';
                $scope.cCountry = 0;
                $scope.cState = 0;
                $scope.cNoEmps = 0;
                $scope.cAgreeToCnt = 1;
                $scope.cContactMe = 1;
                $scope.displayState = 0;
                $scope.country_error = '';
                $scope.cNoEmps_error = '';
                $scope.state_error = '';
                $scope[form].$setPristine();
            }
        };

        $scope.toggleMarketoClick = function() {
            $scope.cAgreeToCnt = 1;
            if ($scope.cContactMe == 0) {
                $scope.cContactMe = 1;
            } else {
                $scope.cContactMe = 0;
            }
        };

        var gaFired = false;
        var gaFiredQuery = false;
        var jsonStringFormIds = '{ "1":false, "2":false}';
        $scope.formFill = false;
        $scope.initiateEvent = function(name){
            if (typeof $rootScope.webEventFiredformId != 'undefined') {
                var formIds = JSON.parse(jsonStringFormIds);
                if (typeof formIds[$rootScope.webEventFiredformId] !== 'undefined' && !formIds[$rootScope.webEventFiredformId]) {
                    gaFired = false;
                    formIds[$rootScope.webEventFiredformId] = true;
                    jsonStringFormIds =  JSON.stringify(formIds);
                }
            }
            var label = user_params.user_id + ' || ' + document.URL  + ' || ';
            var label1 = '';
            var formType = 'b2b';
            if(!$scope.formFill){
            if(name == "enterpriseContactUs"){
                if(gaFired)
                    return true;
                gaFired = true;
                label += user_params.course_name + ' || ';
                label += 'B2b_query_course_page';
                label1 += 'B2b_query_course_page';
                $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leads_form_filled',label);
            }
            if(name == 'enterpriseQuery'){
                if ($scope.pageType == 'course list') {
                    label += ' || ';
                    label += 'B2B_Category_Query_box';
                    label1 += 'B2B_Category_Query_box';
                } else if ($scope.pageType == 'masters-program') {
                    label += user_params.bundle_name + ' || ';
                    label += 'b2b masters';
                    label1 += 'b2b masters';
                }
                 
                else {
                    label += user_params.course_name + ' || ';
                    label += 'B2b Query box';
                    label1 += 'B2b Query box';
                }
                
                
                if(gaFiredQuery)
                    return true;
                gaFiredQuery = true;
                $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leads_form_filled', label);
            }

            if (user_params.pageCategory == 'digital-transformation-training_index') {
                label1 = 'DT_QueryBox';
            }
            if (user_params.pageCategory == 'higher-education-partnership-program-for-universities_index') {
                label += 'Higher_Education';
                label1 += 'Higher_Education';
            }
            if (user_params.sl_page_type === 'corp train page' && typeof user_params.sl_site_module === "string" && user_params.sl_site_module.length > 0) {
                label1 = user_params.sl_site_module;
            }
            WebTracking.eventReq.triggerEvent({
                event_id : "sl_lead_user_initiated_lead_form",
                event_data: {
                    'sl_lead_type' : formType,
                    'sl_site_module' : label1
                },
                common : "product",
                user_attributes: ['sl_lead_type']
            });
            $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leads_form_filled', label);
            $scope.formFill=true;
        }
        };

        $scope.updateEntCountry = function(){
            if(!$scope.cCountry || $scope.cCountry==0){
                $scope.country_error = 'error_field ';
                $scope.displayState = 0;
            }else if($scope.cCountry == 'United States'){
                $scope.displayState = 1;
                $scope.country_error = '';
            }else if($scope.cCountry == 'Canada'){
                $scope.displayState = 2;
                $scope.country_error = '';
            }else{
                $scope.displayState = 0;
                $scope.country_error = '';
            }
        };

        $scope.catIndividualsTabClick = function(source) {
            $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('Category_individuals_tab_click', source);
        };
        $scope.formFill = false;
        $scope.catInitFormFill = function(source,isSemPage,formIndex) {
            var label = user_params.user_id + ' || ' + document.URL + ' || ';
            var label1 = '';
            var formType = 'b2c';
            if(!$scope.formFill){
                if (source == 'course list') {
                    label += ' || ';
                    label += 'Category_Query_box';
                    label1 += 'Category_Query_box';
                } else if (source == 'masters-program') {
                    label += user_params.bundle_name + ' || ';
                    label += 'b2c masters';
                    label1 += 'b2c masters';
                }
                else {
                    label += user_params.course_name + ' || ';
                    label += 'Query box';
                    label1 += 'Query box';
                    if((typeof isSemPage !=='undefined' && isSemPage == 1) && (typeof formIndex !=="undefined" && formIndex === 2)){
                        var gaParameter=user_params.user_id + ' || ' + document.URL + ' || ' + 'Query box' + ' || ' + user_params.course_name + ' || ' + 'form 2';
                        $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('SemCourseForm2Click', gaParameter);
                    }

                }
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_user_initiated_lead_form",
                    event_data: {
                        'sl_lead_type' : formType,
                        'sl_site_module' : label1,
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                $scope.gaCoursePageFormControllerJs.gaFireOnCoursePage('leads_form_filled', label);
                $scope.formFill = true;
            }
        };

        $scope.updateStateCheck = function() {
            if ($scope.displayState && $scope.cCountry != 0) {
                if (!$scope.cState || $scope.cState == 0) {
                    $scope.state_error = 'error_field';
                } else {
                    $scope.state_error = '';
                }
                return;
            }
            $scope.state_error = '';
            return true;
        };

        // Get user information
        (function() {
            var userWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
                var user = (newValue && newValue.email)?newValue:oldValue;
                if(user && user.email && typeof user == 'object') {
                    setTimeout(function() {
                        $scope.userName = user.name || $scope.userName;
                        $scope.userEmail = user.email || $scope.userEmail;
                        $scope.userPhone = user.phone || $scope.userPhone;

                        $scope.cLastName = user.lastname || $scope.cLastName;
                        $scope.cFirstName = user.firstname || user.name || $scope.cFirstName;
                        $scope.cEmail = user.email || $scope.cEmail;
                        $scope.cCompany = user.company || $scope.cCompany;
                        $scope.jobTitle = user.jobTitle || $scope.jobTitle;
                        $scope.userPhoneB = user.phone || $scope.userPhoneB;
                    }, 500);
                    userWatch(); // stop listen
                }
            });
        })();


        $scope.numEmpCheck = function() {
             if (!$scope.cNoEmps || $scope.cNoEmps == 0) {
                    $scope.cNoEmps_error = 'error_field';
            } else {
                $scope.cNoEmps_error = '';
            }
             return;
        };

        $scope.marketoLogFormSubmit = function(values){
          
            var params = {
                Company: values.Company,
                jobTitle: values.jobTitle,
                Country: values.Country,
                State: values.State,
                Email: values.Email,
                Employees_Range__c: values.Employees_Range__c,
                FirstName: values.FirstName,
                LastName:values.LastName,
                Latest_Lead_Source__c: values.Latest_Lead_Source__c,
                Latest_Lead_Source_Detail__c: values.Latest_Lead_Source_Detail__c,
                UTM_Source__c: values.UTM_Source__c,
                UTM_Medium__c: values.UTM_Medium__c,
                Site_Module__c: values.Site_Module__c,
                Entry_Page__c: values.Entry_Page__c,
                Device_Type__c: values.Device_Type__c,
                Query_type_name__c: values.Query_Type__c,
                GCLID: values.GCLID,
                Phone :values.Phone,
                method: 'logEnterpriseSegmentData'
            }
          
            // lead prefil info
            var phoneData = [];
            if(typeof params.phone == 'string') {
                phoneData = params.phone.split('-');
            }
            var inputData = {
                name: params.FirstName + ' ' + params.LastName,
                email: params.Email,
                phone: phoneData[1] || '',
                phoneCode: phoneData[0] || ''
            };
            var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
            params.prefilled_source = prefilInfo.prefilled_source;
            params.prefillled_data = prefilInfo.prefillled_data;
            params.prefilled_modified = prefilInfo.prefilled_modified;

            //Adding Campaign Id for Course B2B Leads Campaign Id GHX-673
            if(typeof user_params.b2bCampaignId != 'undefined'){
                params.Campaign_id =user_params.b2bCampaignId;
            }
             PostReqService.sendPostRequest(baseApiUrlNocache, params)
            .then(function (output) {

            });
        };
        
        
         $scope.webEngageLeadFormSubmitB2B = function(params){
            // lead prefil info
            var phoneData = [];
            if(typeof params.phone == 'string') {
                phoneData = params.phone.split('-');
            }
            var inputData = {
                name: params.FirstName + ' ' + params.LastName,
                email: params.Email,
                phone: phoneData[1] || '',
                phoneCode: phoneData[0] || ''
            };
            var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
            params.prefilled_source = prefilInfo.prefilled_source;
            params.prefillled_data = prefilInfo.prefillled_data;
            params.prefilled_modified = prefilInfo.prefilled_modified;

            //Adding Campaign Id for Course B2B Leads Campaign Id GHX-673
            if(typeof user_params.b2bCampaignId != 'undefined'){
                params.Campaign_id =user_params.b2bCampaignId;
            }
             PostReqService.sendPostRequest(baseApiUrlNocache, params)
            .then(function (output) {
            });
        };


});
 /*------------- End : CoursePageFormController.js-----------*/ 

 /*------------- Begin : CoursePreviewController.js-----------*/ 

angular.module('Simplilearn')
.controller('CoursePreviewController', function($scope, CpService,$window,$compile,$http,$rootScope, $sce,$timeout, $cookies) {

	this.coursePreviewData = {};
        this.allCrsAccess = null;
	this.Math = window.Math;
        this.courseId;
        this.startAcc = 0;
        this.accConstructCheck=0;
        this.courseIdArr = [];
        var myvshowCoursePreviewDivArr = [];
        this.showCoursePreviewDiv = [];
        this.viewMoreClicked=0;
        this.strrr = '';
        this.bundleName = '';
        this.lecturePreview = 0;
        this.lectureData = null;
        this.hashUrl = '';
        $scope.isVideoFinishedLP = 0;
        this.videoWatched = false;
	var self = this;

        $scope.to_trusted = function (pHtml) {
            return $sce.trustAsHtml(pHtml);
        };

        this.closeTranscriptPopup = function() {
            this.courseLecturePageGa.LecturePage_transcript_popup();
            this.lectureData = null;
            this.lecturePreview = 0;
        }

        this.closeTranscriptPopupNoGa = function() {
            this.lectureData = null;
            this.lecturePreview = 0;
        }

        this.setBundleName = function(bundleName){
            self.bundleName = bundleName;
        }

        this.setCourseId = function(courseId){
            this.courseId = courseId;
            CpService.setCurrentCourseId(courseId);
        }
        this.gFCPPT = function(courseName,lesson,chapter){
            if(courseName != '')
                user_params.course_name = courseName;
            user_params.lesson = lesson;
            user_params.chapter = '';
            if(typeof chapter != 'undefined' && chapter != '')
                user_params.chapter = chapter;
           //this.courseLecturePageGa.Video_Click('introvideoclick', lesson);

        }
        var self = this;
        this.chapterClick = function (lesson, $event, cObj) {
            var classes = $event.currentTarget.children[0].getAttribute('class');
            var status = '';
            if (classes != '') {
                classes = classes.split(' ');
                if (classes.indexOf('plus') !== -1)
                    status = 'open';
                if (classes.indexOf('minus') !== -1)
                    status = 'closed';
            }
            try {
                var courseData = {};
                var eventData = {};
                if (typeof cObj != 'undefined' && typeof user_params.sl_product_type != 'undefined' && user_params.sl_product_type == 'bundle' ) {
                    courseData = JSON.parse(cObj);
                }
                courseData['sl_product_toc_lesson_viewed'] = lesson || '';
                setTimeout(function () {
                    if (typeof status !== "undefined" && status == "open") {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_eng_product_toc_explored",
                            event_data: courseData,
                            common: "product",
                        });
                    }
                    self.courseLecturePageGa.chapterClick(lesson, status);
                }, 200);
            } catch (err) {
            }
        }

        this.constructShowCoursePreviewDiv = function(index){
            if(index == 0){
                myvshowCoursePreviewDivArr[index] = 1;
            }else{
                myvshowCoursePreviewDivArr[index] = 0;
            }
            self.showCoursePreviewDiv = myvshowCoursePreviewDivArr;
        }

        this.updateShowCoursePReviewDivStatus = function(index){

            if(self.showCoursePreviewDiv[index] == 1){
                self.showCoursePreviewDiv[index] = 0;
            }else{
                self.showCoursePreviewDiv[index] = 1;
            }

            var len = self.showCoursePreviewDiv.length;
            for(var i=0;i<len;i++){
                if(i != index)
                    self.showCoursePreviewDiv[i] = 0;
            }
        }


        this.scrollPageViewLess = function($event){
            var clickedObj = angular.element($event.target);
            var toScrollObj = angular.element(clickedObj).parent().parent();

            setTimeout(function(){

                slideAction(toScrollObj[0]);
            },200);
        }

        var divHeight = function(ele) {
            var x = 0;
            while (ele) {
                x += ele.offsetTop;
                ele = ele.offsetParent;
            }
            return x;
        };

        var slideAction = function(elemObj){
            var heightDiff = (divHeight(elemObj)-window.scrollY)-40;
            if(heightDiff >= 150){
                window.scrollBy(0,150);
                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
            }else if(150 >= heightDiff && heightDiff >= 100){
                window.scrollBy(0,100);
                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
            }else if(100 >= heightDiff && heightDiff >= 50){
                window.scrollBy(0,50);
                setTimeout(function(){slideAction(elemObj,heightDiff);},10);
            }else{
                window.scrollBy(0,(divHeight(elemObj)-window.scrollY)-40);
                return false;
            }
            return true;
        };

        this.removeLocalStorageData = function(courseId){
            window.localStorage.removeItem("cp_data_"+courseId);
        }

        this.setStartAccordion =function(startAcc,accConstructCheck){
            self.startAcc = startAcc;
            self.accConstructCheck=accConstructCheck;
        }

        $scope.$parent.$watch('bundlePreviewClicked', function(newVal){
            if(newVal == 1){
                self.init_CpData($scope.$parent.courseId);
                self.showCoursePreviewDiv = 1;
            }else{
                self.showCoursePreviewDiv = 0;
                self.allCrsAccess = null;
                self.accConstructCheck=0;
            }
        });

        this.init_CpData = function(courseId, courseName) {
            if (!courseId) {
                return false;
            }
            if(courseName === undefined){
              courseName = '';
            }
            if(courseName != '')
                user_params.course_name = courseName;
            if (window.localStorage.getItem("cp_data_" + courseId) === null) {
                CpService.getCoursePreviewData(courseId).then(function(data) {
                    self.allCrsAccess = data;
                    window.localStorage["cp_data_" + courseId] = JSON.stringify(data);
                    setTimeout(function() {
                        self.accConstructCheck = 1;
                        window.scrollBy(0, 1);
                    }, 500);
                });
            } else {
                var stored_datas = JSON.parse(window.localStorage["cp_data_" + courseId]);
                self.allCrsAccess = stored_datas;
                setTimeout(function() {
                    self.accConstructCheck = 1;
                    window.scrollBy(0, 1);
                }, 500);
            }
            CpService.setCurrentCourseId(courseId);

        };

        this.cpData = function(courseId) {
            if (document.readyState === 'complete') {
                self.fetchCPData(courseId);
            } else {
                window.addEventListener('load', self.fetchCPData(courseId));
            }
            CpService.setCurrentCourseId(courseId);
        };
        this.fetchCPData = function(courseId) {
            if (!courseId) {
                return false;
            }
            $timeout(function() {
                if (window.localStorage.getItem("cp_data_" + courseId) !== false && window.localStorage.getItem("cp_data_" + courseId) != null) {
                    var stored_datas = JSON.parse(window.localStorage["cp_data_" + courseId]);
                    if (stored_datas) {
                        if (stored_datas['content']) {
                            self.coursePreviewData[courseId] = stored_datas['content'];
                            if (stored_datas['content'] && stored_datas['content'].length > 0)
                                $scope.$parent.coursePreview[courseId] = 1;
                            else
                                $scope.$parent.coursePreview[courseId] = 0;
                            setTimeout(function() {
                                self.accConstructCheck = 1;
                                window.scrollBy(0, 1);
                            }, 500);
                        }
                    }else{
                        $scope.$parent.coursePreview[courseId] = 0;
                    }
                }else if(courseId){
                    self.getCoursePreviewData(courseId);
                }
            }, 3000);
        };

        this.getCoursePreviewData = function(pCourseId) {
            $http.get(baseApiUrl + "?method=getCoursePreviewData",
                {params: {
                        "course_id": pCourseId
                    }
                })
                .then(function(response) {
                    if (typeof response.data !== 'undefined' && response.data != 'null') {
                        self.coursePreviewData[pCourseId] = response.data.content;
                        $scope.$parent.coursePreview[pCourseId] = 1;
                        setTimeout(function() {
                            self.accConstructCheck = 1;
                            window.scrollBy(0, 1);
                        }, 500);
                    }else{
                        $scope.$parent.coursePreview[pCourseId] = 0;
                    }
                });
        };

        this.hVLC = function(elearningId, lessons, lessonObj, sectionId, isFromELearning,url,videoType,lesson,chapter) {
            if(typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                $scope.currentPopupELearningType = isFromELearning;
                $rootScope.showHideDivsLP(0, isFromELearning);
            }
            this.videoWatched = false;
            return handleVideoLinkClick(elearningId, lessons, lessonObj, sectionId, isFromELearning,url,videoType,lesson,chapter);
        };

        var handleVideoLinkClick = function(elearningId, lessons, lessonObj, sectionId, isFromELearning,url,videoType,lesson,chapter) {
            CpService.setBundleName(self.bundleName);
            return CpService.handleVideoLinkClick(elearningId, lessons, lessonObj, sectionId, isFromELearning,url,videoType,$cookies[user_params.enterpriseCountCookieName],lesson,chapter,$cookies[user_params.OPTIN_COOKIE]);
        };

        this.hidePreview = function($event){
            if(typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                $rootScope.showHideDivsLP(2, $scope.currentPopupELearningType);
            }
            if($event)
            $event.stopPropagation();
           return CpService.hidePreview();
        };

        this.getSectionIframeSrc = function(courseId){

          return CpService.getIframeSrc(courseId);
        };

        this.showPreviewStatus = function (page) {
            return CpService.getShowPreviewStatus(self.courseId);
        };

        this.getIFrameDisplayStatus = function(courseId){
            return CpService.getIFrameDisplayStatus(courseId);
        }

        this.isVideoFinished = function(){
            var videoFinished = CpService.isVideoFinished(self.courseId);
            if(videoFinished) {
                $rootScope.showHideDivsLP(1, $scope.currentPopupELearningType);
                if(!this.videoWatched){
                    this.courseLecturePageGa.Video_watched();
                    this.videoWatched = true;
                }
            }
            return videoFinished;
        };
        this.videoEnrollNow = function(){
            $timeout(function() {
                var enrollDom = document.getElementById('sticky-enroll-btn');
                if(enrollDom) {
                    if(enrollDom.getAttribute('data-type') == 'multi') {
                        CpService.hidePreview();
                    }
                    enrollDom.click();
                } else {
                    CpService.hidePreview();
                    window.scrollBy(0,-5000);
                }
            }, 0)
        }


            var lmsFunc = function(){

                if (window.addEventListener) {
                        //alert("1");
                    window.addEventListener( "message",
                        function (e) {
                            var data;
                            // using try catch because for some cases data is not in valid json
                            if(typeof e.data != 'undefined'){
                            try {
                                data = JSON.parse(e.data);
                            } catch (e) {
                                data = {};
                            }
                            if(data.method == 'startTimer'){
                                startTimer(data.timeLeft);
                            }else if(data.method == 'changePreviewStatus'){
                                changePreviewStatus();
                            }else if(data.method == 'setTimeLeft'){
                                setTimeLeft(data.timeLeft);
                            }else if(data.method == 'callEnrollNow'){
                                callEnrollNow();
                            }else if(data.method == 'hidePreviewLoading'){
                                hidePreviewLoading();
                            }else if(data.method == 'showEnrollOverlay'){
                                showEnrollOverlay();
                            } else if (data.method == 'detectEnrollButton' && typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                                $rootScope.showHideDivsLP(1, $scope.currentPopupELearningType);
                            }
                           }
                        },
                    false);

                }

            }();

    var callEnrollNow = function() {
        if(typeof $scope.cpg.selectedTrainingType !== 'undefined' && !!$scope.cpg.selectedTrainingType) {console.log(1);
            //$scope.cpg.showTrainingType($scope.cpg.selectedTrainingType);
        }
        else {
            if(gaPageCategory == ''){
                //$scope.cpg.showTrainingType('osl');
            }else{
                window.scrollBy(0,-5000);
            }
        }

        CpService.hidePreview();

            //$scope.$apply();   This was giving "inprog" error, so commenting out

        return true;
    };
        this.onEscape = function(){
            self.hidePreview();
        }

        this.lecturePopup = function ($event, chap_id, chapUrl) {
            $event.preventDefault();
            $event.stopPropagation();
            if (chap_id) {
                this.helpers = new helpers();
                var urlObj = this.helpers.makeValidApiUrl('lectureContent');
                $http.get(urlObj.url + "&chap_id=" + chap_id,
                        {chap_id: chap_id, cache: urlObj.cached})
                        .success(function (data, status) {
                            if (data) {
                                var result = angular.fromJson(data);
                                self.lecturePreview = 1;
                                self.lectureData = result;
                                var elem = document.getElementsByClassName('popup-for-transcript');
                                $compile(angular.element(elem).contents())($scope);
                            }
                        });

            }
        }


            var gaForLecturePage = function () {
                var ga = new gaEventsTracker();

                this.LecturePage_transcript_click_icon = function () {
                    ga.gaFireInteractiveEvents('LecturePage_transcript_click_icon');
                };
                this.chapterClick = function (chap_name,status){
                    ga.gaFireInteractiveEvents('chapternameclick', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + chap_name + ' || '+status);
                }
                this.LecturePage_transcript_popup = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_transcript_popup');
                };
                this.CoursePreview_LectPage_accordian_open = function (val) {
                    ga.gaFireInteractiveEvents('CoursePreview_LectPage_accordian_open', val);
                };
                this.Video_watched = function (argument) {
                    ga.gaFireInteractiveEvents('previewvideowatched', user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + user_params.chapter + ' || '+ user_params.lesson);
                }
                this.Video_Click = function (lesson) {
                    //ga.gaFireInteractiveEvents('introvideoclick', user_params.user_id + ' || ' + document.URL + ' || bundle course preview || '+lesson);
                }
            };
            this.courseLecturePageGa = new gaForLecturePage();


    /**
     * Bundle page cpv play button logic for head section
     */
    $scope.cpvHeadPlayButtons = {};
    $scope.cpvPlayButtons = {};
    $scope.initPlayButton = function(childObj, courseId, headIndex, index) {
        try {
            if(!$scope.cpvHeadPlayButtons[courseId]) $scope.cpvHeadPlayButtons[courseId] = {};
            if(!$scope.cpvPlayButtons[courseId]) $scope.cpvPlayButtons[courseId] = {};
            if(!$scope.cpvPlayButtons[courseId][headIndex]) $scope.cpvPlayButtons[courseId][headIndex] = {};
            $scope.cpvPlayButtons[courseId][headIndex][index] = 0;

            for (var i in childObj.lessons) {
                var lesson = childObj.lessons[i];
                if (lesson.video_url && lesson.video_type == 'mp4') {
                    $scope.cpvHeadPlayButtons[courseId][headIndex] = 1;
                    $scope.cpvPlayButtons[courseId][headIndex][index] = 1;
                    break;
                }
            }

        } catch (e) {
        }
    };
    this.wbEngOnSubLessonClick = function (lesson, subLesson, preview, cObj) {
        try {
            var courseData = {};
            var eventData = {};
            var isPreviewAvailable = parseInt(preview) ? true : false;
            if (typeof cObj != 'undefined' && cObj.length > 0 && typeof user_params.sl_product_type != 'undefined' && user_params.sl_product_type == 'bundle') {
                courseData = JSON.parse(cObj);
            }
            courseData['sl_product_toc_sublesson_content_viewed'] = subLesson || '';
            courseData['sl_product_toc_lesson_viewed'] = lesson || '';
            courseData['sl_course_preview_available'] = isPreviewAvailable;
            WebTracking.eventReq.triggerEvent({
                event_id: "sl_eng_product_toc_explored",
                event_data: courseData,
                common: "product",
            });
        } catch (e) {
        }
    }
});






// This is to reset iframe src when popup is closed
if(typeof document.getElementById("fancybox-close") != 'undefined' && document.getElementById("fancybox-close") != null){
var timeleft = 0;
var timerObj;
var handler;
var totaltime;

document.getElementById("fancybox-close").addEventListener("click", function(){
    //console.log('closed');
    document.getElementById("sectionIframe").setAttribute("src", "");
    //var getvalue=document.getElementById("sectionIframe").getAttribute("src");
    //console.log('iframe src:'+getvalue);
});


/* if full view video is swf/third party, then to show enroll button below of the video */
function showEnrollOverlay(){
   //console.log('show enrol button for swf video');
   document.getElementById("enroll_overlay").style.display = "block";
}

/* this is to hide ajax loading image */
function hidePreviewLoading(){
     //$('div.showDiv').addClass('hidden_class');
     return true;
}

/* To display remaining time of the preview video */
function setTimeLeft(leftTime){
    //$('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.duration_min').html(secTotime(leftTime) +' remaining');
    return true;
}

/* This function will be called onclick of Enroll Now button on course preview popup window
function callEnrollNow(){
    console.log('in default');

    var w_id = $('div.calyender_date_selecter').find('div.calendar_list a.calyender_date_selecter_left:first').data('workshop_id');
    if(typeof w_id != 'undefined'){
            $("div.previewClick .workshop_enroll_btn[data-workshop_id='"+w_id+"']").trigger('click');
    }
    else{
            var acc_days = $('.pdp-access-days').find('a.access_lists_active').data('package_id');
            if(typeof acc_days == 'undefined')
                $('.add-to-cart').trigger('click');
            else
                $(".package_btn[data-accessdays='"+acc_days+"']").trigger('click');
    }

    return true;
}
*/

/* if course preview is expired when watching, this will change the play button icon to disabled */
function changePreviewStatus(){
    /*var expiredTime = $('span.tooltip_info').data('total_view_time');
    $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.duration_min').removeClass('min_preview').addClass('expired_preview').html(expiredTime+' minute expired');
    $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.preview_eye').data('is_expired',1);
    $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.preview_eye').removeClass().addClass('preview_eye eye_icon2');*/
    return true;
}

/* this is to monitor course preview remaining time */
function startTimer(timeFromLms){
    /*totaltime = timeFromLms;
    timerObj.html('Course preview');
    handler=setInterval("countDown()",1000);
    hidePreviewLoading();*/
    return true;
}

function countDown(){
    /*if(typeof totaltime != 'undefined'){
            timeleft = totaltime-1;
        if (timeleft < 0){
            timeleft = 0;
            window.clearInterval(handler);
            return false;
        }
        timerObj.html('Course preview');
        //timerObj.html('Time Remaining : ' + secTotime(timeleft));
        totaltime = timeleft;
    }*/
    return true;
}
}

 /*------------- End : CoursePreviewController.js-----------*/ 

 /*------------- Begin : CoursePreviewLeadController.js-----------*/ 

angular.module('Simplilearn')
        .controller('CoursePreviewLeadController', function (CpService, LocService, $scope, $rootScope, PostReqService, $cookies, $timeout) {
            self = this;
            this.cprUidStatus = false;
            $scope.isAagreeCheckDirty = false;
            $scope.cAgreeCheck = false;
            $scope.hasValidation = true;
            $scope.isEuro = user_params.isEuro;
            var PHONE_MAX_LENGTH = 15;

            var gaClassForPreviewLead = function () {
                var ga = new gaEventsTracker();
                this.gaFireOnPreviewLead = function (cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                }
            }
            $scope.gaPreviewLead = new gaClassForPreviewLead();
            this.enrollNow = function (btnId) {
                $timeout(function () {
                    var btnDom = document.getElementById(btnId);
                    if (btnDom) {
                        btnDom.click();
                    }
                }, 0);
                this.hideExceedPopup();
            }

            this.getExceedPopup = function () {
                return CpService.getExceedPopup();
            }

            this.hideExceedPopup = function () {
                CpService.setExceedPopup(false);
            }

            this.init = function () {
                $scope.isAagreeCheckDirty = false;
                this.cprUidStatus = false;
                $rootScope.isPreviewLeadCreated = false;
                if ((!user_params.isEuro || getCookieByName(user_params.OPTIN_COOKIE) === 1) && !$rootScope.isLoggedIn) {
                    self.validateCpruid(function (authStatus) {
                        if (!authStatus) {
                            self.initUserHash();
                        }
                    });
                }

                // Reset on logout
                var selfThis = self;
                $rootScope.$watch('isLoggedIn', function (newValue) {
                    if (newValue == false) {
                        selfThis.resetLeadUser();
                    }
                });

                if(user_params.isEuro && getCookieByName(user_params.OPTIN_COOKIE) != 1) {
                    selfThis.resetLeadUser();
                }

                $timeout(function () {
                    LocService.getCountryData().then(function (data) {
                        $scope.countryData = data;
                        LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                        $scope.selected_country = LocService.getCurrentCountry();
                        $scope.cookie_country_name = $scope.selected_country.name;
                        $scope.countryDataHeaderDropDown = $scope.countryData;
                    });
                }, 2000);
            };

            this.agreeCheck = function () {
                $scope.cAgreeCheck = !$scope.cAgreeCheck;
                $scope.isAagreeCheckDirty = true;
            }

            this.resetLeadUser = function () {
                $rootScope.isPreviewLeadCreated = false;
                self.cprUidStatus = false;
                setCookie('_cpruid', null, 0);
                setCookie('_user_ld_info', null, 0);
            };

            this.validateCpruid = function (callback) {
                var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                var cprPID = 0;
                if (typeof _cpLeadInfoExist!=="undefined" && _cpLeadInfoExist) {
                     this.cprUidStatus = true;
                    $rootScope.isPreviewLeadCreated = true;
                    callback(true);
                } else {
                    callback(false);
                }
                return;
            };

            this.showLogin = function ($event) {
                $event.preventDefault();


                $timeout(function () {
                    $rootScope.showPreviewLeadStatus = false;
                    CpService.setPreviewLeadPopup(0)
                    var loginBtnObj = document.getElementById('loginBtn');
                    if (!loginBtnObj) {
                        var loginBtnObj = document.getElementById('registerBtn');
                    }
                    angular.element(loginBtnObj).triggerHandler('click');
                }, 0);
            };

            this.previewLeadForm = {
                phone: {error: 'Please enter a valid phone number'},
                email: {error: 'Please enter a valid email'},
                cAgreeCheck: {error: 'Please accept the agreement'}
            };

            this.showPreviewLeadStatus = function () {
                return CpService.getPreviewLeadPopup();
            };

            this.showPreviewLead = function () {
                CpService.setPreviewLeadPopup(1)
                return true;
            };

            this.hidePreviewLead = function () {
                CpService.setPreviewLeadPopup(0)
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_form_closed",
                    event_data: {
                        'sl_lead_type': 'b2c',
                        'sl_site_module': 'course preview',
                    },
                    common: "product",
                    user_attributes: ['sl_lead_type']
                });
            };
            var leadInitiated = false;
            $scope.intiateLead = function () {
                if (!leadInitiated) {
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_initiated_lead_form",
                        event_data: {
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'course preview',
                          'sl_preview_chapter' : user_params.chapter || '',
                          'sl_preview_lesson' : user_params.lesson || '',
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                    $scope.gaPreviewLead.gaFireOnPreviewLead('leadinitiatepreview', user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + user_params.chapter + ' || ' + user_params.lesson);
                    leadInitiated = true;
                }
            }

           $scope.submitRegister = function () {
                $scope.isAagreeCheckDirty = true;
                $scope.previewLeadForm.registerStatus = false;
                if(user_params.isEuro) {
                    if ($scope.cAgreeCheck) {
                        setCookie(user_params.OPTIN_COOKIE, 1, 90);
                    } else {
                        setCookie(user_params.OPTIN_COOKIE, 0, 90);
                    }
                }
                if (getCookieByName(user_params.OPTIN_COOKIE) === 0 || !$scope.hasValidation) {
                    CpService.setPreviewLeadPopup(0)
                    $rootScope.isPreviewLeadCreated = true;
                    $rootScope.showPreviewLeadStatus = false;
                    $rootScope.hasValidationCoursePreview = false;
                    $rootScope.$emit('isPreviewLeadCreated', true);
                    return;

                }

                if ($scope.previewLeadForm.$invalid) {
                    if ($scope.previewLeadForm.email.$invalid) {
                        $scope.previewLeadForm.email.$setViewValue($scope.previewLeadForm.email.$viewValue);
                    }
                    if ($scope.previewLeadForm.phone.$invalid) {
                        $scope.previewLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                    }
                    return;
                }
                if (!$scope.cAgreeCheck) {
                    return;
                }
                CpService.setPreviewLeadPopup(0)
                $rootScope.isPreviewLeadCreated = true;
                $rootScope.showPreviewLeadStatus = false;
                $rootScope.$emit('isPreviewLeadCreated', true);
                $rootScope.semVideoPlayListLeadStatus = true;
                if(document.getElementById("sem-course-preview-lead-form")){
                    document.getElementById("sem-course-preview-lead-form").classList.add("hide");
                }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                var leadSourceString = document.URL;
                var idVar = user_params.course_id != undefined || user_params.course_id != '' ? user_params.course_id : user_params.bundle_id;
                var phone = $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue;
                var pageCategory = typeof user_params.pageCategory !=="undefined"  ? user_params.pageCategory: '';
                var postParams = {
                    'email': $scope.previewLeadForm.email.$modelValue,
                    'phone': phone,
                    'courseId': idVar,
                    'topicId': CpService.getCurrScoId(),
                    'courseName': user_params.course_name,
                    'customerType': 'B2C',
                    'agreeToContact': '',
                    'leadSource': fetchUTMSource(),
                    'leadTrainingType': 'Not Sure',
                    'leadSourceString': leadSourceString,
                    'tagName': 'course preview',
                    'b2cQueryType': 'course_preview',
                    'productTypeId': user_params.productTypeId,
                    'billingTypeId': user_params.billingTypeId,
                    'query': '',
                    'auth': '1',
                    'GCLID': getGCLID(),
                    'pageCategory':pageCategory,
                    'countryId': locatorCookieObj.country_id,
                    'countryName':locatorCookieObj.country_name.replace(/\+/g, ' '),
                    'cityId':locatorCookieObj.city_id,
                    'cityName':locatorCookieObj.name
                };
                webengage.onReady(function () {
                    var webEngageLeadParams = [];
                    if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                        webEngageLeadParams = webengage.state.getForever().uattr;
                    }
                    var eventData={
                                        'sl_lead_type': 'b2c',
                                        'sl_site_module': 'course preview',
                                        'sl_user_email': postParams.email,
                                        'sl_user_phone': $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue || '',
                                        'sl_email_opt_in': true,
                                        'sl_sms_opt_in': true
                    }
                    if(typeof webEngageLeadParams !=="undefined" && typeof webEngageLeadParams['we_first_name']!=="undefined" && webEngageLeadParams['we_first_name']){
                       eventData.sl_user_first_name=webEngageLeadParams['we_first_name'];
                    }
                    if(typeof webEngageLeadParams !=="undefined" && typeof webEngageLeadParams['we_last_name']!=="undefined" && webEngageLeadParams['we_last_name']){
                       eventData.sl_user_last_name=webEngageLeadParams['we_last_name'];
                    }
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_lead_user_submitted_lead_form",
                        event_data: eventData,
                        common: "product",
                        user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                        // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                        // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                    });
                    var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                    var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(postParams, webEngageLeadFormParams);
                    var applicationContentType = 'json';
                    try {
                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                                .then(function (data, status, header, config) {
                                    var resStatus = false;
                                    if (data != null) {
                                        var resData = data.data;
                                        if (data.status == 200 && data.data.status == "success") {
                                            // Update user hash
                                            var user = $rootScope.userInfo || {};
                                            user.email = postParams.email;
                                            user.phone = $scope.previewLeadForm.phone.$modelValue || user.phone;
                                            user.phoneCode = $scope.queryPhoneCode || user.phoneCode;
                                            PostReqService.setUserHash(user);
                                            $scope.gaPreviewLead.gaFireOnPreviewLead('leadsubmittedpreview', user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + user_params.chapter + ' || ' + user_params.lesson);
                                            resStatus = true;
                                            // setCookie('_cpruid', resData.data['cpr_uid'], 90);
                                            /*
                                             CpService.setPreviewLeadPopup(0)
                                             $rootScope.isPreviewLeadCreated = true;
                                             $rootScope.showPreviewLeadStatus = false;
                                             $rootScope.$emit('isPreviewLeadCreated', true);
                                             */
                                            //console.log("PreviewPopupVideo",$rootScope.semVideoPlayListLeadStatus);

                                            /**
                                             * Check If Course Id Exist In The Cookie
                                             */
                                            var coursePreviewWatch = 0;
                                            var cprPID = 0;
                                            var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                                            if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "course") {
                                                cprPID = 'cprc' + user_params.course_id;
                                            }
                                            else if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "bundle") {
                                                cprPID = 'cprb' + user_params.bundle_id;
                                            }

                                            if (_cpLeadInfoExist) {
                                                var coursePreviewCookieCIdArr = _cpLeadInfoExist.split(",");
                                                if (coursePreviewCookieCIdArr.indexOf(cprPID) == -1) {
                                                    coursePreviewCookieCIdArr.push(cprPID);
                                                    cprPID = coursePreviewCookieCIdArr.join(",");
                                                }
                                            }
                                            setCookie('_user_ld_info', cprPID, 90);
                                            if (typeof user_params.isPlayListVideo !== 'undefined' && user_params.isPlayListVideo === true && typeof $rootScope.templateId !== "undefined" && parseInt($rootScope.templateId) === 3) {
                                                $rootScope.isPreviewLeadCreated = true;
                                                $rootScope.showPreviewLeadStatus = false;
                                                $rootScope.$emit('isPreviewLeadCreated', true);
                                                // $rootScope.semVideoPlayListLeadStatus = true;
                                                //  document.getElementById("sem-course-preview-lead-form").classList.remove("hide");
//                                        $timeout(function () {
//                                            //console.log("called");
//                                            if (typeof _cpLeadInfoExist !== 'undefined') {
//                                                if ($rootScope.isLoggedIn) {
//                                                    CpService.coursePreviewWatch(0);
//                                                } else {
//                                                    CpService.coursePreviewWatch(1);
//                                                }
//                                            }
//                                        }, 1000);
                                            }
                                        }
                                    }
                                    if (!resStatus) {
                                        $scope.previewLeadForm.registerStatus = true;
                                        $scope.previewLeadForm.registerMsg = 'Something went wrong. Please try again';
                                    }
                                }).catch(function (err) {
                        });
                    }
                    catch (err) {
                    }
                });
            }
            /* $scope.$watch('email', function(newValue) {
             var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
             if( !email_rgx.test(newValue) ){
             $scope.previewLeadForm.email.$setValidity('email', false);
             }
             else {
             $scope.previewLeadForm.email.$setValidity('email', true);
             }
             }); */

            $scope.$watch('phone', function (newValue, oldValue) {
                if ($scope.hasValidation)
                {
                    if (isNaN(newValue)) {
                        $scope.previewLeadForm.phone.$setValidity('phone', false);
                    } else if (newValue.length > PHONE_MAX_LENGTH) {
                        $scope.previewLeadForm.phone.$setValidity('phone', false);
                    } else {
                        $scope.previewLeadForm.phone.$setValidity('phone', true);
                    }
                }
            });

            $scope.$watch('cAgreeCheck', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.cAgreeCheck && $scope.isEuro);
            });


            var setCookie = function (cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            }

            this.initUserHash = function () {
                // Get user information
                var userWatch = $rootScope.$watch('userInfo', function (newValue, oldValue) {
                    var user = (newValue && newValue.email) ? newValue : oldValue;
                    if (user && user.email && typeof user == 'object') {
                        $scope.email = user.email || $scope.email;
                        $scope.phone = user.phone || $scope.phone;
                        setTimeout(function () {
                                    if (user.phoneCode) {
                                        $scope.queryPhoneCode = user.phoneCode;
                                        $scope.$apply()
                                    }
                        }, 100);
                        userWatch(); // stop listen
                    }
                });
            }
            this.gaGdprOptInCheckbox=function(event){
                if (user_params.isEuro && event.target.checked){
                    var ga = new gaEventsTracker();
                    var pGaKey="gdprOptinCheckboxChecked";
                    var pGaLabel= user_params.user_id + ' || ' + user_params.course_name + ' || ' + 'course preview';
                    ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                }
            }

            this.init();
        });
 /*------------- End : CoursePreviewLeadController.js-----------*/ 

 /*------------- Begin : EbooksController.js-----------*/ 

angular.module('Simplilearn')
.controller('EbooksController', function(LocService, $cookies, PostReqService, $scope, $timeout){
    
    var self = this;
    
    self.helpers = new helpers();
    self.user_params = user_params;
    
    self.countryData = {},
    self.selected_country = null,
    self.personName = '',
    self.personEmail = '',
    self.phoneCode = '',
    self.personPhone = '',
    self.courseId = 0,
    self.courseName = null,
    self.genericErrMsgText = '',
    self.disableSubmit = false,
    self.agreeToContactCheck = true,
    self.agreeToContactClicked = null;
    self.leadSuccessFlag = false;
    self.ebookName = '';
    $scope.fieldFocus = '';
    self.productTypeId='';
    self.billingTypeId='';
    self.popUpTitle = '';
    var ebookLink = null;
    var ebookId = null;
    
    self.initData = function(pCourseId, pCourseName, pEbookId,productTypeId,billingTypeId,popUpTitle) {
        self.courseId = pCourseId;
        self.courseName = pCourseName;
        self.productTypeId = productTypeId;
        self.billingTypeId = billingTypeId;
        ebookId = pEbookId;
        
        if( self.user_params.email ) {
            self.personEmail = self.user_params.email;
        }
        
        if( self.user_params.first_name ) {
            self.personName += self.user_params.first_name + ' ';
        }
        
        if( self.user_params.last_name ) {
            self.personName += self.user_params.last_name;
        }
        if(typeof popUpTitle !='undefined' && popUpTitle!=''){
            self.popUpTitle = popUpTitle;
        }
    };

    self.submitEbooksLeadGenForm = function(pForm) {
        self.agreeToContactClicked = 1;
        if (!pForm.$valid) {
            
            self.genericErrMsgText = 'Oops! Please ensure all fields are valid.';
            return self.helpers.FormNotValid(pForm);
        }else {
            if(self.agreeToContactClicked == 1 && self.agreeToContactCheck == null){
                self.genericErrMsgText = 'Oops! Please ensure all fields are valid.';
                return false;
            }
            self.disableSubmit = true;
            self.genericErrMsgText = '';
            var popupT = self.popUpTitle!=''?' | '+self.popUpTitle:'';
                    var paramsArr = {
                        'name': self.personName,
                        'email': self.personEmail,
                        'agreeToContact': self.agreeToContactClicked,
                        'courseId': self.courseId,
                        'courseName': self.courseName,
                        'leadTrainingType': 'online',
                        'customerType': 'B2C',
                        'ebookId': ebookId,
                        'leadSourceString': document.URL+popupT,
                        'tagName': 'ebook_download',
                        'type': 'ebook',
                        'leadSource': fetchUTMSource(),
                        'countryName': JSON.parse($cookies.locatori9).country_name,
                        'countryId': JSON.parse($cookies.locatori9).country_id,
                        'cityId': JSON.parse($cookies.locatori9).city_id,
                        'cityName': JSON.parse($cookies.locatori9).name,
                        'productTypeId': self.productTypeId,
                        'billingTypeId': self.billingTypeId,
                        'method': 'saveEbookLead',
                        'GCLID': getGCLID()
                    };

            PostReqService.sendPostRequest( baseApiUrlNocache, paramsArr)
                    .then(function(data) {
                        if (typeof data.data.status !== 'undefined' && data.data.status == 'Success') {
                            self.leadSuccessFlag = true;
                            self.genericErrMsgText = "";
                            if(typeof data.data.link !== 'undefined' && data.data.link) {
                                ebookLink = data.data.link;
                                $timeout(function() {                                    
                                    self.downloadEbook();
                                }, 2000);
                            }
                            self.ga.gaFireEventsGeneric('frsEbookDtlRegisterSuccess', self.ebookName);
                            self.ga.gaFireEventsGeneric('frsEbookLeadCapture', self.ebookName);
                            if(user_params.pageCategory == 'resources_article-detail'){
                                self.ga.gaFireEventsGeneric('frscoldleadformpopsubmit', self.ebookName);
                                $timeout(function(){
                                    $scope.$parent.popupStyle = {display:'none'};
                                },3000);
                            }
                        } else {
                            self.genericErrMsgText = "Some error occurred. Please try again later.";                                
                        }                        
                        self.disableSubmit = false;
                    });
        }
    };
    
    self.downloadEbook = function() {
        if(ebookLink) {
            window.location.href = ebookLink;
        }
    };
    
    self.getCountryData = function() {
        LocService.getCountryData().then(function(data) {
            self.countryData = data;

            //set current country using cookie
            LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

            self.selected_country = LocService.getCurrentCountry();
            self.phoneCode = '+'+self.selected_country.phnCode+'-';
        });
    };
    
    self.setAgreeToContactStatus = function() {
        self.agreeToContactClicked = 1;
        if( self.agreeToContactCheck ) {
            self.agreeToContactCheck = null;
        }else {
            self.agreeToContactCheck = true;
        }
    };
    
    
     /*
     $scope.$watch(function () { return self.personEmail; }, function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        
        if( !email_rgx.test(newValue) ){
            $scope.frmEbookDwnld.email.$setValidity('email', false);
        }
        else {
            $scope.frmEbookDwnld.email.$setValidity('email', true);            
        }
    });
    */
    
    var gaForEbooks = function() {
        var ga = new gaEventsTracker();

        this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
            ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
        };
    };

    self.ga = new gaForEbooks();
}); /*------------- End : EbooksController.js-----------*/ 

 /*------------- Begin : FaqSectionController.js-----------*/ 

angular.module('Simplilearn')
.controller('FaqSectionController', function($scope, CpService,$http,LocService, $location,FAQTrainingTypeService) {

	 //this.currentFaqType = null;
	 this.tmpType = null;
	 $scope.loopStatus = null;
	 this.trainingTypes = [];
         this.moreFaqs = 0;
var self = this;

this.addTrainingTypes = function(type){
    self.trainingTypes.push(type);
    FAQTrainingTypeService.addTrainingTypes(type);
}

            this.setFaqType = function(faqType) {
                //this.currentFaqType = faqType;//@review no return statement
                FAQTrainingTypeService.setCurrentTrainingType(faqType);
            };

            this.isCurrentFaqType = function(faqType) {

                if(faqType == 0) {
                    return true;
                }

                if (FAQTrainingTypeService.getCurrentTrainingType() === null) {
                    return true;
                }

                var faq_types = faqType.split('|');
                var validity = faq_types.indexOf(FAQTrainingTypeService.getCurrentTrainingType());

                return validity !== -1;
            };



			this.setLoopStatus = function(val){
				$scope.loopStatus = val;
			}

			$scope.$watch('loopStatus',function(newVal){
				setTimeout(function(){

                                       if( !!$location.path() ) {
                                            var path = $location.path();
                                            path = path.substr(path.indexOf('/')+1);
                                            if(path == 'ilt' && self.trainingTypes.indexOf("Classroom") != -1)
                                                FAQTrainingTypeService.setCurrentTrainingType('Classroom');
                                            else if(path == 'osl' && self.trainingTypes.indexOf("Online Self Learning") != -1)
                                                FAQTrainingTypeService.setCurrentTrainingType('Online Self Learning');
                                            else
                                                FAQTrainingTypeService.setCurrentTrainingType('Generic');

                                        }else{
                                            FAQTrainingTypeService.setCurrentTrainingType(self.tmpType);
                                        }
				},1000);
			});
            self.showMore = function (val) {
                this.moreFaqs = val == 1 ? 0 : 1;
                if (typeof this.moreFaqs != 'undefined' && this.moreFaqs == 1) {
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_eng_product_faq_view_more_clicked",
                        common: "product",
                    });
                }
            }
})
        .service('FAQTrainingTypeService',function(){
            this.currentTrainingType = null;
            this.trainingTypes = [];
            var self = this;
            this.setCurrentTrainingType = function(type){
                if(self.trainingTypes.indexOf(type) != -1)
                    self.currentTrainingType = type;
                else
                    self.currentTrainingType = 'Generic';
            }
            this.getCurrentTrainingType = function(type){
                return self.currentTrainingType;
            }
            this.addTrainingTypes = function(type){
                self.trainingTypes.push(type);
            }
        });
 /*------------- End : FaqSectionController.js-----------*/ 

 /*------------- Begin : FooterController.js-----------*/ 

angular.module('Simplilearn')
        .controller('FooterController', function($scope, $http, LocService, $cookies, $window,$rootScope,PostReqService,FormsAjax) {

            var howItWorksVisibilityStatus = 0;
            $scope.showCallbackStatus = 0;
            $scope.countryData = null;
            $scope.selected_country = null;
            $scope.selected_course = null;
            $scope.courseData = new Array({"name":"Select Course", "id":''});
            $scope.countryDropdownStatus = 0;
            $scope.courseDropdownStatus = 0;
			$scope.courseActivated = 0;
            $scope.phnAgreeCheck = 1;
			$scope.agreeClicked = 0;
            $scope.currentLearner = 'an individual learner';
            $scope.currentLearnerVal = 'B2C';
            $scope.learnersDisplayStatus = 0;
            $scope.personEmail = '';
            $scope.personName = '';
            $scope.personPhone = '';
            $scope.helpers = new helpers();
			$scope.newsLetterSuccess = {'display':'none'};
			$scope.newsLetterForm = {'display':'block'};
            $scope.cookie_data = JSON.parse($cookies.locatori9);
            $scope.cookie_country_name = '';
			$scope.disclaimerDisplayStatus = {'display':'none'};
			$scope.footerDisplayStatus = {'display':'block'};
            $scope.howItWorksClass = new Array('pop_img1', 'pop_img2', 'pop_img3', 'pop_img4');
            $scope.isIpad = isIpad;
            $scope.countryDataHeaderDropDown = {};
            $scope.delayedCountryListCreated = false;
            $scope.productTypeId='';
            $scope.billingTypeId='';
            $scope.request_form_details = '{"request_call_back_form_ajax":{"form_params":{}}}';
			this.hireOurHeros = 0;
			var self = this;
            $scope.setMbsyDiscountCoupon= function(mbsyDiscountCoupon){
               if(typeof mbsyDiscountCoupon != 'undefined' && mbsyDiscountCoupon != 0){
                   addCouponCodesToAACCookie(mbsyDiscountCoupon);
               }
            }
            $scope.callRACformAjax = function(){
                var elem = document.getElementById('request_call_back_form_ajax');
                if (elem !== undefined && elem !== null && elem.innerHTML === "") {
                    FormsAjax.loadFormviaAjaxSL($scope.request_form_details,$scope);
                }
            }

            $scope.init = function(courseId,courseName){
				if(courseId != '' &&  courseName != ''){
					$scope.selected_course = {"name":courseName, "id":courseId};
                                        if (!$scope.selectedCourseInfo) {
                                            var courseDetailResponse = PostReqService.getSelectedCourseDetailById(courseId).then(function (data) {
                                            $scope.selectedCourseInfo = {};
                                            if (data) {
                                                $scope.selectedCourseInfo = data;
                                            }
                                        });
                                        }
				}
				if(window.screen.width < 768){
					$scope.footerDisplayStatus = {'display':'none'};
				}
                // Instantiate commission junction Id if present in url
                cJInit();
                // Get user information
                webengage.onReady(function () {
                    initHash();
                });
                //RAC Form Ajax
                $scope.callRACformAjax();
                referAndSetCookie();
            }
            var referAndSetCookie = function() {
                var paramsArr = {'method': 'referAndEarnPageCookie'};
                PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                        .then(function (response) {
                            if (response.data != 'undefined' && typeof response.data.data != 'undefined') {
                                $scope.setMbsyDiscountCoupon(response.data.data);
                            }
                        });
            }
            // Get user information
            var initHash = function() {
                // Hash key broadcast
                var hashList = getHashList();
                for(key in hashList) {
                    $rootScope.$emit(key, hashList[key]);
                }

                PostReqService.getHashUser(function(user) {
                    if(user !== null) {
                        // Set user hash for request a callback
                        $scope.personEmail = user.email || $scope.personEmail;
                        $scope.personName = user.name || $scope.personName;
                        $scope.personPhone = user.phone || $scope.personPhone;
                        $scope.b2b_ssp = (user.b2b_ssp !== undefined) ? user.b2b_ssp : '';
                        $scope.gid = (user.gid !== undefined) ? user.gid : user.gid;
                        if(user.checkCourseStatus !== undefined && user.checkCourseStatus !== ''){
                            $rootScope.notificationMsg = user.checkCourseStatus;
                            console.log("B2B SSP course purchase notification message is set");
                            if(document.getElementById("notification_box")){
                                document.getElementById("notification_box").style.display = 'block';
                            }
                        }
                        $rootScope.lms_url = (user.lmsUrl) ? user.lmsUrl : baseLmsUrl;
                    }
                })
            }

			$scope.toggleHiddenFooter = function(){
				if($scope.footerDisplayStatus.display == 'block'){
					$scope.footerDisplayStatus = {'display':'none'};
				}else{
					$scope.footerDisplayStatus = {'display':'block'};
					setTimeout(function(){window.scrollBy(0, (window.screen.height-300));},300);
				}
			}

            $scope.callbackStatusMsg = '';
            $scope.callbackStatusClass = '';

            $scope.updateSelect = function(){
                    if(typeof $scope.selected_course != 'object')
                    $scope.selected_course = JSON.parse($scope.selected_course);
                    if(typeof $scope.selected_course.id == 'undefined' || $scope.selected_course.id == '' || $scope.selected_course.id == '0'){
                            document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select error_field select_wraper";
                    }else{
                            document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_wraper";
                            var courseObj=$scope.selected_course ;
                            if (courseObj.id) {
                                    var selectedCID = courseObj.id;
                                    var courseDetailResponse = PostReqService.getSelectedCourseDetailById(selectedCID).then(function (data) {
                                        $scope.selectedCourseInfo = {};
                                        if (data) {
                                            $scope.selectedCourseInfo = data;
                                        }
                                    });
                            }
                    }
            }
            $scope.updateProductAndBillingTypeId = function(productTypeId,billingTypeId){
                $scope.productTypeId=productTypeId;
                $scope.billingTypeId=billingTypeId;
            }
            $scope.initCallback = false;
            $scope.initiateCallbackForm = function() {
                if(!$scope.initCallback){
                    var objName = '';
                    if(typeof user_params.course_name != 'undefined')
                        objName = user_params.course_name;
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name;
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_initiated_lead_form",
                        event_data: {
                            'sl_lead_type' : 'b2c',
                            'sl_site_module' : 'Request a call',
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                    var ga = new gaEventsTracker();
                    ga.gaFireInteractiveEvents('leads_form_filled', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || Request a call');
                    $scope.initCallback = true;
                }
            }
            /** Old submitCallback function
               $scope.submitCallbackForm = function(form) {
                               //alert($scope.selected_course.id);
                               if(typeof $scope.selected_course != 'object')
                               $scope.selected_course = JSON.parse($scope.selected_course);

               if (!form.$valid) {
                                       if(typeof $scope.selected_course.id == 'undefined' || $scope.selected_course.id == '' || $scope.selected_course.id == '0'){
                                               document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select error_field select_wraper";
                                       }else{
                                               document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_wraper";
                                       }
                   return $scope.helpers.FormNotValid(form);
               }else if(typeof $scope.selected_course.id == 'undefined' || $scope.selected_course.id == '' || $scope.selected_course.id == '0'){
                                       document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select error_field select_wraper";
                                       return false;
                               }else if($scope.phnAgreeCheck == 0 && $scope.agreeClicked == 1){
                                       return false;
                               }
               var leadSourceString=document.URL;
               var paramsArr = {
                   'name': $scope.personName,
                   'email': $scope.personEmail,
                   'phone': $scope.queryPhoneCode + $scope.personPhone,
                   'courseId': $scope.selected_course.id,
                   'courseName': $scope.selected_course.name,
                   'customerType': $scope.currentLearnerVal,
                   'agreeToContact': $scope.phnAgreeCheck,
                   'countryId': $scope.cookie_data.country_id,
                   'countryName': $scope.cookie_country_name,
                   'cityId': $scope.cookie_data.city_id,
                   'cityName': $scope.cookie_data.name,
                   'leadSource': fetchUTMSource(),
                   'leadTrainingType': 'Not Sure',
                   'leadSourceString': leadSourceString,
                   'tagName': 'Request a call',
                   'type': 'callback',
                   'query': '',
                   'productTypeId': $scope.productTypeId,
                   'billingTypeId': $scope.billingTypeId,
                   'method':'saveCallback',
                   'GCLID': getGCLID(),
                   'Latest_Lead_Source__c': GetUTMParams('utmcsr'),
                   'Latest_Lead_Source_Detail__c': GetUTMParams('utmcmd'),
                   'UTM_Source__c': getCookieByName('__utmz'),
                   'UTM_Medium__c': GetUTMParams('utmcmd'),
                   'Device_Type__c': 'Website',
                   'lead_uid' : generateLeadId($scope.personEmail)
               };
               $scope.courseActivated = 0;

               // lead prefil info
               var inputData = {
                   name: $scope.personName,
                   email: $scope.personEmail,
                   phone: $scope.personPhone,
                   phoneCode: $scope.queryPhoneCode
               };
               var nameDiv = $scope.personName.split(/ (.+)/);
               WebTracking.eventReq.triggerEvent({
                   event_id : "sl_lead_user_submitted_lead_form",
                   event_data: {
                       'sl_lead_type' : 'b2c',
                       'sl_site_module' : 'Request a call',
                       'sl_user_email': $scope.personEmail,
                       'sl_user_first_name' : typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                       'sl_user_last_name' : typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                       'sl_user_phone' : $scope.queryPhoneCode + $scope.personPhone || '',
                       'sl_email_opt_in' : true,
                       'sl_sms_opt_in': true
                   },
                   common : "product",
                   user_attributes: ['sl_lead_type', 'sl_event_time','sl_user_email','sl_user_first_name','sl_user_last_name','sl_user_phone'],
                   // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                   // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
               });
               var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
               paramsArr['prefilled_source'] = prefilInfo.prefilled_source;
               paramsArr['prefillled_data'] = prefilInfo.prefillled_data;
               paramsArr['prefilled_modified'] = prefilInfo.prefilled_modified;

               PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                       .then(function(data) {
                           var ga = new gaEventsTracker();
                           if (data.data.status == "Success") {

                               // Update user hash
                               var user = $rootScope.userInfo || {};
                               user.name = paramsArr.name;
                               user.email = paramsArr.email;
                               user.phone = $scope.personPhone || user.phone || '';
                               user.phoneCode = $scope.queryPhoneCode;
                               PostReqService.setUserHash(user);

                               if (paramsArr.queryTyp == 'no_convenient_sch') {
                                   $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureconvenientsched');
                               } else {
                                   var objName = '';
                                   if(typeof user_params.course_name != 'undefined')
                                       objName = user_params.course_name;
                                   if(typeof user_params.bundle_name != 'undefined')
                                       objName = user_params.bundle_name;

                                   ga.gaFireInteractiveEvents('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || Request a call');
                               }
                               if(data.data.result && data.data.result.key) {
                                   setUpDataLayer('leadCapture', 'requestACallBack', {'leadId': data.data.result.key});
                               }

                               resetCallbackFormData();
                               $scope.frmRequestCallback.$setPristine();
                               $scope.callbackStatusMsg = "Thank you for showing your interest ! Our educational consultant will get back to you shortly !"
                               $scope.callbackStatusClass = "success_text";
                               $scope.gaFooterControllerJs.gaForCallbackSuccess();
                           } else {
                               $scope.callbackStatusMsg = "Some error occurred. Please try again later."
                               $scope.callbackStatusClass = "error_text";
                               ga.gaFireInteractiveEvents('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || Request a call');
                           }
                       });
           };
            */
             $scope.submitCallbackForm = function(form) {
				//alert($scope.selected_course.id);
				if(typeof $scope.selected_course != 'object')
				$scope.selected_course = JSON.parse($scope.selected_course);

                if (!form.$valid) {
					if(typeof $scope.selected_course.id == 'undefined' || $scope.selected_course.id == '' || $scope.selected_course.id == '0'){
						document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select error_field select_wraper";
					}else{
						document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select select_wraper";
					}
                    return $scope.helpers.FormNotValid(form);
                }else if(typeof $scope.selected_course.id == 'undefined' || $scope.selected_course.id == '' || $scope.selected_course.id == '0'){
					document.getElementsByClassName("rcb_course_select")[0].className = "rcb_course_select error_field select_wraper";
					return false;
				}else if($scope.phnAgreeCheck == 0 && $scope.agreeClicked == 1){
					return false;
				}
                if($scope.currentLearnerVal == "B2C") {
                   document.getElementById("B2C_lead").disabled = true;
                }
                var leadSourceString=document.URL;
                 // lead prefil info
                var inputData = {
                    name: $scope.personName,
                    email: $scope.personEmail,
                    phone: $scope.personPhone,
                    phoneCode: $scope.queryPhoneCode
                };
                var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
                var nameDiv = $scope.personName.split(/ (.+)/);
                $scope.courseActivated = 0;
                if($scope.currentLearnerVal == "B2B"){
                WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_submitted_lead_form",
                        event_data: {
                            'sl_lead_type' : 'b2c',
                            'sl_site_module' : 'Request a call',
                            'sl_user_email': $scope.personEmail,
                            'sl_user_first_name' : typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                            'sl_user_last_name' : typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                            'sl_user_phone' : $scope.queryPhoneCode + $scope.personPhone || '',
                            'sl_email_opt_in' : true,
                            'sl_sms_opt_in': true
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type', 'sl_event_time','sl_user_email','sl_user_first_name','sl_user_last_name','sl_user_phone'],
                        // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                        // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                    });
                  var paramsArr = {
                    'name': $scope.personName,
                    'email': $scope.personEmail,
                    'phone': $scope.queryPhoneCode + $scope.personPhone,
                    'courseId': $scope.selected_course.id,
                    'courseName': $scope.selected_course.name,
                    'customerType': $scope.currentLearnerVal,
                    'agreeToContact': $scope.phnAgreeCheck,
                    'countryId': $scope.cookie_data.country_id,
                    'countryName': $scope.cookie_country_name,
                    'cityId': $scope.cookie_data.city_id,
                    'cityName': $scope.cookie_data.name,
                    'leadSource': fetchUTMSource(),
                    'leadTrainingType': 'Not Sure',
                    'leadSourceString': leadSourceString,
                    'tagName': 'Request a call',
                    'type': 'callback',
                    'query': '',
                    'productTypeId': $scope.productTypeId,
                    'billingTypeId': $scope.billingTypeId,
                    'method':'saveCallback',
                    'GCLID': getGCLID(),
                    'Latest_Lead_Source__c': GetUTMParams('utmcsr'),
                    'Latest_Lead_Source_Detail__c': GetUTMParams('utmcmd'),
                    'UTM_Source__c': getCookieByName('__utmz'),
                    'UTM_Medium__c': GetUTMParams('utmcmd'),
                    'Device_Type__c': 'Website',
                    'lead_uid' : generateLeadId($scope.personEmail),
                    'prefilled_source':prefilInfo.prefilled_source,
                    'prefillled_data': prefilInfo.prefillled_data,
                    'prefilled_modified':prefilInfo.prefilled_modified
                    };  
                   
                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                        .then(function(data) {
                            var ga = new gaEventsTracker();
                            if (data.data.status == "Success") {

                                // Update user hash
                                var user = $rootScope.userInfo || {};
                                user.name = paramsArr.name;
                                user.email = paramsArr.email;
                                user.phone = $scope.personPhone || user.phone || '';
                                user.phoneCode = $scope.queryPhoneCode;
                                PostReqService.setUserHash(user);

                                if (paramsArr.queryTyp == 'no_convenient_sch') {
                                    $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureconvenientsched');
                                } else {
                                    var objName = '';
                                    if(typeof user_params.course_name != 'undefined')
                                        objName = user_params.course_name;
                                    if(typeof user_params.bundle_name != 'undefined')
                                        objName = user_params.bundle_name;

                                    ga.gaFireInteractiveEvents('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || Request a call');
                                }
                                if(data.data.result && data.data.result.key) {
                                    setUpDataLayer('leadCapture', 'requestACallBack', {'leadId': data.data.result.key});
                                }

                                resetCallbackFormData();
                                $scope.frmRequestCallback.$setPristine();
                                $scope.callbackStatusMsg = "Thank you for showing your interest ! Our educational consultant will get back to you shortly !"
                                $scope.callbackStatusClass = "success_text";
                                $scope.gaFooterControllerJs.gaForCallbackSuccess();
                            } else {
                                $scope.callbackStatusMsg = "Some error occurred. Please try again later."
                                $scope.callbackStatusClass = "error_text";
                                ga.gaFireInteractiveEvents('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || Request a call');
                            }
                        });
                } else  if($scope.currentLearnerVal == "B2C"){
                        var slProductId=Number($scope.selected_course.id);
                        var eventData={
                                'sl_lead_type' : 'b2c',
                                'sl_site_module' : 'Request a call',
                                'sl_user_email': $scope.personEmail,
                                'sl_user_first_name' : typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                                'sl_user_last_name' : typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                                'sl_user_phone' : $scope.queryPhoneCode + $scope.personPhone || '',
                                'sl_email_opt_in' : true,
                                'sl_sms_opt_in': true,
                                'sl_product_id':slProductId,
                                'sl_product_name':$scope.selected_course.name,
                                'sl_product_type':'course'
                        };
                        var selectedCourseInfo=$scope.selectedCourseInfo;
                        if ((typeof selectedCourseInfo !=='undefined' || selectedCourseInfo !==null ) && Object.keys(selectedCourseInfo).length > 0) {
                            for (var attrname in selectedCourseInfo) {
                                eventData[attrname] = selectedCourseInfo[attrname];
                            }
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id : "sl_lead_user_submitted_lead_form",
                            event_data: eventData,
                            common : "product",
                            user_attributes: ['sl_lead_type', 'sl_event_time','sl_user_email','sl_user_first_name','sl_user_last_name','sl_user_phone'],
                        });
                        var webEngageLeadFormParams=WebTracking.eventReq.eventParam.event_data;
                        //if(!webEngageLeadFormParams['sl_product_id']) $scope.sl_product_id = $scope.selected_course.id;
                        //if(!webEngageLeadFormParams['sl_product_name']) $scope.sl_product_name = $scope.selected_course.name;
                        var userName = webEngageLeadFormParams['sl_user_first_name'];
                        $scope.b2cQueryType='callback';
                        var finalB2CParamArr=PostReqService.prepareB2CLeadParameters($scope,webEngageLeadFormParams);
                        var applicationContentType='json';
                        if(typeof leadApiGatewayEndpoint =="undefined"){
                            leadApiGatewayEndpoint="https://services.simplilearn.com/leads/store-raw-data/";
                        }
                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr,applicationContentType)
                            .then(function(data) {
                                     document.getElementById("B2C_lead").disabled = false;
                                     var ga = new gaEventsTracker();
                                     if (data != null && data.status == 200 && data.data.status == "success") {
                                         // Update user hash
                                         var user = $rootScope.userInfo || {};
                                         user.name = finalB2CParamArr.sl_user_first_name
                                         user.email = $scope.personEmail;
                                         user.phone = $scope.personPhone || user.phone || '';
                                         user.phoneCode = $scope.queryPhoneCode;
                                         PostReqService.setUserHash(user);
                                         if (finalB2CParamArr.queryTyp == 'no_convenient_sch') {
                                             $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureconvenientsched');
                                         } else {
                                             var objName = '';
                                             if(typeof user_params.course_name != 'undefined')
                                                 objName = user_params.course_name;
                                             if(typeof user_params.bundle_name != 'undefined')
                                                 objName = user_params.bundle_name;

                                             ga.gaFireInteractiveEvents('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || Request a call');
                                         }
                                         if(data.data.result && data.data.result.key) {
                                             setUpDataLayer('leadCapture', 'requestACallBack', {'leadId': data.data.result.key});
                                         }

                                         resetCallbackFormData();
                                         $scope.frmRequestCallback.$setPristine();
                                         $scope.callbackStatusMsg = "Thank you for showing your interest ! Our educational consultant will get back to you shortly !"
                                         $scope.callbackStatusClass = "success_text";
                                         $scope.gaFooterControllerJs.gaForCallbackSuccess();
                                     } else {
                                         $scope.callbackStatusMsg = "Some error occurred. Please try again later."
                                         $scope.callbackStatusClass = "error_text";
                                         ga.gaFireInteractiveEvents('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || Request a call');
                                     }
                            }) .catch(function (data) {
                                    document.getElementById("B2C_lead").disabled = false;
                                });
                }
            };
            $scope.toggleDisclaimer = function(){
                    if($scope['disclaimerDisplayStatus'].display == 'block'){
                            $scope['disclaimerDisplayStatus'] = {'display':'none'};
                    }else{
                            $scope['disclaimerDisplayStatus'] = {'display':'block'};
                    }
            }


            var resetCallbackFormData = function() {
                // Clear email suggession box
                if(MailcheckDirective && MailcheckDirective.resetSuggessionBox) {
                    MailcheckDirective.resetSuggessionBox();
                }

                $scope.selected_course = {"name":"Select Course", "id":''};
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.phnAgreeCheck = 1;
                $scope.currentLearner = 'an individual learner';
                $scope.currentLearnerVal = 'B2C';
                $scope.personEmail = '';
                $scope.personName = '';
                $scope.personPhone = '';
				document.getElementsByClassName("rcb_course_select")[0].className = "select_wraper rcb_course_select";
            };

            $scope.submitNewsLetterForm = function(newsletterForm) {
                if (newsletterForm.$invalid) {
                    return $scope.helpers.FormNotValid(newsletterForm);
                }
                var newsLtrData = {'method': 'newsLetterFormSubmit', 'email': $scope.newsLetterEmail};
                PostReqService.sendPostRequest(baseApiUrlNocache, newsLtrData)
                        .then(function(data) {
                            if (data.data.status == "Success") {
                                $scope.newsLetterEmail = "";
                                $scope.newsletterForm.$setPristine();

                                $scope.newsLetterForm = {'display': 'none'};
                                $scope.newsLetterSuccess = {'display': 'block'};
                            } else {
                                $scope.newsLetterStatusMsg = "Some error occurred. Please try again later."
                                $scope.newsLetterStatusClass = "error_text";
                            }
                        });
            };

            $scope.toggleCountryDrpDwn = function() {
                if ($scope.countryDropdownStatus === 0) {
                    $scope.countryDropdownStatus = 1;
                }
                else {
                    $scope.countryDropdownStatus = 0;
                }
            };

            $scope.toggleCourseDrpDwn = function() {

				$scope.courseActivated = 1;
            };

            $scope.toggleLearnersDisplay = function() {
                if ($scope.learnersDisplayStatus === 0) {
                    $scope.learnersDisplayStatus = 1;
                }
                else {
                    $scope.learnersDisplayStatus = 0;
                }
            };

            $scope.getLearnersDisplayStatus = function() {
                return $scope.learnersDisplayStatus;
            };

            $scope.setCurrentLearner = function(pCurrLearner, pCurrLearnerVal) {
                $scope.currentLearner = pCurrLearner;
                $scope.currentLearnerVal = pCurrLearnerVal;
            };

            $scope.getCountryDropdownStatus = function() {
                return $scope.countryDropdownStatus;
            };

            $scope.getCourseDropdownStatus = function() {
                return $scope.courseDropdownStatus;
            };

            $scope.setCallbackStatus = function(pStatus, init) {
                $scope.showCallbackStatus = pStatus;
                $scope.callbackStatusMsg = '';
                $scope.callbackStatusClass = '';
                var event_id = "";
                if (pStatus == 0) {
                    event_id = "sl_lead_form_closed";
                } else {
                    event_id = "sl_lead_module_initiated";
                }
                if(event_id != "" && (typeof init == 'undefined' || init != 1)) {
                    WebTracking.eventReq.triggerEvent({
                        event_id : event_id,
                        event_data: {
                          'sl_lead_button_text' : 'Request a Callback',
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'Request a call'
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                }
                if ($scope.countryData == null && !!pStatus) {  //if status is 0, don't fetch country/course data
                    setTimeout(function(){
                        getCountryData();
                    },4000);
                    getCourseData();
                }
            };

            $scope.getCallBackStatus = function() {
                return $scope.showCallbackStatus;
            };

            $scope.setHowItWorksVisibility = function( pStatus ) {
                if( pStatus === null ) {    //if pStatus is null, toggle howItWorksVisibilityStatus
                    if( howItWorksVisibilityStatus === 0 ) {
                        howItWorksVisibilityStatus = 1;
                    }
                    else {
                        howItWorksVisibilityStatus = 0;
                    }
                }
                else {
                    howItWorksVisibilityStatus = pStatus;
                }
            };

            $scope.getHowItWorksStatus = function() {
                return howItWorksVisibilityStatus;
            };

            $scope.setHowItWorksClass = function( pIndex, pClass ) {
                $scope.howItWorksClass[pIndex]= pClass;
            };
            this.marketoLogFormSubmit = function(values){
              var params = {
                    Company: values.Company,
                    Country: values.Country,
                    Email: values.Email,
                    Employees_Range__c: values.Employees_Range__c,
                    FirstName: values.FirstName,
                    LastName:values.LastName,
                    Latest_Lead_Source__c: values.Latest_Lead_Source__c,
                    Latest_Lead_Source_Detail__c: values.Latest_Lead_Source_Detail__c,
                    UTM_Source__c: values.UTM_Source__c,
                    UTM_Medium__c: values.UTM_Medium__c,
                    Site_Module__c: values.Site_Module__c,
                    Entry_Page__c: values.Entry_Page__c,
                    Device_Type__c: values.Device_Type__c,
                    Query_type_name__c: values.Query_type_name__c,
                    GCLID: values.GCLID,
                    lead_uid : generateLeadId(values.Email),
                    method: 'logEnterpriseSegmentData'
                }
                 PostReqService.sendPostRequest(baseApiUrlNocache, params)
                .then(function (output) {
                    // todo
                });
            }
            var getCountryData = function() {
                LocService.getCountryData().then(function(data) {
                    $scope.countryData = data;

                    //set current country using cookie
                    LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

                    //get current country
                    $scope.selected_country = LocService.getCurrentCountry();

                    $scope.cookie_country_name = $scope.selected_country.name;

                    // $scope.personPhone = '';
                    if($scope.delayedCountryListCreated == false) {
                        $scope.countryDataHeaderDropDown = $scope.countryData;
                        $scope.delayedCountryListCreated = true;
                    }
                });
            };

            $scope.setCurrentCountry = function(pCountry) {
                $scope.selected_country = pCountry;

                $scope.personPhone = '';

                document.getElementById('callbackPhone').focus();
            };

            var getCourseData = function() {
                var urlObj = $scope.helpers.makeValidApiUrl('getAllCourses');
                $http.get(urlObj.url, {cache: urlObj.cached})
                .success(function(data) {

                    $scope.courseData = $scope.courseData.concat(data.content);
					if($scope.selected_course == null){
						$scope.selected_course = $scope.courseData[0];
					}
                });
            };

            $scope.setCurrentCourse = function(pCourse) {
                $scope.selected_course = pCourse;
            };

            $scope.setPhnAgreeCheck = function() {
				$scope.agreeClicked = 1;
                if( $scope.phnAgreeCheck === 1 ) {
                    $scope.phnAgreeCheck = 0;
                }
                else {
                    $scope.phnAgreeCheck = 1;
                }
            };

            $scope.$watch('personPhone', function(newValue) {
                if (isNaN(newValue)) {
                    if(typeof $scope.frmRequestCallback!=="undefined"){
                        $scope.frmRequestCallback.personPhone.$setValidity('required', false);
                    }
                } else if (newValue.length > 15) {
                    $scope.frmRequestCallback.personPhone.$setValidity('required', false);
                }
            });

            $scope.validatePhone = function() {
                var regexph = /^\+\d{1,4}-?\d{5,15}$/;

                if( $scope.personPhone.match(regexph) == null ) {
                    return false;
                }
                else {
                    return true;
                }
            };

            $scope.openLiveChat = function( pUrl ) {
                if(typeof _ss_track != 'undefined' && typeof _ss_track.api != 'undefined')
                    _ss_track.api.live_chat_click();
            };


            var gaClassForFooter = function() {
                var ga = new gaEventsTracker();
                this.gaForCallbackTry = function() {
                    var objName = '';
                    if(typeof user_params.course_name != 'undefined')
                        objName = user_params.course_name;
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name;
                    ga.gaFireInteractiveEvents('leadformclicked', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || ' + 'Request a call');
                }
                this.gaForHelpAndSupport = function() {
                    var objName = 'undefined';
                    if(typeof user_params.course_name != 'undefined')
                        objName = user_params.course_name;
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name;
                    ga.gaFireInteractiveEvents('helpandsupportfooter', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || ' + 'Help and Support');
                }
                this.gaForCallbackSuccess = function() {
                    ga.gaFireInteractiveEvents('crosseventsrequestcallbacksuccess');
                }
                this.liveChatTry = function() {
                    var objName = '';
                    if(typeof user_params.course_name != 'undefined')
                        objName = user_params.course_name;
                    if(typeof user_params.bundle_name != 'undefined')
                        objName = user_params.bundle_name;
                    ga.gaFireInteractiveEvents('crosseventslivechattry', user_params.user_id + ' || ' + document.URL + ' || ' + objName + ' || ' + 'chat triggered');
                    WebTracking.eventReq.triggerEvent({
                      event_id : "sl_eng_chat_button_clicked",
                      common : "product"
                    });
                }
                this.gaForCorporateTraining = function() {
                    ga.gaFireInteractiveEvents('footercorporatelinkclick');
                };
                this.gaForReferAndEarn = function($event) {
                    ga.gaFireInteractiveEvents('Re_WebFooter', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                    WebTracking.eventReq.triggerEvent({
                      event_id : "sl_refer_user_clicks_on_referal_link_in_footer",
                      common : "product"
                    });
                };
                this.gaForMobileApp = function($event) {
                    ga.gaFireInteractiveEvents('mobileapplinkfooter', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                };
                this.gaHelpAndSupport = function($event) {
                    ga.gaFireInteractiveEvents('helpandsupportfooter', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                };
            }

            $scope.gaFooterControllerJs = new gaClassForFooter();

            var gaForLeadCapture = function() {
                var ga = new gaEventsTracker();
                this.gaFireLeadCapture = function(captureForm) {
                    ga.gaFireInteractiveEvents(captureForm);
                }
                this.gaForSearchAttempt = function(type) {
                    var elems = document.getElementsByClassName('search_in');
                    var value = '';
                    for (var i = 0; i < elems.length; i++) {
                        if (elems[i].value != "") {
                            value = elems[i].value;
                            break;
                        }
                    }
                    ga.gaFireInteractiveEvents('crosseventssearchattempt', user_params.user_id + ' || ' + document.URL + ' || ' + value);
                }
            }
            $rootScope.gaCommonLeadCaptures = new gaForLeadCapture();

           this.hireHeroClick = function(){
			self.hireOurHeros = self.hireOurHeros==1?0:1;
		   }



        })
        .controller("MobileChatController",function($scope,$rootScope,$http,$window){
            $scope.hoverIconsStyle = {'display':'none'};
            document.onkeydown = function (event) {
                if(event.keyCode == 27){
                    $rootScope.showMobDropQuery = {};
                    $rootScope.mobDropQueryBg = {};
                }
            };
            document.onclick = function (event) {
                var targetEle = event.target;
                if(typeof targetEle != 'undefined'){
                    var targetEleClass = targetEle.className;
                    if(typeof targetEleClass != 'undefined' && targetEleClass != ''){
                        if(targetEleClass != '' && targetEleClass.indexOf("popup_country_wrapper")!=-1){
                            $rootScope.showMobDropQuery = {};
                            $rootScope.mobDropQueryBg = {};
                        }
                    }
                }
            };
            $scope.toggleHoverIcons = function(){
                if($scope.hoverIconsStyle.display == 'none'){
                    $scope.hoverIconsStyle.display = 'block';
                }else{
                    $scope.hoverIconsStyle.display = 'none';
                }
            }

            $scope.hideHoverIcons = function(){
               $scope.hoverIconsStyle.display = 'none';
            }

            $scope.showQueryForm = function(){
                var screenHeight = window.screen.height;
                var formHt = 580;
                var scrolledHt = window.pageYOffset;
                var htDiff = screenHeight-formHt;
                htDiff = htDiff/2;
                var topHt = scrolledHt+htDiff;
                var ourTrainingExpertsDiv = document.getElementsByClassName("our_training_experts")[0];
                if(typeof ourTrainingExpertsDiv != 'undefined'){
                    ourTrainingExpertsDiv.style.position = "static";
                }

                var bundleSideBar = document.getElementsByClassName("bundle_sidevar")[0];
                if(typeof bundleSideBar != 'undefined'){
                    bundleSideBar.style.position = "static";
                }

                var formObj = document.querySelectorAll('form[name="contactTrainerForm"]')[0];
                var formScope = angular.element(formObj).scope();

                $rootScope.showMobDropQuery = {'display':'inline-block'};
                $rootScope.mobDropQueryBg = {'display':'block','height':document.documentElement.scrollHeight+'px'};
                if(window.innerWidth < 768){
                    $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"550px",'width':'100%','z-index':'17'};
                }else{
                    $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"460px",'width':'100%','z-index':'17'};
                }

                if(formScope.contactTrainerForm.$invalid && formScope.agreeClicked == 1){

                        if(window.innerWidth < 768){
                            $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"520px",'width':'100%','z-index':'17'};
                        }else{
                            $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"450px",'width':'100%','z-index':'17'};
                        }
                    }
                $scope.hoverIconsStyle.display = 'none';

            }

            $scope.openMobChatWindow = function(){
                _ss_track.api.live_chat_click();
                $scope.hoverIconsStyle.display = 'none';
            }


            angular.element($window).bind('orientationchange', function () {
                $rootScope.showMobDropQuery = {};
                $rootScope.mobDropQueryBg = {};
                $rootScope.showDrpQueryFrm = {};
                window.scrollBy(0, 100);
            });


        })
        .controller("MobileLeadController",function($scope,$rootScope,$http,$window,$timeout,$document){
            $scope.showFooterSticky = false;
            $scope.showCornerSticky = false;
            $scope.slideUpStatus=false;


            $scope.slideUp = function($event){
                $event.preventDefault();
                $scope.slideUpStatus=true;
                var bodyClassName = document.getElementsByTagName("body")[0].className;
                if(bodyClassName.indexOf("hiddenScroll") == -1){
                    document.getElementsByTagName("body")[0].className = document.getElementsByTagName("body")[0].className+" hiddenScroll";
                }
            }

            if(!isDesktopDevice()){
                var utmx_section = function(){};
                var utmx = function(){};
                var executedOnce = 0;
                var windowEl = angular.element($window);
                var minScrollHt = windowEl[0].screen.height;
                var isPageSmall = 0;
                if((document.body.clientHeight - ((window.screen.height*2)+200)) < 500){
                    isPageSmall = 1;
                }

                var initABModule = function(){
                    var k='60255365-6',d=document,l=d.location,c=d.cookie;
                    if(l.search.indexOf('utm_expid='+k)>0)
                        return;
                    function f(n){
                        if(c){
                            var i=c.indexOf(n+'=');
                            if(i>-1){
                                var j=c.indexOf(';',i);
                                return escape(c.substring(i+n.length+1,j<0?c.length:j))
                            }
                        }
                    }
                    var x=f('__utmx'),xx=f('__utmxx'),h=l.hash;

                    var scriptSrc = 'http'+(l.protocol=='https:'?'s://ssl':'://www')+'.google-analytics.com/ga_exp.js?'+'utmxkey='+k+
                            '&utmx='+(x?x:'')+'&utmxx='+(xx?xx:'')+'&utmxtime='+new Date().valueOf()+(h?'&utmxhash='+escape(h.substr(1)):'');
                    var po = document.createElement('script');
                    po.type = 'text/javascript';
                    po.src = scriptSrc;
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(po, s);

                    po.onload = function(){
                        getABModuleScript();
                    }

                };

                var getABModuleScript = function(){
                   // document.write('<script type="text/javascript" src="//www.google-analytics.com/cx/api.js?experiment=jjgRLMYuSKCz_v2K0Au2Hw"></script>');
                    var po = document.createElement('script');
                    po.type = 'text/javascript';
                    po.src = '//www.google-analytics.com/cx/api.js?experiment=jjgRLMYuSKCz_v2K0Au2Hw';
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(po, s);

                    po.onload = function(){
                        getPageVariation();
                        pageVariations[chosenVariation]();
                    }
                }

                var getPageVariation = function(){
                   chosenVariation = cxApi.chooseVariation();

                }

                var pageVariations = [
                    function() {

                        var footerObj = document.getElementsByTagName("footer")[0];
                        footerObj.style.marginBottom  = "45px";
                        windowEl.on('scroll',function(){
                            setTimeout(function(){
                                if(isPageSmall){
                                    if(this.scrollY > ((this.screen.height)/2)-100){
                                        $scope.showFooterSticky = true;
                                        $scope.$apply();
                                    }
                                }else if(this.scrollY > minScrollHt-150){
                                    $scope.showFooterSticky = true;
                                    $scope.$apply();
                                }
                            },1000);
                        });
                    },
                    function() {
                        windowEl.on('scroll',function(){
                            setTimeout(function(){
                                if(isPageSmall){
                                    if(this.scrollY > ((this.screen.height)/2)-100){
                                        $scope.showCornerSticky = true;
                                        $scope.$apply();
                                    }
                                }else if(this.scrollY > minScrollHt-150){
                                    $scope.showCornerSticky = true;
                                    $scope.$apply();
                                }
                            },1000);
                        });
                    }
                  ];


                initABModule();
                utmx('url','A/B');
            }


             $scope.openMobChatWindow = function($event){
                $event.preventDefault();
                _ss_track.api.live_chat_click();
                document.getElementsByTagName("body")[0].className = document.getElementsByTagName("body")[0].className.replace(" hiddenScroll","");
            }

            $scope.showQueryForm = function(){
                var screenHeight = window.screen.height;
                var formHt = 580;
                var scrolledHt = window.pageYOffset;
                var htDiff = screenHeight-formHt;
                htDiff = htDiff/2;
                var topHt = scrolledHt+htDiff;
                var ourTrainingExpertsDiv = document.getElementsByClassName("our_training_experts")[0];
                if(typeof ourTrainingExpertsDiv != 'undefined'){
                    ourTrainingExpertsDiv.style.position = "static";
                }

                var bundleSideBar = document.getElementsByClassName("bundle_sidevar")[0];
                if(typeof bundleSideBar != 'undefined'){
                    bundleSideBar.style.position = "static";
                }

                var formObj = document.querySelectorAll('form[name="contactTrainerForm"]')[0];
                var formScope = angular.element(formObj).scope();

                $rootScope.showMobDropQuery = {'display':'inline-block'};
                $rootScope.mobDropQueryBg = {'display':'block','height':document.documentElement.scrollHeight+'px'};
                if(window.innerWidth < 768){
                    $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"550px",'width':'100%','z-index':'17'};
                }else{
                    $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"460px",'width':'100%','z-index':'17'};
                }

                if(formScope.contactTrainerForm.$invalid && formScope.agreeClicked == 1){

                        if(window.innerWidth < 768){
                            $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"520px",'width':'100%','z-index':'17'};
                        }else{
                            $rootScope.showDrpQueryFrm = {'display':'inline-block','top':topHt+'px','position':'absolute','left':'0','right':'0','bottom':'0','margin':'0 auto','height':"450px",'width':'100%','z-index':'17'};
                        }
                    }

            }

            $scope.closeModal = function(){
                $scope.slideUpStatus=false;
                document.getElementsByTagName("body")[0].className = document.getElementsByTagName("body")[0].className.replace(" hiddenScroll","");
            }

            $scope.clicktoCallUS = function() {
                var clss = angular.element(document.getElementsByClassName('clic_to_call'));
                if(clss.hasClass('visible-xs')){
                    clss.removeClass('visible-xs visible-sm').addClass('hidden-xs hidden-sm');
                    $scope.gaMFooterCtrlJs.gaForClose(user_params.pageCategory);
                }else if(clss.hasClass('hidden-xs')){
                    clss.removeClass('hidden-xs hidden-sm').addClass('visible-xs visible-sm');
                    if(typeof user_params.email != 'undefined' && user_params.email!=''){
                        var str = "email:"+user_params.email+",page:"+user_params.pageCategory;
                        $scope.gaMFooterCtrlJs.gaForOpenLoginU(str);
                    }else{
                        $scope.gaMFooterCtrlJs.gaForNonLoginU(user_params.pageCategory);
                    }

                }
            }

            $scope.clicktoCallM = function() {
                $scope.gaMFooterCtrlJs.gaFireGeneral('Course_callus_click', user_params.course_name);
            }

            $scope.chatClickM = function() {
                $scope.gaMFooterCtrlJs.gaFireGeneral('Course_chat_click', user_params.course_name);
            }
            $scope.queryClickM = function() {
                $scope.gaMFooterCtrlJs.gaFireGeneral('Course_query_click', user_params.course_name);
            }

            $scope.connectCall = function(){
                $scope.gaMFooterCtrlJs.gaForClickBtn(user_params.pageCategory);
            }

            var gaClassForMFooter = function() {
                var ga = new gaEventsTracker();
                this.gaFireGeneral = function(cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                }
                this.gaForClose = function(info) {
                    ga.gaFireInteractiveEvents('cCallClose',info);
                }
                this.gaForOpenLoginU = function(info) {
                    ga.gaFireInteractiveEvents('cCallLogged',info);
                }
                this.gaForNonLoginU = function(info) {
                    ga.gaFireInteractiveEvents('cCallNotLogged',info);
                }
                this.gaForClickBtn = function(info) {
                    ga.gaFireInteractiveEvents('cCallBtn',info);
                }
            }

            $scope.gaMFooterCtrlJs = new gaClassForMFooter();
            $document.on('scroll', function (e) {
                    var st = document.scrollingElement.scrollTop;
                    if(document.getElementById("eu_sticky_visible")){
                        if(st > 782){
                         document.getElementById("eu_sticky_visible").classList.add("sticky_visible");
                         document.getElementById("banner-btn_visible").classList.add("hidden-top-btn");
                    }else{
                        document.getElementById("eu_sticky_visible").classList.remove("sticky_visible");
                        document.getElementById("banner-btn_visible").classList.remove("hidden-top-btn");
                    }
                    }
            });
        });
 /*------------- End : FooterController.js-----------*/ 

 /*------------- Begin : FreePracticeTestController.js-----------*/ 

angular.module('Simplilearn')
        .controller('FreePracticeTestController2', function ($rootScope, $scope, PostReqService, $location, $interval, LocService, $cookies, LeadService, StorageService) {
            $scope.testCompleted = 0;
            $scope.hasValidation = true;
            $scope.isEuro = user_params.isEuro;
            $scope.phnAgreeCheck = !user_params.isEuro;
            $scope.leadDelayFlag = true;
            $scope.totalQuestionsCorrect = 0;
            $scope.totalQuestions = 0;
            $scope.totalQuestionsCorrect = 0
            $scope.leadCreationTime = 0;
            var examDuration = 0;
            var fptPVCookieName = fptPageViewedCookieName;
            var fptLeadIdCookieName = fptLeadGeneratedCookieName;
            // console.log($scope.phnAgreeCheck);
            this.init = function () {
                $scope.isAagreeCheckDirty = false;
            };
            $scope.defaultstateQuestions = function (tot_ques, max_minutes, showQuestion, test_name) {
                //$scope.phnAgreeCheck = false;
                $scope.qnumber = 1;
                $scope.tempQnumber = 1;
                $scope.totalQues = tot_ques;
                $scope.test_time = max_minutes;
                $scope.minutes = max_minutes;
                $scope.pauseScreen = 0;
                $scope.testCompleted = 0;
                $scope.showQuestions = showQuestion;
                $scope.test_name = test_name;
                $scope.lead_microKey = '';
                examDuration = max_minutes;
                window.location.hash = '';

                // Get country information
                LocService.getCountryData().then(function (data) {
                    $scope.countryData = data;
                    LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                    $scope.selected_country = LocService.getCurrentCountry();
                    $scope.cookie_country_name = $scope.selected_country.name;
                    $scope.countryDataHeaderDropDown = $scope.countryData;
                });

            };

            $scope.$watch('testCompleted', function (newVal) {
                var fptPageViewTriggered = getCookieByName(fptPVCookieName);
                if (newVal && (typeof fptPageViewTriggered == "undefined" || fptPageViewTriggered == 0)) {
                    updateFptPageViewedCookie(true);
                    webengage.onReady(function (data) {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_eng_fpt_final_score",
                            event_data: {
                                'sl_fpt_final_questions_correct': Number($scope.totalQuestionsCorrect),
                                'sl_fpt_total_questions': Number($scope.totalQuestions),
                                'sl_fpt_test_name': $scope.test_name
                            },
                            common: "product"
                        });
                    });
                }

            });
            $scope.agreeCheck = function () {
                $scope.phnAgreeCheck = !$scope.phnAgreeCheck;
                $scope.isAagreeCheckDirty = true;
            }
            this.gaGdprOptInCheckbox = function (event, name, sitemodule) {
                if (user_params.isEuro && event.target.checked) {
                    var pGaKey = "gdprOptinCheckboxChecked";
                    var pGaLabel = user_params.user_id + ' || ' + name + ' || ' + sitemodule;
                    $scope.gaForFPT.gaFPTgaEvents(pGaKey, pGaLabel);
                }
            }

            this.start_button_header = function () {
                if ($scope.showQuestions == 0) {
                    var elmnt1 = document.getElementById("lead_form_div");
                    $scope.scrollToCustom(0, elmnt1.offsetTop, 500);
                    // $scope.gaForFPT.gaFPTgaEventcall('Start button Header');
                }
            };

            this.selectQues = function (quesnum) {
                $scope.qnumber = quesnum;
            }

            this.skipClick = function () {
                if ($scope.qnumber < $scope.totalQues) {
                    this.selectQues($scope.qnumber + 1);
                }
            };

            this.nextClick = function () {
                if ($scope.qnumber < $scope.totalQues) {
                    $scope.gaForFPT.gaFPTgaEvents('fptquestionsubmitted', user_params.user_id + ' || ' + document.URL + ' || proceed');
                    this.selectQues($scope.qnumber + 1);
                }

            }

            this.prevClick = function () {
                if ($scope.qnumber > 1) {
                    $scope.gaForFPT.gaFPTgaEventcall('Previous-Ques' + $scope.qnumber);
                    this.selectQues($scope.qnumber - 1);
                }

            };

            this.pause_countdown = function () {
                $scope.tempQnumber = $scope.qnumber;
                $scope.qnumber = 0;
                $scope.pauseScreen = 1;
                $scope.stop();
                $scope.gaForFPT.gaFPTgaEventcall('Pause-Ques' + $scope.tempQnumber);

            }

            this.resume_countdown = function () {
                $scope.qnumber = $scope.tempQnumber;
                $scope.pauseScreen = 0;
                $scope.countdown();
                $scope.gaForFPT.gaFPTgaEventcall('Resume-Ques' + $scope.qnumber);
            };

            this.submit_test_paper = function () {
                if (confirm("Do you really want to finish the test ?")) {
                    var currentTime = new Date().getTime();
                    if(currentTime < $scope.leadCreationTime){
                        updateFptLeadCreationTime();
                    }else{
                        document.getElementById('practice-test-form').submit();
                        $scope.gaForFPT.gaFPTgaEvents('fptquestionsubmitted', user_params.user_id + ' || ' + document.URL + ' || exit');
                    }
                }
            };


            //$scope.minutes = 0.5;
            $scope.seconds = $scope.minutes * 60;
            $scope.$watch('minutes', function () {
                $scope.seconds = $scope.minutes * 60;
            });

            $scope.countdown = function () {
                if ($scope.seconds <= 0)
                    return;
                $scope.countdownInterval = $interval(function () {
                    if ($scope.seconds <= 0) {
                        document.getElementById('practice-test-form').submit();
                        // $scope.gaForFPT.gaFPTgaEventcall('TimeOut-Ques'+$scope.qnumber);
                        $interval.cancel(countdownInterval);
                        //Finish the test here
                    }
                    $scope.seconds--;
                }, 1000);
            };


            $scope.stop = function () {
                $interval.cancel($scope.countdownInterval);
            };

            var self = this;

            // Get user hash & auto fill
            (function () {
                var fptPageViewTriggered = getCookieByName(fptPVCookieName);
                var userWatch = $rootScope.$watch('userInfo', function (newValue, oldValue) {
                    var user = (newValue && newValue.email) ? newValue : oldValue;
                    if (user && user.email && typeof user == 'object') {
                        $scope.userName = user.name || $scope.userName;
                        $scope.userEmail = user.email || $scope.userEmail;
                        $scope.phone = user.phone || $scope.phone;
                        // Set phone code
                        var queryCountryCodeWatch = $rootScope.$watch('queryCountryCode', function (newValue) {
                            if (newValue) {
                                setTimeout(function () {
                                    if (user.phoneCode) {
                                        $scope.queryPhoneCode = user.phoneCode;
                                        $scope.$apply()
                                    }
                                }, 100);
                                queryCountryCodeWatch();
                            }
                        });

                        userWatch(); // stop listen
                    }
                });
                    
            webengage.onReady(function (data) {
                if ($scope.showQuestions == 0) {
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_eng_web_page_viewed",
                        event_data: {},
                        common: "product"
                    });
                }
            });
            })();

            /** Lead creation **/
            //$scope.isAagreeCheckDirty = false;
            this.lead_generation = function () {
                if (!$scope.hasValidation) {
                    // Go to next page
                    window.scrollTo(0, 0);
                    var elmnt1 = document.getElementById("test-details-div");
                    $scope.scrollToCustom(0, elmnt1.offsetTop, 500);

                    $scope.showQuestions = 1;
                    $scope.countdown();


                    var testForm = document.getElementById("practice-test-form");
                    if (testForm && testForm.reset) {
                        testForm.reset();
                    }
                } else {
                    $scope.test_email = $scope.lead_creation_form.userEmail.$viewValue;
                    $scope.test_phone = $scope.queryPhoneCode + $scope.lead_creation_form.phone.$modelValue;
                    $scope.test_name = $scope.lead_creation_form.fullName.$viewValue;

                    // Form validate
                    //$scope.isAagreeCheckDirty = true;
                    if ($scope.lead_creation_form.$invalid) {
                        if ($scope.lead_creation_form.fullName.$invalid) {
                            $scope.lead_creation_form.fullName.$setViewValue($scope.lead_creation_form.fullName.$viewValue);
                        }
                        if ($scope.lead_creation_form.userEmail.$invalid) {
                            $scope.lead_creation_form.userEmail.$setViewValue($scope.lead_creation_form.userEmail.$viewValue);
                        }
                        if ($scope.lead_creation_form.phone.$invalid) {
                            $scope.lead_creation_form.phone.$setViewValue($scope.lead_creation_form.phone.$viewValue);
                        }
                        return false;
                    }

                    if ($scope.phnAgreeCheck == false) {
                        return false;
                    }
                    window.scrollTo(0, 0);
                    var elmnt1 = document.getElementById("test-details-div");
                    $scope.scrollToCustom(0, elmnt1.offsetTop, 500);

                    $scope.showQuestions = 1;
                    $scope.countdown();

                    var testForm = document.getElementById("practice-test-form");
                    if (testForm && testForm.reset) {
                        testForm.reset();
                    }

                    // Create lead
                    var courseData = null;
                    var courseId = null;
                    var courseName = null;
                    var productTypeId = null;
                    var billingTypeId = null;

                    try {
                        courseData = JSON.parse(test_course_data);
                        var courseId = courseData.course_id;
                        var courseName = courseData.course_title;
                        var productTypeId = courseData.productTypeId;
                        var billingTypeId = courseData.billingTypeId;
                    } catch (e) {

                    }

                    var email = $scope.lead_creation_form.userEmail.$modelValue;
                    var name = $scope.lead_creation_form.fullName.$viewValue;
                    var phone = $scope.queryPhoneCode + $scope.lead_creation_form.phone.$modelValue;
                    var agreeFlag = 1;
                    var locatorCookie = getCookieByName('locatori9');
                    var locatorCookieObj = JSON.parse(locatorCookie);

                    // GHX-620 Experiment
                    var coursesAllowed = [];
                    try {
                        coursesAllowed = JSON.parse(fptHotLeadCourses);
                    } catch (e) {
                        coursesAllowed = [];
                    }
                    var type = 'practice_test';
                    var postParams = {
                        'email': email,
                        'name': name,
                        'phone': phone,
                        'courseId': courseId,
                        'courseName': courseName,
                        'customerType': 'B2C',
                        'agreeToContact': agreeFlag,
                        'leadSource': fetchUTMSource(),
                        'leadTrainingType': 'Not Sure',
                        'leadSourceString': document.URL,
                        'productTypeId': productTypeId,
                        'billingTypeId': billingTypeId,
                        'query': 'This user is interested in ' + courseName,
                        'countryId': locatorCookieObj.country_id,
                        'countryName': locatorCookieObj.country_name,
                        'cityId': locatorCookieObj.city_id,
                        'cityName': locatorCookieObj.name,
                        //  'lead_delay_time': ($scope.test_time * 60),
                        'GCLID': getGCLID(),
                        'b2cQueryType': type,
                    };
                    var leadCreationTime = new Date().getTime();
                    if ($scope.leadDelayFlag) {
                        //1 min. = 60000 ms,examDuration is in minutes
                        var leadDelayTime = (examDuration * 60000);
                        //console.log("Lead Creation Time",leadCreationTime + leadDelayTime);
                        var leadCreationWithDelay = leadCreationTime + leadDelayTime;
                        postParams['lead_creation_time'] = leadCreationWithDelay;
                        $scope.leadCreationTime = leadCreationWithDelay;
                    }
                    //Code to save in COllection for sending Email Start
                    var postParamsEmail = {
                        'name': name,
                        'email': email,
                        'phone': phone,
                        'courseId': courseId,
                        'courseName': courseName,
                        'leadSource': fetchUTMSource(),
                        'leadSourceString': document.URL,
                        'type': 'practice_test', //  ###############
                        'countryId': locatorCookieObj.country_id,
                        'countryName': locatorCookieObj.country_name,
                        'cityId': locatorCookieObj.city_id,
                        'cityName': locatorCookieObj.name,
                        'method': 'coldLeadsEmailCourseLink'
                    };
                    var nameDiv = name.split(/ (.+)/);
                    var siteModule = 'fpt-paper-cold';
                    if (typeof user_params.sl_override_site_module !== "undefined" && user_params.sl_override_site_module) {
                        siteModule = user_params.sl_override_site_module;
                    }
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_lead_user_submitted_lead_form",
                        event_data: {
                            'sl_lead_type': 'b2c',
                            'sl_site_module': siteModule,
                            'sl_user_email': email,
                            'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                            'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                            'sl_user_phone': phone || '',
                            'sl_email_opt_in': true,
                            'sl_sms_opt_in': true
                        },
                        common: "product",
                        user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_user_phone'],
                        // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                        // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                    });

                    //TO send Email we need to store in Mongo
                    PostReqService.sendPostRequest(baseApiUrlNocache, postParamsEmail)
                            .then(function (data) {
                            });
                    //Code to save in COllection for sending Email End
                    postParams['cp_info'] = StorageService.getItem('cp_info');

                    // lead prefil info
                    var inputData = {
                        name: postParams.name,
                        email: postParams.email,
                        phone: $scope.lead_creation_form.phone.$modelValue,
                        phoneCode: $scope.queryPhoneCode
                    };

                    var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
                    postParams['prefilled_source'] = prefilInfo.prefilled_source
                    postParams['prefillled_data'] = prefilInfo.prefillled_data
                    postParams['prefilled_modified'] = prefilInfo.prefilled_modified;
                    var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                    var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(postParams, webEngageLeadFormParams);
                    var applicationContentType = 'json';
                    PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                            .then(function (data) {
                                if (data != null && data.status == 200 && data.data.status == "success") {
                                    // Update user hash
                                    var user = $rootScope.userInfo || {};
                                    user.name = name || user.name || '';
                                    user.email = $scope.userEmail || user.email;
                                    user.phone = $scope.phone || user.phone || '';
                                    user.phoneCode = $scope.queryPhoneCode || user.phoneCode || '';
                                    PostReqService.setUserHash(user);
                                    var leadId = typeof data.data.data !== "undefiend" && typeof data.data.data.lead_id !== "undefined" ? data.data.data.lead_id : '';
                                    if (leadId) {
                                        $scope.lead_microKey = leadId;
                                        setFptLeadId(leadId);
                                    }

                                }
                            });
                    /*LeadService.createLead(postParams).then(function (data) {
                     if (data.status == true && data.response.data.status == 'Success') {
                     
                     // Update user hash
                     var user = $rootScope.userInfo || {};
                     user.name = name || user.name || '';
                     user.email = $scope.userEmail || user.email;
                     user.phone = $scope.phone || user.phone || '';
                     user.phoneCode = $scope.queryPhoneCode || user.phoneCode || '';
                     PostReqService.setUserHash(user);
                     
                     $scope.lead_microKey = data.response.data.result.key;
                     }
                     });*/

                    $scope.leadSubmitteEvent();
                    updateFptPageViewedCookie(false);
                    return true;
                }
            }

            $scope.agreeCheck = function () {

                $scope.phnAgreeCheck = !$scope.phnAgreeCheck;
                $scope.isAagreeCheckDirty = true;
                var phoneNo = $scope.phone;
                var name = $scope.userName;
                var phone_regx = /^[0-9]{1,15}$/;
                if (phone_regx.test(phoneNo)) {
                    $scope.lead_creation_form.phone.$setValidity('phone', true);
                } else {
                    $scope.lead_creation_form.phone.$setValidity('phone', false);
                }
                var hasNumber = /\d/;
                if (typeof name === 'string' && !hasNumber.test(name)) {
                    $scope.lead_creation_form.fullName.$setValidity('fullName', true);
                } else {
                    $scope.lead_creation_form.fullName.$setValidity('fullName', false);
                }
            }

            $scope.$watch('phnAgreeCheck', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.phnAgreeCheck && $scope.isEuro);
            });

            $scope.$watch('phone', function (newValue, oldValue) {
                if ($scope.hasValidation && typeof $scope.lead_creation_form != 'undefined' && typeof $scope.lead_creation_form.phone != 'undefined') {
                    var phone_regx = /^[0-9]{1,15}$/;
                    if (phone_regx.test(newValue)) {
                        $scope.lead_creation_form.phone.$setValidity('phone', true);
                    } else {
                        $scope.lead_creation_form.phone.$setValidity('phone', false);
                    }
                }
            });
            $scope.$watch('userName', function (newValue) {
                if ($scope.hasValidation && typeof $scope.lead_creation_form != 'undefined' && typeof $scope.lead_creation_form.fullName != 'undefined') {
                    var hasNumber = /\d/;
                    if (typeof newValue === 'string' && !hasNumber.test(newValue)) {
                        $scope.lead_creation_form.fullName.$setValidity('fullName', true);
                    } else {
                        $scope.lead_creation_form.fullName.$setValidity('fullName', false);
                    }
                }
            });

            this.view_explanation = function () {
                document.getElementById('test-explanations').style.display = 'block';
                document.getElementById('test_summary').style.display = 'none';
                document.getElementById('header_part-bg').style.display = 'none';
                $scope.gaForFPT.gaFPTgaEventcall('View Explanation Click');
            };

            this.course_click = function (course_name) {
                $scope.gaForFPT.gaFPTgaEventcall('Course Page Click - ' + course_name);
            };
            var fptforminitiated = false;
            $scope.leadInitiateEvent = function () {
                if (!fptforminitiated) {
                    var siteModule = 'fpt-paper-cold';
                    if (typeof user_params.sl_override_site_module !== "undefined" && user_params.sl_override_site_module) {
                        siteModule = user_params.sl_override_site_module;
                    }
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_lead_user_initiated_lead_form",
                        event_data: {
                            'sl_lead_type': 'b2c',
                            'sl_site_module': siteModule,
                        },
                        common: "product",
                        user_attributes: ['sl_lead_type']
                    });
                    $scope.gaForFPT.gaFPTgaEvents('fptleadinitiated', user_params.user_id + ' || ' + document.URL);
                    fptforminitiated = true;
                }
            }
            $scope.leadSubmitteEvent = function () {
                $scope.gaForFPT.gaFPTgaEvents('fptleadsubmitted', user_params.user_id + ' || ' + document.URL);
            }
            $scope.initValidation = function () {
                //$scope.phnAgreeCheck = isEuro;
                // Validation
                /*$scope.$watch('userEmail', function (newValue) {
                 var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                 if (!email_rgx.test(newValue)) {
                 $scope.lead_creation_form.userEmail.$setValidity('userEmail', false);
                 } else {
                 $scope.lead_creation_form.userEmail.$setValidity('userEmail', true);
                 }
                 });*/

            };

            $scope.scrollToCustom = function (element, to, duration) {
                if (duration <= 0)
                    return;
                var difference = to - element;
                var perTick = difference / duration * 10;

                setTimeout(function () {
                    element = element + perTick;
                    window.scrollTo(0, element);
                    if (element === to)
                        return;
                    $scope.scrollToCustom(element, to, duration - 10);
                }, 10);
            };

            /** End lead cration **/
            var gaForFreePracticeTest = function () {
                var ga = new gaEventsTracker();
                this.gaFPTgaEventcall = function (label) {
                    if (typeof label !== 'undefined' && label && typeof $scope.test_name !== 'undefined' && $scope.test_name) {
                        ga.gaFireInteractiveEvents('FreePracticeTest', label, $scope.test_name);
                    }
                }
                this.gaFPTgaEvents = function (type, label) {
                    if (typeof label !== 'undefined' && label && typeof $scope.test_name !== 'undefined' && $scope.test_name) {
                        ga.gaFireInteractiveEvents(type, label);
                    }
                }
            };
            var updateFptPageViewedCookie = function (status) {
                var path = "/";
                var cname = fptPVCookieName;
                var cvalue = (status && status === true) ? 1 : 0;
                var d = new Date();
                d.setTime(d.getTime() + (90 * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            }
            var setFptLeadId = function (leadId) {
                if (leadId) {
                    var path = "/";
                    var cname = fptLeadIdCookieName;
                    var cvalue = leadId;
                    var d = new Date();
                    d.setTime(d.getTime() + (90 * 24 * 60 * 60 * 1000));
                    var expires = "expires=" + d.toUTCString();
                    document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
                }
            }

            var updateFptLeadCreationTime = function () {
                var fptLeadId = getCookieByName(fptLeadIdCookieName);
                if (fptLeadId) {
                    var currentTime = new Date().getTime();
                    if (typeof leadApiUpdateEndpoint == "undefined") {
                        leadApiUpdateEndpoint = "https://services.simplilearn.com/leads/update-lead/";
                    }
                    var fptLeadUpdateUrl = leadApiUpdateEndpoint;
                    var leadParams = {};
                    leadParams['lead_id'] = fptLeadId;
                    leadParams['lead_creation_time'] = currentTime;
                    var applicationContentType = 'json';
                    PostReqService.sendPostRequest(fptLeadUpdateUrl, leadParams, applicationContentType)
                            .then(function (data) {
                                if (data != null && data.status == 200 && data.data.status == "success") {
                                    // console.log("Timestamp update Status : Success");
                                } else {
                                    // console.log("Timestamp update Status : Failed")
                                }
                                document.getElementById('practice-test-form').submit();
                                $scope.gaForFPT.gaFPTgaEvents('fptquestionsubmitted', user_params.user_id + ' || ' + document.URL + ' || exit');
                            });
                }
            }
            $scope.gaForFPT = new gaForFreePracticeTest();

        });

angular.module('Simplilearn')
        .filter('secondsToDate', [
            function () {
                return function (seconds) {
                    return new Date(1970, 0, 1).setSeconds(seconds);
                };
            }
        ]);


function show_explanation() {

} /*------------- End : FreePracticeTestController.js-----------*/ 

 /*------------- Begin : FreeResourceMenuController.js-----------*/ 

angular.module('Simplilearn')
.controller('FreeResourceMenuCtrl', function($rootScope){
    
    var self = this;
    var dropdownStatus = 0;
    self.categoryData = {};
    self.mobWidthFlag = $rootScope.mobWidthFlag;

    self.init_category = function(pCatId) {
        self.categoryData[pCatId] = {'viewMore':0, 'viewMoreTxt':'View All'};
    };
	
    self.setDropdownStatus = function(val) {
        dropdownStatus = val;
    };
    
    self.getDropdownStatus = function() {
        return dropdownStatus;
    };
    
    self.toggleViewMoreStatus = function(pCatId) {
        if( self.categoryData[pCatId].viewMore === 0 ) {
            self.categoryData[pCatId].viewMore = 1;
            self.categoryData[pCatId].viewMoreTxt = 'View Less';
        }
        else {
            self.categoryData[pCatId].viewMore = 0;
            self.categoryData[pCatId].viewMoreTxt = 'View More';
        }
        
    };
    
    self.getViewMoreStatus = function(pCatId) {
        return self.categoryData[pCatId].viewMore;
    };
    
});

 /*------------- End : FreeResourceMenuController.js-----------*/ 

 /*------------- Begin : FreeTrialController.js-----------*/ 

angular.module('Simplilearn')
.controller('FreeTrialController', function($scope, $http, LocService, $interval, $location, $rootScope, $timeout, $compile, PostReqService) {
    $scope.showFreeTrialPopup = false;
    $scope.contactMe = 1;
    $scope.agreeClicked = 0;
    var initUserHash = function() {
        // Get user information
        var userWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
            var user = (newValue && newValue.email)?newValue:oldValue;
            if(user && user.email && typeof user == 'object') {
                $scope.ftUserEmail = user.email || $scope.email;
                $scope.ftUserPhone = user.phone || $scope.phone;
                // $scope.phoneCode = user.phoneCode || $scope.phoneCode;
                userWatch(); // stop listen
            }
        });
    }

    this.initFreeTrial = function() {
        initUserHash();
        if(document.getElementById("frmOnlineCourses") != null)
            document.getElementById("frmOnlineCourses").addEventListener('submit', frmOnlineCoursesSubmit);
        if(document.getElementById("frmLvcPassCourses") != null)
            document.getElementById("frmLvcPassCourses").addEventListener('submit', frmOnlineCoursesSubmit);
        if(document.getElementById("frmOnlineBundles") != null)
            document.getElementById("frmOnlineBundles").addEventListener('submit', frmOnlineCoursesSubmit);
        if(document.getElementById("sticky-enroll-btn") != null) {
            var btns = ['sticky-enroll-btn', 'bundle-enroll-btn'];
            for( var elem in btns ) {
                var btnElem = document.getElementById(btns[elem]);
                if(btnElem != null) {
                    btnElem.addEventListener('click', function(event) {
                        var submitId = angular.element(event.target).attr("data-submit");
                        if(submitId) {
                            var formObj = document.getElementById(submitId);
                            var elems = formObj.getElementsByTagName("button");
                            if(typeof elems[0] != 'undefined')
                                elems[0].click();
                             return false;
                        }
                    });
                }
            }

        }
    }

            $scope.setParamsBeforeSubmit = function ($event) {
                
                if ($scope.freeTrialForm.$invalid || $scope.contactMe===false) {
                    $event.preventDefault();
                    if ($scope.freeTrialForm.ftUserEmail.$invalid) {
                        $scope.freeTrialForm.ftUserEmail.$setViewValue($scope.freeTrialForm.ftUserEmail.$viewValue);
                    }
                    if ($scope.freeTrialForm.ftUserPhone.$invalid) {
                        $scope.freeTrialForm.ftUserPhone.$setViewValue($scope.freeTrialForm.ftUserPhone.$viewValue);
                    }
                    return;
                } else {
                    var phoneCodeDom = document.getElementById('free-trail-phone-coutnry-code');
                    var selectedOption = phoneCodeDom[phoneCodeDom.selectedIndex];
                    $scope.phoneCountryCode = angular.element(selectedOption).attr('data-country-code') || '';
                    document.freeTrialForm.submit();
                }

            }

    $rootScope.$watch('countryList', function(newValue) {
        if(newValue) {
            setTimeout(function() {
                if(typeof $rootScope.queryPhoneCode == 'string') {
                    // if(typeof  $scope.phoneCode == 'undefined')
                        $scope.phoneCode = $rootScope.queryPhoneCode;
                        $scope.$apply();
                }
            }, 100)
        }
    })

    this.hideFreeTrialPopup = function() {
        $scope.showFreeTrialPopup = false;
    }

    var frmOnlineCoursesSubmit = function(event) {
        var elems = event.target.getElementsByTagName("input");
        var free_trialElems = document.getElementsByName('free_trial');
        var data = {};
        if(typeof free_trialElems != 'undefined' && free_trialElems.length > 0){
            for( var elemsFT in free_trialElems ) {
                if(typeof free_trialElems[elemsFT].value != 'undefined' && free_trialElems[elemsFT].value == 1) {
                       for( var elem in elems ) {
                            if(!isNaN(elem) && typeof data[elems[elem].name] == 'undefined') {
                                data[elems[elem].name] = elems[elem].value;
                                var cln = elems[elem].cloneNode(true);
                                document.getElementById('free_trial_info').appendChild(cln);
                            }
                        }
                        event.preventDefault();
                        setTimeout(function() {
                            $scope.$apply(function () {
                                $scope.showFreeTrialPopup = true;
                            });
                        }, 8);
                }
            }
        }
    }

    $scope.$watch('ftUserPhone', function(newValue, oldValue) {
        if(typeof $scope.freeTrialForm != 'undefined') {
            if(isNaN(newValue)){
                $scope.freeTrialForm.ftUserPhone.$setValidity('required', false);
            }else if(newValue.length > 10){
                $scope.freeTrialForm.ftUserPhone.$setValidity('required', false);
            } else {
                $scope.freeTrialForm.ftUserPhone.$setValidity('required', true);
            }
        }
    });
    this.addRemoveClassInBody = function(val){
            var class_name = 'popup_open_body';
             if(val == 1){
                 document.body.classList.add(class_name);
             } else {
                 document.body.classList.remove(class_name);
             }
        };
    $scope.toggleContactMe = function(){//@review rename function to toggleContactMe: Done
		$scope.agreeClicked = 1;
		if($scope.contactMe == 0){
			$scope.contactMe = 1;
		}else{
			$scope.contactMe = 0;
		}
                //@review should use return statement
	}


}) /*------------- End : FreeTrialController.js-----------*/ 

 /*------------- Begin : FrsCommentsController.js-----------*/ 

angular.module('Simplilearn')
.controller('FrsCommentsController', function(PostReqService, $scope, $timeout, $rootScope){
    
    var self = this;
    
    self.helpers = new helpers();
    self.user_params = user_params;
    
    self.personName = '',
    self.personEmail = '',
    self.comment = '',
    self.genericErrMsgText = '',
    self.genericSuccessMsgText = '',
    self.newComments = new Array(),
    self.disableSubmit = false;
    self.paginationRequestParams = {};
    
    var entityId = '';
    var entityType = '';
    
    self.initData = function(pEntityId, pEntityType) {
        entityId = pEntityId;
        entityType = pEntityType;
        
        self.paginationRequestParams[entityType+'Id'] = entityId;

        initialiseUserDetails();
    };
    
    var initialiseUserDetails = function() {
        self.personName = '';
        self.personEmail = '';
        
        if( self.user_params.email ) {
            self.personEmail = self.user_params.email;
        }
        
        if( self.user_params.first_name ) {
            self.personName += self.user_params.first_name + ' ';
        }
        
        if( self.user_params.last_name ) {
            self.personName += self.user_params.last_name;
        }
    };
    
            self.submitCommentData = function(pForm) {
                if (!pForm.$valid) {
                    self.agreeToContactClicked = 1;
                    self.genericErrMsgText = 'Oops! Please ensure all fields are valid.';
                    return self.helpers.FormNotValid(pForm);
                }else {
                    self.disableSubmit = true;
                    self.genericErrMsgText = '';

                    var paramsArr = {
                        'name': self.personName,
                        'email': self.personEmail,
                        'comment': self.comment,
                        'entityType': entityType,
                        'entityId': entityId,
                        'method':'saveUserComments'
                    };

                    self.ga.gaFireEventsGeneric('frsArticleCommentsTry');

                    PostReqService.sendPostRequest(baseApiUrlNocache ,paramsArr)
                            .then(function(data) {
                                if (typeof data.data.status !== 'undefined' && data.data.status == 'success') {
                                    clearCommentsForm();
                                    self.genericSuccessMsgText = 'Posted successfully !';
                                    $timeout(function() {
                                        self.genericSuccessMsgText = '';
                                    }, 3000);
                                    $scope.main.commentsCount += 1;
                                    self.ga.gaFireEventsGeneric('frsArticleCommentsSuccess');
                                } else {
                                    self.genericErrMsgText = "Some error occurred. Please try again later.";
                                    if (typeof data.data.msg !== 'undefined' && data.data.msg) {
                                        self.genericErrMsgText = data.data.msg;
                                    }
                                }
                                self.disableSubmit = false;
                                if (data.data.comment) {
                                    self.newComments.unshift(data.data.comment);
                                }
                            });
                }
            };
    
    var clearCommentsForm = function() {
        initialiseUserDetails();
        self.userQuery = '';
        self.genericErrMsgText = '';
        self.genericSuccessMsgText = '';
        self.comment = '';
        $scope.frmPostComments.$setPristine();
   };

    /* $scope.$watch(function () { return self.personEmail; }, function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        
        if( !email_rgx.test(newValue) ){
            $scope.frmPostComments.email.$setValidity('email', false);
        }
        else {
            $scope.frmPostComments.email.$setValidity('email', true);            
        }
    }); */
    
    var gaForComments = function() {
       var ga = new gaEventsTracker();
       
       this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
           ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
       };
    };
    
    self.ga = new gaForComments();
    
    self.initDisqus = function (shortname) {
        // Disqus page configs
        var disqusConfig = JSON.parse(user_params.disqusConfig);
        disqus_config = function () {
            this.page.api_key = disqusConfig.page.api_key;
            this.page.url = disqusConfig.page.url;
            this.page.identifier = disqusConfig.page.identifier;
            this.page.title = disqusConfig.page.title;
        }

        if ($rootScope.isLoggedIn) {
            var paramsArr = {
                'method': 'getDisqusHash'
            };
            PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                .then(function (data) {
                    var resData = data.data;
                    if (resData.status && resData.status == "success" && resData.data && resData.data.authKey) {
                        disqus_config = function () {
                            this.page.api_key = disqusConfig.page.api_key,
                            this.page.url = disqusConfig.page.url,
                            this.page.identifier = disqusConfig.page.identifier,
                            this.page.title = disqusConfig.page.title,
                            this.page.remote_auth_s3 = resData.data.authKey;
                        };
                    }
                    triggerDisqus();
                });
        } else {
            triggerDisqus();
        }

        function callbackDisqus() {
            if(typeof DISQUSWIDGETS == 'undefined' || !DISQUSWIDGETS) return;
            DISQUSWIDGETS.getCount({reset: true});
            $timeout(function () {
                $scope.main.commentsCount = parseInt(document.querySelector('#disqusCommentCount').innerText);
            }, 500);
        }

        function triggerDisqus() {
            var d = document, s = d.createElement('script');
            s.src = '//' + shortname + '.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);

            var d = document, s = d.createElement('script');
            s.id = "dsq-count-scr";
            s.onload = callbackDisqus;
            s.src = '//' + shortname + '.disqus.com/count.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }

        window.onload = function () {
            callbackDisqus();
        }
    }
}); /*------------- End : FrsCommentsController.js-----------*/ 

 /*------------- Begin : FrsSidebarController.js-----------*/ 

angular.module('Simplilearn')
.controller('FrsSidebarController', function(){
    
    var self = this;
    
    var gaForFrsSidebar = function() {
       var ga = new gaEventsTracker();

       this.gaEventsCourseNav = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleCourseNavClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookCourseNavClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarCourseNavClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoCourseNavClick', pPosition);               
           }
       };
       
       this.gaEventsCourseImgClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleCourseImageClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookCourseImageClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarCourseImageClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoCourseImageClick', pPosition);               
           }
       };
       
       this.gaEventsCourseDtlClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleCourseDetailsClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookCourseDetailsClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarCourseDetailsClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoCourseDetailsClick', pPosition);               
           }
       };
       
       this.gaEbookClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleEbookClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookEbookClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarEbookClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoEbookClick', pPosition);               
           }
       };
       
       this.gaWebinarClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleWebinarClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookWebinarClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarWebinarClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoWebinarClick', pPosition);               
           }
       };
       
       this.gaPopTagClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticlePopularTagClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookPopularTagClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarPopularTagClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoPopularTagClick', pPosition);               
           }
       };
       
       this.gaArticleClick = function(pListPage, pPosition) {
           if( pListPage == 'articles' ) {
                ga.gaFireInteractiveEvents('frsArticleRelatedArticleSideClick', pPosition);
           } else if( pListPage == 'ebooks' ) {
                ga.gaFireInteractiveEvents('frsEbookRelatedArticleSideClick', pPosition);               
           } else if( pListPage == 'upcoming-webinar' ) {
                ga.gaFireInteractiveEvents('frsWebinarRelatedArticleSideClick', pPosition);               
           } else if( pListPage == 'videos' ) {
                ga.gaFireInteractiveEvents('frsVideoRelatedArticleSideClick', pPosition);               
           }
       };
    };
    
    self.ga = new gaForFrsSidebar();
}); /*------------- End : FrsSidebarController.js-----------*/ 

 /*------------- Begin : GsaController.js-----------*/ 

angular.module('Simplilearn')
.controller('GsaController', function ($scope,$document ,$rootScope) {

            $scope.downloadCourseList = function ($event) {
                WebTracking.setUserParams('sl_lead_button_text', 'DOWNLOAD COURSE LIST');
                WebTracking.setUserParams('sl_site_module', "GSA_Brochure");
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_lead_button_text', 'sl_lead_type', 'sl_page_type', 'sl_site_module', 'sl_user_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_module_initiated",
                    event_data: eventData
                });
                if ($rootScope.isLeadSubmitted) {
                    $rootScope.downloadBrochureCourseList();
                    return false;
                }
                $rootScope.toggleModalDisplay('gsa-brochure-form', 'block', $event);
            }
            $scope.moduleInitiate = function () {
                WebTracking.setUserParams('sl_lead_button_text', 'REQUEST MORE INFORMATION');
                WebTracking.setUserParams('sl_site_module', "GSA_QueryBox");
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_lead_button_text', 'sl_lead_type', 'sl_page_type', 'sl_site_module', 'sl_user_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_module_initiated",
                    event_data: eventData
                });
            }
            this.onFormClose = function (){
                var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_site_module', 'sl_user_type', 'sl_lead_type', 'sl_page_type']);
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_lead_form_closed",
                    event_data: eventData
                });
            }
     
            $rootScope.downloadBrochureCourseList = function () {
                if (typeof user_params.COURSE_LIST_DOC_URL == "string") {
                    var name = user_params.COURSE_LIST_DOC_URL.split('?')[0];
                    name = name.split('/')[name.split('/').length - 1];
                    var link = document.createElement('a');
                    link.href = user_params.COURSE_LIST_DOC_URL;
                    link.download = name;
                    link.dispatchEvent(new MouseEvent('click'));
                }
            };
    
    
            (function () {
                if (sl_page_type == 'gsa page') {
                    if (document.referrer == "") {
                        WebTracking.setUserParams('sl_user_type', "b2b");
                    }
                    webengage.onReady(function () {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_eng_web_page_viewed",
                            common: "product"
                        });
                    });
                }
            })();

        });

 /*------------- End : GsaController.js-----------*/ 

 /*------------- Begin : HeaderController.js-----------*/ 

angular.module('Simplilearn')
.controller('HeaderController', function($scope,$rootScope, $http,LocService,$cookies,$location,$timeout,PostReqService,$compile) {
	$scope.scroll=0;
	$scope.headerHeight = 2;
	$scope.showStickyHeader = {'display':'none'};
	$scope.showStatus = false;
	$scope.headerFormsStyle = {'display':'none'};
	$scope.loginFormStyle = {'display':'none'};
	$rootScope.registerFormStyle = {'display':'none'};
	$scope.loginFormHeadingStyle = {'display':'none'};
	$scope.registerFormHeadingStyle = {'display':'none'};
	$scope.showPlaceholder = false;
	$scope.showCountryDropDown = false;
	$scope.act_chng_cntry = "";
	$scope.fl_city_lst = "";
	$scope.loggedOut = {'display':'none'};
	$scope.loggedIn = {'display':'none'};
	$scope.usrListStyle={'display':'none'};
	$scope.showAutoCompleteDiv = {'display':'none'};
    $scope.searchResults = [];
	$scope.showCountryList = false;
	$scope.isStickyFlag = 0;
	$scope.countryData = null;
        $scope.currentCountry = null;
	$scope.countryFormData = null;
        $scope.countryFormDataMob = null;
        $scope.isMobileMenuVisible = false;
	$scope.helpers = new helpers();
        $scope.delayedCountryListCreated = false;
        $scope.countryDataHeaderDropDown = {};
        $scope.isSearchVisible = 0;
        $scope.showStatus = true;
        $scope.noteClass = false;
        $scope.linkedinMsg = 'Sign in';
        $scope.linkedinErrMsg = '';
        $scope.linkedErrClass = '';
        $scope.showCrossBtn = true;
        $scope.forgotPassSpin = false;
        $scope.cart_count = 0;
        var timeoutId = null;
        $rootScope.searchIsSearchVisible = false;
        $scope.cart_count = '';
        $scope.isEuro = user_params.isEuro;
	$scope.headerInit = function(supportNoDail,supportNo) {
            if(typeof supportNo !='undefined' && supportNo !=''){
                $rootScope.supportNo = supportNo;
                $rootScope.supportNoDail = supportNoDail;
            }
            if($cookies[user_params.ssoCookieName]){
                $rootScope.isLoggedIn = true;
            }

            $rootScope.lms_url = ($cookies['lms_url']) ? $cookies['lms_url'] : baseLmsUrl;

            if( !!$location.path() ) {
                var path = $location.path();
                path = path.substr(path.indexOf('/')+1);

                setTimeout(function(){
                    if(path == 'signup' && $rootScope.isLoggedIn != true){
                       angular.element(document.getElementById('registerBtn')).triggerHandler('click');
                    }else if(path == 'login' && $rootScope.isLoggedIn != true){
                        angular.element(document.getElementById('login_btn')).triggerHandler('click');
                    }
                },1000);

            }

            if ($rootScope.isLoggedIn == true) {
                $rootScope.gaHeaderControllerJs.gaFireOnAutoLogin();
                // Get user information
                if(typeof user_params.user_id == 'undefined'){
                    PostReqService.getUserData(function(user) {
                        if(user !== null && typeof user == 'object') {
                            user_params.user_id = user.id;
                            user_params.email = user.email;
                        }
                    });
                }
                $scope.loggedIn = {'display': 'inline-block'};
                PostReqService.initFreeTrialCookie();
            } else {
                $scope.loggedOut = {'display': 'inline-block'};
            }



            if(user_params.isB2b == 1){
                if($cookies[user_params.cartCountCookieb2b] && $cookies[user_params.sessionCookie]) {
                    $scope.cart_count = $cookies[user_params.cartCountCookieb2b] > 0 ? $cookies[user_params.cartCountCookieb2b] : '';
                }
            }else{
                if($cookies[user_params.cartCountCookie] && $cookies[user_params.sessionCookie]) {
                    $scope.cart_count = $cookies[user_params.cartCountCookie] > 0 ? $cookies[user_params.cartCountCookie] : '';
                }
            }
            setTimeout(function(){
                    loadLoginHtml();
                    checkFreeTrial();
            },2000);
            checkFreeTrial();
        }

        var checkFreeTrial= function(){
          var free_trial = ($cookies[user_params.ftCookieName]) ? $cookies[user_params.ftCookieName] : false;
          var utm_source_block_ft = user_params.ftUtmBlocked.split(',');
          var utmcsr = getParameterByName('utm_source');
          var atpParam = getParameterByName(user_params.ftATPParam);
          if((typeof free_trial != 'undefined' && free_trial && free_trial != '') || (utmcsr!='' && utm_source_block_ft.indexOf(utmcsr.toLowerCase()) > -1) || (atpParam!='')) {
            var btns = document.getElementsByClassName( 'enroll-btn' );
            var ftVals = document.getElementsByName( 'free_trial' );
            var enrollText = 'Enroll Now';
            [].slice.call( btns ).forEach(function ( elem ) {
                elem.innerHTML = enrollText;
            });
            [].slice.call( ftVals ).forEach(function ( elem ) {
                elem.value = 0;
            });
            if(document.getElementById('sticky-enroll-btn')) {
                document.getElementById('sticky-enroll-btn').innerHTML = enrollText;
            }
          }
        }

        $scope.init_enterprise = function(val) {
            if($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == ''){
                if(val != '' ){
                    setEntpCookie(val);
                }
            } else {
                var entp = $cookies[user_params.enterpriseCountCookieName];
                entp = entp.split('|^|');
                var companyData = val.split('|^|');
                if(entp[0] != '' && companyData[0] != '' && entp[0] != companyData[0]){
                    setEntpCookie(val);
                }
                // if(entp != undefined && entp.length > 0 && entp[2] != ''){
                //     var urlVal = window.location.href;
                //     urlVal = urlVal.toLowerCase();
                //     var n = urlVal.search(entp[0]);
                //     if(n == -1){
                //         var urlMore = urlVal.search(baseUrl.replace(/^\/|\/$/g, ''));
                //         //console.log(entp[2],entp[2] + '/'+urlVal.substring(urlMore + baseUrl.length - 1));
                //         window.location.href = entp[2] + '/'+urlVal.substring(urlMore + baseUrl.length-1);
                //     }
                // }
            }
        }
        var loadLoginHtml = function(){
            var urlObj = $scope.helpers.makeValidApiUrl('loginForm');
            var paramsArr = {};
            $http.get(urlObj.url+"&country="+ipCountryIdValue, paramsArr)
            .success(function (response) {
                if(response && typeof response !='undefined' && response != ''){
                    angular.element(document.getElementById('login-register')).html(response);
                    $compile(angular.element(document.getElementById('login-register')).contents())($scope);
                    setTimeout(function(){
                        var userLogin = document.getElementById('login-name');
                        if(userLogin){
                            userLogin.addEventListener("keyup", function(){
                                $rootScope.gaHeaderControllerJs.gaFireOnInitiate('login');
                            });
                        }
                        var userRegister = document.getElementById('register-name');
                        if(userRegister){
                            userRegister.addEventListener("keyup", function(){
                                $rootScope.gaHeaderControllerJs.gaFireOnInitiate('register');
                            });
                        }
                    },2000);

                }
            });
        }
        var setEntpCookie = function(val){
            var date = new Date();
                    date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
                    document.cookie = user_params.enterpriseCountCookieName+'=' + val + '; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
        }

            $scope.showLogin = function($event) {
                if($event) {
                    $event.preventDefault();
                }
                $scope.clearLinkedinMsg();
                $rootScope.regStatusMsg = ""
                $rootScope.regStatusClass = "";
                $rootScope.regSuccessMsg = "";
                $rootScope.regSuccessClass = "";
                $scope.showStatus = true;
                $scope.noteClass = false;
                $scope.loginClass = 'login-section-page';
                $scope.linkedinMsg = 'Sign in';
                $scope.loginFormStyle = {'display': 'inline-block'};
                $rootScope.registerFormStyle = {'display': 'none'};
				$scope.loginFormHeadingStyle = {'display':'block'};
				$scope.registerFormHeadingStyle = {'display':'none'};
                $scope.headerFormsStyle = {'display': 'block'};
                $scope.loginRegFormStyle = {'display': 'block'};
                $scope.forgotPwdStyle = {'display': 'none'};
                $scope.showCrossBtn = true;
                //@review missing return statement
            }
            $scope.clearLinkedinMsg = function(){
                $scope.linkedinErrMsg = '';
                $scope.linkedErrClass = '';
            }
            var gaForHeader = function() {
                var ga = new gaEventsTracker();
                this.hoveredOnFlag = true;

                this.gaFireOnCountryChangeSuccess = function(changeToCountry) {
                    ga.gaFireInteractiveEvents('crosseventscountrychangesuccess', user_params.user_id + ' || ' + document.URL + ' || ' + $scope.currentCountry.name  + ' || ' + changeToCountry);
                }

                this.changeHoverFlag = function() {
                    if(this.hoveredOnFlag == false) {
                        this.hoveredOnFlag = true;
                    } else {
                        this.hoveredOnFlag = false;
                    }
                }

                this.gaFireOnCorporateTrainingClick = function($event) {
                    ga.gaFireInteractiveEvents('headercorporatelinkclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }
                this.gaFireOnBeInstructorClick = function($event) {
                    ga.gaFireInteractiveEvents('headerinstructorlinkclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }

                this.gaFireOnLoginTabOpen = function() {
                    $rootScope.currentLoginOpenTab = 'login';
                    ga.gaFireInteractiveEvents('crosseventsloginopen', document.URL);
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_user_clicks_on_Login",
                        common: "product",
                    });
                }
                this.gaFireOnSignupTabOpen = function() {
                    $rootScope.currentLoginOpenTab = 'signup';
                    ga.gaFireInteractiveEvents('crosseventsloginsignupclick');
                }
                var eventStatus = {'login':false,'register':false};
                this.gaFireOnInitiate = function(form) {
                    if(!eventStatus[form]) {
                        ga.gaFireInteractiveEvents('loginsignupinitiated', document.URL + ' || ' + form);
                        eventStatus[form] = true;
                    }
                }
                this.gaFireOnAutoLogin = function() {
                    ga.gaFireInteractiveEvents('autologin', document.URL);
                }
                this.gaFireOnLoginSignupAttempt = function(type) {
                    if(type == 'linkedin')
                        ga.gaFireInteractiveEvents('linkedinloginclick', document.URL + ' || ' + type);
                    else
                        ga.gaFireInteractiveEvents('loginsignupsubmitted', document.URL + ' || ' + type);
                }

                this.gaFireOnLoginSignupSuccess = function(type) {
                    if($rootScope.currentLoginOpenTab == 'signup') {
                        ga.gaFireInteractiveEvents('crosseventsloginsignupsuccess', type);
                    } else if($rootScope.currentLoginOpenTab == 'login') {
                        ga.gaFireInteractiveEvents('crosseventsloginsuccess', type);
                    }
                }
                this.gaFireOnLoginSignupFailure = function(type) {
                    if($rootScope.currentLoginOpenTab == 'signup') {
                        ga.gaFireInteractiveEvents('crosseventsloginsignupfailure', type);
                    } else if($rootScope.currentLoginOpenTab == 'login') {
                        ga.gaFireInteractiveEvents('crosseventsloginfailure', type);
                    }
                }
                this.gaFireMyCourseClick = function () {
                    ga.gaFireInteractiveEvents('myCourseClickGeneric', user_params.user_id + ' || ' + document.URL);
                    var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_product_id', 'sl_product_name','sl_product_category','sl_product_category_id','sl_event_time','sl_page_type','sl_user_type','sl_product_training_type','sl_product_type','']);
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_user_clicks_on_my_courses",
                        event_data: eventData,
                    });
                }
                this.gaFireOnLogoutClick = function () {
                    ga.gaFireInteractiveEvents('onLogoutClickGeneric', user_params.user_id + ' || ' + document.URL);
                    var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_product_id', 'sl_product_name','sl_product_category','sl_product_category_id','sl_event_time','sl_page_type','sl_user_type','sl_product_training_type','sl_product_type','']);
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_user_logs_out",
                        event_data: eventData,
                    });
                }
                this.gaRequestMoreInfoClick = function (siteModule) {
                    ga.gaFireInteractiveEvents('gsaleadformclick', user_params.user_id + ' || ' + document.URL + ' || ' + siteModule);
                }
                this.gaViewMoreTestimonials = function($event) {
                    ga.gaFireInteractiveEvents('gsapageViewMoreTestimonials', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }
            }
            $rootScope.gaHeaderControllerJs = new gaForHeader();


            $scope.closeLogin = function($event) {
                if(typeof $event !='undefined' && $event != null)
                    $event.preventDefault();

                $scope.showStatus = false;
                $rootScope.isCpClicked = 0;
                //@review missing return statement
            }
            $scope.$watch('showStatus', function(newValue) {
                if (newValue == false) {
                    $scope.loginFormStyle = {'display': 'none'};
                    $rootScope.registerFormStyle = {'display': 'none'};
					$scope.loginFormHeadingStyle = {'display':'none'};
					$scope.registerFormHeadingStyle = {'display':'none'};
                    $scope.headerFormsStyle = {'display': 'none'};
                    $scope.forgotPwdStyle = {'display': 'none'};
                }
                //@review missing else
            });
            $scope.showRegister = function($event) {
                if($scope.delayedCountryListCreated == false) {
                    $scope.countryDataHeaderDropDown = $scope.countryData;
                    $scope.delayedCountryListCreated = true;
                }
                $event.preventDefault();
                $scope.clearLinkedinMsg();
                $scope.showStatus = true;
                $rootScope.regSuccessMsg = "";
                $rootScope.registerFormStyle = {'display': 'inline-block'};
                $scope.loginFormStyle = {'display': 'none'};
                $scope.headerFormsStyle = {'display': 'block'};
				$scope.loginFormHeadingStyle = {'display':'none'};
				$scope.registerFormHeadingStyle = {'display':'block'};
				$scope.forgotPwdStyle = {'display': 'none'};
				$scope.loginRegFormStyle = {'display': 'block'};
				$rootScope.regStatusMsg = ""
				$rootScope.regStatusClass = "";
                                $rootScope.regSuccessMsg = "";
                                $rootScope.regSuccessClass = "";
                                $scope.loginClass = '';
                                $scope.linkedinMsg = 'Sign up';
                                $scope.noteClass = true;
				if(typeof $event.srcElement == 'undefined'){
					var targetEle = $event.target;
				}else{
					var targetEle = $event.srcElement;
				}

				(angular.element(targetEle).parent().parent().parent().parent())[0].focus();
                                $scope.showCrossBtn = true;
                //@review missing return statement
            }

            $scope.setSearchVisibility = function(pVal) {
                if(!pVal) {
                    timeoutId = $timeout(function() {
                        $scope.isSearchVisible = pVal;
                    }, 200);
                } else {
                    $scope.isSearchVisible = pVal;
                    if(timeoutId) {
                        $timeout.cancel(timeoutId);
                        timeoutId = null;
                    }
                }
            };

            $scope.shCntryDrpDwnFunc = function() {
                $scope.showCountryDropDown = true;
                $scope.act_chng_cntry = "active";
                //@review missing return statement
                if($scope.delayedCountryListCreated == false) {
                    $scope.countryDataHeaderDropDown = $scope.countryData;
                    $scope.delayedCountryListCreated = true;
            }
            }
            $scope.hdCntryDrpDwnFunc = function() {
                $scope.showCountryDropDown = false;
                $scope.fl_city_lst = "";
                $scope.act_chng_cntry = "";
                $rootScope.gaHeaderControllerJs.changeHoverFlag();
            }
            $scope.shUsrListFunc = function() {
                $scope.usrListStyle = {'display': 'block'};
                //@review missing return statement
            }
            $scope.hdUsrListFunc = function() {
                $scope.usrListStyle = {'display': 'none'};
                //@review missing return statement
            }
			$scope.toggleUsrAccList = function($event){
				$event.preventDefault();
				if($scope.usrListStyle.display == 'block'){
					$scope.usrListStyle = {'display': 'none'};
				}else{
					$scope.usrListStyle = {'display': 'block'};
				}
			}
            $scope.shFlCityLst = function() {
                $scope.fl_city_lst = "display:inline-block";
                $scope.showCountryList = false;
                //@review missing return statement
            }
            $scope.shForgtPwd = function($event) {
                $event.preventDefault();
                $scope.forgotPwdStyle = {'display': 'block'};
                $scope.loginFormStyle = {'display': 'none'};
                $rootScope.registerFormStyle = {'display': 'none'};
                $scope.loginRegFormStyle = {'display': 'none'};
                $scope.headerFormsStyle = {'display': 'block'};
                $scope.showCrossBtn = false;
                $scope.forgotPwdClass = '';
                $scope.forgotPwdMsg = '';
				(angular.element($event.srcElement).parent().parent().parent().parent())[0].focus();
                //@review missing return statement
            }
            $scope.logoutUser = function($event) {
                $event.preventDefault();
                var logoutParams = {'method': 'signout'};
                PostReqService.sendPostRequest(baseApiUrlNocache, logoutParams)
                        .then(function(data) {
                            if (data == null) {
                            } else {
                                //Below is the fix for help-and-support page.
                                if (typeof user_params.pageCategory != 'undefined' && user_params.pageCategory == 'help-and-support_createticket') {
                                    window.location.reload();
                                }
                                $rootScope.isLoggedIn = false;
                            }
                        });
            }

            $scope.toggleMobileMenu = function() {
                if( $scope.isMobileMenuVisible === false ) {
                    $scope.isMobileMenuVisible = true;
                    if($scope.delayedCountryListCreated == false) {
                        $scope.countryDataHeaderDropDown = $scope.countryData;
                        $scope.delayedCountryListCreated = true;
                }
                }
                else {
                    $scope.isMobileMenuVisible = false;
                }
            };

            $rootScope.$watch('isLoggedIn', function(newValue) {
                if (newValue == true) {
                    $scope.loggedIn = {'display': 'inline-block'};
                    $scope.loggedOut = {'display': 'none'};
                    $scope.loginFormStyle = {'display': 'none'};
                    $rootScope.registerFormStyle = {'display': 'none'};
                    $scope.headerFormsStyle = {'display': 'none'};
                } else {
                    $scope.loggedOut = {'display': 'inline-block'};
                    $scope.loggedIn = {'display': 'none'};
                    $scope.loginFormStyle = {'display': 'none'};
                    $rootScope.registerFormStyle = {'display': 'none'};
                    $scope.headerFormsStyle = {'display': 'none'};
                    $scope.usrListStyle={'display':'none'};
                }
                //@review missing return statement
            });

            $scope.submitForgotPwdForm = function(form) {
                if (form.$invalid) {
                    return $scope.helpers.FormNotValid(form);
                }
                $scope.forgotPassSpin = true;
                var passParams = {'method': 'forgotPwd', 'email': $scope.forgotPwdEmail};
                PostReqService.sendPostRequest(baseApiUrlNocache, passParams)
                        .then(function(data, status, header, config) {
                            if (data == null) {
                                $scope.forgotPwdClass = "error";
                                $scope.forgotPwdMsg = "Some error occured. Please try again later.";
                                $scope.forgotPassSpin = false;
                            } else if (data.data.data.type == 'success') {
                                $scope.forgotPwdEmail = "";
                                $scope.forgotPwdClass = "success_text";
                                $scope.forgotPwdMsg = data.data.data.msg;
                                $scope.forgotPwdForm.$setPristine();
                                setTimeout(function() {
                                    $scope.showStatus = false;
                                    $scope.$apply();
                                }, 2000);
                            } else {
                                $scope.forgotPwdClass = "error";
                                $scope.forgotPwdMsg = data.data.data.msg;
                            }
                            $scope.forgotPassSpin = false;
                        });
                //@review missing return statement in async trigger
            };

            $scope.init_CountryData = function(pCountryId) {
                setTimeout(function(){
                    LocService.getCountryData().then(function(data) {
                        $scope.countryData = data;

                        LocService.setCurrentCountry(null, pCountryId);
                        $scope.currentCountry = LocService.getCurrentCountry();
                        $scope.mobCountry = $scope.currentCountry;
                    });
                },2000);

                return true;
            };

            $scope.updateMobCntry = function(){
                document.getElementById('countryId').value = $scope.mobCountry.id;
                document.getElementById('locationFormMob').submit();
            };

            $scope.submitCountry = function(pCountry) {
                $rootScope.gaHeaderControllerJs.gaFireOnCountryChangeSuccess(pCountry.name);
                $scope.countryFormData = {"countryId": pCountry.id};
            }

            $scope.toggleCountry = function(){
                if($scope.showCountryDropDown){
                    $scope.hdCntryDrpDwnFunc();
                }else{
                    $scope.shCntryDrpDwnFunc();
                }
            }

			$rootScope.stickyHeaderSearchVisible = 0;
			$rootScope.stickyHeaderSearchDisplay = {'display':'none'};

			$rootScope.innerPageHeaderSearch = 0;
			$rootScope.innerPageHeaderSearchDisplay = {'display':'none'};

			$rootScope.toggleStickyHeaderSearch = function($event){
				$event.preventDefault();
				if($rootScope.stickyHeaderSearchVisible == 0){
					$rootScope.stickyHeaderSearchVisible = 1;
					$rootScope.stickyHeaderSearchDisplay = {'display':'block'};
				}else{
					$rootScope.stickyHeaderSearchVisible = 0;
					$rootScope.stickyHeaderSearchDisplay = {'display':'none'};
				}
			}

			$rootScope.toggleInnerPageHeaderSearch = function($event){
				$event.preventDefault();
				if($rootScope.innerPageHeaderSearch == 0){
					$rootScope.innerPageHeaderSearch = 1;
					$rootScope.innerPageHeaderSearchDisplay = {'display':'block'};
				}else{
					$rootScope.innerPageHeaderSearch = 0;
					$rootScope.innerPageHeaderSearchDisplay = {'display':'none'};
				}
			}

                        // fire login popup if not login
                        var full_current_url = window.location.pathname.split( '/' );

                        $scope.jobAssistLoginCheck = function(){
                            if(angular.isUndefined($cookies[user_params.ssoCookieName])){
                                $scope.gaHeaderControllerJs.gaFireOnLoginTabOpen();
                                $scope.showLogin();
                            }
                        };

//                        if(full_current_url.indexOf('job-assist') !== -1) {
//                            $timeout(function () {
//                                $scope.jobAssistLoginCheck();
//                            }, 2000);
//                        };

                        //call this function from other controller - JobAssistController
                          $rootScope.$on("loginPopup", function(){
                                $scope.jobAssistLoginCheck();
                          });

                        window.onpageshow = function (event) {
                            if (event.persisted) {
                                window.location.reload()
                            }
                        };




        })
        .controller('LoginFormController', function($scope, $rootScope, LoginService, PostReqService) {
            $scope.userName = '';
            $scope.userPwd = '';
            $scope.requestSent = false;
            $scope.buttonText = 'Log In';
            $scope.submitLogin = function() {
				if($scope.loginForm.$invalid){
					if(typeof $scope.loginForm.userName.$viewValue == 'undefined' || $scope.loginForm.userName.$viewValue == "")
						$scope.loginForm.userName.$setViewValue($scope.loginForm.userName.$viewValue);
					if(typeof $scope.loginForm.userPwd.$viewValue == 'undefined' || $scope.loginForm.userPwd.$viewValue == "")
						$scope.loginForm.userPwd.$setViewValue($scope.loginForm.userPwd.$viewValue);

					$scope.loginStatusMsg = "Oops! Please ensure all fields are valid.";
					$scope.loginStatusClass = "error oops-error hidden";
					return false;
				}else{
                                    $scope.buttonText = 'Authenticating...';
                                    $scope.requestSent = true;
                                    $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupAttempt('email');

                                        LoginService.login($scope.userName, $scope.userPwd)
                                        .then(function(response){
                                            var data = response.data;
                                            if (data.status == 'error') {
						$scope.loginStatusMsg = data.msg; //"Oops! Please ensure username/password is valid."
                                                $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | ' + $scope.loginStatusMsg);
						$scope.loginStatusClass = "error";
						if (typeof user_params.pageCategory != 'undefined' && user_params.pageCategory == 'help-and-support_index') {
//                                                    notifyHelpAndSupport();
						}
                                            } else {
                                                $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupSuccess('email');
						user_params.email = $scope.userName;
						user_params.user_id = data.data.id;
						$rootScope.isLoggedIn = true;
                                                $rootScope.lms_url = (data.lms_url !== undefined) ? data.lms_url : baseLmsUrl;
                                                $rootScope.$emit('isLoggedIn', true);
                                                PostReqService.initFreeTrialCookie();
//Below is the fix for help-and-support page.
                                                if (typeof user_params.pageCategory != 'undefined' && (user_params.pageCategory == 'help-and-support_index' || user_params.pageCategory == 'help-and-support_salesforce-support-form')) {
						  window.location.reload();
						}
                                                else if (window.refurl != 'undefined' && typeof window.refurl == 'object') {
                                                    if (typeof window.refurl.host != 'undefined' && window.refurl.host != '' && typeof window.refurl.source != 'undefined' && window.refurl.source != '') {
                                                        if (window.refurl.host == 'community.simplilearn.com') {
                                                            window.location.href = window.refurl.source;        //after success signup redirect to community page
                                                        } else if (window.refurl.host == 'lms.simplilearn.com') {
                                                            window.location.href = window.refurl.source;        //after success signup redirect to lms page
                                                        }
                                                    }
                                                }

                                            }
                                $scope.requestSent = false;
                                $scope.buttonText = 'Log In';
                                        });

				}
            };

            $scope.$parent.$watch('loginFormStyle', function(newValue) {
                if (typeof newValue != 'undefined' && newValue.display == 'none') {
                    $scope.loginForm.$setPristine();
                    $scope.userName = '';
                    $scope.userPwd = '';
                    $scope.loginStatusClass = '';
                    $scope.loginStatusMsg = '';
                }
            });

    /*
    $scope.$watch('userName', function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        if( !email_rgx.test(newValue) ){
            $scope.loginForm.userName.$setValidity('email', false);
        }
        else {
            $scope.loginForm.userName.$setValidity('email', true);
        }
    });
    */


        }).controller('RegisterFormController', function($scope,$rootScope,$cookies, HashLogicService, $timeout,PostReqService) {

    $scope.callingCode = "+91-";
    $scope.city = JSON.parse($cookies.locatori9).name;
    $scope.userCountry = 34;
    $scope.contactNum = "";
    $scope.firstName = "";
    $scope.lastName = "";
	$scope.agreeClicked=0;
	$scope.helpers = new helpers();
        $scope.termsnConditions = 0;

        $scope.$watch(function() {
            return $rootScope.queryPhoneCode;
          }, function(newVal) {
            if(typeof newVal != 'undefined' && newVal != ''){
                $scope.callingCode = $rootScope.queryPhoneCode;
            }
          }, true);

    $scope.submitRegistration = function() {
                $scope.agreeClicked=1;
		if($scope.regForm.$invalid){

			$rootScope.regStatusMsg = "Oops! Please ensure all fields are valid."
            $rootScope.regStatusClass = "error hidden";
			return $scope.helpers.FormNotValid($scope.regForm);
		}else if($scope.termsnConditions == 0 && $scope.agreeClicked == 1){
			return false;
		}else{
			var user_name = $scope.userName;
			if (user_name.indexOf(" ") != -1) {
				var parts = user_name.split(" ");
				$scope.firstName = parts[0];
				$scope.lastName = parts[1]; //@review missing index not handled
			} else {
				$scope.firstName = user_name;

			}
                        $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupAttempt('email');
                        var hashPass = HashLogicService.hashLogic($scope.password);
                        var signUpParams = {
                            method: 'signUp',
                            callingCode: $scope.callingCode,
                            city: $scope.city,
                            countryInfo: $scope.userCountry,
                            email: $scope.userEmail,
                            firstName: $scope.firstName,
                            formSource: 0,
                            isSubsNewsletter: 0,
                            lastName: $scope.lastName,
                            lead_source_string: document.URL,
                            phoneNum: $rootScope.queryPhoneCode + $scope.contactNum,
                            userPassword: hashPass,
                            emailAuth: 1,
                            utm_source: 'direct',
                            auto_login: 'Y'
                        };
                        PostReqService.sendPostRequest(baseApiUrlNocache,signUpParams)
                        .then(function(data, status, header, config) {
                            if(data == null){
                                $rootScope.regStatusMsg = "Some error occurred. Please try again later.";
                                $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | ' + $rootScope.regStatusMsg);
                                $rootScope.regStatusClass = "error";
                            }else if(data.data.status == "success"){
                                    $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupSuccess('email');
                                    $rootScope.regSuccessMsg = "Your registration is successful. Happy learning!";
                                    $rootScope.regSuccessClass = "success_text";
                                    $scope.$parent.loginRegFormStyle = {'display': 'none'};
									$rootScope.registerFormStyle = {'display': 'none'};
                                    $scope.regForm.$setPristine();
                                    (document.getElementsByClassName("log-reg-form")[0]).focus();
                                    user_params.email = $scope.userEmail;
                                    user_params.user_id = data.data.data.id;
                                    var cpClickedState = $rootScope.isCpClicked;
                                    PostReqService.initFreeTrialCookie();
                                    $timeout(function () {
                                        $rootScope.isCpClicked = cpClickedState;
                                        $rootScope.isLoggedIn = true;
                                        $rootScope.$emit('isLoggedIn', true);
                                        $scope.$parent.showStatus = false;
                                    }, 1500);
                                    if (typeof user_params.pageCategory != 'undefined' && (user_params.pageCategory == 'help-and-support_createticket' || user_params.pageCategory == 'help-and-support_index')) {
                                        window.location.reload();
                                    }
                                    else if (window.refurl != 'undefined' && typeof window.refurl == 'object') {
                                        if (typeof window.refurl.host != 'undefined' && window.refurl.host != '' && typeof window.refurl.source != 'undefined' && window.refurl.source != '') {
                                            if (window.refurl.host == 'community.simplilearn.com') {
                                                window.location.href = window.refurl.source;        //after success signup redirect to community page
                                            } else if (window.refurl.host == 'lms.simplilearn.com') {
                                                window.location.href = window.refurl.source;        //after success signup redirect to lms page
                                            } else if (window.refurl.host != 'www.simplilearn.com' && window.refurl.source.indexOf('/ice9/frontend/public') < 0) {
                                                window.location.href = window.refurl.source;        //after success signup redirect to local page
                                            }
                                        }
                                    }
                                    $scope.contactNum = "";
                                    $scope.userName = "";
                                    $scope.userEmail = "";
                                    $scope.password = "";
                                    $scope.confPassword = "";
				}else if(data.data.status == "error"){

					$rootScope.regStatusMsg = data.data.msg;
                                        $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | ' + data.data.msg);
					$rootScope.regStatusClass = "error";
				}else{
					$rootScope.regStatusMsg = "Some error occurred. Please try again later!";
                                    $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | ' + $rootScope.regStatusMsg);
					$rootScope.regStatusClass = "error";
				}
			});
		}
    };

    var onLoginFailure = function() {
        $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | auto-login after registration failed');
        $timeout(function(){
            $rootScope.regSuccessMsg = '';
            $scope.$parent.showLogin();
        }, 1500);
    };

    $scope.agreeToTnC = function() {
		$scope.agreeClicked=1;
        if ($scope.termsnConditions == 1)
            $scope.termsnConditions = 0;
        else //@review missing curly braces
            $scope.termsnConditions = 1;
        //@review missing return statement
    }

    $scope.$watch('confPassword', function(newPwd) {
        if (newPwd != $scope.password) {
            $scope.regForm.confPassword.$setValidity('conf-pwd', false);
        }
        else {
            $scope.regForm.confPassword.$setValidity('conf-pwd', true);
        }
    });

    $scope.$watch('password', function(newPwd) {
        if (newPwd != $scope.confPassword && $scope.confPassword) {
            $scope.regForm.confPassword.$setValidity('conf-pwd', false);
        }
        else {
            $scope.regForm.confPassword.$setValidity('conf-pwd', true);
        }

        if (newPwd && ( newPwd.length < 8 || newPwd.match(/\d+/g) == null || newPwd.match(/[A-Z]/g) == null  ) ) {
            $scope.regForm.password.$setValidity('pwd', false);
        }
        else {
            $scope.regForm.password.$setValidity('pwd', true);
        }
    });

    $scope.$watch('termsnConditions', function(newValue) {
        if (newValue != 1) {
            $scope.regForm.termsnConditions.$setValidity('required', false);
        }
        //@review missing else
    });

    $scope.$watch('contactNum', function(newValue) {

		if(isNaN(newValue)){
			//$scope.regForm.contactNum.$setValidity('required', false);
			$scope.regForm.contactNum.$setValidity('phone', false);
		}
                else if( newValue.length < 7 ) {
                    $scope.regForm.contactNum.$setValidity('phone', false);
                }
                else {
			$scope.regForm.contactNum.$setValidity('phone', true);
                }
    });

    /*
    $scope.$watch('userEmail', function(newValue) {
        var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        if( !email_rgx.test(newValue) ){
            $scope.regForm.userEmail.$setValidity('email', false);
        }
        else {
            $scope.regForm.userEmail.$setValidity('email', true);
        }
    }); */

    $scope.$parent.$watch('loginFormStyle', function(newValue) {
        if (typeof newValue != 'undefined' && newValue.display == 'none') {
            $scope.regForm.$setPristine();
            $rootScope.regStatusClass = "";
            $rootScope.regStatusMsg = "";
            $scope.agreeClicked=0;
            $scope.userName = "";
            $scope.contactNum = "";
            $scope.userEmail="";
            $scope.password="";
            $scope.confPassword="";
        }
    });

});

 /*------------- End : HeaderController.js-----------*/ 

 /*------------- Begin : HeaderPromotionsController.js-----------*/ 

angular.module('Simplilearn')
        .controller('HeaderPromotionsController', function ($scope, $rootScope, $http, LocService, $cookies, $location, $timeout, PostReqService,$compile) {
            $scope.slideUpStatus = 0;
            $scope.isPromotionLoaded = false;
            $rootScope.fireAacCookie = 0;
            $scope.helpers = new helpers();
            if (typeof getCookieByName("_showPromotionalBanner") != 'undefined' && getCookieByName("_showPromotionalBanner") == 0) {
                $scope.slideUpStatus = 1;
            }
            setTimeout(function(){
                    promotionHtml();
            },2000);
            $scope.toggleBannerSlideUp = function (slideStatus, $event) {
                $event.preventDefault();
                $scope.slideUpStatus = slideStatus;

                if (slideStatus == 1) {
                    if ($rootScope.mobWidthFlag || $rootScope.hybridWidthFlag) {
                        return true;
                    }
                    $cookies._showPromotionalBanner = '0';
                } else {
                    $cookies._showPromotionalBanner = '1';
                }
            }
            //Auto Apply Coupon from Banner
            $scope.autoApplyBannerCoupon = function(couponCode){
             addCouponCodesToAACCookie(couponCode);
            }

            var promotionHtml = function(){
            var urlObj = $scope.helpers.makeValidApiUrl('promotionHtml');
            var paramsArr = {};
            $http.get(urlObj.url+"&country="+ipCountryIdValue, paramsArr)
            .success(function (response) {
                if(response && typeof response !='undefined' && response != ''){
                    if(response) {
                        $scope.isPromotionLoaded = true;
                    }
                    angular.element(document.getElementById('promotions-html')).html(response);
                    $compile(angular.element(document.getElementById('promotions-html')).contents())($scope);
                    $rootScope.fireAacCookie = 1;
                }
            });
        }
        $scope.openPopUpGA = function () {
            var ga = new gaEventsTracker();
            ga.gaFireInteractiveEvents('offerbannerclick', user_params.user_id + ' || ' + document.URL);
        }
        $scope.closePopUpGA = function () {
            var ga = new gaEventsTracker();
            ga.gaFireInteractiveEvents('offerpopupclosed', user_params.user_id + ' || ' + document.URL);
        }
        $scope.closeBannerUpGA = function () {
            var ga = new gaEventsTracker();
            ga.gaFireInteractiveEvents('offerbannerclosed', user_params.user_id + ' || ' + document.URL);
        }
        $scope.stripBannerClickGA = function () {
            var ga = new gaEventsTracker();
            ga.gaFireInteractiveEvents('offerstripclick', user_params.user_id + ' || ' + document.URL);
        }
        }); /*------------- End : HeaderPromotionsController.js-----------*/ 

 /*------------- Begin : HigherEducationCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('HigherEducationCtrl', function (YoutubeApiService, CpService, $scope, $http, LocService, $interval, $location, $rootScope, CorporateLeadService, $timeout, $compile, PostReqService, FormsAjax, $document, $window, $cookies) {
            this.removeHiddenClass = function (selector) {
                if (document.getElementsByClassName(selector).length) {
                    var selectorCount = document.getElementsByClassName(selector).length;
                    for (var i = 0; i < selectorCount; i++) {
                        document.getElementsByClassName(selector)[i].classList.remove("hide");
                    }
                }
            }
            this.addRemoveClassInBody = function (val) {
                var class_name = 'body_fixed';
                var event_id="";
                if (val == 1) {
                    //Add Class in Body
                    document.body.classList.add(class_name); 
                    event_id = "sl_lead_module_initiated";
                    var button='Contact Us';
                } else if(val == 0){
                    //Remove Class in Body
                    document.body.classList.remove(class_name);
                    event_id = "sl_lead_form_closed";
                } 
                else {
                    //Remove Class in Body
                    document.body.classList.remove(class_name);
                }
                if(event_id != ""){
                WebTracking.eventReq.triggerEvent({
                        event_id : event_id,
                        event_data: {
                          'sl_lead_button_text' : typeof button != 'undefined' ? button : "",
                          'sl_lead_type' : 'b2b',
                          'sl_site_module' : 'Higher_Education'
                        },
                        common : "product"
                    });
                }
            };
            this.displayContactPopup = function () {
                document.getElementById("higher_ed_form").style.display = 'block';
            };
            this.isMobileView = function () {
                $scope.isMobile = false;
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
                    $scope.isMobile = true;
                if ($scope.isMobile == true) {
                    document.getElementById("view-more-mobile").classList.remove("hide");
                }
                
                webengage.onReady(function (data) {
                    user_params.sl_user_type = (document.referrer)?'b2c':'b2b';
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_eng_web_page_viewed",
                        common: "product"
                    });
                });
            }
            window.addEventListener("orientationchange", function () {
                $scope.isMobile = true;
                $timeout(function () {
                    var parentNode = document.getElementById("view-more-desktop");
                    if (parentNode) {
                        parentNode.firstElementChild.classList.add("active");
                    }
                }, 350);
            });
        })
         /*------------- End : HigherEducationCtrl.js-----------*/ 

 /*------------- Begin : HomePageController.js-----------*/ 

angular.module('Simplilearn')
.controller('HomePageController', function($scope,$http,$rootScope,LocService,$timeout,$compile) {



	$scope.bannerShowStatus = {};
	$scope.bannerVideoShowStatus = {};
	$scope.showPlaceholder = false;
	$scope.queryFormStyle={'display':'none'};

	$scope.queryPhone = '';

	$scope.queryAgree = 1;
	$scope.agreeClicked = 0;
	$scope.queryStatusMsg = "";
	$scope.queryStatusClass = "";
	$scope.queryFormDivStyle = {'display':'block'};
	$scope.querySuccessDivStyle = {'display':'none'};
        $scope.userQuotesData = null;
        $scope.showAutoCompleteDiv = {'display':'none'};
		$scope.isIpad = isIpad;
        $scope.searchResults = [];
        $scope.staticUrl = staticUrl;
        $scope.helpers = new helpers();


        $scope.Math = Math;
        $scope.bannerImage = '';
        $scope.bannerDeferClass = '';
        $scope.delayedCountryListCreated = false;
        $scope.countryDataHeaderDropDown = {};
        $scope.showSubscription=false;
        $rootScope.isHomePage = true;
        $scope.isMobile = 0;
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
        $scope.isMobile = 1;
        window.addEventListener("orientationchange", function () {
           
        }, false);
        $scope.showSubscriptionCarousel = function(){
            $scope.showSubscription=true;
        }

        $scope.showBannerVideoFn = function(divId){
		$scope.bannerShowStatus = {'display':'none'};
		$scope.bannerVideoShowStatus = {'display':'block','background':'black'};

                //@review return statement missing
	}

	$scope.closeBannerVideo = function($event,divId){
		$event.preventDefault();
		$scope.bannerShowStatus = {};
		$scope.bannerVideoShowStatus = {};
		document.getElementById(divId).innerHTML = "";
                //@review return statement missing
	}

	$scope.showQueryForm = function(){
		$scope.queryFormStyle={'display':'block'};
                if($scope.delayedCountryListCreated == false) {
                    $scope.countryDataHeaderDropDown = $rootScope.countryList;
                    $scope.delayedCountryListCreated = true;
                }
                //@review return statement missing
	}


	$scope.submitQueryForm = function(form){
		if (!form.$valid) {

			$scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
			$scope.queryStatusClass = "error_msg hidden";
			return $scope.helpers.FormNotValid(form);
		}else if($scope.queryAgree == 0 && $scope.agreeClicked == 1){
			return false;
		}
		$http.get(baseUrl+"api/v1?method=saveDropAQueryAction",
			{params:
				{name:$scope.queryName,email:$scope.queryEmail,phone:$rootScope.queryPhoneCode+$scope.queryPhone,queryTxt:$scope.queryTxt,agreeToContact:$scope.queryAgree} //@review is this required?
			}
		).success(function(data, status , header, config) {
			if(data.status == "Success"){
				$scope.queryTxt = "";
				$scope.queryName = "";
				$scope.queryEmail = "";
				$scope.queryPhone = "";
				$scope.queryFormDivStyle = {'display':'none'};
				$scope.querySuccessDivStyle = {'display':'block'};
			}else{
                            //@review following should be a part of an html file or use ng-init (many similar)
				$scope.queryStatusMsg = "Some error occurred. Please try again later."
				$scope.queryStatusClass = "error_msg";
			}
		}).error(function(data, status , header, config) {
			$scope.queryStatusMsg = "Some error occurred. Please try again later."
			$scope.queryStatusClass = "error_msg";
		});
	}

	$scope.$watch('queryPhone', function(newValue) {
		if(isNaN(newValue)){
			$scope.queryForm.queryPhone.$setValidity('required', false);
		}else if(newValue.length > 10){
			$scope.queryForm.queryPhone.$setValidity('required', false);
		}

	});

        $scope.agreeQueryForm = function($event){
		$event.preventDefault();
		$scope.agreeClicked = 1;
		if($scope.queryAgree == 1)
			$scope.queryAgree = 0;//@review should use null
		else
			$scope.queryAgree = 1;
                    //@review should use return statement
	}

		//@Abhijit
       //Removing testimonials on homepage.

        $scope.toggleActionContent = function( pQuote ) {
            if( pQuote.expandFlag === 0 ) {
                pQuote.expandFlag = 1;
                pQuote.actionContent = 'Read Less';
            }
            else {
                pQuote.expandFlag = 0;
                pQuote.actionContent = 'Read More';
            }
        };

            var gaClass = function() {
                var ga = new gaEventsTracker();

                this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                    ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                };
                this.gaFireHomePageJumpTo = function($event) {
                    ga.gaFireInteractiveEvents('homepagejumpto', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }
                this.gaTesimonialArrowClick = function () {
                    if (typeof user_params.sl_product_review_user_details !== "undefined") {
                        var slUserReviewsArr = JSON.parse(user_params.sl_product_review_user_details);
                        if (typeof slUserReviewsArr[$rootScope.currentSlideId] !== "undefined" && slUserReviewsArr[$rootScope.currentSlideId]) {
                            var slProductReviewUserDetails = slUserReviewsArr[$rootScope.currentSlideId];
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_eng_user_explores_testimonials_on_homepage",
                                event_data: {
                                    'sl_product_review_user_details': slProductReviewUserDetails
                                },
                                common: "product"
                            });
                        }
                    }
                    ga.gaFireInteractiveEvents('custtestimonialarrowclick', user_params.user_id + ' || ' + document.URL);
                }
                this.gaMasterCardArrowClick = function() {
                    WebTracking.eventReq.triggerEvent({
                                event_id: "sl_nav_user_clicks_master_carousal_on_homepage",
                                common: "product"
                            });
                    ga.gaFireInteractiveEvents('mastercardarrowclick', user_params.user_id + ' || ' + document.URL);
                }
                this.gaViewMoreTestimonials = function($event) {
                    ga.gaFireInteractiveEvents('viewmoretestimonials', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }
                this.alumniProfileVisit = function($event) {
                	var url = typeof $event.target.href != 'undefined' ? $event.target.href : $event.target.parentElement.href;
                    ga.gaFireInteractiveEvents('alumniprofilevisit', user_params.user_id + ' || ' + document.URL + ' || ' + url);
                }
                this.gaFireMasterCard = function($event) {
                    ga.gaFireInteractiveEvents('mastercardclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.parentElement.parentNode.href);
                }
                this.gaFireMobileAppLink = function($event) {
                    ga.gaFireInteractiveEvents('mobileapplinkclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }
                this.gaFireInMediaLink = function($event) {
                    ga.gaFireInteractiveEvents('inmedialinkclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.parentNode.href);
                }
                this.gaFireHomePagePopularCourseClick = function($event, course, url, vertical) {
                    ga.gaFireInteractiveEvents('homepagepopularcourseclick', course + ' || ' + vertical);
                }

                this.gaFireHomePageVerticalClick = function($event) {
                    ga.gaFireInteractiveEvents('homepagepopularcourseverticalclick', $event.target.innerHTML);
                }

                this.gaFireHomePageTrainingTypeClick = function(trainingType) {
                    ga.gaFireInteractiveEvents('homepageselecttrainingtype', trainingType);
                }
                this.gaHomepageQuickLinkClick = function(course,url) {
                    ga.gaFireInteractiveEvents('homepageQuickLinkClick', user_params.user_id + ' || ' + document.URL + ' || '+ course + ' || ' + url);
                };
                this.gaHomepageExploreAll=function(){
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_nav_user_clicks_on_explore_courses_on_homepage",
                        common: "product"
                    });
                    ga.gaFireInteractiveEvents('homepageExploreAll', user_params.user_id + ' || ' + document.URL);
                }
                this.gaHomepageCourseToogle=function(tab){
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_eng_user_clicks_course_type_toggle_on_homepage",
                        event_data: {
                            'sl_form_toggle_active': tab
                        },
                        common: "product"
                    });
                    ga.gaFireInteractiveEvents('homepageCourseToogle', user_params.user_id + ' || ' + document.URL + ' || ' + tab);
                }
                this.gaHomepageWhatsNewClick=function(resourceType,resourceName){
                    ga.gaFireInteractiveEvents('homepageWhatsNewClick', user_params.user_id + ' || ' + document.URL + ' || ' + resourceType +' || ' +resourceName);
                }
                this.gaHomepageCorporateLearnMoreClick=function(destinationUrl){
                    ga.gaFireInteractiveEvents('homepageCorporateLearnMoreClick', user_params.user_id + ' || ' + document.URL + ' || ' + destinationUrl );
                }
                this.gaFireHomePageMasterCard=function(masterProgram,url){
                    ga.gaFireInteractiveEvents('homepageMasterCardClick', user_params.user_id + ' || ' + document.URL + ' || ' + masterProgram + ' || '+ url);
                };
                this.searchType = false;
                this.gaFireSearchInitiated = function(trainingType) {
                    if(!this.searchType){
                        ga.gaFireInteractiveEvents('searchinitiated', user_params.user_id + ' || ' + document.URL);
                        this.searchType = true;
                    }
                }

                //gaFireHomePageSearch
                this.gFHPS = function() {
                    var elems = document.getElementsByClassName('search_in');
                    var value = '';
                    for (var i = 0; i < elems.length; i++) {
                        if (elems[i].value != "") {
                            value = elems[i].value;
                            break;
                        }
                    }
                    ga.gaFireInteractiveEvents('homepagesearch', user_params.user_id + ' || ' + document.URL + ' || ' + value);
                }
            };
            $scope.gaHomePageControllerJs = new gaClass();
})
;

 /*------------- End : HomePageController.js-----------*/ 

 /*------------- Begin : HowLvcWorksController.js-----------*/ 

angular.module('Simplilearn')
.controller('HowLvcWorksController', function($scope) {
    var self = this;
    self.isLvcVidVisible = false;
    self.videoState = '';
    
    self.hideVideo = function(){
        self.isLvcVidVisible = false;
        self.videoState = 'stop';
    };
    
    self.showVideo = function() {
        self.isLvcVidVisible = true;        
        self.videoState = 'play';
    };
    
    $scope.$on('showHowLvcWorks', function(pEvt, pVal) {
        if(pVal) {
            self.showVideo();
        }
    });
}); /*------------- End : HowLvcWorksController.js-----------*/ 

 /*------------- Begin : InTheMediaController.js-----------*/ 

angular.module('Simplilearn')
.controller('InTheMediaCtrl', function(){
    var self = this;
    var currentCategory = 1;
		self.currentSelectedCategory = 1;
    
    self.setCurrentCategory = function(pCategory) {
        currentCategory = pCategory;
    };
    
    self.isCurrentCategory = function(pCategory) {
        return currentCategory === pCategory;
    };
    
    self.constructVidPlayer = function(divId, vidUrl, vidImg) {
		jwplayer(divId).setup({
			file: vidUrl,
			image: vidImg,
			base: staticUrl + 'core/js/jwplayer/',
			width: 655,
			height: 385,
			startparam: 'start',
			//skin: staticUrl + 'core/js/jwplayer/skin_base64_new.xml',
			fallback: false,
			icons: true
		})

		return true;
	};
	
	 self.showTab = function(){
	     currentCategory = parseInt(self.currentSelectedCategory);
	   }
	
}); /*------------- End : InTheMediaController.js-----------*/ 

 /*------------- Begin : IntegratedStepFormController.js-----------*/ 

angular.module('Simplilearn')
        .controller('IntegratedStepFormController', function($scope,$interval) {
            $scope.helpers = new helpers();
            
            $scope.init_form = function (seconds){
                $scope.seconds = seconds;
                $scope.expired = 0;
                $scope.countdown();
            } 
           
            $scope.submitStepIndegratedForm = function () {
                if ($scope.indegratedForm.$invalid) {
                    return $scope.helpers.FormNotValid($scope.indegratedForm);
                } else if ($scope.seconds <= 0) {
                    alert("Form Expired. Please try again.");
                } else {
                    document.getElementById('indegratedForm-step').submit();
                }
            }
           
            $scope.countdown = function() {
              if ($scope.seconds <= 0) return;
              $scope.countdownInterval = $interval(function() {
                if ($scope.seconds <= 0) {
                  //Disable Submit button 
                  $scope.expired = 1;
                }
                $scope.seconds--;
              }, 1000);
            };

            $scope.stop = function() {
               $interval.cancel($scope.countdownInterval);
            };
            
}) /*------------- End : IntegratedStepFormController.js-----------*/ 

 /*------------- Begin : JobAssistController.js-----------*/ 

angular.module('Simplilearn')
.controller('JobAssistController', function($scope,$rootScope,LocService,$cookies,$location,$timeout,PostReqService,$controller,$q) {

$scope.baseApiUrlNocache = baseApiUrlNocache;
console.log($scope.baseApiUrlNocache);

//$scope.typeForm = "https://akshay149.typeform.com/to/mhMDXI";

$scope.typeForm = "https://simplilearn.typeform.com/to/xsTpU6";

$scope.failureMsg = '';

            var paramsArrCheck = {
                'method':'getUserInfo'
            };
            $scope.userEmailId = '';
            if($rootScope.isLoggedIn) {
                PostReqService.sendPostRequest($scope.baseApiUrlNocache, paramsArrCheck)
                                    .then(function (data) {
                        $scope.userEmailId = data.data.data.email;
                });
            }

            $scope.jobAssistLogin = function(){

                var eventObj = {
                    'eventType': 'jobAssistUserClickSubmitButton',
                    'label' : user_params.user_id
                };
                CaldonGA.triggerEvent.gagInitiate(eventObj);

                if(!$rootScope.isLoggedIn){
                    $rootScope.$emit("loginPopup", {});
                }else{
                    if (typeof user_params.email!='undefined' && user_params.email!='' && user_params.email!=null)
                        var paramUserEmail = user_params.email;
                    else
                        var paramUserEmail = $scope.userEmailId;

                    //console.log("AA "+$scope.userEmailId);

                    var paramsArr = {
                        'method': 'validateJobAssistForm',
                        'email': paramUserEmail
                    };
                    PostReqService.sendPostRequest($scope.baseApiUrlNocache, paramsArr)
                    .then(function (data) {
                        var resData = data.data;
                        var orderId = resData.orderId;
                        var courseName = resData.productName;
                        if (resData.unMatchedProductName!='' && resData.unMatchedProductName!=null && typeof resData.unMatchedProductName!='undefined')
                            var unMatchedCourseName = resData.unMatchedProductName;
                        else
                            var unMatchedCourseName = 'No Course Taken';
                        $scope.typeForm = "https://simplilearn.typeform.com/to/xsTpU6";
                        $scope.typeForm = $scope.typeForm + "?email=" + user_params.email+"&coursename="+courseName+"&orderid=" + orderId;
                        //console.log($scope.typeForm);
                        if (resData.status!='' && resData.status=='success') {

                            $timeout(function () {
                                document.getElementById('typeform-share').click();
                                var eventObj = {
                                        'eventType': 'jobAssistUserViewJobLeadForm'
                                };
                                CaldonGA.triggerEvent.gagInitiate(eventObj);
                            }, 0);

                        }else{

                            //console.log(resData);
                            $scope.failureMsg = resData.msg;
                            var eventObj = {
                                'eventType': 'jobAssistUserNotApplicable',
                                'label' : unMatchedCourseName
                            };
                            CaldonGA.triggerEvent.gagInitiate(eventObj);
                            document.getElementsByClassName('failed-form')[0].style.display = 'block';
                        }
                    });

                }
            };

            $rootScope.$on('isLoggedIn', function(pEvt, pVal) {
                if(pVal && pVal === true) {
                    if (typeof user_params.email!='undefined' && user_params.email!='' && user_params.email!=null)
                        var paramUserEmail = user_params.email;
                    else
                        var paramUserEmail = $scope.userEmailId;

                    //console.log("AA "+$scope.userEmailId);

                    var paramsArr = {
                        'method': 'validateJobAssistForm',
                        'email': paramUserEmail
                    };
                    PostReqService.sendPostRequest($scope.baseApiUrlNocache, paramsArr)
                    .then(function (data) {
                        var resData = data.data;
                        var orderId = resData.orderId;
                        var courseName = resData.productName;
                        if (resData.unMatchedProductName!='' && resData.unMatchedProductName!=null && typeof resData.unMatchedProductName!='undefined')
                            var unMatchedCourseName = resData.unMatchedProductName;
                        else
                            var unMatchedCourseName = 'No Course Taken';
                        $scope.typeForm = "https://simplilearn.typeform.com/to/xsTpU6";
                        $scope.typeForm = $scope.typeForm + "?email=" + user_params.email+"&coursename="+courseName+"&orderid=" + orderId;
                        if (resData.status!='' && resData.status=='success') {
                            $timeout(function () {
                                document.getElementById('typeform-share').click();
                                var eventObj = {
                                        'eventType': 'jobAssistUserViewJobLeadForm'
                                };
                                CaldonGA.triggerEvent.gagInitiate(eventObj);

                            }, 0);

                        }else{

                            //console.log(resData);

                                $scope.failureMsg = resData.msg;
                                var eventObj = {
                                    'eventType': 'jobAssistUserNotApplicable',
                                    'label' : unMatchedCourseName
                                };
                                CaldonGA.triggerEvent.gagInitiate(eventObj);
                            document.getElementsByClassName('failed-form')[0].style.display = 'block';
                        }
                    });

                }
            });
}); /*------------- End : JobAssistController.js-----------*/ 

 /*------------- Begin : KbCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('KbCtrl', function($http) {
    
    var self = this;
    self.kbData = null;
    self.staticUrl = staticUrl;
    self.helpers = new helpers();
    
    self.init_KbData = function( pLabelId, pCourseId ){
        setTimeout(function(){
            var urlObj = self.helpers.makeValidApiUrl('getKbData');
            $http.get(urlObj.url,
                            { params: {
                                        "label_id":pLabelId,
                                        "course_id":pCourseId
                                      },
                              cache:urlObj.cached
                            }
                    )
            .success(function(data) {

                if( data.status == 'success' ) {
                    self.kbData = data.data;
                }
            });
        }, 5000);
    };

});

 /*------------- End : KbCtrl.js-----------*/ 

 /*------------- Begin : LeadController.js-----------*/ 

    angular.module('Simplilearn')
    .controller('LeadController', function ($scope, $http, $timeout, PostReqService, LocService) {
        $scope.helpers = new helpers();
        $scope.courseData = [];

        /*
         * Get all course list
         * @returns object list of courses
         */
        $scope.countryList = [];
        $scope.stateList = [];
        $scope.phoneCodeList = [];
        $scope.lead_source_type_default = 'Website';
        $scope.lead_source_type_default_lamda = 'SL-Website';
        $scope.disable_flag_lead_source_type = false;
        //window.x = $scope;
        $scope.$watch('country',function(newVal){
            if(!newVal) return;
            if($scope.country_dataSelect) {
                $scope.stateList = Object.keys($scope.country_dataSelect[newVal]);
                $scope.stateList.sort();
                $scope.state='';
                $scope.cityList = [];
                $scope.city='';
                $scope.chat_lead_form.state.$dirty = false;
                $scope.chat_lead_form.city.$dirty = false;
            }
        });
        $scope.$watch('state',function(newVal){
            if(!newVal) return;
            if($scope.country_dataSelect) {
                $scope.cityList = $scope.country_dataSelect[$scope.country][newVal];
                $scope.cityList = Object.keys($scope.cityList).map(function (key) { return $scope.cityList[key]; }); $scope.cityList.sort();
                $scope.city='';
                $scope.regionName = newVal;
                $scope.chat_lead_form.city.$dirty = false;
            }
        });
        $scope.$watch('frm_data.phoneCode',function(newVal){
            $scope.phPlus = (newVal)?'+':'';
        });

        $scope.$watch('frm_data.product_type',function(newVal){
            if(!newVal) return;
            $scope.frm_data.course_id = '';
        });

        $scope.initfunc = function(){

           // Get country phone code
           (function() {
                LocService.getCountryData().then(function(data) {
                    $scope.phoneCodeList = data;
                })
           })();


           //Initializing Values
           $scope.frm_data = user_params;

           // Get value from sl_custom field
           try {
                var paramMap = {
                    // sl_custom_obj : form field
                    'email': 'email',
                    'name': 'name',
                    'phone': 'phonenumber',
                    'phoneCode': 'phoneCode',
                };
                if(typeof user_params.sl_custom_data == "string" && user_params.sl_custom_data) {
                    var sl_custom_obj = JSON.parse(user_params.sl_custom_data);
                    if(typeof sl_custom_obj != 'undefined' && sl_custom_obj && sl_custom_obj.phoneCode) {
                        sl_custom_obj.phoneCode = sl_custom_obj.phoneCode.replace('-', '').replace('+', '')
                    }
                    for(dataKey in paramMap) {
                        var formKey = paramMap[dataKey]
                        if (
                            (typeof $scope.frm_data[formKey] == 'undefined' || !$scope.frm_data[formKey]) &&
                            (typeof sl_custom_obj[dataKey] != 'undefined' && sl_custom_obj[dataKey])
                        ) {
                            $scope.frm_data[formKey] = sl_custom_obj[dataKey];
                        }
                    }
                    if (typeof sl_custom_obj.last_source != 'undefined' && sl_custom_obj.last_source) {
                        $scope.frm_data.last_cookie_source = sl_custom_obj.last_source;
                    }
                    if (typeof sl_custom_obj.we_event_data != 'undefined' && sl_custom_obj.we_event_data) {
                        sessionStorage.setItem(WebTracking.eventReq.event_data_key, JSON.stringify(sl_custom_obj.we_event_data));
                    }
                    if (typeof sl_custom_obj.we_attr_data != 'undefined' && sl_custom_obj.we_attr_data) {
                        sessionStorage.setItem(WebTracking.eventReq.user_attr_key, JSON.stringify(sl_custom_obj.we_attr_data));
                    }
                }
           } catch(e) {
               console.warn("SL Custom", e);
           }

           if($scope.frm_data.lead_source_type == 'Tollfree'){
                $scope.lead_source_type_default = $scope.frm_data.lead_source_type;
                $scope.disable_flag_lead_source_type =  true;
                $scope.lead_source_type_default_lamda = $scope.frm_data.lead_source_type;
           }

            var urlObj1 = $scope.helpers.makeValidApiUrl('getCourseBundleList');
            $http.get(urlObj1.url, {cache: urlObj1.cached})
                .success(function (data) {
                    $scope.courseData = data.data.courseData;
                    $scope.bundleData = data.data.bundleData;
                });


           var urlObj = $scope.helpers.makeValidApiUrl('getLocationDataForm');
            $http.get(urlObj.url, {cache: urlObj.cached})
                .success(function (data) {
                    $scope.country_data = data.data.country;
                    $scope.region_data = data.data.region;
                    $scope.city_data = data.data.city;
                    $scope.country_dataSelect = data.data.selectData;
                    $scope.countryList = Object.keys($scope.country_dataSelect);
                    $scope.countryList.sort();
                    $timeout(function(){
                        $scope.country = $scope.frm_data.country;
                        $timeout(function(){
                            $scope.state = $scope.frm_data.state;
                            $timeout(function(){
                               $scope.city = $scope.frm_data.city;
                               if(!$scope.frm_data.phoneCode) {
                                    $scope.frm_data.phoneCode = document.getElementById('phoneCode').value;
                               } else {
                                   document.getElementById('phoneCode').value = $scope.frm_data.phoneCode;
                               }
                            }, 50);
                        }, 50);
                    },100);

                });


          $scope.chatAgentList = [  'abdul.daim@simplilearn.com',
                                    'abinash.parichha@simplilearn.com',
                                    'ajaykumar.s@simplilearn.com',
                                    'akshath.monnappa@simplilearn.net',
                                    'ameena.siddiqua@simplilearn.com',
                                    'ankit@simplilearn.com',
                                    'anugrah.nair@simplilearn.com',
                                    'aritra.ghosh@simplilearn.com',
                                    'ashish.nayak@simplilearn.com',
                                    'avinash.r@simplilearn.com',
                                    'chethan.rangappa@simplilearn.com',
                                    'dawa.lama@simplilearn.com',
                                    'divya.josephine@simplilearn.com',
                                    'elina.alam@simplilearn.net',
                                    'enold.dsouza@simplilearn.com',
                                    'franklin.v@simplilearn.com',
                                    'geetha.rajanna@simplilearn.com',
                                    'haris.mushir@simplilearn.com',
                                    'harshika@simplilearn.com',
                                    'jhilam.chatterjee@simplilearn.com',
                                    'joseph.kumar@simplilearn.net',
                                    'karishma.bhowmik@simplilearn.com',
                                    'kavana@simplilearn.com',
                                    'keshab.das@simplilearn.com',
                                    'laboni.saha@simplilearn.net',
                                    'llewellyn@simplilearn.com',
                                    'marketinglead@simplilearn.com',
                                    'mawra.madni@simplilearn.net',
                                    'mohit.jugran@simplilearn.com',
                                    'mritunjayee.das@simplilearn.com',
                                    'neha.r@simplilearn.net',
                                    'nidhi.singh@simplilearn.net',
                                    'nirupama.s@simplilearn.com',
                                    'nishtha.katara@simplilearn.com',
                                    'nrs.bharat@simplilearn.com',
                                    'pradeep@simplilearn.com',
                                    'pratigya.srivastava@simplilearn.net',
                                    'rachana@simplilearn.com',
                                    'ramanuj.sarkar@simplilearn.com',
                                    'raja.r@simplilearn.net',
                                    'rajesh.kumar@simplilearn.com',
                                    'ravi.kumar@simplilearn.com',
                                    'roopesh.r@simplilearn.net',
                                    'sandeep.singh@simplilearn.net',
                                    'sameer.govindan@simplilearn.com',
                                    'sanatomba.singh@simplilearn.com',
                                    'sanjay.r@simplilearn.com',
                                    'santhya.ts@simplilearn.com',
                                    'shailesh.tiwary@simplilearn.com',
                                    'shalivahana@simplilearn.com',
                                    'shilangi@simplilearn.com',
                                    'shivangi.purva@simplilearn.com',
                                    'shonali.das@simplilearn.com',
                                    'shradith@simplilearn.com',
                                    'shreyasrk@simplilearn.com',
                                    'shrinidhi.shetty@simplilearn.com',
                                    'sonia.meinam@simplilearn.com',
                                    'subhamay.saha@simplilearn.com',
                                    'trushna.das@simplilearn.com',
                                    'vikram@simplilearn.com',
                                    'yuvraj.s@simplilearn.com',
                                    'siddhartha.swain@simplilearn.com',
                                    'prasad.v@simplilearn.net',
                                    'prafulla@simplilearn.net',
                                    'pawan.singh@simplilearn.com',
                                    'mohammed.shahid@simplilearn.net',
                                    'abhishek.verma@simplilearn.net',
                                    'abhishek.anand@simplilearn.net',
                                    'subrat.kumar@simplilearn.net',
                                    'sayooj.k@simplilearn.net',
                                    'rabindra.rai@simplilearn.net',
                                    'sridhar.gb@simplilearn.net',
                                    'bharath.srikanth@simplilearn.net',
                                    'poonacha@simplilearn.net',
                                    'sadiq.pasha@simplilearn.net',
                                    'anudeep.l@simplilearn.net',
                                    'sulaiman@simplilearn.net'
                                    ];
        };

            $scope.createleadAfterData = function () {
                 WebTracking.eventReq.logoutUser();
                if ($scope.frm_data.lead_source_type == 'Tollfree') {
                    $scope.lead_source_type_default_lamda = $scope.frm_data.lead_source_type;
                    $scope.lead_source_type_default = $scope.frm_data.lead_source_type;
                }
                var phone = '';
                if ($scope.frm_data.phonenumber) {
                    phone = '+' + $scope.frm_data.phoneCode + '-' + $scope.frm_data.phonenumber;
                }
                if ($scope.frm_data.sitename == 'sl') {
                    var nameDiv = ($scope.frm_data.name) ? $scope.frm_data.name.split(/ (.+)/):[];
                    if (Object.keys($scope.selectedCourseInfo).length > 0) {
                        var selectedCourseInfo = $scope.selectedCourseInfo;
                    }
                    var triaingType = 'osl';
                    var productType = 'course';
                    if ($scope.frm_data.trng_type == 1) {
                        triaingType = 'classroom'
                    } else if ($scope.frm_data.trng_type == 9) {
                        triaingType = 'lvc';
                    }
                    if (typeof $scope.frm_data.product_type != 'undefined' && $scope.frm_data.product_type == '1') {
                        productType = 'course';
                    } else if (typeof $scope.frm_data.product_type != 'undefined' && $scope.frm_data.product_type == '2') {
                        productType = 'bundle';
                    }
                    var eventData = {
                        'sl_site_module': $scope.frm_data.site_module,
                        'sl_user_email': $scope.frm_data.email,
                        'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                        'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                        'sl_user_phone': phone || '',
                        'sl_email_opt_in': true,
                        'sl_sms_opt_in': true,
                        'sl_product_id': parseInt($scope.frm_data.course_id),
                        'sl_product_name': $scope.frm_data.course_name,
                        'sl_product_type': productType,
                        'sl_page_type': 'chat_lead_form',
                        'sl_event_time': Math.floor(new Date()),
                        'sl_user_country': $scope.frm_data.country_name,
                        'sl_user_state': $scope.regionName||'',
                        'sl_lead_user_message': $scope.frm_data.conversation || '',
                    };
                    if ((typeof selectedCourseInfo !== 'undefined' || selectedCourseInfo !== null) && Object.keys(selectedCourseInfo).length > 0) {
                        for (var attrname in selectedCourseInfo) {
                            eventData[attrname] = selectedCourseInfo[attrname];
                        }
                    }
                    //eventData['sl_user_email_hash'] = btoa(eventData['sl_user_email']);
                    eventData['sl_product_training_type'] = triaingType || '';
                }
                if ($scope.frm_data.customerType == 'B2B' || $scope.frm_data.customerType == 'ATP') {
                    var campaign_id = user_params.defaultCampaignIdB2B || null;
                    if ($scope.frm_data.campaign_id == '' && $scope.frm_data.sitename == 'mm') {
                        campaign_id = user_params.mmCampaignId || null
                    }
                    if ($scope.frm_data.campaign_id == '' && $scope.frm_data.sitename == 'sl') {
                        campaign_id = user_params.slCampaignId || null
                    }
                    var stateName = '';
                    if ($scope.frm_data.state)
                        stateName = $scope.frm_data.state;
                    var leadData = {
                        FirstName: $scope.frm_data.fname,
                        LastName: $scope.frm_data.lname,
                        Company: $scope.frm_data.company,
                        Email: $scope.frm_data.email,
                        Phone: phone,
                        Country: $scope.frm_data.country_name,
                        State: stateName,
                        Employees_Range__c: $scope.frm_data.emp_num,
                        Latest_Lead_Source__c: $scope.lead_source_type_default,
                        Latest_Lead_Source_Detail__c: $scope.lead_source_type_default,
                        Device_Type__c: $scope.lead_source_type_default,
                        UTM_Source__c: $scope.frm_data.last_cookie_source,
                        UTM_Medium__c: $scope.frm_data.last_cookie_source,
                        Entry_Page__c: $scope.frm_data.leadgen_url,
                        Site_Module__c: $scope.frm_data.site_module, // ????
                        Campaign_id: campaign_id, // ?????
                        Query_type_name__c: $scope.frm_data.customerType,
                        Website: $scope.frm_data.Website,
                        Lead_Type: $scope.frm_data.Lead_Type,
                        GCLID: '',
                        city_name: $scope.frm_data.city_name,
                        city: $scope.frm_data.city,
                        Conversation: $scope.frm_data.conversation,
                        createdByEmail: $scope.frm_data.createdByEmail,
                        hiddenTokenChat: $scope.frm_data.hiddenTokenChat,
                        method: 'logEnterpriseSegmentDataCSRF'
                    };

                    if ($scope.frm_data.sitename == 'sl') {
                        eventData['sl_lead_type'] = 'b2b';
                        eventData['sl_user_type'] = 'b2b';
                        eventData['sl_lead_chat_type'] = $scope.frm_data.customerType;
                        eventData['sl_user_first_name'] = $scope.frm_data.fname;
                        eventData['sl_user_last_name'] = $scope.frm_data.lname;
                        eventData['sl_user_number_employees'] = $scope.frm_data.emp_num;
                        eventData['sl_user_company'] = $scope.frm_data.company;
                        webengage.onReady(function (data) {
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_lead_chat_lead_created_by_agent",
                                event_data: eventData,
                                common: "product",
                                user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name','sl_user_phone']
                            });
                        });
                    }
                    PostReqService.sendPostRequest(user_params.baseApiUrlNocache, leadData)
                            .then(function (data) {
                                if (data.data.status == 'Success' || data.data.status == 'success') {
                                    alert('Lead Created Successfully !!!');
                                    window.location.reload();
                                } else {
                                    alert('Lead Creation Failed. Please try again.');
                                    document.getElementById("save").disabled = false;
                                }
                            }).catch(function (data) {
                                    document.getElementById("save").disabled = false;
                                });
                }  else if($scope.frm_data.customerType == 'B2C' && $scope.frm_data.sitename=='sl') {
                    var nameDiv = $scope.frm_data.name.split(/ (.+)/);
                    var leadData = {
                        personName: $scope.frm_data.name,
                        personPhone: phone,
                        sl_user_message: $scope.frm_data.conversation,
                        sl_product_id: $scope.frm_data.course_id,
                        sl_product_name: $scope.frm_data.course_name,
                        countryName: $scope.frm_data.country_name,
                        cityName: $scope.frm_data.city_name,
                        cityId: $scope.frm_data.city,
                        countryId: $scope.frm_data.country,
                        sl_user_type: $scope.frm_data.customerType,
                        leadTrainingType: $scope.frm_data.trng_type,
                        leadSourceString: $scope.frm_data.leadgen_url,
                        leadsource: $scope.lead_source_type_default_lamda,
                        sl_utm_src: $scope.frm_data.last_cookie_source,
                        lead_ip: $scope.frm_data.lead_ip,
                        b2cQueryType: $scope.frm_data.site_module, // ?? variable
                        productTypeId: $scope.frm_data.product_type,
                        GCLID: '',
                        last_cookie_source: $scope.frm_data.last_cookie_source,
                        first_cookie_source: $scope.frm_data.first_cookie_source,
                        user_agent: $scope.frm_data.user_agent,
                        Website: $scope.frm_data.Website,
                        address: $scope.frm_data.address,
                        alternateEmail: $scope.frm_data.alternateEmail,
                        alternatePhone: $scope.frm_data.alternateno,
                        hiddenTokenChat: $scope.frm_data.hiddenTokenChat,
                        createdByEmail: $scope.frm_data.createdByEmail,
                        cl_assign_flag: $scope.frm_data.assignTo,
                        chatOwnerEmail: $scope.frm_data.createdByEmail,
                        billingTypeId : 1,
                    };
                    if ($scope.regionName)
                        leadData['region_name'] = $scope.regionName;
                    if ($scope.frm_data.sitename == 'sl') {
                        eventData['sl_lead_type'] = 'b2c';
                        eventData['sl_lead_chat_type'] = $scope.frm_data.customerType
                        webengage.onReady(function (data) {
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_lead_chat_lead_created_by_agent",
                                event_data: eventData,
                                common: "product",
                                user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name','sl_user_phone']
                            });
                        });
                    }
                    var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                    var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(leadData, webEngageLeadFormParams);
                    var unsetVars = ['first_page_time','first_page','Operating_System','device_type','device_os','device_name','mbsy_short_code','cookie','first_cookie_source','cdnCountry','we_attr_data','we_event_data'];
                    for (i = 0; i < unsetVars.length; i++) {
                        if (finalB2CParamArr[unsetVars[i]]) {
                            finalB2CParamArr[unsetVars[i]] = '';
                        }
                    }
                    if (typeof $scope.frm_data.user_agent !== 'undefined' && $scope.frm_data.user_agent) {
                        var deviceInfo = getDeviceInfo($scope.frm_data.user_agent);
                        finalB2CParamArr['device_type'] = deviceInfo.deviceType || '';
                        finalB2CParamArr['device_os'] = deviceInfo.browserOs || '';
                        finalB2CParamArr['device_name'] = deviceInfo.deviceName || '';
                        finalB2CParamArr['Operating_System'] = deviceInfo.browserOs || '';
                    }
                    finalB2CParamArr['Created_By_Email'] = finalB2CParamArr['chatOwnerEmail'] || '';
                    finalB2CParamArr['sl_utm_src'] = $scope.frm_data.last_cookie_source || '';
                    finalB2CParamArr['last_cookie_source'] = $scope.frm_data.last_cookie_source || '';
                    finalB2CParamArr['GCLID'] = getGCLIDByLeadSource($scope.frm_data.last_cookie_source);
                    finalB2CParamArr['user_agent'] = $scope.frm_data.user_agent || '';
                    finalB2CParamArr['Browser'] = $scope.frm_data.user_agent || '';
                    finalB2CParamArr['lead_ip_client'] = $scope.frm_data.lead_ip || '';
                    var applicationContentType = 'json';
                    if (typeof leadApiGatewayEndpoint == "undefined") {
                        leadApiGatewayEndpoint = "https://services.simplilearn.com/leads/store-raw-data/";
                    }
                    PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                            .then(function (data) {
                                if (data != null && data.status == 200 && data.data.status == "success") {
                                    alert('Lead Created Successfully !!!');
                                    window.location.reload();
                                } else {
                                    alert('Lead Creation Failed. Please try again.');
                                    document.getElementById("save").disabled = false;
                                }
                            }).catch(function (data) {
                                    document.getElementById("save").disabled = false;
                                });
                } else {
                    var leadData = {
                        name: $scope.frm_data.name,
                        email: $scope.frm_data.email,
                        phone: phone,
                        query: $scope.frm_data.conversation,
                        agreeToContact: 1, // ????????
                        courseId: $scope.frm_data.course_id,
                        courseName: $scope.frm_data.course_name,
                        country_name: $scope.frm_data.country_name,
                        city_name: $scope.frm_data.city_name,
                        city: $scope.frm_data.city,
                        country: $scope.frm_data.country,
                        customerType: $scope.frm_data.customerType,
                        leadTrainingType: $scope.frm_data.trng_type,
                        leadSourceString: $scope.frm_data.leadgen_url,
                        tagName: $scope.frm_data.site_module, // ???????? site module  variable
                        leadSource: $scope.lead_source_type_default,
                        lead_ip: $scope.frm_data.lead_ip,
                        type: $scope.frm_data.site_module, // ?? variable
                        productTypeId: $scope.frm_data.product_type,
                        method: 'saveCallbackChatLeads',
                        GCLID: '',
                        last_cookie_source: $scope.frm_data.last_cookie_source,
                        first_cookie_source: $scope.frm_data.first_cookie_source,
                        user_agent: $scope.frm_data.user_agent,
                        Website: $scope.frm_data.Website,
                        Lead_Type: $scope.frm_data.Lead_Type,
                        address: $scope.frm_data.address,
                        alternateEmail: $scope.frm_data.alternateEmail,
                        alternateno: $scope.frm_data.alternateno,
                        hiddenTokenChat: $scope.frm_data.hiddenTokenChat,
                        createdByEmail: $scope.frm_data.createdByEmail,
                        cl_assign_flag: $scope.frm_data.assignTo

                    };
                    if ($scope.frm_data.sitename == 'sl') {
                        eventData['sl_lead_type'] = 'b2c';
                        eventData['sl_lead_chat_type'] = $scope.frm_data.customerType
                        webengage.onReady(function (data) {
                            WebTracking.eventReq.triggerEvent({
                                event_id: "sl_lead_chat_lead_created_by_agent",
                                event_data: eventData,
                                common: "product",
                                user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_user_phone']
                            });
                        });
                    }
                    PostReqService.sendPostRequest(user_params.baseApiUrlNocache, leadData)
                            .then(function (data) {
                                if (data.data.status == 'Success' || data.data.status == 'success') {
                                    alert('Lead Created Successfully !!!');
                                    window.location.reload();
                                } else {
                                    alert('Lead Creation Failed. Please try again.');
                                    document.getElementById("save").disabled = false;
                                }
                            })
                            .catch(function (data) {
                                    document.getElementById("save").disabled = false;
                                });
                }
                if ($scope.frm_data.sitename == 'sl') {
                    WebTracking.eventReq.logoutUser();
                }
            };
            function getGCLIDByLeadSource(leadSource) {
                var gclid = '';
                if (leadSource) {
                    var sourceString = '';
                    if (leadSource && leadSource.indexOf('gclid') !== -1) {
                        sourceString = leadSource;
                    }
                    if (sourceString && sourceString.indexOf('gclid') !== -1) {
                        var glcStr = sourceString.substring(sourceString.indexOf("gclid") + 6);
                        var splitOnPipe = glcStr.split('|');
                        gclid = splitOnPipe[0] ? splitOnPipe[0] : '';
                    }
                }
                return gclid;
            }
        /*
         * Chat lead submit action
         */
        $scope.submitChatLead = function () {

            if($scope.chat_lead_form.$invalid){
               console.log("Form Invalid");
	       return $scope.helpers.FormNotValid($scope.chat_lead_form);
	    }
            document.getElementById("save").disabled = true;
            //Creating the Country City Data
            var countrySelector = document.querySelector("#country");
            var country_name = angular.element(countrySelector.options[countrySelector.selectedIndex]).text();

            //Getting Product name
            $scope.frm_data.course_name = '';
            if($scope.frm_data.sitename == 'mm'){
                var productSelector = document.querySelector("#mmproduct");
                $scope.frm_data.course_name = angular.element(productSelector.options[productSelector.selectedIndex]).text();
                var index_prod = angular.element(productSelector.options[productSelector.selectedIndex]).val();
                $scope.frm_data.course_id = (!isNaN(parseFloat(index_prod))) ? index_prod : '1';
            } else{
                if($scope.frm_data.product_type == '1'){
                    var productSelector = document.querySelector("#slproductCourse");
                    $scope.frm_data.course_name = angular.element(productSelector.options[productSelector.selectedIndex]).text();
                } else if($scope.frm_data.product_type == '2'){
                    var productSelector = document.querySelector("#slproductBund");
                    $scope.frm_data.course_name = angular.element(productSelector.options[productSelector.selectedIndex]).text();
                }
            }

            var country_code ='';
            for (var ci in $scope.country_data){
                var country_d = $scope.country_data[ci];
                if(country_d.name == country_name)
                {
                   country_code =  country_d.country_id;
                }
            }
            $http.get(user_params.cdnApiUrl + 'getCountryRegionFromCityId&city='+$scope.city + '&country='+country_code).then(function (data) {
                if(data.data.status == 'success'){
                    $scope.frm_data.country = data.data.data.country_id;
                    $scope.frm_data.country_name =  country_name;
                    $scope.frm_data.city = data.data.data.city_id;
                    $scope.frm_data.city_name = data.data.data.name;
                    $scope.frm_data.state = data.data.data.region_code;

                    $scope.selectedCourseInfo = {};
                    if ($scope.frm_data.course_id && $scope.frm_data.country) {
                        var selectedCID = $scope.frm_data.course_id;
                        var selectedCouId = $scope.frm_data.country;
                        var productTypeId = $scope.frm_data.product_type;
                        if ((typeof $scope.frm_data.product_type != 'undefined' && $scope.frm_data.product_type) && ($scope.frm_data.sitename == 'sl')) {
                            var courseDetailResponse = PostReqService.getSelectedCourseDetailByIdChatLead(selectedCID, selectedCouId, productTypeId).then(function (data) {
                                if (data) {
                                    $scope.selectedCourseInfo = data;
                                    $scope.createleadAfterData($scope.frm_data);
                                } else {
                                    document.getElementById("save").disabled = false;
                                }
                            })
                              .catch(function (data) {
                                    document.getElementById("save").disabled = false;
                                });
                        } else {
                            $scope.createleadAfterData($scope.frm_data);
                        }
                    }
                  }
            })
            .catch(function (data) {
               document.getElementById("save").disabled = false;
            });
        }

    });
 /*------------- End : LeadController.js-----------*/ 

 /*------------- Begin : LecturePageCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('LecturePageCtrl', function ($scope, $http, $rootScope, $window,CpService, $timeout,PostReqService, $cookies) {
            $scope.display = {display: 'block'};
            $scope.LPLike = 0;
            $scope.LPDislike = 0;
            $scope.LPChapid = 0;
            $scope.LPCid = 0;
            $scope.showVideo = 0;
            $scope.mobileView = 1;
            $scope.showMobileLink = 0;
            $scope.showCrsPrev = 1;
            $scope.divCounterForLecturePage = '';
            $scope.videoState = '';
            $rootScope.lecturePage = 1;
            $scope.stopPopup = 0;
            $scope.popupIdentifier = "popup-modal-lecture";
            $scope.popuptimerCount = 30000;
            $scope.lectureCoursePreviewTitle = '';
            $scope.elearningId='';
            $scope.lessons='';
            $scope.lessonObj='';
            $scope.sectionId='';
            $scope.isFromELearning='';
            $scope.url='';
            $scope.videoType='';
           
            var w = angular.element($window);
            w.bind('resize', function () {
                $rootScope.setSizeFlags();
            })
            $rootScope.$watch('mobWidthFlag', function (n, o) {
                if ($rootScope.mobWidthFlag) {
                    $scope.showMobileLink = 1;
                } else {
                    $scope.showMobileLink = 0;
                }
            })
                                   
            init = function(){
                   var cname = "lecture_popup_cookie";
                   var isLecturePopupViewed= getCookie(cname);
                   if(typeof isLecturePopupViewed === "undefined" || parseInt(isLecturePopupViewed) === 0 || user_params.primary_course_id != parseInt(isLecturePopupViewed)){
                    $timeout(function(){
                        var elm = document.getElementById("popup-modal-lecture");
                        if(elm){
                            elm.classList.add("lecture-page-pop-disp");
                        }
                    },30000);  
                   }                        
            }

            $scope.baseValues = function (chapid, cid) {
                $scope.LPChapid = chapid;
                $scope.LPCid = cid;
            };
            playLecturePageVideo = function () {
                $scope.showVideo = 1;
                $scope.showCrsPrev = 1;
                $scope.videoState = '';
            }

            $scope.showTranscriptCentreSection = function () {
                var elem = angular.element(document.getElementsByClassName('lecture_fancy_box_close'));
                setTimeout(function() {
                    elem[0].click();
                }, 0);
            }

            $scope.videoComplete = function (pState) {
                if(pState && pState.data == YT.PlayerState.ENDED) {
                    $scope.showCrsPrev = 0;
                    $scope.$apply();
                }
            }

            $scope.hidePreview = function () {
                $scope.showVideo = 0;
                $scope.videoState = 'pause';
            };
            
            $scope.closePopupLect = function (course_id) {
                document.getElementById('popup-modal-lecture').style.display = 'none';
                var cname = 'lecture_popup_cookie';
                var cvalue = course_id;
                var exdays =365;
                setCookie(cname, cvalue, exdays);
            };
                        
            $scope.goToCourseLect = function($event,course_id){ 
                  var cname = 'lecture_popup_cookie';
                  var cvalue = course_id;
                  var exdays =365;
                  setCookie(cname, cvalue, exdays);
            };
     
             // new js 
            
             $scope.closeModalUp = function () {
                var displayStyle = null;
                $scope.stopPopup = 1;
                clearTimeout($scope.popuptimer);
                $scope.popuptimer = null;
                angular.element(document.body).removeClass("modal-open");
                var elem = document.getElementById("popup-modal-lecture");
                if (elem.currentStyle) {
                    displayStyle = elem.currentStyle.display;
                } else if (window.getComputedStyle) {
                    displayStyle = window.getComputedStyle(elem, null).getPropertyValue("display");
                }
                if (displayStyle.localeCompare($scope.displayStyle) == 0) {
                    document.getElementById("popup-modal-lecture").style.display = "none";
                }
                //console.log("Popup closed");

            }
            
            $scope.loadPopup = function () {
                angular.element(document.body).addClass("modal-open");
                document.getElementById($scope.popupIdentifier).style.display = "block";
                return;
            }
            $scope.popMinimize = function(){
                    angular.element(document.getElementsByClassName('popup-body')).addClass("minimizedPopup");
            }
           
            $scope.stopPopUpModal = function (title) {
                var displayStyle = null;
                $scope.stopPopup = 1;
                clearTimeout($scope.popuptimer);
                $scope.popuptimer = null;
                angular.element(document.body).removeClass("modal-open");
                var elem = document.getElementById("popup-modal-lecture");
                if (elem.currentStyle) {
                    displayStyle = elem.currentStyle.display;
                } else if (window.getComputedStyle) {
                    displayStyle = window.getComputedStyle(elem, null).getPropertyValue("display");
                }
                if (displayStyle.localeCompare($scope.displayStyle) == 0) {
                    document.getElementById("popup-modal-lecture").style.display = "none";
                }
                if ($scope.stopSmallPopUp !== 1) {
                    console.log("Popup Closed On User Request");
                    document.getElementById('side-popup').style.display = 'block';
                    $timeout(function(){
                        document.getElementById('side-popup').style.bottom = '10px';
                    },500);
                }
                var type = $scope.type;
                var title = title;
                if(type = 'ebook'){
                    type = 'new course popup';
                    title = $scope.title_link;
                }
                if($scope.isFirstTime == true){
                    var eventObj = {
                        'eventType': 'detailViewPersistentPopSeen',
                        'label': user_params.user_id + ' || ' + type + ' || ' + document.URL + ' || '+ title
                    };
                }else{
                    var eventObj = {
                        'eventType': 'detailViewPersistentPopupCancel',
                        'label': user_params.user_id + ' || ' + type + ' || from persistent popup' + ' || ' + document.URL + ' || '+ title
                    };
                }
                CaldonGA.triggerEvent.gagInitiate(eventObj);

            };
            
            
             // end new js 
            
            
            $scope.resumeVideo = function (isFromElearning) {
                if(isFromElearning) {
                    angular.element(document.getElementsByClassName('special-video-iframe')).attr('src', angular.element(document.getElementsByClassName('special-video-iframe')).attr('src'));
                    $rootScope.showHideDivsLP(0, 1);
                } else {
                    var centreButtons = document.getElementsByClassName('centre_view_transcript');
                    var relevantCentre = centreButtons[$scope.divCounterForLecturePage];
                    var closeBtn = document.getElementsByClassName('lecture_fancy_box_close')[0];
                    closeBtn.click();
                    relevantCentre.click();
                }
            }

            $scope.likeCount = function (type) {
                var cookieVal = 'LPliked_' + $scope.LPCid + '_' + $scope.LPChapid;
                var likeCheck = 'LPliked_1_' + $scope.LPCid + '_' + $scope.LPChapid;
                var unlikeCheck = 'LPliked_0_' + $scope.LPCid + '_' + $scope.LPChapid;
                if (!getCookie(cookieVal)) {
                    if (type == 1) {
                        var likeParams = {'method':'lecturePageCount','type':'like','chap_id':$scope.LPChapid,'course_id':$scope.LPCid};
                        PostReqService.sendPostRequest(baseApiUrlNocache,likeParams);
                        $scope.LPLike++;
                        $scope.likedClass = 'active-icon';
                        setCookie(likeCheck, 1, 365);
                    } else if (type == 0) {
                        var unlikeParams = {'method':'lecturePageCount','type':'unlike','chap_id':$scope.LPChapid,'course_id':$scope.LPCid};
                        PostReqService.sendPostRequest(baseApiUrlNocache,unlikeParams);
                        $scope.LPDislike++;
                        $scope.dislikeClass = 'active-icon';
                        setCookie(unlikeCheck, 1, 365);
                    }
                    setCookie(cookieVal, 1, 365);
                }
            }

            setCookie = function (cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires;
            }
            getCookie = function (cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ')
                        c = c.substring(1);
                    if (c.indexOf(name) == 0)
                        return c.substring(name.length, c.length);
                }
                return "";
            }

            $scope.expandChapList = function (val) {
                angular.element(document.getElementsByClassName('lecture_page_mview')).removeClass('lecture_page_mview')
                status = status != '' ? status : val;
                if (status == 1) {
                    $scope.mobileView = 1;
                    status = 0;
                } else if (status == 0) {
                    $scope.mobileView = 0;
                    status = 1;
                }
            }

            var gaForLecturePage = function () {
                var ga = new gaEventsTracker();

                this.LecturePage_Watch_Course_Video = function () {
                    ga.gaFireInteractiveEvents('LecturePage_Watch_Course_Video');
                }
                this.LecturePage_View_Course_Detail = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_View_Course_Detail', val);
                }
                this.LecturePage_Click_Related_Course = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Related_Course', val);
                }
                this.LecturePage_Click_Webinar = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Webinar', val);
                }
                this.LecturePage_Click_Related_Article = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Related_Article', val);
                }
                this.LecturePage_Click_Other_Chapter = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Other_Chapter', val);
                }
                this.LecturePage_Scroll_Related_Course = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Scroll_Related_Course', val);
                }
                this.LecturePage_Scroll_Learner_Review = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Scroll_Learner_Review', val);
                }
                this.LecturePage_Scroll_Webinar = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Scroll_Webinar', val);
                }
                this.LecturePage_Scroll_Related_Article = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Scroll_Related_Article', val);
                }
                this.LecturePage_Click_Reviewer_Prfile = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Reviewer_Prfile', val);
                }
                this.LecturePage_Expand_Topic = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Expand_Topic', val);
                }
                this.LecturePage_Collapse_Topic = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Collapse_Topic', val);
                }
                this.LecturePage_Is_it_helpful = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Is_it_helpful', val);
                }
                this.LecturePage_View_Topic_Video = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_View_Topic_Video', val);
                }
                this.LecturePage_Click_Course_Detail_from_Video = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_Click_Course_Detail_from_Video', val);
                }

            }

            $scope.lecturePageGa = new gaForLecturePage();

            $scope.onEscape = function (block) {
                if (block == 1) {
                    $scope.hidePreview();
                }
            }

            $scope.clickCentreCourseLinks = function () {
                angular.element(document.getElementsByClassName('centre_course_nav')).on('click', function () {
                    angular.element(document.getElementsByClassName('lhs_course_btn'))[0].click();
                })
            }
            $scope.clickCentreCourseLinks();

            $scope.setLecturePreviewTitle = function (title, counter) {
                $scope.lectureCoursePreviewTitle = title;
                $scope.divCounterForLecturePage = counter;
            }

            setTimeout(function () {
                var likeCheck = 'LPliked_1_' + $scope.LPCid + '_' + $scope.LPChapid;
                var unlikeCheck = 'LPliked_0_' + $scope.LPCid + '_' + $scope.LPChapid;
                if (getCookie(likeCheck)) {
                    $scope.likedClass = 'active-icon';
                } else if (getCookie(unlikeCheck)) {
                    $scope.dislikeClass = 'active-icon';
                }

                $http.get(baseApiUrlNocache + "?method=lecturePageLikes&chap_id=" + $scope.LPChapid + "&course_id=" + $scope.LPCid)
                        .success(function (data, status) {
                            if (data != false) {
                                $scope.LPLike = data['likes'];
                                $scope.LPDislike = data['unlikes'];
                            } else {
                                $scope.LPLike = 0;
                                $scope.LPDislike = 0;
                            }
                        })
            }, 1000);

            $scope.setVideoParams = function(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType) {
                $scope.elearningId = elearningId;
                $scope.lessons = lessons;
                $scope.lessonObj = lessonObj;
                $scope.sectionId = sectionId;
                $scope.isFromELearning = isFromELearning;
                $scope.url = url;
                $scope.videoType = videoType;
                $scope.playLectureVideo();
            }
            $scope.playLectureVideo = function() {
                $timeout(function() {
                    return CpService.handleVideoLinkClick($scope.elearningId, $scope.lessons, $scope.lessonObj, $scope.sectionId, $scope.isFromELearning, $scope.url, $scope.videoType, $cookies[user_params.enterpriseCountCookieName]);
                });
            }
                init();
        }); /*------------- End : LecturePageCtrl.js-----------*/ 

 /*------------- Begin : LvcPassController.js-----------*/ 

angular.module('Simplilearn')
.controller('LvcPassController', function($sce, $http, $interval,$timeout, $rootScope,$window, $scope){    
    var self = this;
    
    self.paginationRequestParams = {},

    self.pagedCourses = new Array(),
    self.currentLabelId = 0,
    self.showLoadMore = 1,
    self.catChangedFlag = 0;
    self.catChangeErr = '';
    self.pauseTimer = 0;
    self.tabIndexCount=0;
    self.isCatRequestPending=0;
    self.showBatchesDiv = 0;
    self.getBatchesRequestPending = 0;
    self.batchesArr = {};
    self.currentCourseBatch = {};
    self.maxBatchCount=4;
    self.batchViewMoreVisible=1;
    self.countryName = '';
    self.topErrMsg ='';
    self.batchesStatusMsg = "Loading...";
    self.baseUrl = baseUrl;
    self.helpers = new helpers();
    self.loadMoreCoursesApiUrl = '';
    
    var passId = null,
    pageSize = 10;
    
    self.initData = function(pPassId, pPageSize, pShowLoadMore) {
        passId = pPassId;
        pageSize = pPageSize;
        self.showLoadMore = pShowLoadMore;
        self.currentLabelId = '{"key":"0","value":"All Categories"}';
        var currentLabel = JSON.parse(self.currentLabelId);
        self.paginationRequestParams['pass_id'] = passId;
        self.paginationRequestParams['label_id'] = currentLabel.key;
        var urlObj = self.helpers.makeValidApiUrl('loadPassCourses');
        self.loadMoreCoursesApiUrl = urlObj.url;
        
        if(isMobile != 1){
            var timerId = $interval(function() {
                if(self.pauseTimer == 0){
                    self.changeTab(self.tabIndexCount);
                    if(self.tabIndexCount < 3){
                        self.tabIndexCount++;
                    }else{
                        self.tabIndexCount = 0;
                    }
                }

            }, 3000);
        }else{
            self.tabIndexCount = -1;
        }
        
        var locatorCookie = getCookieByName('locatori9');
	var locatorCookieObj = JSON.parse(locatorCookie);
        self.countryName = locatorCookieObj.country_name;
        self.topErrMsg = 'The pass is not available in your country';
        if(self.baseUrl.charAt(self.baseUrl.length-1) == '/'){
            self.baseUrl = self.baseUrl.substring(0,self.baseUrl.length-1);
        }
        
        document.onkeydown = function (event) {
            if(event.keyCode == 27 && self.lvcVideoDisplayStatus.display!='none'){
                self.lvcVideoDisplayStatus.display='none';
                lvcVid.stop();
                document.getElementById("lvc_vid_div").innerHTML = "";
            }
        };
        self.ga.gaOnloadLvc();
    };
    
    $scope.$watch('hybridWidthFlag', function(newValue) {
        var benefitsUl = (document.getElementsByClassName("benifits_wrap big_font")[0]).getElementsByTagName("ul");
        var liObjs = benefitsUl[0].getElementsByTagName("li");
        var liObjsLen = liObjs.length;
        
        if (newValue == 1) {
            self.pauseTimer = 1;
            for(var i=0;i<liObjsLen;i++){
                liObjs[i].className = liObjs[i].className.replace("lvc_active_btn");
                liObjs[i].className = liObjs[i].className.replace(" ","");
                var divObj = liObjs[i].getElementsByTagName("div");
                divObj[0].className = "benifit_panel height_transition hidden_cls";
            }
            
        } else {
            self.pauseTimer = 0;
            for(var i=0;i<liObjsLen;i++){
                liObjs[i].className = liObjs[i].className.replace("lvc_active_btn");
                liObjs[i].className = liObjs[i].className.replace(" ","");
                var divObj = liObjs[i].getElementsByTagName("div");
                divObj[0].className = "benifit_panel opacity_transition with-opacity";
            }
            
        }
    });
    
    self.to_trusted = function(pHtml) {
        return $sce.trustAsHtml(pHtml);
    };
    
    self.initCategory = function(pKey, pVal) {
        self.currentLabelId = '{"key":"'+pKey+'","value":"'+pVal+'"}';
        var currentLabel = JSON.parse(self.currentLabelId);
        self.paginationRequestParams['label_id'] = currentLabel.key;
    };
    
    self.catChangeAction = function() {
        self.currentLabelId = JSON.parse(self.currentLabelId);
        var reqParams = {};
        self.paginationRequestParams['label_id'] = self.currentLabelId.key;
        
        reqParams['additionalSkip'] = 0;
        reqParams['pageSize'] = pageSize;
        reqParams['currPage'] = 0;
        reqParams['pass_id'] = passId;
        reqParams['label_id'] = self.currentLabelId.key;
        
        var loadMoreCopy = self.showLoadMore;
        self.showLoadMore = 0;
        self.isCatRequestPending=1;
        self.catChangeErr = '';
        self.ga.gaFireEventsGeneric('lvcpassCatFilter',self.currentLabelId.value);
        var urlObj = self.helpers.makeValidApiUrl('loadPassCourses');
        $http.get( urlObj.url, { params:reqParams, cache:urlObj.cached } )
        .success(function(data) {
            self.isCatRequestPending=0;
            if( data.status == 'success' && typeof data.content !== 'undefined' ) {
                self.catChangedFlag = 1;
                self.pagedCourses = new Array();
        
                for( var prop in data.content ) {
                    self.pagedCourses.push(data.content[prop]);
                }
                
                if( data.content.length < pageSize ) {
                    self.showLoadMore = 0;
                } else {
                    self.showLoadMore = 1;                        
                }
            }
            else {
                self.showLoadMore = loadMoreCopy;
                self.catChangeErr = 'Some error occurred. Please try again later.';
                hideCatChangeErr();
            }
        })
        .error(function() {
            self.showLoadMore = loadMoreCopy;
            self.catChangeErr = 'Some error occurred. Please try again later.';                        
            hideCatChangeErr();
        });
        self.currentLabelId = JSON.stringify(self.currentLabelId);
    };
    
    var hideCatChangeErr = function() {
        $timeout(function(){
            self.catChangeErr = '';
        },3000);
    };
    var batchDivObj = null;
    self.getBatches = function(e,pCourseId) {
        e.preventDefault();
        self.getBatchesRequestPending = 1;
        self.batchesStatusMsg = "Loading...";
        self.maxBatchCount=4;
        if(typeof self.batchesArr[pCourseId] == 'undefined'){
            self.batchesArr[pCourseId] = [];
        }   
        
        if( !self.batchesArr[pCourseId]['show'] ) {
            self.hideBatches();
            self.batchesArr[pCourseId]['show']=true;
        } else {
            self.hideBatches();
        }
        
        self.currentCourseBatch = {};
        var reqParams = {};
        var linkObj;
        if(typeof e.srcElement !='undefined'){
            linkObj = e.srcElement;
        }else{
            linkObj = e.target;
        }
        self.showBatchesDiv = 1;
        reqParams['pass_id'] = passId;
        reqParams['course_id'] = pCourseId;
        //if(typeof self.batchesArr[pCourseId]['content'] == 'undefined'){
            $http.get( baseApiUrl + '?method=loadLvcPassWorkshops', { params:reqParams } )
            .success(function(data) {
                self.getBatchesRequestPending = 0;
                if( data.status == 'success' && typeof data.content !== 'undefined' && data.content != '' ) {
                    self.batchesArr[pCourseId]['content'] = data.content;
                    self.currentCourseBatch = data.content;
                }
                else {
                    self.getBatchesRequestPending = 1;
                    self.batchesStatusMsg = "Some error occurred. Please try again later.";
                }
            })
            .error(function() {
                self.getBatchesRequestPending = 1;
                    self.batchesStatusMsg = "Some error occurred. Please try again later.";
            });
        //}else{
        //    self.getBatchesRequestPending = 0;
        //    self.currentCourseBatch = self.batchesArr[pCourseId]['content'];
        //}
    };
    
    self.hideBatches = function(){
        self.showBatchesDiv = 0;
        for(var prop in self.batchesArr){
            self.batchesArr[prop]['show']=false;
        }
        self.batchViewMoreVisible = 1;
    }
    
    self.changeTab = function(index){
        var parentUlObj = document.getElementsByClassName("benifits_wrap big_font")[0].getElementsByTagName("ul")[0];
        var liObjs = angular.element(parentUlObj)[0].getElementsByTagName("li");
        var liLength = liObjs.length;
        if(isMobile != 1 && $rootScope.hybridWidthFlag!=1){
            
            for(var i=0;i<liLength;i++){
                liObjs[i].className = liObjs[i].className.replace("lvc_active_btn","");
                liObjs[i].className = liObjs[i].className.replace(" ","");
                var divObj = liObjs[i].getElementsByTagName("div");

                divObj[0].className = "benifit_panel opacity_transition with-opacity";

            }
            liObjs[index].className = liObjs[index].className+" lvc_active_btn";
            var selectedDiv = liObjs[index].getElementsByTagName("div");
            selectedDiv[0].className = selectedDiv[0].className.replace("with-opacity","");
            selectedDiv[0].className = selectedDiv[0].className+" no-opacity";
            self.tabIndexCount = index;
        }else{
            
            if(self.tabIndexCount != index){
                for(var i=0;i<liLength;i++){
                    liObjs[i].className = liObjs[i].className.replace("active_lvc_btn","");
                    liObjs[i].className = liObjs[i].className.replace(" ","");
                    var divObj = liObjs[i].getElementsByTagName("div");

                    divObj[0].className = "benifit_panel height_transition hidden_cls";

                }
                liObjs[index].className = liObjs[index].className+" active_lvc_btn";
                var selectedDiv = liObjs[index].getElementsByTagName("div");
                selectedDiv[0].className = selectedDiv[0].className.replace("hidden_cls","");
                setTimeout(function(){selectedDiv[0].className = selectedDiv[0].className+" with-height";},50);

                self.tabIndexCount = index;
            }else{
                liObjs[index].className = liObjs[index].className.replace("active_lvc_btn","");
                liObjs[index].className = liObjs[index].className.replace(" ","");
                var divObj = liObjs[index].getElementsByTagName("div");
                divObj[0].className = "benifit_panel height_transition hidden_cls";
                
                self.tabIndexCount = -1;
            }
            
            
        }
    }
    
    self.hoverTab = function($event,hoverType){
        var linkObj;
        if(typeof $event.srcElement !='undefined'){
            linkObj = $event.srcElement;
        }else{
            linkObj = $event.target;
        }
        var divObj = linkObj.getElementsByTagName("div");
        if(typeof divObj[0] != 'undefined' && divObj[0].className.indexOf("no-opacity")==-1){
            if(hoverType == 1){
                linkObj.className = linkObj.className+" lvc_active_btn";
            }else{
                linkObj.className = linkObj.className.replace("lvc_active_btn","");
                linkObj.className = linkObj.className.replace(" ","");
            }
        }
        
    }
    
    self.lvcVideoDisplayStatus={'display':'none'};
    var lvcVid = null;
    
    self.showLvcVideo = function($event){
	$event.preventDefault();
        $scope.$broadcast('showHowLvcWorks', true);
    };
        
        self.openCourseAgenda = function($event,url){
            $event.preventDefault();
            window.open(url);
        }
        
        self.downloadSchedule = function($event,startDate,endDate,countryId){
            $event.preventDefault();
            $http.get( baseApiUrl + '?method=getWorkshopScheduleCsv', { params:{startDate:startDate,endDate:endDate,countryId:countryId} } )
            .success(function(data) {
                if(data == null || typeof data.message == 'undefined'){
                    window.location = baseApiUrl + '?method=getWorkshopScheduleCsv&startDate='+startDate+'&endDate='+endDate+'&countryId='+countryId;
                }else{
                    self.downloadScheduleErr = data.message;
                }
            })
            .error(function() {
                self.downloadScheduleErr = "Some error occurred. Please try again later.";
            });
        }
        
         var gaForLVCPass = function() {
            var ga = new gaEventsTracker();

            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
            };
            this.gaOnloadLvc = function(){
                ga.gaFireInteractiveEvents('lvcFireOnload','lvc pass');
            }
            this.gaOnProceed = function(){
                ga.gaFireInteractiveEvents('OnPorceedClick','lvc pass');
            }
         };

         self.ga = new gaForLVCPass();
}); /*------------- End : LvcPassController.js-----------*/ 

 /*------------- Begin : MailSubscriptionController.js-----------*/ 

angular.module('Simplilearn')
.controller('MailSubscriptionController', function($scope,$http,$rootScope,LocService,$timeout,$compile,PostReqService) {
	$scope.baseApiUrlNocache = baseApiUrlNocache;
    $scope.userEmail = '';
    $scope.errorClass = false;
	$scope.updateSubscription = function(method,id){
        if(id != ''){
        	var paramsArr = {'method':'mailSubscription','id' : id, 'status':method, 'type':'async'};
            PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
            .then(function (response) {
            	if(response && typeof response.data.msg !='undefined'){
            		var status = document.getElementById('status');
                	//status.innerHTML = response.data.msg;
				}

            });
        }
	}
    $scope.updateSubscriptionM = function(isValid, method){
        var status = document.getElementById('msg');
        var subBtn = document.getElementById('subBtn');
        var errorElem = document.getElementsByClassName("error_msg")[0];
        if(isValid && typeof $scope.userEmail != 'undefined' && $scope.userEmail != ''){
            $scope.errorClass = false;
            errorElem.classList.add('hidden');
            subBtn.disabled='disabled';
            status.innerHTML = 'Please wait..';
            document.getElementById('detailsBlock').style.display = 'none';
            var paramsArr = {'method':'mailSubscription','id' : $scope.userEmail, 'status':method, 'process':'direct'};
            PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
            .then(function (response) {
                if(response && typeof response.data.msg !='undefined'){
                    subBtn.disabled='';
                    status.innerHTML = response.data.msg;
                } else {
                    subBtn.disabled='';
                }
            });
        } else {
            errorElem.classList.remove('hidden');
            $scope.errorClass = true;
        }
    }
});

 /*------------- End : MailSubscriptionController.js-----------*/ 

 /*------------- Begin : MasterOfMasterCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('MasterOfMasterCtrl', function (YoutubeApiService, CpService, $scope, $http, LocService, $interval, $location, $rootScope, CorporateLeadService, $timeout, $compile, PostReqService, FormsAjax, $document, $window, $cookies) {

            $rootScope.isSemIosDevice = false;
            $rootScope.semTablet = false;
            var semIosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
            if (semIosDeviceCheck) {
                $rootScope.isSemIosDevice = true;
            }
            if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) {
                if (!semIosDeviceCheck)
                    $rootScope.semTablet = true;
            }
            this.isMobilePage = function () {
                $rootScope.isSemMobile = false;
                $rootScope.hideChatMobile = true;
                $scope.isMobile = false;
                $rootScope.isMomMobile = false;
                $rootScope.isPortraitView = false;
                $scope.courseAdvisorCount = 0;
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
                    $scope.isMobile = true;
                if ($scope.isMobile) {
                    if (Math.abs(window.orientation) === 90 || (typeof window.orientation === "undefined" && $scope.innerWidth > $scope.desktopScreenMinResolution)) {
                        // Landscape
                        $rootScope.isSemMobile = false;
                        $rootScope.isMomMobile = false;
                        $scope.innerWidth = $scope.desktopMaxResoulution;
                        var iosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
                        var documentBodyClientWidth = document.body.clientWidth;
                        var screenWidth = screen.width;
                        if (!iosDeviceCheck && (documentBodyClientWidth < $scope.mobileMaxLandscapeResoulution || screenWidth < $scope.mobileMaxLandscapeResoulution) && navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i))
                        {
                            $rootScope.isSemMobile = true;
                            $rootScope.isMomMobile = true;
                            if (documentBodyClientWidth > screenWidth) {
                                $scope.innerWidth = screenWidth;
                            } else {
                                $scope.innerWidth = documentBodyClientWidth;
                            }
                        }
                    } else {
                        // Portrait
                        $rootScope.isSemMobile = true;
                        $rootScope.isMomMobile = true;
                        $rootScope.isPortraitView = true;
                        var documentBodyClientWidth = document.body.clientWidth;
                        var screenWidth = screen.width;
                        if (documentBodyClientWidth > screenWidth) {
                            $scope.innerWidth = screenWidth;
                        } else {
                            $scope.innerWidth = documentBodyClientWidth;
                        }
                    }
                }
            };
            this.zoomLearningPath = function (event) {
                    var childrens = event.currentTarget.parentNode.children;
                    var lpath_graph = childrens[1].getAttribute('src');
                    var temp = document.getElementById('lpath_graph_img');
                    temp.src = lpath_graph;
                    document.getElementById('lpath_graph').style.display = 'block';

            };
            this.toggleModalDisplayMom = function (id) {
                if (typeof id != 'undefined' && id)
                    document.getElementById(id).style.display = 'none';
            };
            window.addEventListener("orientationchange", function () {
                $rootScope.isSemMobile = false;
                $rootScope.isSemMobileCourse = false;
                $scope.orientationChanged = true;
                $rootScope.hideChatMobile = true;
                $scope.isMobile = false;
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
                    $scope.isMobile = true;
                if (Math.abs(window.orientation) === 90 || (typeof window.orientation === "undefined" && screen.width > $scope.desktopScreenMinResolution)) {
                    // Landscape
                    $rootScope.isPortraitView = false;
                    $rootScope.isSemMobile = false;
                    $scope.innerWidth = $scope.desktopMaxResoulution;
                    var iosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
                    var documentBodyClientWidth = document.body.clientWidth;
                    var screenWidth = screen.width;
                    if (!iosDeviceCheck && (documentBodyClientWidth < $scope.mobileMaxLandscapeResoulution || screenWidth < $scope.mobileMaxLandscapeResoulution) && navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i))
                    {
                        $rootScope.isSemMobile = true;
                        if (documentBodyClientWidth > screenWidth) {
                            $scope.innerWidth = screenWidth;
                        } else {
                            $scope.innerWidth = documentBodyClientWidth;
                        }
                    }

                } else {
                    // Portrait
                    $rootScope.isPortraitView = true;
                    $rootScope.isSemMobile = true;
                    var documentBodyClientWidth = document.body.clientWidth;
                    var screenWidth = screen.width;
                    if (documentBodyClientWidth > screenWidth) {
                        $scope.innerWidth = screenWidth;
                    } else {
                        $scope.innerWidth = documentBodyClientWidth;
                    }
                }
                setCourseAdvisorBullets($scope.courseAdvisorCount);
            }, false);
            this.toggleCurriculum = function (event,index) {
                var childElements = document.getElementsByClassName("curriculum-tab-bundle");
                if (childElements.length) {
                    for (var i = 0; i < childElements.length; i++) {
                        if (childElements[i].getAttribute("id") !== event.currentTarget.parentNode.id)
                            childElements[i].classList.remove('active-tab');
                    }
                    if (event.currentTarget.parentNode.classList.contains('active-tab') && $scope.isMobile) {
                        event.currentTarget.parentNode.classList.remove('active-tab');
                    } else {
                        event.currentTarget.parentNode.classList.add('active-tab');
                    }
                    if ($rootScope.semTablet && (/Mobile/i.test(navigator.userAgent) && !/ipad/i.test(navigator.userAgent))) {
                        var eId = 'bundleCurriculum_' + index;
                        $scope.scrollToElm(eId);
                    }
                }
            };
            this.loadPopup = function (event) {
                document.getElementById('mm-lead-form').style.display = 'block';
            };
            this.toggleAboutProgram = function (event) {
                var parentElement = event.currentTarget.parentNode.parentNode;
                var childElements = parentElement.children;
                if (childElements.length) {
                    for (var i = 0; i < childElements.length; i++) {
                        if (childElements[i].getAttribute("id") !== event.currentTarget.parentNode.id)
                            childElements[i].classList.remove('active-tab');
                    }
                    if (event.currentTarget.parentNode.classList.contains('active-tab')) {
                        event.currentTarget.parentNode.classList.remove('active-tab');
                    } else {
                        event.currentTarget.parentNode.classList.add('active-tab');
                    }
                     if (typeof event.currentTarget.parentNode.id && event.currentTarget.parentNode.id != 'undefined' && $rootScope.semTablet) {
                        $scope.scrollToElm(event.currentTarget.parentNode.id);
                    }
                }
            };
            this.learningPathTabber = function (event) {
                var parentElement = event.currentTarget.parentNode.parentNode;
                var childElements = parentElement.children;
                //console.log(childElements);
                if (childElements.length) {
                    for (var i = 0; i < childElements.length; i++) {
                        if (childElements[i].getAttribute("id") !== event.currentTarget.parentNode.id) {
                            childElements[i].classList.remove('active-tab');
                        }
                    }
                    if (event.currentTarget.parentNode.classList.contains('active-tab') && $rootScope.semTablet ) {
                        event.currentTarget.parentNode.classList.remove('active-tab');
                    } else {
                        event.currentTarget.parentNode.classList.add('active-tab');
                    }
                    var learningPathElm = event.currentTarget.parentNode.getElementsByClassName("learning-path-progress")[0];
                    if (learningPathElm)
                        learningPathElm.classList.remove('hide')
                }
            };
            this.addRemoveClassInBody = function(val){
            var class_name = 'popup_open_body';
             if(val == 1){
                 //Add Class in Body
                 document.body.classList.add(class_name);
             } else {
                 //Remove Class in Body
                 document.body.classList.remove(class_name);
             }
        };
            this.scrollToElmLp = function (id) {
                if ($rootScope.semTablet && (/Mobile/i.test(navigator.userAgent) && !/ipad/i.test(navigator.userAgent))) {
                    $scope.scrollToElm(id);
                }
            }
            this.toggleToolList = function (event,index) {
                var viewToolFlag = event.currentTarget.getAttribute("data-view-tool");
                var parentObj = event.currentTarget.parentElement;
                var bundletoolList = document.getElementsByClassName("bundle-tool-list");
                for (i = 0; i < bundletoolList.length; i++) {
                    if (bundletoolList[i].classList.contains("active-tab")) {
                        if (typeof bundletoolList[i].getElementsByClassName("popular")[0] !== "undefined") {
                            // bundletoolList[i].getElementsByClassName("popular")[0].classList.remove("hide");
                            var toogleToolSection = bundletoolList[i].getElementsByClassName("toogle-tool-section")[0]
                            //console.log(bundletoolList[i].getElementsByClassName("toogle-tool-section")[0]);
                            if (typeof toogleToolSection !== "undefined" && toogleToolSection.classList.contains("tool-view-less")) {
                                toogleToolSection.classList.remove("tool-view-less");
                                toogleToolSection.classList.add("tool-view-more");
                            }
                            toogleToolSection.setAttribute("data-view-tool", 1);
                            toogleToolSection.innerHTML = "View More";
                        }
                        bundletoolList[i].classList.remove("active-tab");
                    }
                }
                var eId = 'bundle-tool-list-id_' + index;
                if (parseInt(viewToolFlag)) {
                    parentObj.parentNode.classList.add("active-tab");
                    //parentObj.getElementsByClassName("popular")[0].classList.add("hide");
                    //parentObj.getElementsByClassName("tools")[0].classList.remove("hide");
                    event.currentTarget.setAttribute("data-view-tool", 0);
                    event.currentTarget.innerHTML = "View Less";
                    event.currentTarget.classList.remove("tool-view-more");
                    event.currentTarget.classList.add("tool-view-less");
                } else {
                    //parentObj.getElementsByClassName("popular")[0].classList.remove("hide");
                    //parentObj.getElementsByClassName("tools")[0].classList.add("hide");
                    event.currentTarget.setAttribute("data-view-tool", 1);
                    event.currentTarget.innerHTML = "View More";
                    event.currentTarget.classList.remove("tool-view-less");
                    event.currentTarget.classList.add("tool-view-more");
                    var targetBundle = document.getElementById("bundle-tool-list-id");
                    //targetBundle.scrollIntoView(true);
                }
                $scope.scrollToElm(eId);
            };
            this.addClassToElement = function (event, classToAdd, elementId) {
                event.preventDefault();
                if (typeof event.currentTarget !== "undefined") {
                    event.currentTarget.classList.add("hide");
                }
                document.getElementById(elementId).classList.add(classToAdd);
            };
            
            this.createViewMoreBullets = function (count) {
                $scope.courseAdvisorCount = count;
                setCourseAdvisorBullets(count);
            }
            var setCourseAdvisorBullets = function (count) {
                var parentNode = document.getElementById("view-more-bullets");
                while (parentNode.firstChild) {
                    parentNode.removeChild(parentNode.firstChild);
                }
                var bulletCount = 0;
                if ($rootScope.isPortraitView) {
                    bulletCount = parseInt(count);
                }
                else {
                    bulletCount = Math.ceil(parseInt(count) / 2);
                }
                var bullets = [];
                if (bulletCount) {
                    for (i = 0; i < bulletCount; i++) {
                        var activeClass = '';
                        if (i == 0)
                            activeClass = 'active';
                        var anchorClasses = 'c_bullet_mobile c_bullet_mobile_' + i + ' c_bullet_mobile_hg c_bullet_mobile_hg_' + i + ' ' + activeClass;
                        var aTag = document.createElement('a');
                        aTag.setAttribute('href', "#");
                        aTag.className = anchorClasses;
                        bullets.push(aTag);
                    }
                }
                
                if (bullets.length) {
                    var i = 0;
                    while (i < bullets.length) {
                        if(i==0)
                            bullets[i].classList.add("active-view-more-course-advisor");
                        parentNode.appendChild(bullets[i]);
                        i++
                    }
                    bullets[0].classList.add("active");
                }

            }
            this.createDynamicClass = function (event, index) {
                var bundletoolList = document.getElementsByClassName("bundle-tool-list");
                if (!$rootScope.isPortraitView && index == 0) {
                    var bundleList = document.getElementById("bundle-tool-list-id_0");
                    bundleList.classList.add('active-tab');
                }
                if (!$rootScope.isPortraitView && index == 0) {
                    // var aTag='<a ng-click="momCtrl.toggleToolList($event)" data-view-tool="0" class="tool-view-more toogle-tool-section">View Less</a>';
                    var classNameTools = 'dynamicTool_' + index;

                    var toolsData = document.getElementById(classNameTools);
                    toolsData.setAttribute('data-view-tool', 0);
                    toolsData.innerHTML = "View Less";
                } else {
                    //var aTag='<a ng-click="momCtrl.toggleToolList($event)" data-view-tool="1" class="tool-view-more toogle-tool-section">View More</a>'
                    var classNameTools = 'dynamicTool_' + index;
                    var toolsData = document.getElementById(classNameTools);
                    toolsData.setAttribute('data-view-tool', 1);
                    toolsData.innerHTML = 'View More';
                }
            };
              $scope.scrollToElm = function (eID) {
                var startY = currentYPosition();
                var stopY = elmYPosition(eID);
                console.log($scope.isMobile);
                if (!$scope.isMobile) {
                    scrollTo(10, stopY - 52);
                } else {
                    scrollTo(10, stopY);
                }
                function currentYPosition() {
                    // Firefox, Chrome, Opera, Safari
                    if (self.pageYOffset)
                        return self.pageYOffset;
                    // Internet Explorer 6 - standards mode
                    if (document.documentElement && document.documentElement.scrollTop)
                        return document.documentElement.scrollTop;
                    // Internet Explorer 6, 7 and 8
                    if (document.body.scrollTop)
                        return document.body.scrollTop;
                    return 0;
                }

                function elmYPosition(eID) {
                    var elm = document.getElementById(eID);
                    var y = elm.offsetTop;
                    var node = elm;
                    while (node.offsetParent && node.offsetParent != document.body) {
                        node = node.offsetParent;
                        y += node.offsetTop;
                    }
                    return y;
                }
            };
        })
         /*------------- End : MasterOfMasterCtrl.js-----------*/ 

 /*------------- Begin : MenuCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('MenuCtrl', function($scope,MenuService,$http,$rootScope,$cookies,$timeout) {
    var self = this;
    self.user_params = user_params;
    this.isMenuVisible = false;
    this.currentItemId = null;
    this.currentSubCatId = null;
    this.isMobileInnerMenuVisible = false;
    //this.menuData = MenuService.getMenuData();
	$scope.isIpad = isIpad;
    $scope.headerMenu = {'local_menu_storage_all_course' : '', 'local_menu_storage_frs':''};
    this.subscriptionData = {};
    this.isSubsAvailable = false;
    self.helpers = new helpers();
    this.currentFRSMenuItem = '';
    this.isFRSMenuVisible = false;
    this.isSearchVisible = false;
    this.isMobileFrsVisible = false;
    this.menuHoverEvent = false;
    this.searchType = false;
    var defVerticalId = null;
    var defCatId = null;



    $scope.frsMenuData = '';
    if (typeof frs_menu_data !== 'undefined') {
        $scope.frsMenuData = frs_menu_data;
    }
    $scope.breadcrumEvent = function ($event,productType,url,name,id) {
        var gotoLink = ''
        if (typeof $event != 'undefined')
            gotoLink = $event.target.parentNode.href;
        breadcrumEvent(productType, gotoLink, name, id);
    }
    this.initDefCategory = function(pVerticalId, pLabelId) {
        defVerticalId = pVerticalId;
        defCatId = pLabelId;
        //this.setMenuItemId(pVerticalId);
        //this.setSubCatId(pLabelId);
    };

    this.setMenuItemId = function(itemId){
        MenuService.setCurrentItemId(itemId);
        this.currentItemId = MenuService.getCurrentItemId();
    };

    this.hideMenu = function(){
        this.isMenuVisible = false;
    };

    this.closeMenuOverlayClick = function(e) {
        if(e && e.target) {
            if(angular.element(e.target).attr("id") == 'courses-menu-data') {
                this.closeMenu();
                e.stopPropagation();
            }
        }
        var overlapEl=document.getElementById('overlap-id');
                if(overlapEl){
                    var overlapClasslist=overlapEl.classList;
                    if(overlapClasslist)
                    overlapClasslist.add('overlap-cls');
                }
    }

    this.closeMenu = function () {
        var overlapEl=document.getElementById('overlap-id');
                if(overlapEl){
                    var overlapClasslist=overlapEl.classList;
                    if(overlapClasslist)
                    overlapClasslist.add('overlap-cls');
                }
        document.querySelector('body').classList.remove('body_fixed');
        document.getElementById('courses-menu-data').classList.remove('show_main_menu');
        this.hideMenu();
        this.isMenuVisible = false;
        var x = document.querySelectorAll(".active_level_1");
        angular.element(x).removeClass("active_level_1");
        var subMenuClass = document.querySelectorAll(".active_level_2");
        angular.element(subMenuClass).removeClass("active_level_2");
    }
    this.closeSubMenu = function (){
        var x = document.querySelectorAll(".active_level_1");
        angular.element(x).removeClass("active_level_1");
        var subMenuClass = document.querySelectorAll(".active_level_2");
        angular.element(subMenuClass).removeClass("active_level_2");
        var overlapEl=document.getElementById('overlap-id');
                if(overlapEl){
                    var overlapClasslist=overlapEl.classList;
                    if(overlapClasslist)
                    overlapClasslist.add('overlap-cls');
                }
    }
    this.addMenuClass = function (){
        if(!document.getElementById('courses-menu-data').classList.contains('show_main_menu')){
            document.getElementById('courses-menu-data').classList.add('show_main_menu');
        } else {
            document.getElementById('courses-menu-data').classList.remove('show_main_menu');
        }
        document.querySelector('body').classList.add('body_fixed');
    }

    this.hideAllMenus = function() {
        this.hideMenu();                //hide courses menu
        this.hideFRSMenu();             //hide free resource menu
        this.hideSearch();              //hide search
    };

    this.showMenu = function( isSticky ){
        this.hideAllMenus();
        document.getElementById('courses-menu-data').style.left = (document.getElementById('courses-menu').getBoundingClientRect().left - 30) + 'px';;
        document.getElementById('courses-menu-data').style.top = (document.getElementById('courses-menu').getBoundingClientRect().top + 45) + 'px';;
        this.isMenuVisible = true;
    };

    this.isCurrentItem = function(itemId){
        return this.currentItemId !== null && this.currentItemId == itemId && this.isMenuVisible == true;
    };

    this.isCurrentItemMobile = function(itemId){
        return this.currentItemId !== null && this.currentItemId == itemId && this.isMobileInnerMenuVisible == true;
    };

    this.setSubCatId = function(subCatId,catUrl){
        MenuService.setSubCatId(subCatId);
        this.currentSubCatId = MenuService.getSubCatId();

        if(typeof catUrl !='undefined' && $rootScope.hybridWidthFlag == 1){
            window.location.href = catUrl // redirect to category page on mobiles
        }

    };

    this.isCurrentSubCat = function(itemId, subCatId){
        return this.currentItemId !== null && this.currentSubCatId !== null && this.currentItemId == itemId && this.currentSubCatId == subCatId && this.isMenuVisible == true; //@review confusing statement
    };

    this.isFourthLevelMenuVisible = function() {
        if( this.isMenuVisible && self.isSubsAvailable ) {
            return true;
        } else {
            return false;
        }
    };

    this.showMainMenu = function(pVerticalId, pLabelId) {
        if(pVerticalId !== null && pLabelId !== null) {
            this.setMenuItemId(pVerticalId);
            this.setSubCatId(pLabelId);
        } else {
            this.setMenuItemId(defVerticalId);
            this.setSubCatId(defCatId);
        }
        this.showMenu();
    };
    $scope.$watch(function(){return self.currentSubCatId;},function(newVal){
        if(typeof self.subscriptionData[newVal] != 'undefined'){
            self.isSubsAvailable = true;
        }else{
            self.isSubsAvailable = false;
        }
    });

    this.fetchSubsData = function(){
        if (window.localStorage.getItem("header_subs_data") === null) {
            var urlObj = self.helpers.makeValidApiUrl('fetchSubscriptionData');
            $http.get(urlObj.url, {cache: urlObj.cached})
                .success(function(data, status, header, config) {
                    window.localStorage["header_subs_data"] = JSON.stringify(data);
                    self.createSubscriptionData(data);
            });
        }else{
            var data = JSON.parse(window.localStorage["header_subs_data"]);
            self.createSubscriptionData(data);
        }

    }

    this.createSubscriptionData = function(data){
        var dataLen = data.length;
        for(var i=0;i<dataLen;i++){
            var subscription = data[i];
            var pricings = subscription.pricings;
            var bundleUrl = subscription.bundle_url;
            if(typeof bundleUrl !='undefined' && bundleUrl!='' && bundleUrl!=null){
                if(bundleUrl.charAt(0) == '/'){
                    bundleUrl = bundleUrl.substring(1);
                }
            }
            if(pricings != undefined && typeof pricings[ipCountryIdValue] != 'undefined' && typeof pricings[ipCountryIdValue]['priceMonthly'] != 'undefined'){
                self.subscriptionData[subscription.primary_label_id] =
                        {'labelName':subscription.label_name,'yearlyPrice':pricings[ipCountryIdValue]['priceYearly'],
                    'monthlyPrice':pricings[ipCountryIdValue]['priceMonthly'],'currency':JSON.parse(getCookieByName('locatori9')).symbol,
                    'url':baseUrl+bundleUrl};
            }
        }
    }

    this.openLink = function(url){
        location.href = url;
    };

            var gaHeaderClass = function() {
                var ga = new gaEventsTracker();
                this.gaFH = function() {
                    if(!this.menuHoverEvent){
                        ga.gaFireInteractiveEvents('flyouthover', user_params.user_id + ' || ' + document.URL);
                        this.menuHoverEvent = true;
                    }
                }
                //gaFireHeaderFlyoutClick
                this.gFHFC = function(type,name,data,id) {
                    var dataUpdated = user_params.user_id + ' || ' + document.URL + ' || ' + data;
                    if(type == 'category')
                        ga.gaFireInteractiveEvents('flyoutcatclick', dataUpdated);
                    else if (type == 'master') {
                        var mId = id.replace('b', '');
                        ga.gaFireInteractiveEvents('flyoutMasterProgclick', dataUpdated);
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_clicks_on_a_link_in_Megamenu",
                            event_data: {
                                'sl_destination_link': data || '',
                                'sl_destination_product_name': name || '',
                                'sl_destination_product_type': 'master',
                                'sl_destination_product_id' : parseInt(mId) || 0 ,
                            },
                            common: "product",
                        });
                    }
                    else {
                        ga.gaFireInteractiveEvents('flyoutclick', dataUpdated);
                        var eventData = {};
                        eventData['sl_destination_link'] = data || '';
                        eventData['sl_destination_product_name'] = name || '';
                        if(typeof id != 'undefined' && id.indexOf('b') !== -1){
                            var mId = id.replace('b', '');
                            eventData['sl_destination_product_id'] = parseInt(mId) || 0 ;
                            eventData['sl_destination_product_type'] = 'master';
                        } else {
                            eventData['sl_destination_product_id'] = parseInt(id) || 0 ;
                            eventData['sl_destination_product_type'] = 'course';
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_clicks_on_a_link_in_Megamenu",
                            event_data: eventData,
                            common: "product",
                        });
                    }
                }
                this.frsMenuClick = function(type,$event) {
                    var data = user_params.user_id + ' || ' + document.URL + ' || ' + $event;
                    if(type == 'category') {
                        ga.gaFireInteractiveEvents('resourcescatclick', data);
                    }
                    else {
                        ga.gaFireInteractiveEvents('resourcesclick', data);
                    }
                }
                //gaFireHomePageSearch
                this.gFHPS = function() {
                    var elems = document.getElementsByClassName('search_in');
                    var value = '';
                    for (var i = 0; i < elems.length; i++) {
                        if (elems[i].value != "") {
                            value = elems[i].value;
                            break;
                        }
                    }
                    ga.gaFireInteractiveEvents('homepagesearch', value);
                }
                this.logoClick = function($event) {
                    ga.gaFireInteractiveEvents('logoclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_nav_user_clicks_on_simplilearn_logo",
                        event_data : {
                            'sl_destination_link': frontendUrl || '',
                            'sl_destination_page_type':'home'
                        },
                        common: "product",
                    });
                }

                this.searchInitiated = function(){
                    if(!this.searchType){
                        ga.gaFireInteractiveEvents('searchinitiated', user_params.user_id + ' || ' + document.URL);
                        this.searchType = true;
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_initiates_search",
                            event_data : {
                           'sl_search_type':'header',
                        },
                            common: "product",
                        });
                    }
                }

                this.searchClick = function(category){
                    var label = document.getElementById('header_srch').value;
                    ga.gaFireInteractiveEvents(category, user_params.user_id + ' || ' + document.URL + ' || ' + label);
                    WebTracking.eventReq.triggerEvent({
                        event_id: "sl_nav_user_completes_search",
                        event_data : {
                           'sl_search_term' : label || '',
                           'sl_search_type':'header',
                        },
                        common: "product",
                    });
                }
                var menuhoverFired = false;
                this.frsMenuHover = function() {
                    if(!menuhoverFired){
                        ga.gaFireInteractiveEvents('frsmenuhover', user_params.user_id + ' || ' + document.URL);
                        menuhoverFired = true;
                    }
                }
                var menuhoverFiredHeader = false;
                this.masterMenuHover = function () {
                    if (!menuhoverFiredHeader) {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_nav_user_hovers_over_all_courses",
                            common: "product",
                        });
                        menuhoverFiredHeader = true;
                    }
                }
                this.gaDoubleNavClickGeneric=function(topNavName,destinationUrl){
                   ga.gaFireInteractiveEvents('dobubleNavClickedGeneric', user_params.user_id + ' || ' + document.URL + ' || ' + topNavName + ' || '+ destinationUrl );
                   WebTracking.eventReq.triggerEvent({
                        event_id: "sl_nav_user_clicks_on_a_link_in_top_Nav",
                        event_data : {
                           'sl_destination_link' : destinationUrl || '',
                           'sl_destination_page_type' : topNavName || '',
                        },
                        common: "product",
                    });
               }
            };
            //ga menu js
            $scope.gMCJ = new gaHeaderClass();


            this.showFRSMainMenu = function(activeMenuItem){
                self.hideAllMenus();        //hide all menu items
                self.currentFRSMenuItem = activeMenuItem;
                self.showFRSMenu();
            };

            this.setCurrentFRSMenuItem = function(currentItem){
                self.currentFRSMenuItem = currentItem;
            }

            this.isCurrentFRSMenuItem = function(menuItem){
                if(self.currentFRSMenuItem === menuItem){
                    return true;
                }else{
                    return false;
                }
            }

            this.showFRSMenu = function(){
                self.isFRSMenuVisible = true;
                document.getElementById('resources-menu-data').style.left = document.getElementById('resources-menu').getBoundingClientRect().left + 'px';;
                document.getElementById('resources-menu-data').style.top = (document.getElementById('resources-menu').getBoundingClientRect().top + 45) + 'px';;
            };

            this.hideFRSMenu = function(){
                self.isFRSMenuVisible = false;
            };


            this.loadFrsMegaMenuImages = function() {
                if ($scope.frsMenuData !='' || $scope.frsMenuData !=null || typeof $scope.frsMenuData!= 'undefined') {
                    angular.forEach($scope.frsMenuData, function(value, key) {
                           var cnt = parseInt(1);
                           angular.forEach(value, function(innerValue, innerKey) {
                            var image = document.getElementById(key+'_'+cnt);
                            // New logic based on data-is-placeholder-img vaue
                            if(image.getAttribute('data-is-placeholder-img')) {
                                if (innerValue) {
                                    image.setAttribute('src', innerValue);
                                }
                                image.setAttribute('data-is-placeholder-img', 0);

                            }
                            // Old functionality
                            if (image.getAttribute('src') ==''|| image.getAttribute('src') ==null || typeof image.getAttribute('src') =='undefined') {
                                image.setAttribute('src', innerValue);
                            }
                            cnt++;
                        });
                    });
                }
            }

            this.showSearch = function(){
                self.hideAllMenus();        //hide all menu items
                self.isSearchVisible = true;
                $timeout(function() {
                    document.getElementById('header_srch').focus();
                }, 100);
            };

            this.hideSearch = function(){
                self.isSearchVisible = false;
            };

            $rootScope.$on('orientationChanged', function(pEvt, pVal) {
                if(pVal) {
                    $scope.$apply(function() {
                        self.hideAllMenus();
                    });
                }
            });

            $scope.redirectionToHomeEvent=function(){
                var referrerUrl = window.location.href;
                var param=['_trackEvent', 'Details_Page:Redirection_to_Simplilearn_Home', 'User click on Simplilearn logo and gets redirected to the Simplilearn homepage from FRS homepage', referrerUrl, 0, false];
                _gaq.push(param)

                if (printGaInConsole) {
                    console.log(param);
                }
            };
            this.clickOnExploreCat = function (name, id, url) {
                WebTracking.eventReq.triggerEvent({
                    event_id: "sl_nav_user_clicks_on_explore_category_in_Megamenu",
                    event_data: {
                        'sl_destination_product_category': name || '',
                        'sl_destination_product_category_id': parseInt(id) || 0,
                        'sl_destination_link': url,
                        'sl_destination_product_type':'category'
                    },
                    common: "product",
                });
            }
});
 /*------------- End : MenuCtrl.js-----------*/ 

 /*------------- Begin : OfferPageController.js-----------*/ 

angular.module('Simplilearn')
.controller('OfferPageCtrl', function($scope, $http) {
    
    $scope.currentVertical = null;
    $scope.frequency = 'Daily';
    $scope.helpers = new helpers();
    $scope.schemeStatusMsg = '';
    $scope.schemeStatusClass = '';
    $scope.schemeEmail = '';
    
    $scope.setCurrentVertical = function(pVertical) {
        $scope.currentVertical = pVertical;
    };
    
    $scope.isCurrentVertical = function(pVertical) {
        if ($scope.currentVertical === null) {
            return false;
        }

        var verticals = pVertical.split('|');
        var validity = verticals.indexOf($scope.currentVertical);

        return validity !== -1;
    };
    
    $scope.setSchemeFrequency = function(pFrequency) {
        $scope.frequency = pFrequency;
    };
    
    $scope.submitForm = function(form) {
        if (!form.$valid) {
            //return $scope.helpers.FormNotValid(form);
        }
        
        $http.get(baseApiUrl+'?method=registerForOfferSubscription',
                    { params: {
                                'email':$scope.schemeEmail,
                                'frequency':$scope.frequency
                              }
                    }
        ).success(function(data) {
            if (data.status == "Success") {
                $scope.schemeEmail = '';
                $scope.frequency = 'Daily';
                $scope.schemeForm.$setPristine();
                $scope.schemeStatusMsg = "Success !";
                $scope.schemeStatusClass = "success_text";
            } else {
                if( !!data && !!data.msg ) {
                    $scope.schemeStatusMsg = data.msg;
                    $scope.schemeStatusClass = "error_text";
                }
                else {
                    $scope.schemeStatusMsg = "Some error occurred. Please try again later.";
                    $scope.schemeStatusClass = "error_text";
                }
            }
        }).error(function() {
            $scope.schemeStatusMsg = "Some error occurred. Please try again later.";
            $scope.schemeStatusClass = "error_text";
        });
    };
    
}); /*------------- End : OfferPageController.js-----------*/ 

 /*------------- Begin : OnlineAccessDaysController.js-----------*/ 

angular.module('Simplilearn')
.controller('OnlineAccessDaysController', function($scope) {

	this.selectedOnlineAccessDays = null;
	this.init = function(accDays){
		this.selectedOnlineAccessDays = accDays;
	}
        var gaForLVCPass = function() {
            var ga = new gaEventsTracker();

            this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
            };
         };

        this.ga = new gaForLVCPass();
        this.updateAccessDays = function(){
        	document.getElementById("accessDays").value = this.selectedOnlineAccessDays ;
        }
});
 /*------------- End : OnlineAccessDaysController.js-----------*/ 

 /*------------- Begin : PaymentController.js-----------*/ 

angular.module('Simplilearn')
.controller('PaymentController', function($scope,$http,$rootScope,LocService,$timeout,$compile) {
	$scope.init = function(){
		$timeout(function() {
                var button = document.getElementById('button-to-pay');
                if(button) {
                    button.click();
                }
            }, 3000);
	}
})
;

 /*------------- End : PaymentController.js-----------*/ 

 /*------------- Begin : PracticeTestController.js-----------*/ 

angular.module('Simplilearn')
.controller('PracticeTestController', function($scope,$http,$rootScope,LeadService,$timeout) {
	$scope.toUrl = '';
        $scope.courseId = 0;
        $scope.courseName = '';
        $scope.productTypeId=0;
        $scope.billingTypeId=0;
        
        $scope.init = function(productTypeId,billingTypeId){
            $scope.productTypeId=productTypeId;
            $scope.billingTypeId=billingTypeId;
        }
	$scope.createLead = function($event,toUrl,courseId,courseName){
		$event.preventDefault();
		$scope.toUrl = toUrl;
                $scope.courseId = courseId;
                $scope.courseName = courseName;
		$rootScope.isPracticeTestClicked = 1;
		if ($rootScope.isLoggedIn == true) {
			createTestLead($scope.courseId,$scope.courseName);
			$rootScope.isPracticeTestClicked = 0;
		}else{
				
                $timeout(function() {
					var loginBtnObj = document.getElementById('registerBtn');
					angular.element(loginBtnObj).triggerHandler('click');
				}, 0);
		}
	}
	
	$rootScope.$watch('isLoggedIn', function(newValue) {
		if($rootScope.isPracticeTestClicked == 1){
			createTestLead($scope.courseId,$scope.courseName);
			$rootScope.isPracticeTestClicked = 0;
		}
	});
	
	var createTestLead = function(courseId,courseName){
		$http.jsonp(baseApiUrl + "?method=getUserDetailsById&jsonp=JSON_CALLBACK",
					{params: {user_id:user_params.user_id}}
			).success(function(data, status, header, config) {
				
				var resultData = data.data;                              
				var paramsArr = {name:resultData.displayName, email:resultData.users_mail, phone:resultData.phone ,query:"", agreeToContact:1, courseId:courseId, courseName:courseName, leadTrainingType:'Not Sure',leadSourceString:document.URL, customerType:'B2C', tagName:'Practice test', type:'practice_test',leadSource:fetchUTMSource(),GCLID: getGCLID()};

				var obj3 = {};
				for (var attrname in paramsArr) { obj3[attrname] = paramsArr[attrname]; }
				
				var locatorCookie = getCookieByName('locatori9');
				var locatorCookieObj = JSON.parse(locatorCookie);
				obj3['countryId'] = locatorCookieObj.country_id;
				obj3['countryName'] = locatorCookieObj.country_name;
				obj3['cityId'] = locatorCookieObj.city_id;
				obj3['cityName'] = locatorCookieObj.name;
                                obj3['productTypeId'] = $scope.productTypeId;
                                obj3['billingTypeId'] = $scope.billingTypeId;
				//console.log(obj3);
				LeadService.createLead(obj3).then(function(data) {
                                    if(data.status == true && data.response.data.status == 'Success') {
                                        setUpDataLayer('leadCapture', 'practiceTest', {'leadId': data.response.data.result.key});
                                    }
					window.location = $scope.toUrl;
				}, function(){});
			});
	}
});

 /*------------- End : PracticeTestController.js-----------*/ 

 /*------------- Begin : ProdSummaryCtrl.js-----------*/ 

angular.module('Simplilearn')
.controller('ProdSummaryCtrl', function(){
    
    this.currentFeature = 0;
    
    this.currentCategory = null;    //initialized using ng-init
    this.minCategoryId = null;      //initialized using ng-init
    this.maxCategoryId = null;      //initialized using ng-init
    
    this.currentCourse = null;
    
    this.setCurrentFeature = function(feature){
        if( feature === this.currentFeature ) {
            this.currentFeature = 0;
        }
        else {
            this.currentFeature = feature;
        }
    };
    
    this.isCurrentFeature = function(feature) {
        return this.currentFeature !== null && this.currentFeature === feature;
    };
    
    this.setCurrentCategory = function(category){
        this.currentCategory = category;
    };
    
    this.incrementCurrentCategory = function(){
        if( this.maxCategoryId !== null && this.currentCategory !== null && this.currentCategory !== this.maxCategoryId ) {
            this.setCurrentCategory(++this.currentCategory);
        }
        else {
            this.setCurrentCategory(this.minCategoryId);
        }
    };
    
    this.decrementCurrentCategory = function(){
        if( this.minCategoryId !== null && this.currentCategory !== null && this.currentCategory !== this.minCategoryId )
            this.setCurrentCategory(--this.currentCategory);
        else {
            this.setCurrentCategory(this.maxCategoryId);
        }
    };
    
    this.isCurrentCategory = function(category) {
        return this.currentCategory !== null && this.currentCategory === category;
    };
    
    this.setCurrentCourse = function(course){
        this.currentCourse = course;
    };
    
    this.isCurrentCourse = function(course) {
        return this.currentCourse !== null && this.currentCourse === course;
    };
})
;

 /*------------- End : ProdSummaryCtrl.js-----------*/ 

 /*------------- Begin : ReferAndEarnController.js-----------*/ 

angular.module('Simplilearn')
        .controller('ReferAndEarnController', function ($scope, PostReqService, $timeout, $cookieStore, $rootScope, $window, $q, $http, $filter) {
            $scope.termsCond = 1;
            $scope.user_email = '';
            $scope.campaign_uid = '';
            $scope.group_id = '';
            $scope.name = '';
            $scope.helpers = new helpers();
            $scope.referForm = 0;
            $scope.mbsyCode = '';
            $scope.shareUrl = '';
            $scope.copyText = "Copy";
            $scope.disabledVal = false;
            $scope.loaderBox = true;
            $scope.referUserStatus = false;
            $scope.isMobile = false;
            $scope.emailContactList = [];
            $scope.disableEmailSubmitBtn = true;
            var inValidDomains = ['test'];
            var ajaxSent = 0;
            var gaFired = false;
            var gaEmailIniFired = false;
            var value = 0;
            $scope.baseUrl = baseUrl;
            $scope.referAndEarnPhoneLeadUrl = 'refer-and-earn/referrals-phone-number';
            $scope.scopeUrl = 'https://www.googleapis.com/auth/contacts.readonly';
            //$scope.scopeUrl ='https://www.google.com/m8/feeds';
            $scope.selectedContacts = [];
            $scope.emailContactLoaded = false;
            $scope.maxEmailAllowedToInvite = 10;
            $scope.selectedEmailIds = 0;
            var totalEmailSelected = 0;
            var menuhoverFired = false;
            if (typeof window.orientation !== 'undefined') {
                $scope.isMobile = true;
            }
            //Note
            // 1. Replace with Production ClientId & ApiKey
            // 2. Make Sure To Enable Contacts API Google
            $scope.clientId = googleContactApiClientId;
            $scope.apiKey = googleContactApiKey;
            deferred = $q.defer();
            if ($cookieStore.get('emailList') != '')
                $cookieStore.remove('emailList');
            if ($cookieStore.get('mbsyCode') != '')
                $cookieStore.remove('mbsyCode');
            if ($cookieStore.get('shareUrl') != '')
                $cookieStore.remove('shareUrl');
            if ($cookieStore.get('pageType') != '')
                $cookieStore.remove('pageType');
            if ($cookieStore.get('referrerEmail') != '')
                $cookieStore.remove('referrerEmail');
            if ($cookieStore.get('referrerPhone') != '')
                $cookieStore.remove('referrerPhone');
            if ($cookieStore.get('referrerName') != '')
                $cookieStore.remove('referrerName');
            $scope.selectEmailId = function (event, index) {
                var emailList = $scope.emailContactList;
                $scope.emailContactList = $filter('orderBy')(emailList, 'email');
                var currentSelectedCheckBoxbj = event.currentTarget;
                var currentSelectedEmailId = currentSelectedCheckBoxbj.getAttribute("data-emailid");
                if (currentSelectedCheckBoxbj.checked) {
                    angular.forEach($scope.emailContactList, function (contact, key) {
                        if (contact.email === currentSelectedEmailId) {
                            if (totalEmailSelected < parseInt($scope.maxEmailAllowedToInvite)) {
                                contact.selected = true;
                                totalEmailSelected += 1;
                            } else {
                                contact.selected = false;
                                currentSelectedCheckBoxbj.checked = false;
                            }
                        }
                    });
                } else {
                    angular.forEach($scope.emailContactList, function (contact, key) {
                        if (contact.email === currentSelectedEmailId) {
                            contact.selected = false;
                            totalEmailSelected -= 1;
                        }
                    });
                }
                // console.log(totalEmailSelected,event,event.currentTarget.querySelectorAll(".contact_email")[0].checked,event.currentTarget.querySelectorAll(".contact_email")[0].value);
                $scope.selectedEmailIds = totalEmailSelected;
                if (parseInt(totalEmailSelected) > 0) {
                    $scope.disableEmailSubmitBtn = false;
                } else {
                    $scope.disableEmailSubmitBtn = true;
                }
            }

            $scope.toggleAllContactList = function (event) {
                var checkboxes = document.getElementsByName("email_chkbx");
                var emailList = $scope.emailContactList;
                $scope.emailContactList = $filter('orderBy')(emailList, 'email');
                if (event.target.checked) {
                    $scope.disableEmailSubmitBtn = false;
                    var emailChecked = 0;
                    angular.forEach($scope.emailContactList, function (contact, key) {
                        if (key < parseInt($scope.maxEmailAllowedToInvite)) {
                            checkboxes[key].checked = true;
                            contact.selected = true;
                            emailChecked += 1;
                        }
                        $scope.selectedEmailIds = emailChecked;
                    });
                } else {
                    $scope.disableEmailSubmitBtn = true;
                    $scope.selectedEmailIds = 0;
                    angular.forEach($scope.emailContactList, function (contact, key) {
                        checkboxes[key].checked = false;
                        contact.selected = false;
                    });
                }
            }
            $scope.closeContactListPopup = function (event) {
                document.getElementById("email-contact-list").style.display = "none";
                //document.getElementById("check-all-contacts").checked = false;
                var checkboxes = document.getElementsByName("email_chkbx");
                for (var i = 0; i < checkboxes.length; i++)
                {
                    if (checkboxes[i].type == 'checkbox')
                    {
                        checkboxes[i].checked = false;
                    }
                }
                $scope.disableEmailSubmitBtn = true;
                totalEmailSelected = 0;
                $scope.selectedEmailIds = 0;
            }
            $scope.submitAllSelectedContacts = function (event) {
                if ($scope.disableEmailSubmitBtn) {
                    return false;
                }
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('Referral_via_Email_Import_Submit', 'gmail');
                var checkboxes = document.getElementsByName("email_chkbx");
                document.getElementById("email-contact-list").style.display = "none";
                //document.getElementById("check-all-contacts").checked = false;
                var selectedContacts = [];
                var existingListString = document.getElementsByClassName('email_list')[0];
                var existingEmailList = typeof existingListString !== "undefined" ? existingListString.innerHTML : [];
                if (existingEmailList.length) {
                    var emailList = [];
                    var existingEmailListArr = existingEmailList.split(',');
                    emailList = existingEmailListArr;
                    emailList.forEach(function (emailId) {
                        selectedContacts.push(emailId);
                    });
                }
                angular.forEach($scope.emailContactList, function (contact) {
                    if (contact.selected) {
                        var seletedEmailId = contact.email;
                        // Check Duplicate Email
                        var ifEmailIdExist = selectedContacts.indexOf(seletedEmailId);
                        if (ifEmailIdExist == -1) {
                            selectedContacts.push(seletedEmailId);
                            contact.selected = false;
                        } else {
                            contact.selected = false;
                        }
                    }
                });
                $scope.selectedContacts = selectedContacts;
                $scope.disableEmailSubmitBtn = true;
                $scope.searchText = '';
                totalEmailSelected = 0;
                $scope.selectedEmailIds = 0;
                emptyEmailInputFields();
                tagMultipleEmails();
            }
            emptyEmailInputFields = function () {
                var container = document.getElementsByClassName("input-tag-list")[0];
                var childElements = container.getElementsByClassName("e_valid");
                while (childElements[0]) {
                    childElements[0].parentNode.removeChild(childElements[0]);
                }
            }

            var tagMultipleEmails = function () {
                var elem = document.getElementById("referees");
                var liCls = 'e_valid';
                var emailList = [];
                $scope.email_list = '';
                if (typeof elem !== "undefined") {
                    angular.forEach($scope.selectedContacts, function (value, key) {
                        var parentElement = elem.children[0];
                        var liList = parentElement.children;
                        var lastLi = liList.length >= 2 ? liList.length - 1 : 0;
                        var emailId = value;
                        emailList.push(emailId);
                        $scope.email_list = emailList.join(',');
                        document.getElementsByClassName('email_list')[0].innerHTML = $scope.email_list;
                        var n = new Date().getUTCMilliseconds() + key;
                        var newLi = document.createElement("li");
                        newLi.className = liCls;
                        newLi.innerHTML = "<b>" + emailId + "</b><span class='remove " + n + "' data-email-id=" + emailId + ">X</span>";
                        insertAfter(liList[lastLi], newLi);
                    });
                }
            }
            var insertAfter = function (referenceNode, newNode) {
                referenceNode.parentNode.insertBefore(newNode, referenceNode);
            };

            $scope.contactImportGmail = function (event) {
                event.preventDefault();
                event.stopPropagation();
                $scope.mbsyMsg = '';
                var config = {
                    'client_id': $scope.clientId,
                    'scope': $scope.scopeUrl,
                    'approval_prompt': 'force',
                    immediate: false
                };
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('Referral_via_Email_Import_Click', 'gmail');
                $timeout(function () {
                    $scope.emailContactList = [];
                    $scope.emailContactLoaded = false;
                    $scope.emptyContacts = false;
                    $scope.selectedEmailIds = 0;
                    document.getElementById("contact-list-loader").classList.remove("hide");
                    gapi.auth.authorize(config, function (authorizationResult) {
                        var authorizationData = gapi.auth.getToken();
                        //console.log(authorizationData);
                        var accessToken = authorizationData && typeof authorizationData.access_token !== "undefined" ? authorizationData.access_token : '';
                        if (accessToken) {
                            document.getElementById("email-contact-list").style.display = "block";
                            var paramsArr = {method: 'importContactsGmail', accessToken: authorizationData.access_token};
                            PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                                    .then(function (response) {
                                        var responseInfo = response.data;
                                        if (responseInfo.success && responseInfo.success == 200) {
                                            //console.log(responseInfo.data.feed);
                                            document.getElementById("email-contact-list").style.display = "block";
                                            var contacts = [];
                                            var contactInfo = [];
                                            if (typeof responseInfo.data.feed.entry !== "undefined") {
                                                var entries = responseInfo.data.feed.entry;
                                                for (var i = 0; i < entries.length; i++) {
                                                    var contactEntry = entries[i];
                                                    //&& typeof (contactEntry['title']) != "undefined" && contactEntry['title']['$t'].length > 0
                                                    if (typeof (contactEntry['gd$email']) != "undefined") {
                                                        var emailAddresses = contactEntry['gd$email'];
                                                        var fullName = contactEntry['title']['$t'];
                                                        for (var j = 0; j < emailAddresses.length; j++) {
                                                            if (typeof (emailAddresses[j]['address']) != "undefined") {
                                                                var emailAddress = emailAddresses[j]['address'];
                                                                var userFullName = fullName.length > 0 ? fullName : emailAddress;
                                                                contactInfo.push({'email': emailAddress, 'name': userFullName, 'selected': false})
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            $scope.emailContactList = contactInfo;
                                            $scope.emailContactLoaded = true;
                                            if (contactInfo.length === 0) {
                                                $scope.emptyContacts = true;
                                            }
                                            document.getElementById("contact-list-loader").classList.add("hide");
                                        } else {
                                            document.getElementById("contact-list-loader").classList.add("hide");
                                            $scope.emailContactLoaded = false;
                                            $scope.emailContactList = [];
                                            $scope.emptyContacts = true;
                                        }
                                    });
                        }

                    });
                }, 200);
            }

            $scope.termsCondToggle = function () {
                $scope.termsCond = $scope.termsCond == 1 ? 0 : 1;
            };

            $scope.preventPaste = function (e) {
                e.preventDefault();
                $scope.createRefereesForm.referee_mails.$dirty = true;
            };
            $scope.copyShareLink = function () {
                var copyElement = document.createElement('input');
                copyElement.setAttribute('type', 'text');
                copyElement.setAttribute('value', $scope.shareUrl);
                copyElement = document.body.appendChild(copyElement);
                copyElement.select();
                $scope.copiedLink = 'shr-link-act';
                $scope.copyText = "Copied";
                document.getElementById('shareUrlLink').select();
                try {
                    if (!document.execCommand('copy'))
                        throw 'Not allowed.';
                } catch (e) {
                    copyElement.remove();
                    prompt('Copy the text below. (ctrl c, enter)', text);
                } finally {
                    if (typeof e == 'undefined') {
                        copyElement.remove();
                    }
                }
                $timeout(function () {
                    $scope.copiedLink = '';
                    $scope.copyText = "Copy";
                }, 5000);
            };

            $scope.shareOnNetwork = function (e, service) {
                e.preventDefault();
                var xmlhttp;
                if (window.XMLHttpRequest)
                {
                    xmlhttp = new XMLHttpRequest();
                } else {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                var url_fragments = $scope.shareUrl.split("/");
                var short_code = url_fragments[url_fragments.length - 1];

                xmlhttp.open("GET", "https://getambassador.com/share_tracker/track_share?short_code=" + short_code + "&social_name=" + service + "", true);
                xmlhttp.send();
            }

            $scope.defaultParams = function (group_id, campaign_uid) {
                $scope.campaign_uid = campaign_uid;
                $scope.group_id = group_id;
                if (getCookieByName('_sljt') && ajaxSent === 0) {
                    ajaxSent = 1;
                    var paramsArr = {method: 'getUserInfo'};
                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                            .then(function (response) {
                                if (response.data.status === 'success') {
                                    $scope.user_email = response.data.data.email;
                                    $scope.name = response.data.data.username;
                                    angular.element(document).ready(function () {
                                        $scope.submitCreateAmbassadorsForm();
                                    });
                                } else {
                                    initHashUser();
                                }
                            });
                } else if (ajaxSent === 0) {
                    $scope.loaderBox = false;
                    $scope.referForm = 1;
                    initHashUser();
                }
            };

            $scope.defaultParamsLevel2 = function (group_id, campaign_uid) {
                $scope.campaign_uid = campaign_uid;
                $scope.group_id = group_id;
                if (getCookieByName('_sljt') && ajaxSent === 0) {
                    ajaxSent = 1;
                    var paramsArr = {method: 'getUserInfo'};
                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                            .then(function (response) {
                                if (response.data.status === 'success') {
                                    $scope.user_email = response.data.data.email;
                                    $scope.name = response.data.data.username;
                                    angular.element(document).ready(function () {
                                        $scope.submitCreateAmbassadorsForm();
                                    });
                                }
                            });
                } else if (ajaxSent === 0) {
                    $scope.loaderBox = false;
                    webengage.onReady(function () {
                        try {
                            var userInfo = {};
                            if(webengage.state && typeof webengage.state.getForever === "function" && 
                               (userInfo = webengage.state.getForever()) && 
                               userInfo.uattr && userInfo.uattr.we_email
                            ) {
                                $scope.user_email = userInfo.uattr.we_email;
                                $scope.name = (userInfo.uattr.we_first_name || '') + " " + (userInfo.uattr.we_last_name || '');
                                $scope.name = $scope.name.trim();
                                if(document.getElementById('shareUrlLink') && document.getElementById('shareUrlLink').value) {
                                    $scope.url = document.getElementById('shareUrlLink').value;
                                }
                            }
                        } catch(e) {
                            console.error("SL:Error", e);
                        }
                    });
                    if ($scope.readCookie('showPage2') != '' && $scope.readCookie('showPage2') == 'true') {
                        $scope.referForm = 0;
                        $scope.referUserStatus = true;
                        if ($scope.readCookie('showShareUrl') != '') {
                            $scope.shareUrl = $scope.readCookie('showShareUrl');
                            document.cookie = 'showShareUrl=;Path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                        }
                        if ($scope.readCookie('showMbsyCode') != '') {
                            $scope.mbsyCode = $scope.readCookie('showMbsyCode');
                            document.cookie = 'showMbsyCode=;Path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                        }
                        document.cookie = 'showPage2=;Path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                    } else {
                        $scope.referForm = 1;
                    }
                }
            };

            $scope.readCookie = function (name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ')
                        c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0)
                        return c.substring(nameEQ.length, c.length);
                }
                return null;
            };

            var userHashWatch = null;
            var initHashUser = function () {
                if (userHashWatch != null || $scope.user_email) {
                    return;
                }
                // Get user information - auto populate for refer
                /*userHashWatch = $rootScope.$watch('userInfo', function(newValue, oldValue) {
                 var user = (newValue && newValue.email)?newValue:oldValue;
                 if(user && user.email && typeof user == 'object') {
                 $scope.name = user.name || $scope.name;
                 $scope.user_email = user.email || $scope.user_email;
                 userHashWatch(); // stop listen
                 }
                 });
                 */

            }
            $scope.defaultForm = function () {
                var url_string = window.location.href;
                //var url_string = 'http://devwww.simplilearn.com/apachedev/git/ice9/frontend/public/refer-and-earn?cpmurl=%25http://refer.simplilearn.com/sndbx/8GH8?abVarition';
                var url = new URL(url_string);
                var referUrl = url.searchParams.get("cpmurl");
                if (typeof referUrl !== 'undefined' && referUrl) {
                    var n = referUrl.lastIndexOf('/');
                    var mbsy_code = referUrl.substring(n + 1);
                    mbsy_code = mbsy_code.substr(0, (mbsy_code + "?").indexOf("?"));
                    var paramsArr = {method: 'getReferrerDetails', mbsy_code: mbsy_code};
                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                            .then(function (response) {
                                if (typeof response != 'undefined' && response.data.status == 200) {
                                    var mbsy_link = "http://refer.simplilearn.com/" + mbsy_code;
                                    if (typeof mbsy_link != 'undefined' && mbsy_link) {
                                        if(typeof response.data.data !== 'undefined' && (referData = response.data.data) && referData.email) {
                                            $scope.user_email = referData.email;
                                            $scope.name = (referData.first_name || '') + " " +  (referData.last_name || '');
                                            $scope.name = $scope.name.trim();
                                        }
                                        $scope.url = mbsy_link;
                                        postReq(mbsy_link);
                                    }
                                } else {
                                    $scope.referForm = 1;
                                }
                            });
                }
                var a = getCookieByName('_mb');
                if (typeof a != 'undefined' && a) {
                    var ac = a.split("/");
                    if (ac.length) {
                        $scope.mbsyCode = ac[ac.length - 1];
                        $scope.referForm = 0;
                        $scope.shareUrl = a;
                    }
                }
            };
            $scope.submitCreateAmbassadorsForm = function () {
                validateEmailDomain($scope.user_email);
                if ($scope.createAmbassadors.$invalid) {
                    $scope.helpers.FormNotValid($scope.createAmbassadors);
                    $scope.referForm = 1;
                    $scope.loaderBox = false;
                } else {
                    var pageType = getPageType();
                    $scope.disabledVal = true;
                    var fullName = (typeof $scope.name === 'string') ? $scope.name : '';
                    var paramsArr = {name: fullName, email: $scope.user_email, camp_id: $scope.campaign_uid, method: 'getAmbassadorsUser', group_id: $scope.group_id};
                    var refUrl = document.referrer != undefined && document.referrer != '' ? document.referrer : 'direct';
                    var nameDiv = fullName.split(/ (.+)/);
                    $scope.gaForRE.gFOCTP('Re_submit_Email', refUrl);
                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                            .then(function (response) {
                                $scope.loaderBox = false;
                                $scope.url = '';
                                if (typeof response != 'undefine' && response.data.status == 'success') {
                                    postReq(response.data.url);
                                    $scope.url = response.data.url;
                                    if (pageType === 'refer-and-earn') {
                                        WebTracking.eventReq.triggerEvent({
                                            event_id: "sl_refer_user_online_registers_for_referral_prog",
                                            event_data: {
                                                'sl_lead_type': 'b2c',
                                                'sl_referrer_user_referral_link': $scope.url,
                                                'sl_user_email': $scope.user_email,
                                                'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                                                'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                                            },
                                            common: "product",
                                            user_attributes: ['sl_user_email','sl_user_first_name','sl_user_last_name', 'sl_lead_type'],
                                            // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                                            // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                                        });
                                    }
                                } else if (typeof response != 'undefine' && response.data.status == 'failure') {
                                    $scope.mbsyMsg = "Something went wrong. Please try again";
                                    $scope.disabledVal = false;
                                    $scope.url = $scope.mbsyMsg;
                                } else {
                                    $scope.mbsyMsg = "Something went wrong. Please try again";
                                    $scope.disabledVal = false;
                                    $scope.url = $scope.mbsyMsg;
                                }
                                if (!$scope.disabledVal) {
                                    $scope.referForm = 1;
                                }                               
                            });
                }
            }

            var postReq = function (url) {
                var c = url;
                if (typeof c !== 'undefined' && c) {
                    ac = c.split("/");
                    if (typeof ac !== 'undefined' && ac) {
                        if (ac.length > 0) {
                            $timeout(function () {
                                $scope.mbsyCode = ac[ac.length - 1];
                                $scope.referForm = 0;
                                $scope.shareUrl = c;
                                $scope.referUserStatus = true;
                                if (typeof window.addthis_share !== "undefined")
                                    window.addthis_share.url = c;
                            }, 100);
                            //if ($scope.$root.$$phase != '$apply' && $scope.$root.$$phase != '$digest') {
                            //$scope.$apply();
                            //}
                        }
                    }
                }
                $scope.mbsyMsg = "";
            }
            $scope.submitRefereesAmbassadorsForm = function () {
                var email_lst = document.getElementsByClassName('email_list')[0];
                $timeout(function () {
                    $scope.mbsyMsg = '';
                    $scope.mbsySucMsg = '';
                }, 6000);
                if (!$scope.mbsyCode) {
                    $scope.mbsyMsg = "Something went wrong. Please try again";
                    return;
                }
                email_list = email_lst.innerHTML;
                checkSingleMail();
                if (!email_list.length) {
                    $scope.mbsyMsg = "No valid emails found. Please enter valid mailids";
                    removeListLis(email_lst);
                    placeHolder();
                    return;
                }
                var url = document.location;
                var pageType = getPageType();
                var fullName = (typeof $scope.name === 'string') ? $scope.name : '';
                var nameDiv = fullName.split(/ (.+)/);
                var email_list_array = email_list.split(",");
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                var countryName = locatorCookieObj.country_name.replace(/\+/g, ' ');
                var activeUser = getActiveWeUser();
                var referrerPhone = (activeUser && activeUser.we_phone) || '';
                if (email_list_array && pageType !== 'refer-and-earn-program-for-trainers') {
                    $scope.user_type = 'b2c';
                    if(webengage.state.getForever()){
                        $scope.user_type = webengage.state.getForever().uattr.sl_user_type || 'b2c';   
                    }
                    for (var i in email_list_array) {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_referrer_submits_referee_lead_with_emailid",
                            event_data: {
                                'sl_user_email': email_list_array[i] || '',
                                'sl_lead_type': 'b2c',
                                'sl_site_module': 'refer and earn',
                                'sl_email_opt_in': true,
                                'sl_sms_opt_in': true,
                                'sl_referrer_email_id': $scope.user_email,
                                'sl_referrer_user_referral_link': $scope.shareUrl,
                                'sl_user_country' : countryName || '',
                            },
                            common: "product",
                            user_attributes: ['sl_user_email','sl_lead_type'],
                        });
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_submits_referee_lead_with_email_id",
                            event_data: {
                                'sl_user_email': $scope.user_email || '',
                                'sl_user_phone': referrerPhone,
                                'sl_user_first_name': nameDiv[0],
                                'sl_user_last_name': nameDiv[1],
                                'sl_referee_email_id': email_list_array[i] || '',
                                'sl_lead_type': 'b2c',
                                'sl_page_type': user_params.sl_page_type || '',
                                'sl_site_module': 'refer and earn',
                                'sl_email_opt_in': true,
                                'sl_sms_opt_in': true,
                                'sl_referrer_user_referral_link': $scope.shareUrl,
                                'sl_user_country' : countryName || '',
                                'sl_user_type': $scope.user_type,
                            },
                            common: "product",
                            user_attributes: ['sl_user_email','sl_lead_type'],
                        });
                    }
                    WebTracking.eventReq.eventParam = {
                        event_data: {
                                'sl_user_email': $scope.user_email || '',
                                'sl_user_phone': referrerPhone,
                                'sl_lead_type': 'b2c',
                                'sl_user_first_name': nameDiv[0],
                                'sl_user_last_name': nameDiv[1],
                                'sl_user_country' : countryName || '',
                                'sl_user_type': $scope.user_type,
                            },
                        user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_lead_type','sl_user_type']
                    }
                    WebTracking.eventReq.loginUser();
                    WebTracking.eventReq.userAttributesWE();
                    }
                var paramsArr = {method: 'createReferees', emails: email_list, upc: $scope.mbsyCode, 'url': url, 'GCLID': getGCLID()};
                PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                        .then(function (response) {
                            
                            $cookieStore.put('referrerEmail', $scope.user_email);
                            $cookieStore.put('referrerPhone', referrerPhone);
                            $cookieStore.put('referrerName', fullName);
                            $cookieStore.put('emailList', email_list);
                            $cookieStore.put('mbsyCode', $scope.mbsyCode);
                            $cookieStore.put('shareUrl', $scope.shareUrl);
                            if (pageType != '' && pageType != null && pageType == 'refer-and-earn-program-for-trainers')
                                $cookieStore.put('pageType', pageType);
                            removeListLis(email_lst);
                            if (response.data.status == 'success') {
                                $scope.mbsySucMsg = "Message has been successfully shared!";
                                $scope.gaForRE.gFOCTP('Re_comp_Email');
                                gaFired = false;
                                $timeout(function () {
                                    window.location = $scope.baseUrl + $scope.referAndEarnPhoneLeadUrl;
                                }, 2000);

                            } else if (response.data.status == 'fail') {
                                $scope.mbsyMsg = "No valid emails found. Please enter valid mail Ids";
                            }
                            placeHolder();
                        });
            };

            var removeListLis = function (email_list) {
                var email_li = document.getElementsByClassName('input-tag-list')[0];
                var lis = email_li.children;
                if (lis.length > 1) {
                    var i = lis.length - 2;
                    do {
                        email_li.removeChild(lis[i]);
                        lis = email_li.children;
                        i--;
                    } while (lis.length > 1);
                }
                email_list.innerHTML = '';
            };

            var checkSingleMail = function () {
                var mails = document.getElementsByClassName('referee_mails')[0];
                mail = angular.element(mails)[0].value;
                mails.value = '';
                if (validEmail(mail)) {
                    if (email_list) {
                        email_list = email_list + ',' + mail;
                    } else {
                        email_list = mail;
                    }
                    return false;
                }
                return true;
            };

            var validEmail = function (email) {
                var re = /(.+)@(.+)\.(.+){2,}/;
                return re.test(email);
            };

            var validateEmailDomain = function (email) {
                if (validEmail(email)) {
                    var splitEmail = email.split('@');
                    splitEmail = splitEmail[1].split('.');
                    var r = true;
                    if (typeof splitEmail !== 'undefined' && splitEmail[0]) {
                        inValidDomains.forEach(function (value) {
                            if (value === splitEmail[0]) {
                                r = false;
                                return;
                            }
                        });
                    }
                    if (!r) {
                        $scope.createAmbassadors.user_email.$setValidity('required', false);
                    }
                } else {
                    $scope.createAmbassadors.user_email.$setValidity('required', false);
                }
            };

            var placeHolder = function () {
                var ele = document.getElementsByClassName('referrees');
                var parentElement = ele[0].children[0];
                var liList = parentElement.children;
                if (liList.length == 1) {
                    liList[0].children[0].placeholder = 'Enter email addresses';
                }
            };

            var email_list_evt = document.getElementsByClassName('referee_mails');
            var test = function () {
                email_list_evt.removeEventListener("keyup", keyupEvent, true);
            }
            var keyupEvent = function () {
                if (gaFired)
                    return true;
                $timeout(function () {
                    var email_list = document.getElementsByClassName('email_list')[0].innerHTML;
                    if (email_list.length) {
                        gaFired = true;
                        $scope.gaForRE.gFOCTP('Re_ini_Email');
                        //test();
                    }
                });
            };
            angular.element(email_list_evt).on('keyup', keyupEvent);
            $scope.$watch('user_email', function (newVal) {
                if (newVal && !gaEmailIniFired) {
                    $scope.gaForRE.gFOCTP('Re_initiated_Login');
                    gaEmailIniFired = true;
                }
            });

            var gaForReferAndEarn = function () {

                var ga = new gaEventsTracker();
                this.gFOCTP = function (cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);

                        if (cat!=='Re_submit_Email') {
                            var pageType = getPageType();
                            var fullName = (typeof $scope.name === 'string') ? $scope.name : '';
                            var nameDiv = fullName.split(/ (.+)/);
                            if (pageType === 'refer-and-earn') {
                                var activeUser = getActiveWeUser();
                                WebTracking.eventReq.triggerEvent({
                                    event_id: "sl_refer_user_promotes_referral_link_socially",
                                    event_data: {
                                        'sl_social_channel': label,
                                        'sl_lead_type': 'b2c',
                                        'sl_referrer_user_referral_link': $scope.url,
                                        'sl_user_email': $scope.user_email,
                                        'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                                        'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                                        'sl_user_phone': (activeUser && activeUser.we_phone) ? activeUser.we_phone : "",
                                    },
                                    common: "product",
                                    user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_lead_type', 'sl_user_phone'],
                                    // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                                    // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                                });
                            }
                        }
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                };
                this.copyLink = function () {
                    var pageType = getPageType();
                    if (pageType == 'refer-and-earn') {
                        var fullName = (typeof $scope.name === 'string') ? $scope.name : '';
                        var nameDiv = fullName.split(/ (.+)/);
                        ga.gaFireInteractiveEvents('RE_CopyLink');
                        var activeUser = getActiveWeUser();
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_refer_user_copied_referral_link",
                            event_data: {
                                'sl_lead_type': 'b2c',
                                'sl_referrer_user_referral_link': $scope.url,
                                'sl_user_email': $scope.user_email,
                                'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                                'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                                'sl_user_phone': (activeUser && activeUser.we_phone) ? activeUser.we_phone : "",
                            },
                            common: "product",
                            user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_lead_type', , 'sl_user_phone'],
                            //user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                            // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                            // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                        });
                    }
                };
            };

            $scope.gaForRE = new gaForReferAndEarn();

            $scope.user_email = $scope.phone_number = '';
            $scope.formHide = false;
            $scope.submitReferAndEarnForm = function () {
                $timeout(function () {
                    $window.location.href = baseUrl;
                }, 6000);

                if ($scope.referLanding.$valid) {
                    var url = window.location.href;
                    var requestParams = fetchRequestParams(url);
                    var paramsArr = {method: 'referAndEarnCallback', phone: $scope.phone_number, email: $scope.user_email, url: url, campaign_id: requestParams.campaignid};

                    PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                            .then(function (response) {
                                if (response.data.status == "Success") {
                                    $scope.mbsySucMsg = "Message has been successfully shared!";
                                    $scope.user_email = null;
                                    $scope.phone_number = null;
                                    $scope.referLanding.$setPristine();
                                    $scope.formHide = true;
                                    //$.cookie('mbsy', $routeParams.mbsy, {expires: 7});
                                } else {
                                    $scope.mbsyMsg = "No valid emails found. Please enter valid mail Ids";
                                }
                            });
                } else {
                    $scope.mbsySucMsg = 'Something went wrong. Please try again.';
                }
            }
            $scope.phoneNumbr = /^[0-9]{1,10}$/;

            var fetchRequestParams = function (url) {
                var loc = url;
                var result = {};

                var parts = loc.split("?");

                if (parts.length > 0) {
                    var params = parts[1].split("&");

                    for (var i = 0; i < params.length; i++) {
                        var keyValuePair = params[i].split("=");

                        var key = keyValuePair[0];
                        var value = "";
                        if (keyValuePair.length > 0) {
                            value = keyValuePair[1];
                        }

                        result[key] = value;
                    }
                }

                return result;
            }
            setCookie = function (cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires;
            }
            getCookie = function (cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ')
                        c = c.substring(1);
                    if (c.indexOf(name) == 0)
                        return c.substring(name.length, c.length);
                }
                return "";
            }
            $scope.userInitiateMail = function (id) {
                var pageType = getPageType();
                if (!menuhoverFired || typeof id != "undefined") {
                    var fullName = (typeof $scope.name === 'string') ? $scope.name : '';
                    var nameDiv = fullName.split(/ (.+)/);
                    if (pageType === 'refer-and-earn') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_refer_user_initiates_giving_referral_leads",
                            event_data: {
                                'sl_lead_type': 'b2c',
                                'sl_referrer_user_referral_link': $scope.url,
                                'sl_user_email': $scope.user_email,
                                'sl_user_first_name': typeof nameDiv[0] != 'undefined' ? nameDiv[0] : "",
                                'sl_user_last_name': typeof nameDiv[1] != 'undefined' ? nameDiv[1] : "",
                            },
                            common: "product",
                            user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name', 'sl_lead_type'],
                            //user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                            // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                            // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                        });
                        menuhoverFired = true;
                    }
                }
            }
            /*
             $scope.setMbsyDiscountCoupon= function(mbsyDiscountCoupon){
             if(mbsyDiscountCoupon){
             addCouponCodesToAACCookie(mbsyDiscountCoupon);
             }
             }*/
            
            var getPageType = function() {
                var url = document.location.toString().split("#")[0].split("?")[0];
                var pageType = url.split('/').pop();
                return pageType;
            }
        });
 /*------------- End : ReferAndEarnController.js-----------*/ 

 /*------------- Begin : ReferAndEarnPhoneController.js-----------*/ 

angular.module('Simplilearn')
        .controller('ReferAndEarnPhoneController', function($scope, $cookies,PostReqService, $timeout,LocService,$cookieStore,$rootScope) {
            $scope.baseUrl = baseUrl;
            $scope.referAndEarnUrl = 'refer-and-earn';
            $scope.referAndEarnUrlTrainer = 'refer-and-earn-program-for-trainers';
            if ($cookieStore.get('emailList')=='' || $cookieStore.get('emailList')==null || typeof $cookieStore.get('emailList')=='undefined' || $cookieStore.get('emailList') == 'undefined') {
                window.location = $scope.baseUrl+$scope.referAndEarnUrl;
            }
            $scope.successDisplayStatus = 0;
            $scope.helpers = new helpers();
            console.log($cookieStore.get('emailList'));
            $scope.onlyNumbers = /^\d+$/;
            $scope.referAndEarnPhoneLeadUrl = 'refer-and-earn/referrals-phone-number';
            $scope.mbsyCode = '';
            var emails = $cookieStore.get('emailList').split(',');     
            $scope.mbsyCode = $cookieStore.get('mbsyCode');
            if ($scope.mbsyCode!='')
                document.cookie = "showMbsyCode="+$scope.mbsyCode+"; expires=0; path=/";
            LocService.getCountryData().then(function(data) {
                $scope.countryData = data;
                LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                $scope.currentCountry = LocService.getCurrentCountry();
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.queryCountryId = $scope.selected_country.id;
                $scope.queryPhoneCode = "+"+$scope.selected_country.phnCode+"-";
                $scope.emailList = emails.map(function(e) {
                return { 
                    email: e,
                    QphoneCode:$scope.queryPhoneCode,
                    };
                }); 
            });

            $scope.submitReferAndEarnPhone = function(e,emailList){
                var IsValid = false;
               angular.forEach(emailList,function(value,index){ 
                   if (value.userFieldForm.$invalid && IsValid == false) {
                        return $scope.helpers.FormNotValid(value.userFieldForm);    
                    }else{
                        IsValid = true;
                        return;
                    }   
                });
               if (IsValid) {
                //console.log(JSON.stringify(emailList));
                console.log($scope.mbsyCode);
                $scope.refererLink = '';
                //write api
                if ($cookieStore.get('shareUrl') != '') {
                    document.cookie = "showShareUrl="+$cookieStore.get('shareUrl')+"; expires=0; path=/";
                    $scope.refererLink = $cookieStore.get('shareUrl');
                    $cookieStore.remove("shareUrl");
                }
                if ($cookieStore.get('pageType') != '' && $cookieStore.get('pageType') == 'refer-and-earn-program-for-trainers') {
                    $scope.locationUrl = $scope.baseUrl+$scope.referAndEarnUrlTrainer;
                    $scope.pageTypeParam = 'refer-and-earn-program-for-trainers';
                    $cookieStore.remove("pageType");
                } else {
                    $scope.locationUrl = $scope.baseUrl+$scope.referAndEarnUrl;
                    $scope.pageTypeParam = '';
                }
                var fullName = (typeof $cookieStore.get('referrerName') !== 'undefined') ? $cookieStore.get('referrerName') : '';
                var nameDiv = fullName.split(/ (.+)/);
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                var countryName = locatorCookieObj.country_name.replace(/\+/g, ' ');
                if (emailList && $scope.pageTypeParam !== 'refer-and-earn-program-for-trainers') {
                    $scope.user_type = 'b2c';
                    if(webengage.state.getForever()){
                        $scope.user_type = webengage.state.getForever().uattr.sl_user_type || 'b2c';
                    }
                    for (var i in emailList) {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_referrer_submits_referee_lead_with_phone",
                            event_data: {
                                'sl_user_email': emailList[i].email || '',
                                'sl_lead_type': 'b2c',
                                'sl_site_module': 'refer and earn',
                                'sl_user_phone': emailList[i].QphoneCode+emailList[i].userPhone || '',
                                'sl_email_opt_in': true,
                                'sl_sms_opt_in': true,
                                'sl_referrer_email_id': $cookieStore.get('referrerEmail') || '',
                                'sl_referrer_user_referral_link': $scope.refererLink || '',
                                'sl_user_country' : countryName || '',
                            },
                            common: "product",
                            user_attributes: ['sl_user_email','sl_user_phone', 'sl_lead_type'],
                        });
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_submits_the_referee_lead_with_phone",
                            event_data: {
                                'sl_user_email': $cookieStore.get('referrerEmail') || '',
                                'sl_user_phone': $cookieStore.get('referrerPhone') || '',
                                'sl_referee_email_id': emailList[i].email || '',
                                'sl_referee_phone': emailList[i].QphoneCode+emailList[i].userPhone || '',
                                'sl_lead_type': 'b2c',
                                'sl_site_module': 'refer and earn',
                                'sl_user_first_name': nameDiv[0],
                                'sl_user_last_name': nameDiv[1],
                                'sl_email_opt_in': true,
                                'sl_sms_opt_in': true,
                                'sl_referrer_user_referral_link': $scope.refererLink || '',
                                'sl_user_country' : countryName || '',
                                'sl_user_type': $scope.user_type,
                            },
                            common: "product",
                            user_attributes: ['sl_user_email','sl_lead_type'],
                        });
                    }
                    WebTracking.eventReq.eventParam = {
                        event_data: {
                                'sl_user_email': $cookieStore.get('referrerEmail') || '',
                                'sl_user_phone': $cookieStore.get('referrerPhone') || '',
                                'sl_lead_type': 'b2c',
                                'sl_user_first_name': nameDiv[0],
                                'sl_user_last_name': nameDiv[1],
                                'sl_user_country' : countryName || '',
                                'sl_user_type': $scope.user_type,
                            },
                        user_attributes: ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name','sl_user_type']
                    }
                    WebTracking.eventReq.loginUser();
                    WebTracking.eventReq.userAttributesWE();
                }
                var url = document.location;
                var paramsArr = {method: 'createRefereesPhone', emails: JSON.stringify(emailList), upc: $scope.mbsyCode, 'url': url, 'pageType':$scope.pageTypeParam};
                PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                        .then(function(response) {
                            if (response.data.status == 'success') {
                                 $cookieStore.remove("emailList");
                                 $cookieStore.remove("mbsyCode");
//                                $scope.mbsySucMsg = "Message has been successfully shared!";
//                                $scope.gaForRE.gFOCTP('Re_comp_Email');
//                                gaFired = false;
                                

                            } else if (response.data.status == 'fail') {
                                //$scope.mbsyMsg = "No valid emails found. Please enter valid mail Ids";
                            }
                            $scope.successDisplayStatus = 1;
                                 $timeout(function() {
                                    document.cookie = "showPage2=true; expires=0; path=/";
                                    window.location = $scope.locationUrl;
                                }, 4000);
                            //placeHolder();
                });
                
               }
               
            }  
            $scope.skipPage = function () {
                if ($cookieStore.get('shareUrl') != '') {
                    document.cookie = "showShareUrl="+$cookieStore.get('shareUrl')+"; expires=0; path=/";
                    $cookieStore.remove("shareUrl");
                }
                if ($cookieStore.get('pageType') != '' && $cookieStore.get('pageType') == 'refer-and-earn-program-for-trainers') {
                    $scope.locationUrl = $scope.baseUrl+$scope.referAndEarnUrlTrainer;
                    $cookieStore.remove('pageType');
                } else {
                    $scope.locationUrl = $scope.baseUrl+$scope.referAndEarnUrl;
                }
                document.cookie = "showPage2=true; expires=0; path=/";
                window.location = $scope.locationUrl;
            }
            
            
            var removeListLis = function(email_list) {
                var email_li = document.getElementsByClassName('input-tag-list')[0];
                var lis = email_li.children;
                if (lis.length > 1) {
                    var i = lis.length - 2;
                    do {
                        email_li.removeChild(lis[i]);
                        lis = email_li.children;
                        i--;
                    } while (lis.length > 1);
                }
                email_list.innerHTML = '';
            };
        });
 /*------------- End : ReferAndEarnPhoneController.js-----------*/ 

 /*------------- Begin : ReviewsController.js-----------*/ 

angular.module('Simplilearn')
        .controller('ReviewsController', function ($scope, $http, $rootScope, LocService) {

            $scope.initialCount = 10;
            $scope.helpers = new helpers();
            $scope.gup = function (name, url) {
                if (!url)
                    url = location.href
                name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
                var regexS = "[\\?&]" + name + "=([^&#]*)";
                var regex = new RegExp(regexS);
                var results = regex.exec(url);
                return results == null ? null : results[1];
            };

            if ($scope.gup('p') != null) {
                $scope.reviewsCount = $scope.gup('p') * $scope.initialCount;
            } else {
                $scope.reviewsCount = 10;
            }
            ;
            $scope.reviewsData = [];
            $scope.loadMoreTxt = "Load More";
            $scope.sendRequest = true;
            $scope.reviewsLabelDisplay = {'display': 'none'};
            $scope.reviewsCoursesDisplay = {'display': 'none'};
            $scope.currentLabelId = 0;
            $scope.currentCourseId = '';
            $scope.currentLabelId = '';
            $scope.currentBundleId = '';
            $scope.currentLabelName = "Category";
            $scope.currentCourseName = "Select Course";
            $scope.currentBundleName = "Select Master Program";
            $scope.currentSearchType = "Select Filter";
            $scope.searchType = 0;
            $scope.uniqueReviewIds = [];
            $scope.init = function (labelName, courseName, courseId, bundleName, bundleId, searchType) {
                $scope.currentLabelName = labelName;
                $scope.currentCourseName = courseName;
                $scope.currentCourseId = courseId;
                $scope.currentBundleName = bundleName;
                $scope.currentBundleId = bundleId;
                $scope.currentSearchType = searchType;
            };
            $scope.initCourses = function (labelId, courseId, bundleId, searchTypeId) {
                $scope.currentCourseId = courseId;
                $scope.currentLabelId = labelId;
                $scope.currentBundleId = bundleId;
            };
            $scope.loadMoreReviews = function (skipCount) {
                if ($scope.sendRequest == true) {
                    $scope.sendRequest = false;
                    $scope.loadMoreTxt = "Loading Reviews...";
                    var reqparams = [];
                    reqparams['method'] = 'loadMoreReviews';
                    reqparams['skip'] = skipCount;
                    if ($scope.currentCourseId) {
                        reqparams['course_id'] = $scope.currentCourseId;
                    }
                    if ($scope.currentBundleId) {
                        reqparams['bundle_id'] = $scope.currentBundleId;
                    }
                    $http.get(baseApiUrlNocache,
                            {
                                params: reqparams,
                            }
                    ).success(function (data, status, header, config) {
                        if (data.length > 0) {
                            for (i in data) {
                                var reviewId = data[i].id;
                                if ($scope.uniqueReviewIds.indexOf(reviewId) === -1 || typeof $scope.uniqueReviewIds[reviewId] === 'undefined') {
                                    $scope.uniqueReviewIds.push(reviewId);
                                    $scope.reviewsData.push(data[i]);
                                }
                            }
                            //console.log($scope.reviewsData);
                            $scope.loadMoreTxt = "Load More";
                            $scope.sendRequest = true;
                            $scope.reviewsCount += $scope.initialCount;
                        } else {

                            $scope.loadMoreTxt = "That's All..";
                        }
                    }).error(function (data, status, header, config) {
                        $scope.loadMoreTxt = "Load More";
                    });
                }
            };

            $scope.openTab = function (url) {
                if (url) {
                    window.open(url, '_blank');
                }
            };

            $scope.toggleLabelsList = function ($event) {
                $event.preventDefault();
                if ($scope.reviewsLabelDisplay.display == 'none') {
                    $scope.reviewsLabelDisplay = {'display': 'block'};
                } else {
                    $scope.reviewsLabelDisplay = {'display': 'none'};
                }
            };

            $scope.toggleCoursesList = function ($event) {
                $event.preventDefault();
                if ($scope.reviewsCoursesDisplay.display == 'none') {
                    $scope.reviewsCoursesDisplay = {'display': 'block'};
                } else {
                    $scope.reviewsCoursesDisplay = {'display': 'none'};
                }
            };

            $scope.setCurrentLabelId = function ($event, labelId) {
                $event.preventDefault();
                $scope.currentLabelId = labelId;
                $scope.reviewsLabelDisplay = {'display': 'none'};
                //$scope.currentLabelName = labelName;
                $scope.currentCourseName = 'Select Course';
            };
            $scope.initCoursesList = function (labelId) {
                if (labelId != '') {
                    $scope.currentLabelId = labelId;
                }
            };
            $scope.updateCategory = function () {
                $scope.currentCourseId = '';
                $scope.currentBundleId = '';
                if (!$scope.currentLabelId) {
                    window.location = baseUrl + 'reviews';
                }
                if ($scope.currentSearchType && (parseInt($scope.currentSearchType) === 1 || parseInt($scope.currentSearchType) === 2)) {
                    $scope.updateSearchType();
                }
            };
            $scope.updateCourse = function () {
                if (!$scope.currentCourseId) {
                    window.location = baseUrl + 'reviews';
                }
                else {
                    document.searchReviews.submit();
                    //window.location = baseUrl+'reviews?course_id='+$scope.currentCourseId;                    
                }
            };
            $scope.updateBundle = function () {
                if (!$scope.currentBundleId) {
                    window.location = baseUrl + 'reviews';
                }
                else {
                    document.searchReviews.submit();
                    //window.location = baseUrl+'reviews?course_id='+$scope.currentCourseId;                    
                }
            };
            $scope.updateSearchType = function () {
                $scope.searchType = $scope.currentSearchType;
                $scope.currentBundleId = '';
                $scope.currentCourseId = '';
                if ($scope.searchType == 1 && $scope.currentLabelId) {
                    document.getElementById('course_list').classList.remove('hide');
                    if (document.getElementById('bundle_list'))
                        document.getElementById('bundle_list').classList.add('hide');
                } else if ($scope.searchType == 2 && $scope.currentLabelId) {
                    document.getElementById('course_list').classList.add('hide');
                    if (document.getElementById('bundle_list'))
                        document.getElementById('bundle_list').classList.remove('hide');
                }
            };
        });

 /*------------- End : ReviewsController.js-----------*/ 

 /*------------- Begin : ReviewsSectionController.js-----------*/ 

angular.module('Simplilearn')
.controller('ReviewsSectionController', function($scope) {

	this.currentReviewType = '0';
        this.showMoreRs = 0;

        this.reviewsLimit = 0;
        this.totalReviews = 0;
        this.reviewsVisible = 0;
        this.viewMoreFlag = 1;

        this.init = function(pReviewsLimit, pTotalReviews) {
            this.reviewsLimit = pReviewsLimit;
            this.totalReviews = pTotalReviews;
            this.reviewsVisible = pReviewsLimit;
        };

	this.setReviewType = function(rvwType) {
            this.currentReviewType = rvwType;//@review no return statement
        };

        this.isCurrentReviewType = function(rvwType) {
            if (this.currentReviewType === null) {
                return false;
            }

            var rvw_types = rvwType.split('|');
            var validity = rvw_types.indexOf(this.currentReviewType);

            return validity !== -1;
        };

        this.showMoreReviews = function ($event) {
            $event.preventDefault();
            WebTracking.eventReq.triggerEvent({
                event_id : "sl_eng_product_reviews_view_more_clicked",
                common : "product",
            });
            $scope.gaMReviewsCtrlJs.gaFireGeneral('showmorereviews', user_params.user_id + ' || ' + document.URL);
            var reviewsToShow = this.totalReviews - this.reviewsVisible;
            this.reviewsVisible += (reviewsToShow > this.reviewsLimit) ? this.reviewsLimit : reviewsToShow;
            this.viewMoreFlag = (this.reviewsVisible == this.totalReviews) ? 0 : 1;
        };

        this.showLessReviews = function ($event) {
            $event.preventDefault();
            this.reviewsVisible = this.reviewsLimit;
            this.viewMoreFlag = 1;
        };

        this.isReviewVisible = function(pIndex) {
            if(pIndex <= this.reviewsVisible) {
                return 1;
            } else {
                return 0;
            }
        };

        this.linkedinClick = function() {
            $scope.gaMReviewsCtrlJs.gaFireGeneral('reviewerprofileclick', user_params.user_id + ' || ' + document.URL + ' || linkedin');
        };

        var gaClassForReviews = function() {
            var ga = new gaEventsTracker();
            this.gaFireGeneral = function(cat, label) {
                if (typeof label !== 'undefined' && label) {
                    ga.gaFireInteractiveEvents(cat, label);
                } else {
                    ga.gaFireInteractiveEvents(cat);
                }
            }
        }

        $scope.gaMReviewsCtrlJs = new gaClassForReviews();
});
 /*------------- End : ReviewsSectionController.js-----------*/ 

 /*------------- Begin : ScholarshipProgramCtrl.js-----------*/ 

angular.module('Simplilearn')
    .controller('ScholarshipProgramCtrl', function ($scope, $http) {
      $scope.helpers = new helpers();
      $scope.STEP = 1;
      $scope.SUBMIT = null;
      $scope.YourMialId = null;
      $scope.FirstName = null;
      $scope.City = null;
      $scope.LastName = null;
      $scope.State = null;
      $scope.DateOfBirth = null;
      $scope.ZipCode = null;
      $scope.MailingAddress = null;
      $scope.Phone = null;
      $scope.IntendedDegreeType = null;
      $scope.CurrentCollege = null;
      $scope.HearAboutUs = null;
      $scope.CollegeEmail = null;
      $scope.CurrentMajor = null;
      $scope.CapabilityDescription = null;
      $scope.CapabilityDescribeLater = null;
      $scope.BigDataCheck = null;
      $scope.DigitalMarketingCheck = null;
      $scope.ProjectManagementCheck = null;
      $scope.StudentTnC = true;
      $scope.StudentEmail = null;
      $scope.scholarShipSubmitted = false;
      $scope.popupStatusMsg = '';
      $scope.popupStatus = null;
      $scope.CollegeGradYear = null;
      $scope.termsCond = 0;
      $scope.termsCondToggle = function() {
                $scope.termsCond = $scope.termsCond == 1 ? 0 : 1;
       };
      this.stepSubmit = function () {
        if ($scope.STEP == 3) {
          $scope.STEP = 1;
          this.formSubmit();
        } else {
          $scope.STEP++;
        }
        return false;
      }
      this.stepBack = function () {
        if ($scope.STEP > 1) {
          $scope.STEP--;
        }
        return false;
      }
      
      $scope.initfunc = function(){
        //Getting Location Data
        $http.post(baseApiUrl + '?method=getLocationList&country=United States').then(function (data) {
            if(data.data.status == 'success'){ 
              $scope.country_data = data.data.data;
          }
        });  
        
        $http.post(baseApiUrl + '?method=getCollegeList').then(function (data) {
            if(data.data.status == 'success'){ 
              $scope.college_data = data.data.data;
          }
        });
        
      }
      
      this.formSubmit = function (type_scholarship) { 
        if($scope.apply_now_form.$invalid){
	  return $scope.helpers.FormNotValid($scope.apply_now_form);
	
	}
        
        var date_input = new Date($scope.DateOfBirth);
        var curr_date = new Date();
        if(date_input > curr_date){
          var element = document.getElementById("dateofbirth");
          element.classList.add("error");
	  return $scope.helpers.FormNotValid($scope.apply_now_form);
	}  
        
        if(type_scholarship == 'simplilearn'){
           if( !$scope.BigDataCheck && !$scope.DigitalMarketingCheck && !$scope.ProjectManagementCheck) {
               //alert("Please select atleast one course");
               return $scope.helpers.FormNotValid($scope.apply_now_form);
           } 
        }
        $http.post(baseApiUrl + '?method=postScholarshipApplication',
            {
              FirstName: $scope.FirstName,
              LastName: $scope.LastName,
              CollegeEmail: $scope.CollegeEmail,
              DateOfBirth: $scope.DateOfBirth,
              Phone: $scope.Phone,
              City: $scope.City,
              State: $scope.State,
              ZipCode: $scope.ZipCode,
              MailingAddress: $scope.MailingAddress,
              IntendedDegreeType: $scope.IntendedDegreeType,
              CurrentCollege: $scope.CurrentCollege,
              CollegeGradYear : $scope.CollegeGradYear,
              CurrentMajor: $scope.CurrentMajor,
              CapabilityDescription: ($scope.CapabilityDescribeLater == true) ? null : $scope.CapabilityDescription,
              CapabilityDescribeLater:$scope.CapabilityDescribeLater,
              HearAboutUsOptions : $scope.HearAboutUsOptions,
              HearAboutUs : $scope.HearAboutUs,
              BigDataCheck: $scope.BigDataCheck,
              DigitalMarketingCheck: $scope.DigitalMarketingCheck,
              ProjectManagementCheck: $scope.ProjectManagementCheck,
              TypeScholarship:type_scholarship,
              PageURL :window.location.href,
              processed:0,
              verified:0,
              approved:0
            }).then(function (data) {
               if(data.data.status == 'success'){
                   $scope.SUBMIT = 'success';
               }else{
                   $scope.SUBMIT = 'fail';
               }
            var elmnt = document.getElementById("apply_form");
            $scope.scrollToCustom(0, elmnt.offsetTop, 50);
        });
        
        //$scope.SUBMIT = 'success';
      }
      $scope.enrollStudent = function () {
        if (this.studentEnrollmentForm.$invalid) {
          return this.helpers.FormNotValid(this.studentEnrollmentForm);
        }
        var data = {
              course_id: course_id,
              scholarship: user_params.scholarship,
              StudentEmail: this.StudentEmail,
              ambassador_code: ambassador_code
            };
        $http.post(baseApiUrl + '?method=postStudentEnrollment', data).then(function(d) {
//              return;
              $scope.scholarShipSubmitted = true;
              $scope.popupStatusMsg = d.data.message;
              $scope.popupStatus = d.data.status;
            });
      }
      
      $scope.scrollToCustom = function (element, to, duration) {
                if (duration <= 0) return;
                var difference = to - element;
                var perTick = difference / duration * 10;

                setTimeout(function() {
                    element = element + perTick;
                    window.scrollTo(0,element);
                    if (element === to) return;
                    $scope.scrollToCustom(element, to, duration - 10);
                }, 10);
    };
    
    this.apply_now_click = function(){ 
                var elmnt1 = document.getElementById("apply_form");
                $scope.scrollToCustom(0, elmnt1.offsetTop, 500);
    };
      
      this.hideAllModal = function () {
      var modalObjs = document.getElementsByClassName('popup_country_wrapper');
      var modalLen = modalObjs.length;
      for(var i=0;i<modalLen;i++){
        if(modalObjs[i].style.display =='block'){
          modalObjs[i].style.display = 'none';
        }
      }
      var bodyObj = document.getElementsByTagName('body')[0];
      bodyObj.className = bodyObj.className.replace("body_fixed","");
    }
    }); /*------------- End : ScholarshipProgramCtrl.js-----------*/ 

 /*------------- Begin : SemBundleController.js-----------*/ 

angular.module('Simplilearn')
        .controller('SemBundleController', function ($scope, $rootScope, $http, YoutubeApiService, $timeout, PostReqService, LocService, $cookies, LeadService) {
            $scope.helpers = new helpers();
            $scope.isCrsVideoVisible = 0;
            $scope.videoState = '';
            $scope.defVideoState = '';
            $scope.integratedFormDisplayStatus = 0;
            $scope.videoUrl = '';
            $scope.hasValidation = true;
            $scope.isEuro=user_params.isEuro;
            $rootScope.isSemBundle = true;
            var crsPreview = {};
            $scope.primaryCrs = {};
            $scope.primaryCrs[1] = 1;
            var showReviews = {};
            $scope.coursePreview = {};
            $scope.crsAboutC = {};
            $scope.crsAboutM = {};
            $scope.crsClassroomS = {};
            /** start - intro video **/
            $scope.introVideo = null;
            $scope.introPlayer = null;
            var PHONE_MAX_LENGTH = 15;

            $scope.showBundleAgenda = false;
            $scope.cAgreeCheck = false;
            $scope.learningPathExpand = false;
            $scope.learningPathShowMoreLabel = 'Show all courses';
            $rootScope.isSemBundle=true;
            this.init = function () {
                $scope.isAagreeCheckDirty = false;
            };

            // add phone country code
            LocService.getCountryData().then(function (data) {
                $scope.countryData = data;
                LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.queryCountryId = $scope.selected_country.id;
                $scope.queryPhoneCode = "+" + $scope.selected_country.phnCode + "-";
                $scope.inQueryPhoneCode = "+" + $scope.selected_country.phnCode + "-";
                $scope.cookie_country_name = $scope.selected_country.name;
                $scope.countryDataHeaderDropDown = $scope.countryData;
            });

            $scope.introVideoInit = function () {
                YoutubeApiService.onReady(function () {
                    var player;
                    var playerId = 'courseIntroVideo';
                    var playButtonId = 'play-button-intro-main';

                    var popupDom = document.querySelector('#courseIntroVideoPopup > iframe');
                    if (!popupDom) {
                        return;
                    }
                    initIntroVideoPopupStatus = true;
                    popupDom.setAttribute('id', 'courseIntroVideoPopupIframe');
                    playerId = 'courseIntroVideoPopupIframe';
                    playButtonId = 'play-button-intro-popup';

//                    player = new YT.Player(playerId, {
//                        events: {
//                            'onStateChange': onPlayerStateChange
//                        }
//                    });
                    $scope.introVideo = document.getElementById(playerId);
                    if (!$scope.introVideoOverlayStatus) {
                        $scope.playVideo($scope.introVideo);
                    }
                    var videoState = null;
                });
            }

            $scope.breadcrumEvent = function ($event) {
                var gotoLink = ''
                if (typeof $event != 'undefined')
                    gotoLink = $event.target.parentNode.href;
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('breadcrumclick', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
            }

            $scope.defaultFunction = function (courseIds) {
                if (document.readyState === 'complete') {
                    $scope.fetchCoursePreview(courseIds);
                } else {
                    window.addEventListener('load', $scope.fetchCoursePreview(courseIds));
                }
            }
            $scope.fetchCoursePreview = function (courseIds) {
                if (typeof courseIds != 'undefined' && courseIds != '') {
                    $http.get(baseApiUrl + "?method=getBundlePreviews",
                            {params: {
                                    "courseId": courseIds
                                }
                            })
                            .then(function (response) {
                                if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == 200) {
                                    var result = response.data;
                                    for (var key in result) {
                                        if (result.hasOwnProperty(key)) {
                                            window.localStorage["cp_data_" + key] = JSON.stringify(result[key]);
                                        }
                                    }
                                }
                            });
                }
            }

            $scope.setReviewsStatus = function ($event, no, val) {
                $event.preventDefault();
                showReviews[no] = val;
            }

            $scope.getReviewStatus = function (id) {
                if (typeof showReviews[id] != 'undefined') {
                    return showReviews[id];
                }
                return 0;
            }
            $scope.playVideo = function (domObj) {
                //console.log('playVideo')
                if ($scope.introPlayer && $scope.introPlayer.playVideo) {
                    $scope.introPlayer.playVideo();
                } else if (domObj && domObj.contentWindow) {
                    $timeout(function () {
                        domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*')
                    }, 500);
                }
            }
            $scope.showCrsVideo = function (vUrl) {
                $scope.videoUrl = vUrl;
                $scope.isCrsVideoVisible = 1;
                $scope.videoState = '';
                $timeout(function () {
                    $scope.introVideoInit();
                }, 100);
            };

            $scope.hideCrsVideo = function () {
                $scope.videoUrl = '';
                $scope.isCrsVideoVisible = 0;
                $scope.videoState = 'stop';
            };

            $scope.showDefVideo = function (vUrl) {
                $scope.isDefVideoVisible = 1;
                $scope.defVideoState = '';
            };

            $scope.hideDefVideo = function () {
                $scope.isDefVideoVisible = 0;
                $scope.defVideoState = 'stop';
            };
            $scope.crsPreview = {};
            $scope.setCpreviewStatus = function ($event, id, type, val, courseName) {
                $event.preventDefault();
                $scope.ga.gaFireInteractiveEvents('clickoncoursecontenttab', user_params.user_id + ' || ' + document.URL + ' || ' + courseName);

                if (typeof $scope.crsPreview[id] == 'undefined') {
                    $scope.crsPreview[id] = {};
                }
                if ($scope.crsPreview[id][type] == 1)
                    $scope.crsPreview[id][type] = 0;
                else
                    $scope.crsPreview[id][type] = 1;
                var secVid = 2 - type;
                var secVidId = 2;
                if (secVid == 0)
                    secVidId = 1;
                if ($scope.crsPreview[id][secVidId] != 'undefined')
                    $scope.crsPreview[id][secVidId] = 0;
                if (typeof $scope.crsClassroomS[id] != 'undefined') {
                    $scope.crsClassroomS[id][secVidId] = 0;
                }
                if (typeof $scope.crsAboutC[id] != 'undefined')
                    $scope.crsAboutC[id][secVidId] = 0;

            }

            $scope.getCpreviewStatus = function (id, type) {
                if (typeof $scope.crsPreview[id] != 'undefined') {
                    return $scope.crsPreview[id][type];
                }
                return 0;
            }

            $scope.getClassroomClasses = function (id, type, second) {
                var classStr = '';
                var secVid = 2 - type;
                var secVidId = 2;
                if (secVid == 0)
                    secVidId = 1;

                if ($scope.getClassroomSStatus(id, type)) {
                    classStr += 'collapse-box';
                }
                if (second && ($scope.getClassroomSStatus(id, type) || $scope.getCpreviewStatus(id, type))) {
                    // classStr += ' hidden';
                }
                if (second && ($scope.getClassroomSStatus(id, secVidId)
                        || $scope.getCpreviewStatus(id, secVidId)
                        || $scope.getAboutCStatus(id, secVidId))) {
                    classStr += ' hide-buttons';
                }
                return classStr;
            }
            $scope.getClassroomClassesO = function (id, type) {
                var classStr = '';

                if ($scope.getClassroomSStatus(id, type)) {
                    classStr += 'collapse-box';
                }
                if (($scope.getClassroomSStatus(id, type) == 0 && $scope.getCpreviewStatus(id, type) == 0)) {
                    classStr += ' hidden';
                }
                return classStr;
            }

            $scope.getPreviewClasses = function (id, type, toggleFlag) {
                var classStr = '';
                var secVid = 2 - type;
                var secVidId = 2;
                if (secVid == 0)
                    secVidId = 1;

                if ($scope.getCpreviewStatus(id, type)) {
                    classStr += 'collapse-box';
                }
                if (($scope.getClassroomSStatus(id, type) || $scope.getCpreviewStatus(id, type))) {
                    if (typeof toggleFlag !== "undefined") {
                        classStr += ' toggle-course-content';
                    } else {
                        classStr += ' hidden';
                    }
                }

                if (($scope.getClassroomSStatus(id, secVidId)
                        || $scope.getCpreviewStatus(id, secVidId)
                        || $scope.getAboutCStatus(id, secVidId))) {
                    classStr += ' hide-buttons';
                }

                return classStr;
            }

            $scope.getPreviewClassesO = function (id, type, toggleFlag) {
                var classStr = '00';
                if ($scope.getCpreviewStatus(id, type)) {
                    classStr += 'collapse-box';
                }
                if (($scope.getClassroomSStatus(id, type) == 0 && $scope.getCpreviewStatus(id, type) == 0)) {
                    if (typeof toggleFlag !== "undefined") {
                        classStr += ' toggle-course-content';
                    } else {
                        classStr += ' hidden';
                    }
                }
                return classStr;
            }

            $scope.setClassroomSStatus = function ($event, id, type) {
                $event.preventDefault();
                if (typeof $scope.crsClassroomS[id] == 'undefined') {
                    $scope.crsClassroomS[id] = {};
                }
                if ($scope.crsClassroomS[id][type] == 1)
                    $scope.crsClassroomS[id][type] = 0;
                else
                    $scope.crsClassroomS[id][type] = 1;
                var secVid = 2 - type;
                var secVidId = 2;
                if (secVid == 0)
                    secVidId = 1;
                if ($scope.crsClassroomS[id][secVidId] != 'undefined')
                    $scope.crsClassroomS[id][secVidId] = 0;
                if (typeof $scope.crsPreview[id] != 'undefined') {
                    $scope.crsPreview[id][secVidId] = 0;
//                    $scope.crsPreview[id][2] = 0;
                }
                if (typeof $scope.crsAboutC[id] != 'undefined')
                    $scope.crsAboutC[id][secVidId] = 0;
            }

            $scope.getClassroomSStatus = function (id, type) {
                if (typeof $scope.crsClassroomS[id] != 'undefined') {
                    return $scope.crsClassroomS[id][type];
                }
                return 0;
            }


            $scope.setAboutCStatus = function ($event, id, type) {
                $event.preventDefault();
                if (typeof $scope.crsAboutC[id] == 'undefined') {
                    $scope.crsAboutC[id] = {};
                }
                var secVid = 2 - type;
                var secVidId = 2;
                if (secVid == 0)
                    secVidId = 1;
                if ($scope.crsAboutC[id][type] == 1)
                    $scope.crsAboutC[id][type] = 0;
                else
                    $scope.crsAboutC[id][type] = 1;
                if (typeof $scope.crsAboutC[id] != 'undefined')
                    $scope.crsAboutC[id][secVidId] = 0;
                if (typeof $scope.crsClassroomS[id] != 'undefined') {
                    $scope.crsClassroomS[id][secVidId] = 0;
                }
                if (typeof $scope.crsPreview[id] != 'undefined') {
                    $scope.crsPreview[id][secVidId] = 0;
                }
            }

            $scope.getAboutCStatus = function (id, type) {
                if (typeof $scope.crsAboutC[id] != 'undefined') {
                    return $scope.crsAboutC[id][type];
                }
                return 0;
            }

            $scope.setAboutMStatus = function ($event, id, type) {
                $event.preventDefault();
                if (typeof $scope.crsAboutM[id] == 'undefined') {
                    $scope.crsAboutM[id] = {};
                }
                if (typeof $scope.crsAboutM[id] != 'undefined' && $scope.crsAboutM[id][type] == 1) {
                    $scope.crsAboutM[id][type] = 0;
                    if ((typeof $scope.crsPreview[id] !== 'undefined') && (typeof $scope.crsPreview[id][type] != 'undefined'))
                        $scope.crsPreview[id][type] = 0;
                    if ($scope.crsClassroomS[id][type] != 'undefined')
                        $scope.crsClassroomS[id][type] = 0;
                }
                else
                    $scope.crsAboutM[id][type] = 1;
            }

            $scope.getAboutMStatus = function (id, type) {
                if (typeof $scope.crsAboutM[id] != 'undefined') {
                    return $scope.crsAboutM[id][type];
                }
                return 0;
            }
            var ga = new gaEventsTracker();
            $scope.ga = ga;
            $scope.gaFireMasterProgramCourseClick = function (courseName) {
                ga.gaFireInteractiveEvents('subslearningpathClick', user_params.user_id + ' || ' + document.URL + ' || ' + courseName);
            }
            $scope.gaFirejobAssistClick = function ($event) {
                ga.gaFireInteractiveEvents('jobassistclick', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
            }
            $scope.gaOnEnroll = function () {
                ga.gaFireInteractiveEvents('enrollBundle', user_params.user_id + ' || ' + document.URL);
            }

            $scope.gaOnSticky = function (courseName, name) {
                ga.gaFireInteractiveEvents('bundlestickyClick', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + name);
            }

            $scope.gaOnFAQ = function (courseName, title) {
                ga.gaFireInteractiveEvents('faqclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + title);
            }

            $scope.gaOnDesc = function (courseName, title) {
                ga.gaFireInteractiveEvents('mdclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + title);
            }

            $scope.showBundleAgendaPopUp = function (agendaUrl,btnText) {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_module_initiated",
                    event_data: {
                      'sl_lead_button_text' : btnText || '',
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'bundle agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                $scope.submitAgendaUrl = agendaUrl;
                //var bundleAgendaCookie = getCookieByName('_cpruid');
                var bundleAgendaCookie = getCookieByName('_user_ld_info');
                var agendaLeadCreated = false;
                if (typeof bundleAgendaCookie !== "undefined") {
                    var bundle_id = user_params.bundle_id;
                    bundle_id = 'b' + bundle_id;
                    var cookieCourseIds = bundleAgendaCookie.split(',');
                    if (cookieCourseIds.indexOf(bundle_id) !== -1) {
                        agendaLeadCreated = true;
                    }
                }
                
                ga.gaFireInteractiveEvents('leadformclicked', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.bundle_name + ' || ' + 'bundle agenda');

                 if(!$scope.isEuro){
                    // logic added if not logged in
                    if (!$rootScope.isLoggedIn) {
                        if (bundleAgendaCookie) {
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl, agendaLeadCreated, true);
                        } else {
                            $scope.showBundleAgenda = true;
                        }
                    } else {  //if logged in
                        if (bundleAgendaCookie) {
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl, agendaLeadCreated, true);
                        } else {
                            $scope.submitBundleAgendaLead($scope.submitAgendaUrl, false, true);
                        }
                    }
                }

                if ($scope.isEuro && ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')) {
                    var optinSet = typeof getCookieByName(user_params.OPTIN_COOKIE) != 'undefined' ? true : false;
                    var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if (!optinSet || (optin && !bundleAgendaCookie)) {
                        $scope.showBundleAgenda = true;
                    } else if(optin == true && bundleAgendaCookie) {
                        $scope.submitBundleAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,false);
                    }  else {
                        $scope.submitBundleAgendaLead($scope.submitAgendaUrl,false,true);
                    }
                }
            }
            $scope.submitIndegratedForm = function () {
                if ($scope.indegratedForm.$invalid) {
                    return $scope.helpers.FormNotValid($scope.indegratedForm);
                } else {
                    var userEmail = $scope.indegratedForm.userEmail.$modelValue;
                    var userPhone = $scope.inQueryPhoneCode + $scope.indegratedForm.userPhone.$modelValue;
                    var userName = $scope.indegratedForm.userName.$modelValue;
                    var obj3 = {
                        name: userName,
                        email: userEmail,
                        phone: userPhone,
                        queryTxt: "Apply Now Integrated Program",
                        query: "Apply Now Integrated Program",
                        agreeToContact: 1,
                        queryTyp: 'integrated-program-popup',
                        bundleId: user_params.bundle_id,
                        bundleName: user_params.bundle_name
                    };
                    obj3['customerType'] = 'B2C';
                    obj3['leadTrainingType'] = 'Not Sure';
                    obj3['leadSourceString'] = document.URL;
                    obj3['tagName'] = 'program application';
                    obj3['leadSource'] = fetchUTMSource();
                    obj3['type'] = 'program application';
                    obj3['productTypeId'] = user_params.productTypeId;
                    obj3['billingTypeId'] = user_params.billingTypeId;
                    obj3['method'] = 'saveCallback';
                    obj3['GCLID'] = getGCLID();
                    obj3['lead_delay_time'] = user_params.leadCreateAfter;

                    PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                            .then(function (data) {
                                if (data != null) {
                                    if (data.data.status == 'Success') {
                                        //Open in new Page new form
                                        //Close Popup
                                        var user = {};
                                        user.email = encodeURIComponent(userEmail);
                                        user.key = data.data.result.key;
                                        user.url_current = window.location;
                                        user.bundle_name = user_params.bundle_name;
                                        var paramsArr = user;
                                        paramsArr.method = 'generateUserHash',
                                                PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (data) {
                                            var resData = data.data;
                                            if (resData && resData.status == 'success' && resData.data && resData.data.auh) {
                                                window.open(user_params.integrated_program_form + '?step=' + resData.data.auh, "_self");
                                                document.querySelector('body').classList.remove('body_fixed');
                                            } else {
                                                $scope.integratedQueryStatusClass = "error_msg";
                                                $scope.integratedQueryStatusMsg = "There was some problem, please try again.";
                                            }
                                        });

                                        $scope.integratedFormDisplayStatus = 0;
                                    } else {
                                        $scope.integratedQueryStatusClass = "error_msg";
                                        $scope.integratedQueryStatusMsg = "There was some problem, please try again.";
                                    }
                                }
                                //$scope.integratedFormDisplayStatus = {'display':'none'};
                            });
                }
            }

            $scope.$watch('userPhone', function (newValue) {
                if ($scope.indegratedForm && $scope.indegratedForm.userPhone) {
                    if (isNaN(newValue)) {
                        $scope.indegratedForm.userPhone.$setValidity('required', false);
                    } else if (newValue.length > PHONE_MAX_LENGTH) {
                        $scope.indegratedForm.userPhone.$setValidity('required', false);
                    }
                }
            });
            $scope.$watch('phone', function (newValue) {
                if($scope.hasValidation)
                    {
                if ($scope.previewLeadForm && $scope.previewLeadForm.phone) {
                    setPhoneValidity($scope.previewLeadForm.phone, newValue);
                }
            }});

            $scope.$watch('cAgreeCheck', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.cAgreeCheck && $scope.isEuro);
            });
            var setPhoneValidity = function (fieldModel, newValue) {
                if (isNaN(newValue)) {
                    fieldModel.$setValidity('phone', false);
                } else if (newValue.length > PHONE_MAX_LENGTH) {
                    fieldModel.$setValidity('phone', false);
                } else {
                    fieldModel.$setValidity('phone', true);
                }
            }
            var leadInitiated = false;
            $scope.intiateLead = function () {
                if (!leadInitiated) {
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_initiated_lead_form",
                        event_data: {
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'bundle agenda',
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                    leadInitiated = true;
                }
            }

            $scope.submitBundleAgendaLead = function (agendaUrl, fetchFromDwnAgenda, isValidate, isFormSubmit) {
                isFormSubmit = (typeof isFormSubmit == 'undefined')?false:isFormSubmit;
                var userEmail = '';
                var userPhone = '';
                var userName = '';
                if (isValidate) {

                } else {
                    if ($scope.hasValidation) {
                    userEmail = $scope.previewLeadForm.email.$modelValue;
                    userPhone = $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue;
                    userName = $scope.previewLeadForm.email.$modelValue;
                    if ($scope.previewLeadForm.$invalid) {
                        if ($scope.previewLeadForm.email.$invalid) {
                            $scope.previewLeadForm.email.$setViewValue($scope.previewLeadForm.email.$viewValue);
                        }
                        if ($scope.previewLeadForm.phone.$invalid) {
                            $scope.previewLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                        }
                        return;
                    }
                    if (!$scope.cAgreeCheck) {
                        return;
                    }
                }}

                if(user_params.isEuro) {
                    if ($scope.cAgreeCheck) {
                        setCookie(user_params.OPTIN_COOKIE, 1, 90);
                    } else if(isFormSubmit || getCookieByName(user_params.OPTIN_COOKIE) != 1) {
                        setCookie(user_params.OPTIN_COOKIE, 0, 90);
                    }
                }



                ga.gaFireInteractiveEvents('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.bundle_name + ' || ' + 'bundle agenda');
                window.open($scope.submitAgendaUrl, '_blank');

                var optinSet = typeof getCookieByName(user_params.OPTIN_COOKIE) != 'undefined' ? true : false;
                var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                if(user_params.isEuro && !optin) {
                    $rootScope.showBundleAgenda = false;
                    $scope.hideAgendLeadPopup();
                    return;
                }
                if (fetchFromDwnAgenda === false || fetchFromDwnAgenda === null) {
                    webengage.onReady(function () {
                        var dwnAgendaCookieCIds = getCookieByName('_user_ld_info');
                        if ( (typeof dwnAgendaCookieCIds !== "undefined" && dwnAgendaCookieCIds) || ($rootScope.isLoggedIn)) {
                            var userInfo = [];
                            if(typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined'){
                                userInfo = webengage.state.getForever().uattr;
                                userEmail = userInfo.we_email;
                                userPhone = userInfo.we_phone;
                            }
                        }
                        var webEngageLeadParams = [];
                        if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                            webEngageLeadParams = webengage.state.getForever().uattr;
                        }
                        var eventData = {
                            'sl_lead_type': 'b2c',
                            'sl_site_module': 'bundle agenda',
                            'sl_user_email': userEmail,
                            'sl_user_phone': userPhone || '',
                            'sl_email_opt_in': true,
                            'sl_sms_opt_in': true
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_first_name'] !== "undefined" && webEngageLeadParams['we_first_name']) {
                            eventData.sl_user_first_name = webEngageLeadParams['we_first_name'];
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_last_name'] !== "undefined" && webEngageLeadParams['we_last_name']) {
                            eventData.sl_user_last_name = webEngageLeadParams['we_last_name'];
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_submitted_lead_form",
                            event_data: eventData,
                            common: "product",
                            user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                        });
                        var obj3 = {
                            name: userName,
                            email: userEmail,
                            phone: userPhone,
                            queryTxt: "Downloaded Bundle Agenda",
                            query: "Downloaded Bundle Agenda",
                            agreeToContact: $scope.cAgreeCheck,
                            queryTyp: 'bundle-agenda-popup',
                            bundleId: user_params.bundle_id,
                            bundleName: user_params.bundle_name
                        };
                        obj3['customerType'] = 'B2C';
                        obj3['leadTrainingType'] = 'Not Sure';
                        obj3['leadSourceString'] = document.URL;
                        obj3['tagName'] = 'bundle agenda';
                        obj3['leadSource'] = fetchUTMSource();
                        //obj3['type'] = 'bundle agenda';
                        obj3['b2cQueryType'] = 'bundle agenda';
                        obj3['productTypeId'] = user_params.productTypeId;
                        obj3['billingTypeId'] = user_params.billingTypeId;
                        //obj3['method'] = 'saveCallback';
                        obj3['GCLID'] = getGCLID();
                        obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                        obj3['sl_user_message'] = "Downloaded Bundle Agenda";
                        //obj3['save_bpr'] = 1;
                        obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));
                        var locatorCookie = getCookieByName('locatori9');
                        var locatorCookieObj = JSON.parse(locatorCookie);
                        obj3['countryId'] = locatorCookieObj.country_id;
                        obj3['countryName'] = locatorCookieObj.country_name.replace(/\+/g, ' ');
                        obj3['cityId'] = locatorCookieObj.city_id;
                        obj3['cityName'] = locatorCookieObj.name;

                        var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                        var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(obj3, webEngageLeadFormParams);
                        var applicationContentType = 'json';
                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                                .then(function (data) {
                                    if (data != null) {
                                        if (data.status == 200 && data.data.status == "success") {
                                            // setCookie('_cpruid', data.data.cpr_uid, 90);
                                            var dACId = 'b' + user_params.bundle_id;
                                            if (dwnAgendaCookieCIds) {
                                                var dwnAgendaCookieCIdArr = dwnAgendaCookieCIds.split(",");
                                                var bundle_id = 'b' + user_params.bundle_id;
                                                dwnAgendaCookieCIdArr.push(bundle_id);
                                                var dACId = dwnAgendaCookieCIdArr.join(",");
                                            }
                                            setCookie('_user_ld_info', dACId, 90);
                                            $rootScope.isPreviewLeadCreated = true;
                                        } else {
                                            $scope.popupStatusMsg = "There was some problem, please try again.";
                                        }
                                    }
                                    $rootScope.showBundleAgenda = false;
                                    $scope.hideAgendLeadPopup();
                                });
                    });

                }
             
            }

            $scope.hideAgendLeadPopup = function (status) {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_form_closed",
                    event_data: {
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'bundle agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                this.showBundleAgenda = status;
            }

            $scope.agreeCheck = function () {
                $scope.cAgreeCheck = !$scope.cAgreeCheck;
                $scope.isAagreeCheckDirty = true;
            }

            var setCookie = function (cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            }
            $scope.expandLearningPathDiv = function ($event) {
                var pageTitle = $event.target.getAttribute('data-page-title');
                if ($scope.learningPathExpand == false) {
                    $scope.learningPathExpand = true;
                    $scope.learningPathShowMoreLabel = 'Show Less';
                    var el = document.getElementsByClassName('learning-path-toggle'), i;
                    for (i = 0; i < el.length; ++i) {
                        el[i].classList.remove('hide');
                    }
                    if (document.querySelector('.bundle-course-index-3') !== null && document.querySelector('.bundle-course-index-3').classList.contains('bundle-course-blur-block')) {
                        document.querySelector('.bundle-course-index-3').classList.remove('bundle-course-blur-block');
                    }
                    $scope.gaShowMoreCourseInLP(pageTitle);
                } else {
                    $scope.learningPathExpand = false;
                    $scope.learningPathShowMoreLabel = 'Show All Courses';
                    var el = document.getElementsByClassName('learning-path-toggle'), i;
                    for (i = 0; i < el.length; ++i) {
                        el[i].classList.add('hide');
                    }
                    if (document.querySelector('.bundle-course-index-3') !== null) {
                        document.querySelector('.bundle-course-index-3').classList.add('bundle-course-blur-block');
                    }
                    $scope.gaShowLessCourseInLP(pageTitle);
                    document.getElementById('learn-box').scrollIntoView(true);
                    $event.stopPropagation();
                }
            };
            $scope.gaShowMoreCourseInLP = function (pageTitle) {
                ga.gaFireInteractiveEvents('SemBundleShowMoreCourseInLearningPath', user_params.user_id + ' || ' + document.URL + ' || ' + pageTitle);
            };
            $scope.gaShowLessCourseInLP = function (pageTitle) {
                ga.gaFireInteractiveEvents('SemBundleShowLessCourseInLearningPath', user_params.user_id + ' || ' + document.URL + ' || ' + pageTitle);
            };
            $scope.gaGdprOptInCheckbox=function(event){
                if (user_params.isEuro && event.target.checked){
                    var pGaKey="gdprOptinCheckboxChecked";
                    var pGaLabel= user_params.user_id + ' || ' + user_params.bundle_name + ' || ' + 'bundle agenda';
                     ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                }
            }

        }) /*------------- End : SemBundleController.js-----------*/ 

 /*------------- Begin : SemCoursePreviewController.js-----------*/ 

angular.module('Simplilearn')
        .controller('SemCoursePreviewController', function ($scope, CpService, $window, $compile, $http, $rootScope, $sce, $timeout, $cookies) {

            this.coursePreviewData = {};
            this.allCrsAccess = null;
            this.Math = window.Math;
            this.courseId;
            this.startAcc = 0;
            this.accConstructCheck = 0;
            this.courseIdArr = [];
            var myvshowCoursePreviewDivArr = [];
            this.showCoursePreviewDiv = [];
            this.viewMoreClicked = 0;
            this.strrr = '';
            this.bundleName = '';
            this.lecturePreview = 0;
            this.lectureData = null;
            this.hashUrl = '';
            $scope.isVideoFinishedLP = 0;
            this.videoWatched = false;
            this.activeClassLesson = "active_bg";
            $rootScope.showPreviewLeadStatus = false;
            $rootScope.singlePreviewVideoPlayed = false;
            $rootScope.goToVideoIndex='';
            $rootScope.initialFreeVideoUrl='';
            $rootScope.semVideoPlayListLeadStatus=false;
            $rootScope.semVideoIndexEuro=0;
            $rootScope.semVideoIndex=0;
            var self = this;

            $rootScope.$on("setStartAccordion", function () {
                self.setStartAccordion(0, 1);
            });

            $rootScope.$on("playFirstVideo", function (event, args) {
                var elearningId = args.elearningId;
                var lessons = args.lessons;
                var lessonObj = args.scoldId;
                var sectionId = args.sectionId;
                var isFromELearning = args.isFromELearning;
                var url = args.url;
                var videoType = args.videoType;
                var lesson = args.lessonTitle;
                var chapter = args.chapterName;
                self.hVLC(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter);
            });

            $scope.to_trusted = function (pHtml) {
                return $sce.trustAsHtml(pHtml);
            };

            this.closeTranscriptPopup = function () {
                this.courseLecturePageGa.LecturePage_transcript_popup();
                this.lectureData = null;
                this.lecturePreview = 0;
            }

            this.closeTranscriptPopupNoGa = function () {
                this.lectureData = null;
                this.lecturePreview = 0;
            }

            this.setBundleName = function (bundleName) {
                self.bundleName = bundleName;
            }

            this.setCourseId = function (courseId) {
                this.courseId = parseInt(courseId);
                CpService.setCurrentCourseId(courseId);
            }
            this.gFCPPT = function (courseName, lesson, chapter) {
                if (courseName != '')
                    user_params.course_name = courseName;
                user_params.lesson = lesson;
                user_params.chapter = '';
                if (typeof chapter != 'undefined' && chapter != '')
                    user_params.chapter = chapter;
                //this.courseLecturePageGa.Video_Click('introvideoclick', lesson);

            }
            var self = this;
            this.recalCalculateContentHeight = function ($event) {
                setTimeout(function () {
                    var el = document.getElementsByClassName("sem_page_tab_content")[0];
                    var viewMoreEl = document.getElementsByClassName("overly-more")[0];
                    if (el.offsetHeight > 500) {
                        if (viewMoreEl) {
                            viewMoreEl.classList.remove("hide");
                        }
                    } else {
                        viewMoreEl.classList.add("hide");
                    }
                }, 10);
            };
            this.chapterClick = function (lesson, $event) {
                var el = $event.currentTarget.parentElement;
                if (el.classList.contains(self.activeClassLesson)) {
                    el.classList.remove(self.activeClassLesson);
                } else {
                    var activeClass = document.getElementsByClassName(self.activeClassLesson)[0];
                    if (typeof activeClass !== "undefined") {
                        activeClass.classList.remove(self.activeClassLesson);
                    }
                    el.classList.add(self.activeClassLesson);
                }
                var classes = $event.currentTarget.children[0].getAttribute('class');
                var status = '';
                if (classes != '') {
                    classes = classes.split(' ');
                    if (classes.indexOf('plus') !== -1)
                        status = 'open';
                    if (classes.indexOf('minus') !== -1)
                        status = 'closed';
                }

                setTimeout(function () {
                    self.courseLecturePageGa.chapterClick(lesson, status);
                }, 200);

            }

            this.constructShowCoursePreviewDiv = function (index) {
                if (index == 0) {
                    myvshowCoursePreviewDivArr[index] = 1;
                } else {
                    myvshowCoursePreviewDivArr[index] = 0;
                }
                self.showCoursePreviewDiv = myvshowCoursePreviewDivArr;
            }

            this.updateShowCoursePReviewDivStatus = function (index) {

                if (self.showCoursePreviewDiv[index] == 1) {
                    self.showCoursePreviewDiv[index] = 0;
                } else {
                    self.showCoursePreviewDiv[index] = 1;
                }

                var len = self.showCoursePreviewDiv.length;
                for (var i = 0; i < len; i++) {
                    if (i != index)
                        self.showCoursePreviewDiv[i] = 0;
                }
            }


            this.scrollPageViewLess = function ($event) {
                var clickedObj = angular.element($event.target);
                var toScrollObj = angular.element(clickedObj).parent().parent();

                setTimeout(function () {

                    slideAction(toScrollObj[0]);
                }, 200);
            }

            var divHeight = function (ele) {
                var x = 0;
                while (ele) {
                    x += ele.offsetTop;
                    ele = ele.offsetParent;
                }
                return x;
            };

            var slideAction = function (elemObj) {
                var heightDiff = (divHeight(elemObj) - window.scrollY) - 40;
                if (heightDiff >= 150) {
                    window.scrollBy(0, 150);
                    setTimeout(function () {
                        slideAction(elemObj, heightDiff);
                    }, 10);
                } else if (150 >= heightDiff && heightDiff >= 100) {
                    window.scrollBy(0, 100);
                    setTimeout(function () {
                        slideAction(elemObj, heightDiff);
                    }, 10);
                } else if (100 >= heightDiff && heightDiff >= 50) {
                    window.scrollBy(0, 50);
                    setTimeout(function () {
                        slideAction(elemObj, heightDiff);
                    }, 10);
                } else {
                    window.scrollBy(0, (divHeight(elemObj) - window.scrollY) - 40);
                    return false;
                }
                return true;
            };

            this.removeLocalStorageData = function (courseId) {
                window.localStorage.removeItem("cp_data_" + courseId);
            }

            this.setStartAccordion = function (startAcc, accConstructCheck) {
                self.startAcc = startAcc;
                self.accConstructCheck = accConstructCheck;
            }

            $scope.$parent.$watch('bundlePreviewClicked', function (newVal) {
                if (newVal == 1) {
                    self.init_CpData($scope.$parent.courseId);
                    self.showCoursePreviewDiv = 1;
                } else {
                    self.showCoursePreviewDiv = 0;
                    self.allCrsAccess = null;
                    self.accConstructCheck = 0;
                }
            });

            this.init_CpData = function (courseId, courseName) {
                if (!courseId) {
                    return false;
                }
                if (courseName === undefined) {
                    courseName = '';
                }
                if (courseName != '')
                    user_params.course_name = courseName;
                if (window.localStorage.getItem("cp_data_" + courseId) === null) {
                    CpService.getCoursePreviewData(courseId).then(function (data) {
                        self.allCrsAccess = data;
                        window.localStorage["cp_data_" + courseId] = JSON.stringify(data);
                        setTimeout(function () {
                            self.accConstructCheck = 1;
                            window.scrollBy(0, 1);
                        }, 500);
                    });
                } else {
                    var stored_datas = JSON.parse(window.localStorage["cp_data_" + courseId]);
                    self.allCrsAccess = stored_datas;
                    setTimeout(function () {
                        self.accConstructCheck = 1;
                        window.scrollBy(0, 1);
                    }, 500);
                }
                CpService.setCurrentCourseId(courseId);

            };

            this.cpData = function (courseId) {
                if (document.readyState === 'complete') {
                    self.fetchCPData(courseId);
                } else {
                    window.addEventListener('load', self.fetchCPData(courseId));
                }
                CpService.setCurrentCourseId(courseId);
            };
            this.fetchCPData = function (courseId) {
                if (!courseId) {
                    return false;
                }
                $timeout(function () {
                    if (window.localStorage.getItem("cp_data_" + courseId) !== false && window.localStorage.getItem("cp_data_" + courseId) != null) {
                        var stored_datas = JSON.parse(window.localStorage["cp_data_" + courseId]);
                        if (stored_datas) {
                            if (stored_datas['content']) {
                                self.coursePreviewData[courseId] = stored_datas['content'];
                                if (stored_datas['content'] && stored_datas['content'].length > 0)
                                    $scope.$parent.coursePreview[courseId] = 1;
                                else
                                    $scope.$parent.coursePreview[courseId] = 0;
                                setTimeout(function () {
                                    self.accConstructCheck = 1;
                                    window.scrollBy(0, 1);
                                }, 500);
                            }
                        } else {
                            $scope.$parent.coursePreview[courseId] = 0;
                        }
                    } else if (courseId) {
                        self.getCoursePreviewData(courseId);
                    }
                }, 3000);
            };

            this.getCoursePreviewData = function (pCourseId) {
                $http.get(baseApiUrl + "?method=getCoursePreviewData",
                        {params: {
                                "course_id": pCourseId
                            }
                        })
                        .then(function (response) {
                            if (typeof response.data !== 'undefined' && response.data != 'null') {
                                self.coursePreviewData[pCourseId] = response.data.content;
                                $scope.$parent.coursePreview[pCourseId] = 1;
                                setTimeout(function () {
                                    self.accConstructCheck = 1;
                                    window.scrollBy(0, 1);
                                }, 500);
                            } else {
                                $scope.$parent.coursePreview[pCourseId] = 0;
                            }
                        });
            };

            this.hVLC = function (elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter) {
                if (typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                    $scope.currentPopupELearningType = isFromELearning;
                    $rootScope.showHideDivsLP(0, isFromELearning);
                }
                this.videoWatched = false;
                return handleVideoLinkClick(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter);
            };
            this.fvideoPlay = function (elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter,index) {
                this.videoWatched = false;
                var videoIndex = index ? (index -1) : 0;
                if (typeof $cookies.free_video_viewed =="undefined") {
                    $rootScope.initialFreeVideoUrl=url;
                   // console.log("Single Preview Video Not yet Set To True")
                }
                $rootScope.semVideoPlayListLeadStatus = false;
                self.goToPlaylistIndex(videoIndex,url);
            };
            this.goToPlaylistIndex = function(index,url){
                document.getElementById("sem-free-course-preview-popup").classList.remove("hide");
                var el =document.getElementsByClassName("sem-playlist-video");
                if(el.length){
                  for(var i=0;i<el.length;i++){
                      el[i].classList.remove("active");
                  }
                }
                el[index].classList.add("active");
                CpService.fshowPlalistPreview(index);
                var identifier = "playlist-elm-"+index;
                if(!$rootScope.isSemMobile && (!$rootScope.isSemIosDevice && !$rootScope.semTablet)){
                    $timeout(function() {
                       document.getElementById(identifier).scrollIntoView(true);
                }, 0);
                }
                //var semAgendaLeadSubmitted= getCookieByName('_semagenda');
                //var coursePreviewWatchLead= getCookieByName('_cpwlead');
               /* if(typeof semAgendaLeadSubmitted !=="undefined" && parseInt(semAgendaLeadSubmitted) && typeof coursePreviewWatchLead ==="undefined" && $rootScope.singlePreviewVideoPlayed === true && $rootScope.previewPopupVideoPlayed === false && parseInt(index)){
                        var cname = '_cpwlead';
                        var cvalue = 1;
                        var d = new Date();
                        d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                        var expires = "expires=" + d.toUTCString();
                        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                        if ($rootScope.isLoggedIn) {
                                CpService.coursePreviewWatch(0);
                            } else {
                                CpService.coursePreviewWatch(1);
                            }
                    console.log("Course Preview Lead Created Form Below :",$rootScope.isPreviewLeadCreated);
                }*/
            }
            this.fhVLC = function (elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter,index) {
                if (typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                    $scope.currentPopupELearningType = isFromELearning;
                    $rootScope.showHideDivsLP(0, isFromELearning);
                }
                this.videoWatched = false;
                $rootScope.semVideoPlayListLeadStatus = false;
                return fhandleVideoLinkClick(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter,index);
            };
            this.setPlaylistActiveVideo= function($event){
                var el =document.getElementsByClassName("sem-playlist-video");
                if(el.length){
                    for(var i=0;i<el.length;i++){
                        el[i].classList.remove("active");
                    }
                }
               $event.currentTarget.classList.add("active");
            };
            this.setPlaylistParams = function(elearningId,urlStr,videoType,courseId){
                CpService.setSemPlaylistParams(elearningId,urlStr,videoType,courseId);
            };
            var fhandleVideoLinkClick = function (elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter,index) {
                CpService.setBundleName(self.bundleName);
                var isMultipleVideo =1;
                return CpService.fhandleVideoLinkClickSem(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, $cookies[user_params.enterpriseCountCookieName], lesson, chapter,$cookies[user_params.OPTIN_COOKIE],isMultipleVideo,index);
            };

            var handleVideoLinkClick = function (elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, lesson, chapter) {
                CpService.setBundleName(self.bundleName);
                return CpService.handleVideoLinkClickSem(elearningId, lessons, lessonObj, sectionId, isFromELearning, url, videoType, $cookies[user_params.enterpriseCountCookieName], lesson, chapter,$cookies[user_params.OPTIN_COOKIE]);
            };

            this.hidePreview = function ($event) {
                if (typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                    $rootScope.showHideDivsLP(2, $scope.currentPopupELearningType);
                }
                if ($event)
                    $event.stopPropagation();
                return CpService.hidePreview();
            };

            this.getSectionIframeSrc = function (courseId) {

                return CpService.getIframeSrc(courseId);
            };

            this.showPreviewStatus = function (page) {
                return CpService.getShowPreviewStatus(self.courseId);
            };

            this.getIFrameDisplayStatus = function (courseId) {
                return CpService.getIFrameDisplayStatus(courseId);
            }

            this.isVideoFinished = function () {
                var videoFinished = CpService.isVideoFinished(self.courseId);
                if (videoFinished) {
                    $rootScope.showHideDivsLP(1, $scope.currentPopupELearningType);
                    if (!this.videoWatched) {
                        this.courseLecturePageGa.Video_watched();
                        this.videoWatched = true;
                    }
                }
                return videoFinished;
            };
            this.videoEnrollNow = function () {
                $timeout(function () {
                    var enrollDom = document.getElementById('sticky-enroll-btn');
                    if (enrollDom) {
                        if (enrollDom.getAttribute('data-type') == 'multi') {
                            CpService.hidePreview();
                        }
                        enrollDom.click();
                    } else {
                        CpService.hidePreview();
                        window.scrollBy(0, -5000);
                    }
                }, 0)
            }


            var lmsFunc = function () {

                if (window.addEventListener) {
                    //alert("1");
                    window.addEventListener("message",
                            function (e) {
                                var data;
                                // using try catch because for some cases data is not in valid json
                                if (typeof e.data != 'undefined') {
                                    try {
                                        data = JSON.parse(e.data);
                                    } catch (e) {
                                        data = {};
                                    }
                                    if (data.method == 'startTimer') {
                                        startTimer(data.timeLeft);
                                    } else if (data.method == 'changePreviewStatus') {
                                        changePreviewStatus();
                                    } else if (data.method == 'setTimeLeft') {
                                        setTimeLeft(data.timeLeft);
                                    } else if (data.method == 'callEnrollNow') {
                                        callEnrollNow();
                                    } else if (data.method == 'hidePreviewLoading') {
                                        hidePreviewLoading();
                                    } else if (data.method == 'showEnrollOverlay') {
                                        showEnrollOverlay();
                                    } else if (data.method == 'detectEnrollButton' && typeof $rootScope.lecturePage != 'undefined' && $rootScope.lecturePage == 1) {
                                        $rootScope.showHideDivsLP(1, $scope.currentPopupELearningType);
                                    }
                                }
                            },
                            false);

                }

            }();

            var callEnrollNow = function () {
                if (typeof $scope.cpg.selectedTrainingType !== 'undefined' && !!$scope.cpg.selectedTrainingType) {
                    //$scope.cpg.showTrainingType($scope.cpg.selectedTrainingType);
                }
                else {
                    if (gaPageCategory == '') {
                        //$scope.cpg.showTrainingType('osl');
                    } else {
                        window.scrollBy(0, -5000);
                    }
                }

                CpService.hidePreview();

                //$scope.$apply();   This was giving "inprog" error, so commenting out

                return true;
            };
            this.onEscape = function () {
                self.hidePreview();
            }

            this.lecturePopup = function ($event, chap_id, chapUrl) {
                $event.preventDefault();
                $event.stopPropagation();
                if (chap_id) {
                    this.helpers = new helpers();
                    var urlObj = this.helpers.makeValidApiUrl('lectureContent');
                    $http.get(urlObj.url + "&chap_id=" + chap_id,
                            {chap_id: chap_id, cache: urlObj.cached})
                            .success(function (data, status) {
                                if (data) {
                                    var result = angular.fromJson(data);
                                    self.lecturePreview = 1;
                                    self.lectureData = result;
                                    var elem = document.getElementsByClassName('popup-for-transcript');
                                    $compile(angular.element(elem).contents())($scope);
                                }
                            });

                }
            }


            var gaForLecturePage = function () {
                var ga = new gaEventsTracker();

                this.LecturePage_transcript_click_icon = function () {
                    ga.gaFireInteractiveEvents('LecturePage_transcript_click_icon');
                };
                this.chapterClick = function (chap_name, status) {
                    ga.gaFireInteractiveEvents('chapternameclick', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + chap_name + ' || ' + status);
                }
                this.LecturePage_transcript_popup = function (val) {
                    ga.gaFireInteractiveEvents('LecturePage_transcript_popup');
                };
                this.CoursePreview_LectPage_accordian_open = function (val) {
                    ga.gaFireInteractiveEvents('CoursePreview_LectPage_accordian_open', val);
                };
                this.Video_watched = function (argument) {
                    ga.gaFireInteractiveEvents('previewvideowatched', user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + user_params.chapter + ' || ' + user_params.lesson);
                }
                this.Video_Click = function (lesson) {
                    //ga.gaFireInteractiveEvents('introvideoclick', user_params.user_id + ' || ' + document.URL + ' || bundle course preview || '+lesson);
                }
            };
            this.courseLecturePageGa = new gaForLecturePage();


            /**
             * Bundle page cpv play button logic for head section
             */
            $scope.cpvHeadPlayButtons = {};
            $scope.cpvPlayButtons = {};
            $scope.initPlayButton = function (childObj, courseId, headIndex, index) {
                try {
                    if (!$scope.cpvHeadPlayButtons[courseId])
                        $scope.cpvHeadPlayButtons[courseId] = {};
                    if (!$scope.cpvPlayButtons[courseId])
                        $scope.cpvPlayButtons[courseId] = {};
                    if (!$scope.cpvPlayButtons[courseId][headIndex])
                        $scope.cpvPlayButtons[courseId][headIndex] = {};
                    $scope.cpvPlayButtons[courseId][headIndex][index] = 0;

                    for (var i in childObj.lessons) {
                        var lesson = childObj.lessons[i];
                        if (lesson.video_url && lesson.video_type == 'mp4') {
                            $scope.cpvHeadPlayButtons[courseId][headIndex] = 1;
                            $scope.cpvPlayButtons[courseId][headIndex][index] = 1;
                            break;
                        }
                    }

                } catch (e) {
                }
            }
        });






// This is to reset iframe src when popup is closed
if (typeof document.getElementById("fancybox-close") != 'undefined' && document.getElementById("fancybox-close") != null) {
    var timeleft = 0;
    var timerObj;
    var handler;
    var totaltime;

    document.getElementById("fancybox-close").addEventListener("click", function () {
        //console.log('closed');
        document.getElementById("sectionIframe").setAttribute("src", "");
        //var getvalue=document.getElementById("sectionIframe").getAttribute("src");
        //console.log('iframe src:'+getvalue);
    });


    /* if full view video is swf/third party, then to show enroll button below of the video */
    function showEnrollOverlay() {
        //console.log('show enrol button for swf video');
        document.getElementById("enroll_overlay").style.display = "block";
    }

    /* this is to hide ajax loading image */
    function hidePreviewLoading() {
        //$('div.showDiv').addClass('hidden_class');
        return true;
    }

    /* To display remaining time of the preview video */
    function setTimeLeft(leftTime) {
        //$('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.duration_min').html(secTotime(leftTime) +' remaining');
        return true;
    }

    /* This function will be called onclick of Enroll Now button on course preview popup window
     function callEnrollNow(){
     var w_id = $('div.calyender_date_selecter').find('div.calendar_list a.calyender_date_selecter_left:first').data('workshop_id');
     if(typeof w_id != 'undefined'){
     $("div.previewClick .workshop_enroll_btn[data-workshop_id='"+w_id+"']").trigger('click');
     }
     else{
     var acc_days = $('.pdp-access-days').find('a.access_lists_active').data('package_id');
     if(typeof acc_days == 'undefined')
     $('.add-to-cart').trigger('click');
     else
     $(".package_btn[data-accessdays='"+acc_days+"']").trigger('click');
     }

     return true;
     }
     */

    /* if course preview is expired when watching, this will change the play button icon to disabled */
    function changePreviewStatus() {
        /*var expiredTime = $('span.tooltip_info').data('total_view_time');
         $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.duration_min').removeClass('min_preview').addClass('expired_preview').html(expiredTime+' minute expired');
         $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.preview_eye').data('is_expired',1);
         $('li.pdp_preview_hover').find("a.video_anchor[data-sco_id='"+previewScoId+"']").find('span.preview_eye').removeClass().addClass('preview_eye eye_icon2');*/
        return true;
    }

    /* this is to monitor course preview remaining time */
    function startTimer(timeFromLms) {
        /*totaltime = timeFromLms;
         timerObj.html('Course preview');
         handler=setInterval("countDown()",1000);
         hidePreviewLoading();*/
        return true;
    }

    function countDown() {
        /*if(typeof totaltime != 'undefined'){
         timeleft = totaltime-1;
         if (timeleft < 0){
         timeleft = 0;
         window.clearInterval(handler);
         return false;
         }
         timerObj.html('Course preview');
         //timerObj.html('Time Remaining : ' + secTotime(timeleft));
         totaltime = timeleft;
         }*/
        return true;
    }
}

 /*------------- End : SemCoursePreviewController.js-----------*/ 

 /*------------- Begin : SemLandingPageCtrl.js-----------*/ 

angular.module('Simplilearn')
        .controller('SemLandingPageCtrl', function (YoutubeApiService, CpService, $scope, $http, LocService, $interval, $location, $rootScope, CorporateLeadService, $timeout, $compile, PostReqService, FormsAjax, $document, $window,$cookies){
            $scope.helpers = new helpers();
            $scope.forms_from_ajax = null;
            $scope.lvc_disc = 0;
            $scope.osl_disc = 0;
            $scope.lvc_price = 0;
            $scope.osl_price = 0;
            $scope.cls_price = 0;
            $scope.striked_lvc_price = 0;
            $scope.striked_osl_price = 0;
            $scope.striked_cls_price = 0;
            $scope.currentActiveTabber = '';
            $scope.desktopScreenMinResolution = 991;
            $scope.mobileMaxLandscapeResoulution = 768;
            $scope.desktopMaxResoulution = 1024;
            $scope.isViewBtnClick = false;
            $scope.isStickyEnabled = false;
            $scope.isTabberViewMoreExpanded = [];
            $rootScope.isSemMobile = false;
            $rootScope.templateId = 1;
            $rootScope.isSemMobileCourse = false;
            $scope.orientationChanged = false;
            $scope.innerWidth = document.body.clientWidth;
            $scope.isMobile = false; //initiate as false
            $scope.toolViewText = "View More";
            $rootScope.hideChatMobile = false;
            $rootScope.isPortraitView = false;
            $rootScope.showPreviewLeadStatus=false;
            $rootScope.previewPopupVideoPlayed=false;
            $rootScope.isSemIosDevice =false;
            $rootScope.semTablet=false;
            $rootScope.videoPreviewLeadSubmitted =false;
            $rootScope.isSemBundle = false;
            var PHONE_MAX_LENGTH = 15;
            //   var courseCircullumObject = (document.getElementById('sem-course-currcicullum-big-screen')) ? document.getElementById('sem-course-currcicullum-big-screen') : '';
            var semIosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
            if(semIosDeviceCheck){
                $rootScope.isSemIosDevice = true;
            }

            if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))){
                             if(!semIosDeviceCheck)
                             $rootScope.semTablet=true;

                        }
            window.addEventListener("orientationchange", function () {
                $rootScope.isSemMobile = false;
                $rootScope.isSemMobileCourse = false;
                $scope.orientationChanged = true;
                $rootScope.hideChatMobile = true;
                $scope.isMobile = false;
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
                    $scope.isMobile = true;
                if (Math.abs(window.orientation) === 90 || (typeof window.orientation === "undefined" && screen.width > $scope.desktopScreenMinResolution)) {
                    // Landscape
                    $rootScope.isPortraitView = false;
                    $rootScope.isSemMobile = false;
                    $scope.innerWidth = $scope.desktopMaxResoulution;
                    var iosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
                    var documentBodyClientWidth = document.body.clientWidth;
                    var screenWidth = screen.width;
                    if (!iosDeviceCheck && (documentBodyClientWidth < $scope.mobileMaxLandscapeResoulution || screenWidth < $scope.mobileMaxLandscapeResoulution) && navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i))
                    {
                        $rootScope.isSemMobile = true;
                        if (documentBodyClientWidth > screenWidth) {
                            $scope.innerWidth = screenWidth;
                        } else {
                            $scope.innerWidth = documentBodyClientWidth;
                        }
                    }

                } else {
                    // Portrait
                    $rootScope.isPortraitView = true;
                    $rootScope.isSemMobile = true;
                    var documentBodyClientWidth = document.body.clientWidth;
                    var screenWidth = screen.width;
                    if (documentBodyClientWidth > screenWidth) {
                        $scope.innerWidth = screenWidth;
                    } else {
                        $scope.innerWidth = documentBodyClientWidth;
                    }
                }
                if ($rootScope.templateId == 2) {
                    if ($rootScope.isSemMobile && $scope.innerWidth < $scope.desktopScreenMinResolution) {
                        $rootScope.isSemMobileCourse = true;
                    } else if (!$rootScope.isSemMobile && !$rootScope.isSemMobileCourse) {
                        if ((typeof document.getElementById('sem-course-currcicullum-big-screen') !== 'undefined' && document.getElementById('sem-course-currcicullum-big-screen') !== null)) {
                            document.getElementById('sem-course-currcicullum-big-screen-pr').appendChild(document.getElementById('sem-course-currcicullum-big-screen'));
                        }
                    }
                }
            }, false);
            this.init = function() {
              webengage.onReady(function (data) {
                WebTracking.eventReq.triggerEvent({
                  event_id : "sl_eng_product_page_viewed",
                  common : "product"
                });
              });
            }

            this.semPageType = function (pageType) {
                if ($rootScope.isSemMobile && $rootScope.templateId == 2 && pageType.toLowerCase() == 'mobilecourse') {
                    $rootScope.isSemMobileCourse = true;
                }
                if ($rootScope.isSemMobile && $rootScope.templateId == 3 && pageType.toLowerCase() == 'mobilecourse') {
                    $rootScope.isSemMobileCourse = true;
                }
            };
            this.setTemplateId = function (templateId) {
                $rootScope.templateId = templateId;
            };
            this.hidePreviewLead = function () {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_form_closed",
                    event_data: {
                      'sl_lead_button_text' : 'Preview',
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'course preview',
                      'sl_preview_chapter' : self.chapter || '',
                      'sl_preview_lesson' : self.lesson || '',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                $rootScope.showPreviewLeadStatus = false;
            };
            this.isSemMobilePage = function () {
                $rootScope.isSemMobile = false;
                $rootScope.hideChatMobile = true;
                $scope.isMobile = false;
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)
                        || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4)))
                    $scope.isMobile = true;
                if ($scope.isMobile) {
                    if (Math.abs(window.orientation) === 90 || (typeof window.orientation === "undefined" && $scope.innerWidth > $scope.desktopScreenMinResolution)) {
                        // Landscape
                        $rootScope.isSemMobile = false;
                        $scope.innerWidth = $scope.desktopMaxResoulution;
                        var iosDeviceCheck = /iPad|Tablet|iPod/.test(navigator.userAgent);
                        var documentBodyClientWidth = document.body.clientWidth;
                        var screenWidth = screen.width;
                        if (!iosDeviceCheck && (documentBodyClientWidth < $scope.mobileMaxLandscapeResoulution || screenWidth < $scope.mobileMaxLandscapeResoulution) && navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i))
                        {
                            $rootScope.isSemMobile = true;
                            if (documentBodyClientWidth > screenWidth) {
                                $scope.innerWidth = screenWidth;
                            } else {
                                $scope.innerWidth = documentBodyClientWidth;
                            }
                        }
                    } else {
                        // Portrait
                        $rootScope.isSemMobile = true;
                        $rootScope.isPortraitView = true;
                        var documentBodyClientWidth = document.body.clientWidth;
                        var screenWidth = screen.width;
                        if (documentBodyClientWidth > screenWidth) {
                            $scope.innerWidth = screenWidth;
                        } else {
                            $scope.innerWidth = documentBodyClientWidth;
                        }
                    }
                    if ($rootScope.templateId == 2 && $scope.innerWidth < $scope.desktopScreenMinResolution) {
                        $rootScope.isSemMobile = true;
                    }
                }
            };
            this.loadCourseCurriculum = function (source, destination) {
                if ($rootScope.isSemMobileCourse && $rootScope.isSemMobile) {
                    if ((typeof document.getElementById(source) !== 'undefined' && document.getElementById(source) !== null) && (typeof document.getElementById(destination) !== 'undefined') && document.getElementById(destination) !== null) {
                        document.getElementById(destination).appendChild(document.getElementById(source));
//                        $timeout(function () {
//                            document.getElementById(destination).appendChild(courseCircullumObject);
//                        }, 10);
                    }
                }
            };
            this.toggleAccordion = function ($event) {
                if ($rootScope.isSemMobileCourse && $rootScope.isSemMobile) {
                    var activeClass = "active";
                    var hiddenClass = "hidden-height";
                    if (typeof $event !== "undefined") {
                        var currentTarget = $event.currentTarget;
                        var currentTargetElm = currentTarget.getAttribute('data-tab');
                        if (currentTarget.classList.contains('sem-tab-list-mobile')) {
                            if (currentTarget.classList.contains('active')) {
                                currentTarget.classList.remove('active');
                            } else {
                                currentTarget.classList.add('active');
                            }
                        }
                    }
                }
            };
            this.toggleAccordionMobile = function ($event,elm) {
                var currentTarget = document.getElementsByClassName(elm)[0];
                if (currentTarget.classList.contains('active')) {
                    currentTarget.classList.remove('active');
                } else {
                    currentTarget.classList.add('active');
                }
                $event.stopPropagation();
            };
            this.toogleToolSection = function (source) {
                var childrens = document.getElementsByClassName(source);
                var parentCls = document.getElementsByClassName(source)[0];
                if (parentCls.classList.contains('mobile-collapse')) {
                    //Expand
                    for (var i = 0; i < childrens.length; i++) {
                        if (childrens[i].classList.contains('hide')) {
                            childrens[i].classList.remove('hide');
                        }
                    }
                    $scope.toolViewText = "View Less";
                    parentCls.classList.remove('mobile-collapse');
                    parentCls.classList.add('mobile-expand');
                } else if (parentCls.classList.contains('mobile-expand')) {
                    //Collapse
                    for (var i = 0; i < childrens.length; i++) {
                        childrens[i].classList.add('hide');
                    }
                    $scope.toolViewText = "View More";
                    parentCls.classList.remove('mobile-expand');
                    parentCls.classList.add('mobile-collapse');
                    document.getElementById('tool-list-container').scrollIntoView(true);
                }
                //document.getElementById('tool-list-container').scrollIntoView(true);
                $event.stopPropagation();
            };
            this.setHash = function (path) {
                $location.path(path);
                $scope.gCPCJ.gaFireEventsGeneric('coursestickyheader', user_params.course_name + ' || ' + path);
            };
            this.playFirstVideo = function (elearningId, lessons, scold, sectionId, isFromELearning, url, videoType, lessonTitle, chapterName) {
                var params = {elearningId: elearningId,
                    lessons: lessons,
                    scoldId: scold,
                    sectionId: sectionId,
                    isFromELearning: isFromELearning,
                    url: url,
                    videoType: videoType,
                    lessonTitle: lessonTitle,
                    chapterName: chapterName
                }
                $rootScope.$emit("playFirstVideo", params);
            };
            this.addRemoveClassInBody = function (val) {
                var class_name = 'popup_open_body';
                if (val == 1) {
                    //Add Class in Body
                    document.body.classList.add(class_name);
                } else {
                    //Remove Class in Body
                    document.body.classList.remove(class_name);
                }
            };

            this.reCalculateTabberView = function ($event, tabber) {
                var currentTarget = $event.currentTarget;
                if (typeof $scope.isTabberViewMoreExpanded[ tabber ] === 'undefined') {
                    var elementParentNode = document.getElementById(tabber).parentNode;
                    var viewMoreElement = elementParentNode.querySelector(".overly-more");
                    var semTabContentExist = elementParentNode.querySelector('.sem_page_tab_content');
                    var contentHeight = 0;
                    if (semTabContentExist.offsetHeight) {
                        contentHeight = parseInt(semTabContentExist.offsetHeight);
                        if (semTabContentExist && contentHeight < 500) {
                            if (viewMoreElement) {
                                viewMoreElement.classList.add("hide");
                                $scope.isTabberViewMoreExpanded[ tabber ] = true;
                            }
                        }
                    }
                }
            };
            this.setCurrentActiveTab = function () {
                $timeout(function () {
                    var parent = document.getElementById("sem-tab-list")
                    for (var i = 0; i < parent.children.length; i++) {
                        var children = parent.children[i];
                        if (children.classList.contains('active')) {
                            var identifier = children.getAttribute('data-tab');
                            $scope.currentActiveTabber = identifier;
                            document.getElementById(identifier).parentElement.classList.remove("hidden-height");
                        }
                    }
                }, 50);
            }
            $scope.breadcrumEvent = function ($event) {
                var gotoLink = ''
                if (typeof $event != 'undefined')
                    gotoLink = $event.target.parentNode.href;
                var ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('breadcrumclick', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
            }
            $scope.contactEnterpriseFormAjax = function () {
                var elem = document.getElementById('enterprise_form_ajax');
                if (elem !== undefined && elem !== null && elem.innerHTML === "") {
                    var all_forms = JSON.parse(user_params.forms_ajax_load);
                    var ent_form_json = JSON.stringify({'enterprise_form_ajax': all_forms['enterprise_form_ajax']});
                    FormsAjax.loadFormviaAjaxSL(ent_form_json, $scope);
                }

            }

            $scope.downloadAgendaUrlinit = function (agendaUrl) {
                $rootScope.submitCourseAgendaPopUp = agendaUrl;
            }

            this.openFirstTabberElement = function (elm) {
                if (typeof elm !== 'undefined' && typeof document.getElementsByClassName(elm) !== 'undefined') {
                    if (typeof document.getElementsByClassName(elm)[0].querySelectorAll('ul')[0] !== "undefined") {
                        var parent = document.getElementsByClassName(elm)[0].querySelectorAll('ul')[0];
                        if (parent.children[0].querySelectorAll('div')[0].style.height == "0px") {
                            parent.children[0].querySelectorAll('div')[0].classList.add('acc-active');
                            parent.children[0].querySelectorAll('div')[0].style.height = "auto";
                        }
                        for (var i = 1; i < parent.children.length; i++) {
                            if (parent.children[i].querySelectorAll('div')[0].style.height == "auto") {
                                parent.children[i].querySelectorAll('div')[0].classList.remove('acc-active');
                                parent.children[i].querySelectorAll('div')[0].style.height = "0px";
                            }
                        }
                    }
                    $scope.isTabberViewMoreExpanded = [];
                    this.tabberDisplayViewMoreBtn('faqs');
                }
            };

            this.setOslPriceCourse = function (price_osl) {
                $scope.osl_price = price_osl;
            }

            this.setLvcPriceCourse = function (price_lvc) {
                $scope.lvc_price = price_lvc;
            }

            this.setClsPriceCourse = function (price_cls) {
                $scope.cls_price = price_cls;
            }

            this.showDiscountValuesCourse = function (country_id) {

                var code = getCookieByName('aac');
                if (code) {
                    $http.get(baseApiUrl + "?method=getCouponsdicountDetails",
                            {params: {
                                    "aac": code,
                                    "sep_tt_dic_val": 1,
                                    "courseId": user_params.course_id,
                                    "country_id": country_id
                                }
                            })
                            .then(function (response) {
                                if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == 200) {
                                    var result = response.data;
                                    if (result.status == 'success') {
                                        $scope.lvc_disc = result.data.lvc;
                                        $scope.osl_disc = result.data.osl;
                                        $scope.cls_disc = result.data.cls;
                                    }
                                }
                            });

                }
            }
            this.getOSLPrice = function (currency) {
                $timeout(function () {
                    if ($scope.osl_disc) {
                        $scope.osl_coursePrice = $scope.osl_price - ($scope.osl_price * ($scope.osl_disc / 100));
                    } else {
                        $scope.osl_coursePrice = $scope.osl_price;
                    }
                    $scope.osl_coursePrice = "Starts from " + currency + Math.floor($scope.osl_coursePrice);
                }, 300);

            };
            this.getLVCPrice = function (currency) {
                $timeout(function () {
                    if ($scope.lvc_disc) {
                        $scope.lvc_coursePrice = $scope.lvc_price - ($scope.lvc_price * ($scope.lvc_disc / 100));
                    } else {
                        $scope.lvc_coursePrice = $scope.lvc_price;
                    }
                    $scope.lvc_coursePrice = "Starts from " + currency + Math.floor($scope.lvc_coursePrice);
                }, 300);

            };
            this.getClassRoomPrice = function (currency) {
                $timeout(function () {
                    if ($scope.cls_disc) {
                        $scope.cls_coursePrice = $scope.cls_price - ($scope.cls_price * ($scope.cls_disc / 100));
                    } else {
                        $scope.cls_coursePrice = $scope.cls_price;
                    }
                    $scope.cls_coursePrice = "Starts from " + currency + Math.floor($scope.cls_coursePrice);
                }, 300);

            };
            // auto coupon apply by url hash

            // Below code is not required in this Controller as we are already using autoApplyCoupon function
            //    var aacListener = $rootScope.$on('aac', function(event, value) {
            //        //New Coupon to be added in aac Cookie
            //        addCouponCodesToAACCookie(value);
            //
            //        aacListener();// stop listen
            //    });

            // scrollToHash
            var hashTagListener = $rootScope.$on('hashTag', function (event, scrollHash) {
                if (scrollHash) {
                    $timeout(function () {
                        var button = document.getElementsByClassName(scrollHash + '-button')[0];
                        if (button) {
                            button.click();

                            //Check for jump to section
                            var elem_content = document.getElementById(scrollHash + '-content');
                            if (elem_content) {
                                var alreadyOpen = elem_content.style.height == 'auto' ? 1 : 0;
                                if (!alreadyOpen) {
                                    button.click();
                                }
                            }
                        }
                    }, 300);
                }
                hashTagListener();// stop listen
            });

            $scope.popupTnC = true;
            $scope.popupName = '';
            $scope.popupEmail = '';
            $scope.popupUserPhone = '';
            var cpc = this;

            //For notify me Popup show on click. There is a controller for the same below.
            $scope.shownotifyLeadPopup = function () {
                $rootScope.shownotifyMePopUP = true;
            }

            this.loadFormsviaAjax = function () {
                $scope.form_data = null;
                FormsAjax.loadFormviaAjaxSL(user_params.forms_ajax_load, $scope);
            }

            $scope.submitCoursePagePopup = function () {
                if ($scope.coursePagePopup.$invalid) {
                    return $scope.helpers.FormNotValid($scope.coursePagePopup);
                }
                var obj3 = {
                    name: $scope.coursePagePopup.popupName.$viewValue,
                    email: $scope.coursePagePopup.popupEmail.$viewValue,
                    phone: $rootScope.popupPhoneCode + $scope.coursePagePopup.popupUserPhone.$viewValue,
                    queryTxt: "Details provided in course page popup",
                    query: "Details provided in course page popup",
                    agreeToContact: $scope.coursePagePopup.popupTnC.$viewValue,
                    queryTyp: 'course-page-popup',
                    courseId: user_params.course_id,
                    courseName: user_params.course_name
                };
                obj3['customerType'] = 'B2C';
                obj3['leadTrainingType'] = 'classroom';
                obj3['leadSourceString'] = document.URL;
                obj3['tagName'] = 'course-page-popup';
                obj3['leadSource'] = fetchUTMSource();
                obj3['type'] = 'course-page-popup';
                obj3['productTypeId'] = user_params.productTypeId;
                obj3['billingTypeId'] = user_params.billingTypeId;
                obj3['method'] = 'saveCallback';
                obj3['GCLID'] = getGCLID();
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function (data) {
                            if (data != null) {
                                if (data.data.status == 'Success') {
//                  $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                                    $scope.popupStatusMsg = "We have received your information. We will get back to you soon.";
                                    $scope.popupName = '';
                                    $scope.popupEmail = '';
                                    $scope.popupUserPhone = '';
                                    document.cookie = 'cppf=course-page-popup-filled';
                                } else {
                                    $scope.popupStatusMsg = "There was some problem, please try again.";
                                }
                            }
                            $scope.popupStatusDisplay = true;
                            $scope.popupStatus = data.data.status;
                            setTimeout(cpc.hideAllModal, 5000)
                        });
            }

            this.autoApplyCoupon = function () {
                if (!!$location.path()) {
                    var path = $location.path();
                    var hash = path.substr(path.indexOf('/') + 1).split('=');
                    if (hash[0] == 'aac') {
                        addCouponCodesToAACCookie(hash[1]);
                    }
                }
            }

            this.showScholarshipPopup = function () {
                if (!!$location.path()) {
                    var path = $location.path();
                    var hash = path.substr(path.indexOf('/') + 1).split('=');
                    if (hash[0] == 'schl' && countryCode == 'US') {
                        user_params.scholarship = hash[1];
                        $http.get(baseApiUrl + '?method=getScholarshipEnrollModal&schl=' + hash[1] + '&course_id=' + course_id).then(function (data) {
                            if (data.data == '"error"') {
                                return;
                            }
                            var popup = $compile(data.data.replace("\n", ""))($scope);
                            $scope.course_name_schl = user_params.course_name;
                            document.querySelector('#body_content').parentNode.appendChild(angular.element(popup)[0]);
                        });
                    }
                }
            }

            this.getWorkshopData = function (outcome, cityPage, https, showTxNote, titleString) {
                setTimeout(function () {
                    var paramsArr = {'course_id': user_params.course_id, 'cityPage': cityPage,
                        'https': https, 'showTxNote': showTxNote, 'titleString': titleString, cityId: locator_data.city_id,
                        'description': document.querySelector('meta[name=description]').getAttribute("content"), 'canonical': document.querySelector("link[rel='canonical']").getAttribute("href")};
                    //console.log(paramsArr);
                    PostReqService.sendPostRequest(baseUrlAjax + "course/course-workshops", paramsArr)
                            .then(function (response) {
                                if (response && typeof response.data != 'undefined') {
                                    angular.element(document.getElementById('course-workshops')).html(response.data);
                                    $compile(angular.element(document.getElementById('course-workshops')).contents())($scope);
                                }
                            });
                }, 4000);
            }

            this.scheduleLeadPopup = function () {
                setTimeout(function () {
                    var allmodals = document.getElementsByClassName('popup_country_wrapper');
                    for (var i = 0; i < allmodals.length; i++) {
                        if (allmodals[i].style.display == 'block') {
//            console.log('another popup is visible.');
                            return;
                        }
                    }
                    if (['input', 'select', 'textarea'].find(function (e) {
                        return e == document.activeElement.tagName.toLowerCase()
                    })) {
//          console.log('user filling up form.');
                        return;
                    }
                    if (document.cookie.indexOf("course-page-popup-filled") > -1) {
//          console.log(document.cookie.indexOf("course-page-popup-filled"),"User already filled up popup");
                        return;
                    }
                    $scope.popupTnC = true;
                    $rootScope.popupPhoneCode = '+' + $rootScope.currentCountry.phnCode + '-';
                    $scope.popupStatusDisplay = false;
                    $http.get(baseApiUrl + '?method=getCoursePageLeadPopup').then(function (data) {
                        var popup = $compile(data.data.replace("\n", ""))($scope);
                        document.querySelector('#body_content').parentNode.appendChild(angular.element(popup)[0]);
                    });
                }, 40000);
            }
            this.hideAllModal = function () {
                var modalObjs = document.getElementsByClassName('popup_country_wrapper');
                var modalLen = modalObjs.length;
                for (var i = 0; i < modalLen; i++) {
                    if (modalObjs[i].style.display == 'block') {
                        modalObjs[i].style.display = 'none';
                    }
                }
                var bodyObj = document.getElementsByTagName('body')[0];
                bodyObj.className = bodyObj.className.replace("body_fixed", "");
            }

            this.statesDisplayStatus = {'display': 'none'};
            this.selectedCountry = null;
            this.countries = null;
            this.changeLocCountries = null;
            this.selectChangeLocCountry = null;
            this.selectChangeLocCity = null;
            this.selectChangeLocCities = null;
            this.stickyTrainingTypeDisplay = {'display': 'none'};
            this.genericPageDisplayStatus = {'display': 'block'};
            this.topOslButtonDisplay = {'display': 'block'};
            this.topIltButtonDisplay = {'display': 'block'};
            this.leadFormDisplay = {'display': 'block'};
            this.lvcVideoDisplayStatus = {'display': 'none'};
            this.selectedTrainingType = "";
            this.corporateText = 'Interested in training your team?';
            $scope.stickyComponentDisplay = {'display': 'none'};
            $scope.headerSelectText = "Select Training Type";
            $scope.courseAdviseDirectorString = "course-advisor-wrapper";
            this.totalOffersCount = 0;
            this.olOffersCount = 0;
            this.clOffersCount = 0;
            this.setLetUsKnowTrigger = 0;
            $scope.bundlePreviewClicked = 0;
            this.isCrsVideoVisible = 0;
            this.videoState = '';

            this.isBatchInfoVisible = 0;
            this.classroomFormData = {};
            this.onlineFormData = {};
            this.lvcPassFormData = {};

            var seoExpDesc = '';
            var cityHashFlag = 0;
            var indexCityHashFlag = 0;
            var seoCityData = {};
            this.seoCurrentCity = '';
            //var showReviews = {};
            $scope.totalBatchesToShow = 5;

            this.abtVideos = {};
            this.vidStatus = {};
            this.randomCourseDir = 1;

            /** start - intro video **/
            this.introVideo = null;
            this.introPlayer = null;
            this.introVideoInit = function (type) {
                YoutubeApiService.onReady(function () {
                    var player;
                    var playerId = 'courseIntroVideo';
                    var playButtonId = 'play-button-intro-main';

                    var popupDom = document.querySelector('#courseIntroVideoPopup iframe');
                    if (!popupDom) {
                        return;
                    }
                    initIntroVideoPopupStatus = true;
                    popupDom.setAttribute('id', 'courseIntroVideoPopupIframe');
                    playerId = 'courseIntroVideoPopupIframe';
                    playButtonId = 'play-button-intro-popup';

                    player = new YT.Player(playerId, {
                        events: {
                            'onStateChange': onPlayerStateChange
                        }
                    });
                    self.introVideo = document.getElementById(playerId);
                    if (!self.introVideoOverlayStatus) {
                        self.playVideo(self.introVideo);
                    }
                    var videoState = null;
                    function onPlayerStateChange(event) {
                        self.introPlayer = event.target;
                        // Reply button
                        if (videoState == null) {
                            $timeout(function () {
                                var playButton = document.getElementById(playButtonId);
                                playButton.addEventListener("click", function () {
//                           console.log('Video play', self.introVideoOverlayStatus);
                                    self.introAnnotation = true;
                                    self.playVideo(self.introVideo);
                                    self.hideIntrovideoOverlay();
                                });
                            });
                        }
                        videoState = event;

                        // On complete
                        $timeout(function () {
                            // console.log(videoState.data);
                            if (videoState.data == YT.PlayerState.ENDED) {
                                //console.log("End");
                                self.stopVideo();
                                self.showIntrovideoOverlay(self.introVideo);
                                $scope.gCPCJ.gaFireOnCoursePage('introvideowatched', user_params.user_id + ' || ' + document.URL + ' || introvideo ||' + user_params.course_name);

                            }
                        }, 100);
                    }
                });
            }

            this.initIntroVideo = function () {
                self.introVideoInit('main');
            }

            this.initIntroVideoPopup = function () {
                self.introVideoInit('popup');
            }

            this.showCoursePreview = function (type) {
                type = type || 'base';
                ga = new gaEventsTracker();
                ga.gaFireInteractiveEvents('CoursePreviewIntrovideoClick', type);

                //self.hideIntrovideoOverlay();
                self.hideCrsVideo();
                //self.pauseVideo(self.introVideo);

                $timeout(function () {
                    var button = document.getElementsByClassName('course-preview-button')[0];
                    if (button) {
                        button.click();
                    }
                }, 0);
            }

            this.stopVideo = function (domObj) {
                //console.log('stopVideo')
                if (self.introPlayer && self.introPlayer.stopVideo) {
                    self.introPlayer.stopVideo();
                } else if (domObj && domObj.contentWindow) {
                    domObj.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
                }
            }

            this.pauseVideo = function (domObj) {
                //console.log('pauseVideo')
                if (self.introPlayer && self.introPlayer.pauseVideo) {
                    self.introPlayer.pauseVideo();
                } else if (domObj && domObj.contentWindow) {
                    domObj.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                }
            }

            this.playVideo = function (domObj) {
                //console.log('playVideo')
                if (self.introPlayer && self.introPlayer.playVideo) {
                    self.introPlayer.playVideo();
                } else if (domObj && domObj.contentWindow) {
                    domObj.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                }
            }

            this.introVideoOverlayStatus = false;
            this.showIntrovideoOverlay = function () {
                this.introVideoOverlayStatus = true;
                document.querySelector('#courseIntroVideoMobOverlay').style.display = 'block';
            }

            this.hideIntrovideoOverlay = function () {
                this.introVideoOverlayStatus = false;
                document.querySelector('#courseIntroVideoMobOverlay').style.display = 'none';
            }
            /** end - intro video **/

            this.playAbtCrs = function (type) {
                this.abtVideos[type] = 1;
                this.vidStatus[type] = '';
                if (type == 1) {
                    $scope.gCPCJ.gaFireEventsGeneric('pre_run');
                } else if (type == 2) {
                    $scope.gCPCJ.gaFireEventsGeneric('flexi_pass');
                }
            }
            this.hideAbtCrs = function (type) {
                this.abtVideos = {};
                this.vidStatus[type] = 'stop';
            }
            this.toggleBatchDisplay = function () {
                this.isBatchInfoVisible = (this.isBatchInfoVisible) ? 0 : 1;
            };
            this.showBatchDisplay = function () {
                this.isBatchInfoVisible = 1;
                $scope.gCPCJ.gaFireOnCoursePage('viewclassschedule', user_params.user_id + ' || ' + document.URL);
            };
            this.showMasterBatchDisplay = function (index, courseType) {
                this.isBatchInfoVisible = 1;
                var className = 'classroomDiv_' + index + '_' + courseType;
                if (document.getElementsByClassName(className)[0]) {
                    var parent = document.getElementsByClassName(className)[0];
                    var childSelectorClass = ".sem_master_" + index + '_' + courseType;
                    if (parent.querySelector(childSelectorClass).classList.contains('hide')) {
                        parent.querySelector(childSelectorClass).classList.remove('hide');
                        parent.querySelector(childSelectorClass).classList.add('active', 'ng-scope');
                    }
                }
                $scope.gCPCJ.gaFireOnCoursePage('viewclassschedule', user_params.user_id + ' || ' + document.URL);
            };
            this.gaSemCourseAdvisoryExplore = function (title) {
                $scope.gCPCJ.gaFireOnCoursePage('SemCourseAdvisoryExplore', user_params.user_id + ' || ' + document.URL + ' || ' + title);
            };
            this.gaOnFAQ = function (title) {
                $scope.gCPCJ.gaFireOnCoursePage('faqclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
            };
            this.gaOnBundleFAQ = function (courseName, title) {
                $scope.gCPCJ.gaFireOnCoursePage('faqclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + title);
            }

            this.gaOnCD = function (title) {
                $scope.gCPCJ.gaFireOnCoursePage('cdclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
            };
            this.gaOnEAC = function (title) {
                $scope.gCPCJ.gaFireOnCoursePage('eacclickedopen', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ' + title);
            };
            this.hideBatchDisplay = function (index, courseType) {
                this.isBatchInfoVisible = 0;
                if (typeof index !== "undefined" && typeof courseType !== "undefined") {
                    var className = "sem_master_" + index + "_" + courseType;
                    var parent = document.getElementsByClassName(className)[0];
                    if (parent && parent.classList.contains('active')) {
                        parent.classList.remove('active');
                        parent.classList.add('hide');
                    }
                }
            };

            this.initSeoCityExp = function (pSeoExpDesc, pCityHashFlag, pIndexCityHashFlag) {
                cityHashFlag = pCityHashFlag;
                indexCityHashFlag = pIndexCityHashFlag;
                seoExpDesc = pSeoExpDesc;
                seoCityData = JSON.parse(user_params.seoExpCityData);

                $scope.$watch(function () {
                    return location.hash
                }, function (value) {
                    if (value) {
                        value = value.substr(value.indexOf('/') + 1);
                    } else {
                        self.seoCurrentCity = '';
                    }

                    if (value && indexCityHashFlag && self.seoCurrentCity != value) {
                        var metaRobotsElem = document.querySelector('meta[name="robots"]');
                        if (metaRobotsElem) {
                            metaRobotsElem.setAttribute('content', 'index');
                        }
                    }

                    if (!value && indexCityHashFlag && self.seoCurrentCity != value) {
                        var metaRobotsElem = document.querySelector('meta[name="robots"]');
                        if (metaRobotsElem) {
                            metaRobotsElem.setAttribute('content', 'noindex');
                        }
                    }

                    if (value && cityHashFlag && self.seoCurrentCity != value) {
                        self.seoCurrentCity = value;
                        updateSeoCityData();
                        window.scroll(0, 0);
                    }
                });
            };

            var updateSeoCityData = function () {
                if (!(seoCityData[self.seoCurrentCity] && seoCityData[self.seoCurrentCity]['h1Tag'])) {
                    return;
                }

                self.h1Text = seoCityData[self.seoCurrentCity]['h1Tag'];
                self.aboutCityHead = 'About ' + seoCityData[self.seoCurrentCity]['city_name'];
                self.aboutCity = seoCityData[self.seoCurrentCity]['about_city'];

                var metaDescTag = new Array();
                metaDescTag.push(document.querySelector('meta[name=description]'));
                metaDescTag.push(document.querySelector('meta[property="og:description"]'));
                metaDescTag.push(document.querySelector('meta[name="twitter:description"]'));
                for (var i = 0; i < metaDescTag.length; i++) {
                    if (metaDescTag[i]) {
                        metaDescTag[i].setAttribute('content', seoCityData[self.seoCurrentCity]['metaDescription']);
                    }
                }

                var canonicalElem = document.querySelector('link[rel="canonical"]');
                if (canonicalElem) {
                    canonicalElem.setAttribute('href', seoCityData[self.seoCurrentCity]['canonical']);
                }

                var metaUrlTags = new Array();
                metaUrlTags.push(document.querySelector('meta[property="og:url"]'));
                metaUrlTags.push(document.querySelector('meta[name="twitter:url"]'));
                for (var i = 0; i < metaUrlTags.length; i++) {
                    if (metaUrlTags[i]) {
                        metaUrlTags[i].setAttribute('content', seoCityData[self.seoCurrentCity]['canonical']);
                    }
                }

                var titleElem = document.querySelector('title');
                if (titleElem) {
                    titleElem.innerHTML = seoCityData[self.seoCurrentCity]['metaTitle'];
                }

                var metaTitleTags = new Array();
                metaTitleTags.push(document.querySelector('meta[property="og:title"]'));
                metaTitleTags.push(document.querySelector('meta[name="twitter:title"]'));
                for (var i = 0; i < metaTitleTags.length; i++) {
                    if (metaTitleTags[i]) {
                        metaTitleTags[i].setAttribute('content', seoCityData[self.seoCurrentCity]['metaTitle']);
                    }
                }
            };

            var self = this;
            dwnldSchedule = function ($event, startDate, endDate, countryId, courseId) {
                $scope.$apply(function () {
                    self.downloadSchedule($event, startDate, endDate, countryId, courseId);
                });
            }
            this.downloadSchedule = function ($event, startDate, endDate, countryId, courseId) {
                $event.preventDefault();
                $scope.gCPCJ.gaFireOnCoursePage('downloadschedule', user_params.user_id + ' || ' + document.URL);
                $http.get(baseApiUrl + '?method=getWorkshopScheduleCsv', {params: {startDate: startDate, endDate: endDate, countryId: countryId, courseId: courseId, 'isPdf': 1}})
                        .success(function (data) {
                            if (data == null || typeof data.message == 'undefined') {
                                window.location = baseApiUrl + '?method=getWorkshopScheduleCsv&startDate=' + startDate + '&endDate=' + endDate + '&countryId=' + countryId + '&courseId=' + courseId + '&isPdf=1';
                            } else {
                                this.downloadScheduleErr = data.message;
                            }
                        })
                        .error(function () {
                            this.downloadScheduleErr = "Some error occurred. Please try again later.";
                        });
            };

            this.submitClassroomForm = function (pCourseId, pWorkshopId, pTrainingType) {
                var pageSource = window.location.href;
                this.classroomFormData = {"itemId": pCourseId, "batchId": pWorkshopId, 'trainingTypeId': pTrainingType, 'pageSource': pageSource};
            };

            this.submitOnlineForm = function (pCourseId, pAccessDays, pTrainingType) {
                var pageSource = window.location.href;
                this.onlineFormData = {"itemId": pCourseId, "accessDays": pAccessDays, 'trainingTypeId': pTrainingType, 'pageSource': pageSource};
            };

            this.submitLvcPassForm = function (pCourseId, pAccessDays, pTrainingType) {
                var pageSource = window.location.href;
                this.lvcPassFormData = {"itemId": pCourseId, "accessDays": pAccessDays, 'trainingTypeId': pTrainingType, 'pageSource': pageSource};
            };
            this.submitOnlineBundleForm = function (pCourseId, pAccessDays, pTrainingType) {
                var pageSource = window.location.href;
                this.onlineFormData = {"itemId": pCourseId, "accessDays": pAccessDays, 'trainingTypeId': pTrainingType, 'pageSource': pageSource};
            };
            var displayAllBundleCoursesFlag = 0;
            this.bundleCourseCount = null;

            var reviewExpandStateStruct = {};


            $scope.$watch('stickyComponentDisplay', function (newVal) {
                if (newVal.display == 'none') {
                    self.stickyTrainingTypeDisplay = {'display': 'none'};
                }
            });


            this.setLetUsKnowFormOpen = function () {
                this.setLetUsKnowTrigger = 1;
                if ($rootScope.convSuccMsg) {
                    $rootScope.adjustDivHeight = {'height': '440px'};
                }
                $rootScope.convSuccMsg = 0;
            }

            this.init_getLocationData = function () {
                if (typeof coursePageLocationData !== 'undefined') {
                    self.changeLocCountries = coursePageLocationData;
                    //self.setChangeLocCountry(self.changeLocCountries[0]);
                    var countryListLength = self.changeLocCountries.length;
                    //console.log(self.changeLocCountries);
                    var locatorCookie = getCookieByName('locatori9');
                    var locatorCookieObj = JSON.parse(locatorCookie);
                    var locCountryId = locatorCookieObj.country_id;
                    for (var i = 0; i < countryListLength; i++) {
                        var cid = self.changeLocCountries[i].id;
                        cid = cid.substring(cid.indexOf('-') + 1);
                        if (cid == locCountryId) {
                            self.selectChangeLocCountry = self.changeLocCountries[i];
                            self.setChangeLocCountry();
                        }
                    }
                }
            };

            this.hiddenBatchesCount = 0;
            this.batchesCountSpan = true;
            this.toggleBatchClass = "view";
            this.classroomTrainingTypeStyle = {'display': 'block'};
            this.lvcTrainingTypeStyle = {'display': 'block'};
            this.classroomDisplay = 1;
            this.lvcDisplay = 1;
            this.slectedClassroomButton = {'display': 'none'};
            this.classroomButton = {'display': 'block'};
            this.slectedOnlineButton = {'display': 'none'};
            this.onlineButton = {'display': 'block'};
            this.classroomButtonBkgnd = "inactive";
            this.onlineButtonBkgnd = "inactive";

            this.filterCheckClasses = "remember_me selected_img";

            this.classroomStatus = {'show': false, 'batchCountShow': false, 'showAll': false};
            this.lvcStatus = {'show': false, 'batchCountShow': false, 'showAll': false};

            $scope.setReviewExpandState = function (pId, pVal) {
                reviewExpandStateStruct[pId] = pVal;
            };

            $scope.getReviewExpandState = function (pId) {
                if (typeof reviewExpandStateStruct[pId] === 'undefined') {
                    reviewExpandStateStruct[pId] = 0;
                }
                return reviewExpandStateStruct[pId];


            };

            this.getCountryModalStatus = function () {
                return LocService.getChangeCountryModalStatus();
            };

            this.setCountryModalStatus = function (statusVal, $event) {
                this.changeLocCityInvalid = false;
                this.changeLocCountryInvalid = false;
                LocService.setChangeCountryModalStatus(statusVal);
                $rootScope.toggleModalDisplay('choose_loc_pop', statusVal, $event);
                var timerId = $interval(function () {
                    if (self.countries !== null) {
                        setSelectedCountry();
                        $interval.cancel(timerId);
                    }
                }, 100);
            };

            var setSelectedCountry = function () {
                var currentCountry = LocService.getCurrentCountry();

                if (self.selectedCountry === null && currentCountry !== null) {
                    for (var prop in self.countries) {
                        if (self.countries[prop]['id'] == currentCountry.id) {
                            self.selectedCountry = self.countries[prop];
                            break;
                        }
                    }
                }

                if (self.selectedCountry === null) {
                    self.selectedCountry = self.countries[0];
                }
                self.selectChangeLocCountry = self.selectedCountry;
                self.setChangeLocCountry();
                //self.setChangeLocCountry(self.selectedCountry);
            };

            this.toggleCountryList = function ($event) {
                $event.preventDefault();
                if (LocService.showCountryList.display == 'block')
                    LocService.showCountryList.display = 'none';
                else
                    LocService.showCountryList.display = 'block';
                LocService.showCityList.display = 'none';
            }

            this.toggleCityList = function ($event) {
                $event.preventDefault();
                if (LocService.showCityList.display == 'block')
                    LocService.showCityList.display = 'none';
                else
                    LocService.showCityList.display = 'block';
                LocService.showCountryList.display = 'none';
            }

            this.countryListDisplay = LocService.showCountryList;
            this.cityListDisplay = LocService.showCityList;

            this.setChangeLocCountry = function () {
                var citiesData;
                var countryObj = self.selectChangeLocCountry;
                if (typeof countryObj != 'undefined' && countryObj != null) {
                    self.changeLocCountryInvalid = false;
                    if (typeof countryObj.cities[0] == 'undefined') {
                        citiesData = {"0": {"id": countryObj.cities['id'], "name": countryObj.cities['name'], "course_id": countryObj.cities['course_id']}};
                    } else {
                        citiesData = countryObj.cities;
                    }

                } else {
                    citiesData = {"0": {"id": "", "name": "Select City", "course_id": ""}};
                }
                self.changeLocCityInvalid = false;
                self.selectChangeLocCities = citiesData;
                self.selectChangeLocCity = {"id": '', "name": 'Select City', "course_id": ''};

                LocService.showCountryList.display = 'none';

            }

            this.changeLocCityInvalid = false;
            this.changeLocCountryInvalid = false;
            this.changeLocation = function (currentCountry, currentCity) {
                if (self.selectChangeLocCountry == null) {
                    self.changeLocCountryInvalid = true;
                    return false;
                } else if (self.selectChangeLocCity == null || typeof self.selectChangeLocCity.id == 'undefined' || self.selectChangeLocCity.id == '' || self.selectChangeLocCity.id == null) {
                    self.changeLocCityInvalid = true;
                    return false;
                }

                $scope.gCPCJ.gaFireOnCoursePageChangeCitySuccess(currentCountry + '-' + currentCity, self.selectChangeLocCountry.name + '-' + self.selectChangeLocCity.name);
                var href = window.location.pathname;
                href = href + "?cityId=" + self.selectChangeLocCity.id + '&redirect=pdpPage';
                var ua = navigator.userAgent.toLowerCase();
                if (isIpad != 0 || (ua.indexOf('safari') != -1 && ua.indexOf('chrome') == -1)) { //Remove redirection in case of safari and ipad
                    href = href.replace('&redirect=pdpPage', '');
                }
                if (location.hash) {
                    href = href + location.hash;
                }
                window.location.href = href;
            }

            this.showAllCities = function (stateObj) {
                self.allCities = stateObj.cities;
            }

            this.changeCityLoc = function (cityObj) {
                self.locFormData = {"countryId": this.selectedCountry.id, "cityId": cityObj.id, "cityName": cityObj.name};
                //LocService.changeLocCity(cityObj);
            }

            this.toggleStickyTrainingTypeSelect = function () {
                if (self.stickyTrainingTypeDisplay.display == 'none') {
                    self.stickyTrainingTypeDisplay = {'display': 'block'};
                    setTimeout(function () {
                        document.getElementsByClassName("dropdown_sticky_tr_a")[0].focus();
                    }, 200);
                }
                else
                    self.stickyTrainingTypeDisplay = {'display': 'none'};
            }

            this.displayAllBundleCourses = function () {
                return displayAllBundleCoursesFlag;
            };

            this.toggleBundleCourseList = function () {
                if (displayAllBundleCoursesFlag === 1) {
                    displayAllBundleCoursesFlag = 0;
                    //window.scrollTo(0, 400);
                }
                else {
                    displayAllBundleCoursesFlag = 1;
                }
            };

            this.showCrsVideo = function () {
                this.isCrsVideoVisible = 1;
                this.videoState = '';
                self.initIntroVideo();
                $scope.gCPCJ.gaFireOnCoursePage('introvideoclick', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name);
            };

            this.hideCrsVideo = function ($event) {
                if (typeof $event != 'undefined')
                    $event.stopPropagation();
                this.isCrsVideoVisible = 0;
                this.videoState = 'stop';
                $scope.gCPCJ.gaFireOnCoursePage('introvideoclosed', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name);
            };

            self.setCorporateLeadFormStatus = function (pStatus) {
                CorporateLeadService.setLeadFormStatus(pStatus);
            };

            var gaClassForCoursePage = function () {

                var ga = new gaEventsTracker();
                //gaFireOnCityTrainingPage
                this.gFOCTP = function (fromCity, cityToGo) {
                    var currentPageType = this.gaGetCurrentPageType();
                    var string = fromCity + ' || ' + cityToGo;
                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericcitytraining', string);
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcitytraining', string);
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlinecitytraining', string);
                    }
                }

                this.gaFireOnCoursePage = function (cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                }

                this.gaFireOnCourseIntro = function (location) {
                    var currentPageType = this.gaGetCurrentPageType();

                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericcourseintro', location);
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcourseintro', location);
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlinecourseintro', location);
                    }
                }


                this.gaFireGenCoursePageTrainSelect = function (switchToTraining) {
                    var label = '';
                    if (switchToTraining == 'ilt') {
                        label = 'classroom';
                    } else if (switchToTraining == 'osl') {
                        label = 'osl';
                    }

                    var currentPageType = this.gaGetCurrentPageType();

                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenerictrain', label);
                    } else if (currentPageType == 'classroom') {
                        if (switchToTraining == 'osl') {
                            ga.gaFireInteractiveEvents('coursepageclassroomtrain');
                        }
                    } else if (currentPageType == 'online') {
                        if (switchToTraining == 'ilt') {
                            ga.gaFireInteractiveEvents('coursepageonlinetrain');
                        }
                    }
                }

                this.gaGetCurrentPageType = function () {
                    var path = $location.path();
                    path = path.substr(path.indexOf('/') + 1);
                    var returnType = 'generic';
                    if (path == 'ilt') {
                        returnType = 'classroom';
                    } else if (path == 'osl') {
                        returnType = 'online';
                    }
                    return returnType;
                }

                this.gaFireCourseAgendaClick = function () {
                    ga.gaFireInteractiveEvents('leadformclicked', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || course agenda');
                }

                this.gaFireEnrollClick = function (type) {
                    ga.gaFireInteractiveEvents(type, user_params.user_id + ' || ' + document.URL);
                    if(typeof type != 'undefined' && type == 'enroll_online') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_osl",
                            common: "product"
                        });
                    }
                    if (typeof type != 'undefined' && type == 'enroll_lvc') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_lvc",
                            common: "product"
                        });
                    }
                    if (typeof type != 'undefined' && type == 'enroll_classroom') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_classroom",
                            common: "product"
                        });
                    }
                }

                this.gaFireCoursePageQuerySubmit = function () {
                    var currentPageType = this.gaGetCurrentPageType();
                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericqueryformsubmit');
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomqueryformsubmit');
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlinequeryformsubmit');
                    }
                }
                //gaFireCoursePagePreviewTry
                this.gFCPPT = function (lesson) {
                    var currentPageType = this.gaGetCurrentPageType();
                    // ga.gaFireInteractiveEvents('leadformclicked',user_params.user_id + ' || ' + document.URL + ' || course preview || '+user_params.course_name + ' || '+lesson + ' || '+currentPageType);
                }

                this.gaFireOnCoursePageViewOtherTrain = function (currentLocation, selectedLocation) {
                    var currentPageType = this.gaGetCurrentPageType();

                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericviewothertrain');
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomviewothertrain');
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlineviewothertrain');
                    }
                }

                this.gaFireOnCourseEnroll = function () {
                    var currentPageType = this.gaGetCurrentPageType();
                    if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomenroll');
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlineenroll');
                    }
                }

                this.intiateLeadFPT = function (btnText) {
                  WebTracking.eventReq.triggerEvent({
                      event_id : "sl_lead_module_initiated",
                      event_data: {
                        'sl_lead_button_text' : btnText || '',
                        'sl_lead_type' : 'b2c',
                        'sl_site_module' : 'fpt-paper-cold',
                      },
                      common : "product",
                      user_attributes: ['sl_lead_type']
                  });
                }

                this.gaFireFPTClick = function ($event) {
                    ga.gaFireInteractiveEvents('fpt_link_course', user_params.user_id + ' || ' + document.URL + ' || ' + $event.target.href);
                }

                this.gaFireProgramAlsoViewedSection = function (gotoLink) {
                    ga.gaFireInteractiveEvents('peopleAlsoViewedSectionClicked', user_params.user_id + ' || ' + document.URL + ' || ' + gotoLink);
                }


                this.gaFireOnCourseConvenientTry = function () {
                    ga.gaFireInteractiveEvents('coursepageconvenienttry');
                }

                this.gaFireOnCourseConvenientSubmit = function () {
                    ga.gaFireInteractiveEvents('coursepageconvenientsubmit');
                }

                this.gaFireOnCoursePageChangeCityTry = function () {
                    ga.gaFireInteractiveEvents('coursepageiltchangecitytry');
                }

                this.gaFireOnCoursePageChangeCitySuccess = function (currentLocation, selectedLocation) {
                    ga.gaFireInteractiveEvents('coursepageiltchangecitysuccess', currentLocation + ' || ' + selectedLocation);
                }

                this.gaFireOnCoursePageCorporateTry = function () {
                    var currentPageType = this.gaGetCurrentPageType();

                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericcorporatetry');
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcorporatetry');
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlinecorporatetry');
                    }
                };

                this.gaFireOnCoursePageCorporateSuccess = function () {
                    var currentPageType = this.gaGetCurrentPageType();

                    if (currentPageType == 'generic') {
                        ga.gaFireInteractiveEvents('coursepagegenericcorporatesuccess');
                    } else if (currentPageType == 'classroom') {
                        ga.gaFireInteractiveEvents('coursepageclassroomcorporatesuccess');
                    } else if (currentPageType == 'online') {
                        ga.gaFireInteractiveEvents('coursepageonlinecorporatesuccess');
                    }
                };

                this.gaFireEventsGeneric = function (pGaKey, pGaLabel) {
                    ga.gaFireInteractiveEvents(pGaKey, user_params.user_id + ' || ' + document.URL + ' || ' + pGaLabel);
                };

                this.gaOnloadPageType = function (type, name) {
                    if (type === 'oneTime') {
                        ga.gaFireInteractiveEvents('onloadBundlePageType', name);
                    } else if (type === 'subscription') {
                        ga.gaFireInteractiveEvents('onloadSubsPageType', name);
                    }
                }

                this.gaOnEnroll = function () {
                    ga.gaFireInteractiveEvents('enrollBundle', user_params.user_id + ' || ' + document.URL);
                    var trainingType = user_params.sl_product_training_type || '';
                    if(trainingType == 'osl') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_osl",
                            common: "product"
                        });
                    }
                    if(trainingType == 'lvc') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_lvc",
                            common: "product"
                        });
                    }
                    if(trainingType == 'classroom') {
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_pay_enroll_button_clicked_classroom",
                            common: "product"
                        });
                    }
                }

                this.gaBuyThisItem = function (type, name) {
                    if (type === 'oneTime') {
                        ga.gaFireInteractiveEvents('buyThisBundle', name);
                    } else if (type === 'subscription') {
                        ga.gaFireInteractiveEvents('startFreeTrail', name);
                    }
                }

                this.gaSemCoursePageTabViewMoreClick = function (courseName, tabName) {
                    ga.gaFireInteractiveEvents('SemCoursePageTabViewMoreClick', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + tabName);
                }

                this.gaSemCoursePageTabClick = function (courseName, tabName) {
                    ga.gaFireInteractiveEvents('SemCoursePageTabClick', user_params.user_id + ' || ' + document.URL + ' || ' + courseName + ' || ' + tabName);
                }

                this.gaSemTestimonialSliderClick = function (courseName) {
                    ga.gaFireInteractiveEvents('SemCourseTestimonialClick', user_params.user_id + ' || ' + document.URL + ' || ' + courseName);
                }
                this.gaSemTestimonialReadMore = function (courseName) {
                    ga.gaFireInteractiveEvents('SemCourseTestimonialReadMore', user_params.user_id + ' || ' + document.URL + ' || ' + courseName);
                }
                this.gaGdprOptInCheckbox = function($event,cname,sitemodule) {
                if (isEuro && $event.target.checked){
                    var pGaKey="gdprOptinCheckboxChecked";
                    var pGaLabel= user_params.user_id + ' || ' + cname + ' || ' + sitemodule;
                    ga.gaFireInteractiveEvents(pGaKey, pGaLabel);
                }
            };
            };

            $scope.gCPCJ = new gaClassForCoursePage();

            this.testimonialSliderClick = function (courseName) {
                $scope.gCPCJ.gaSemTestimonialSliderClick(courseName);
            };
            this.testimonialReadMore = function (courseName) {
                $scope.gCPCJ.gaSemTestimonialReadMore(courseName);
            };
            this.setCourseDir = function () {
                var courseDirs = document.getElementsByClassName('course-directors-div'),
                        countCourseDirs = courseDirs.length;
                var randomNum = this.getRandomInt(1, countCourseDirs);
                this.randomCourseDir = randomNum;
            }
            this.getCourseDir = function () {
                return this.randomCourseDir;
            }

            this.getRandomInt = function (min, max) {
                return Math.floor(Math.random() * max) + min;
            }
            this.disMarketoFrm = 0;
            this.showMarketoForm = function (val, event, type) {
                if (typeof event != 'undefined' && event) {
                    if (event.target.classList.contains('popup_country_wrapper')) {
                    } else {
                        return;
                    }
                }
                this.disMarketoFrm = val;
                var label = user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || ';
                if (val == 1) {
                    if (type == 'course')
                        label += 'B2b_query_course_page';
                    else
                        label += 'B2b_query_course_page';
                    $scope.gCPCJ.gaFireOnCoursePage('leadformclicked', label);
                }
            };

            this.pricingRangeLearnersModal = 0;
            this.showPricingRangeLearners = function (val, event) {
                this.pricingRangeLearnersModal = val;
                if (val == 1) {
                    $scope.gCPCJ.gaFireOnCoursePage('Cp_LearnersRangePricing_OSL_Modal_Open', user_params.course_name + ' || ' + document.URL);
                }
            };
            this.pricingRangeLvcModal = 0;
            this.showPricingRangeLvc = function (val, event) {
                this.pricingRangeLvcModal = val;
                if (val == 1) {
                    $scope.gCPCJ.gaFireOnCoursePage('Cp_LearnersRangePricing_LVC_Modal_Open', user_params.course_name + ' || ' + document.URL);
                }
            };
            this.addRemoveClassInBody = function (val) {
                var class_name = 'popup_open_body';
                if (val == 1) {
                    //Add Class in Body
                    document.body.classList.add(class_name);
                } else {
                    //Remove Class in Body
                    document.body.classList.remove(class_name);
                }
            };
            //Tabber Toggling
            this.toggleTabber = function ($event) {
                var activeClass = "active";
                var hiddenClass = "hidden-height";
                var currentTarget = $event.currentTarget;
                var parent = currentTarget.parentElement;
                for (var i = 0; i < parent.children.length; i++) {
                    var children = parent.children[i];
                    if (children.classList.contains(activeClass) && !children.isEqualNode(currentTarget)) {
                        var identifier = children.getAttribute('data-tab');
                        children.classList.remove(activeClass);
                        document.getElementById(identifier).parentElement.classList.add(hiddenClass);
                    }
                    else if (children.isEqualNode(currentTarget)) {
                        var identifier = children.getAttribute('data-tab');
                        currentTarget.classList.add(activeClass);
                        $scope.currentActiveTabber = identifier;
                        if (document.getElementById(identifier).parentElement.classList.contains(hiddenClass)) {
                            document.getElementById(identifier).parentElement.classList.remove(hiddenClass);
                        }
                        checkIFStickyEnabled(parent, identifier);
                        this.checkFirstLessonExpanded(identifier);
                        this.tabberDisplayViewMoreBtn(identifier);
                    }
                }
            };
            var checkIFStickyEnabled = function (el, scrollToEl) {
                if (el.classList.contains('sticky-sem-menu')) {
                    scrollToElement(scrollToEl);
                }
                return;
            };
            this.checkFirstLessonExpanded = function (identifier) {
                var el = document.getElementById(identifier).querySelector(".course-preview-accord  > li > .accord-head > a");
                if (el) {
                    if (el.classList.contains("expand")) {
                        $rootScope.$emit("setStartAccordion", {startAcc: 0, accConstructCheck: 1});
                    }
                }
            };
            this.expandTabberContentView = function ($event) {
                $event.preventDefault();
                var viewMoreClass = 'sem-info-height';
                var currentTarget = $event.currentTarget;
                var parent = currentTarget.parentElement;
                if (parent.classList.contains(viewMoreClass)) {
                    parent.classList.remove(viewMoreClass);
                    currentTarget.classList.add('hide');
                    //displayStickyTabberMenu();
                }
            };

            this.tabberDisplayViewMoreBtn = function (identifier) {
                var contentHeight = 0;
                var elementParentNode = document.getElementById(identifier).parentNode;
                elementParentNode.classList.add("sem-info-height");
                var viewMoreElement = elementParentNode.querySelector(".overly-more");
                var semTabContentExist = elementParentNode.querySelector('.sem_page_tab_content');
                if (semTabContentExist.offsetHeight) {
                    contentHeight = parseInt(semTabContentExist.offsetHeight);
                }
                if (semTabContentExist && contentHeight > 500) {
                    if (viewMoreElement) {
                        viewMoreElement.classList.remove("hide");
                    }
                } else {
                    viewMoreElement.classList.add("hide");
                }
            };

            $document.bind('scroll', function ($event) {
                $timeout(function () {
                    var scrollPos = (document.documentElement.scrollTop || document.body.scrollTop);
                    var tabberParentId = 'sem-tabber-section';
                    var tabberContainerElement = document.getElementById($scope.currentActiveTabber);
                    var tabberContainerTopPos = divHeight(tabberContainerElement);
                    var tabberContainerBottomPos = tabberContainerElement.getBoundingClientRect().bottom;
                    var tabberParentBottomElement = document.getElementById(tabberParentId);
                    var tabberParentBottomPos = tabberParentBottomElement.getBoundingClientRect().bottom + 50;
                    //var tabberContainerScrollHeight = tabberContainerElement.getBoundingClientRect().height;
                    var tabberContainerScrollHeight = tabberContainerElement.scrollHeight
                    var tabberClassName = "sem-tab-list";
                    var tabberStickyClass = "sticky-sem-menu";
                    var tabberParentElement = document.getElementsByClassName(tabberClassName)[0];
                    tabberParentElement.classList.remove('hide');
                    var viewMoreElement = tabberContainerElement.parentNode.querySelector(".overly-more");
                    //console.log("Tabber Height" + tabberContainerScrollHeight + " Scroll Height" + scrollPos + " Is Clicked:" + $scope.isViewBtnClick + " Bottom : " + tabberContainerBottomPos);
                    if (scrollPos >= tabberContainerTopPos) {
                        tabberParentElement.classList.add(tabberStickyClass);

                    } else if (scrollPos < tabberContainerTopPos) {
                        if (tabberParentElement.classList.contains(tabberStickyClass)) {
                            tabberParentElement.classList.remove(tabberStickyClass);
                        }
                    }
                    if ((tabberParentBottomPos <= 100)) {
                        if (tabberParentElement.classList.contains(tabberStickyClass)) {
                            tabberParentElement.classList.add('hide');
                            tabberParentElement.classList.remove(tabberStickyClass);
                        }
                    }
                }, 10);
            });

            var divHeight = function (ele) {
                var x = 0;
                while (ele) {
                    x += ele.offsetTop;
                    ele = ele.offsetParent;
                }
                return x;
            };
            var displayStickyTabberMenu = function () {
                var tabberClassName = "sem-tab-list";
                var tabberStickyClass = "sticky-sem-menu";
                var tabberParentElement = document.getElementsByClassName(tabberClassName)[0];
                tabberParentElement.classList.add(tabberStickyClass);
            };

            var scrollToElement = function (element) {
                if ($scope.isMobile) {
                    var el = document.getElementById('sem-tabber-section');
                    var tabberClassName = "sem-tab-list";
                    var tabberStickyClass = "sticky-sem-menu";
                    var tabberParentElement = document.getElementsByClassName(tabberClassName)[0];
                    tabberParentElement.classList.remove(tabberStickyClass);
                    el.scrollIntoView(true, {behavior: "smooth"});
                }
                else {
                    var el = document.getElementById(element);
                    // var yPos = el.getClientRects()[0].top;
                    var yScroll = window.scrollY;
                    var interval = setInterval(function () {
                        yScroll -= 100;
                        window.scroll(0, yScroll);
                        if (el.getClientRects()[0].top >= 0) {
                            clearInterval(interval);
                        }
                    }, 20);
                }
            };

            $scope.scrollToElm = function (eID) {
                if ($rootScope.isSemMobile && $rootScope.isSemMobileCourse && eID == "course-training-type") {
                    eID = 'course-training-type-cl';
                }
                var startY = currentYPosition();
                var stopY = elmYPosition(eID);
                var distance = stopY > startY ? stopY - startY : startY - stopY;
                if (distance < 100) {
                    scrollTo(0, stopY);
                    return;
                }
                var speed = Math.round(distance / 30);
                if (speed >= 20)
                    speed = 20;
                var step = Math.round(distance / 25);
                var leapY = stopY > startY ? startY + step : startY - step;
                var timer = 0;
                leapY = leapY + 5;
                if (stopY > startY) {
                    for (var i = startY; i < stopY; i += step) {
                        setTimeout("window.scrollTo(0, " + leapY + ")", timer * speed);
                        leapY += step;
                        if (leapY > stopY)
                            leapY = stopY;
                        timer++;
                    }
                    return;
                }
                for (var i = startY; i > stopY; i -= step) {
                    leapY = leapY - 10;
                    setTimeout("window.scrollTo(0, " + leapY + ")", timer * speed);
                    leapY -= step;
                    if (leapY < stopY)
                        leapY = stopY;
                    timer++;
                }

                function currentYPosition() {
                    // Firefox, Chrome, Opera, Safari
                    if (self.pageYOffset)
                        return self.pageYOffset;
                    // Internet Explorer 6 - standards mode
                    if (document.documentElement && document.documentElement.scrollTop)
                        return document.documentElement.scrollTop;
                    // Internet Explorer 6, 7 and 8
                    if (document.body.scrollTop)
                        return document.body.scrollTop;
                    return 0;
                }

                function elmYPosition(eID) {
                    var elm = document.getElementById(eID);
                    var y = elm.offsetTop;
                    var node = elm;
                    while (node.offsetParent && node.offsetParent != document.body) {
                        node = node.offsetParent;
                        y += node.offsetTop;
                    }
                    return y;
                }

            };
            //Template ---3
            this.displayCoursePreviewPopUp = function(event){
                event.preventDefault();
                $rootScope.previewPopupVideoPlayed = true;
                document.getElementById("sem-free-course-preview-popup").classList.remove("hide");
                document.body.classList.add("popup_open_body");
                var el =document.getElementsByClassName("sem-playlist-video");
                if(el.length){
                    for(var i=0;i<el.length;i++){
                        el[i].classList.remove("active");
                    }
                }
                el[0].classList.add("active");
                CpService.fshowPlalistPreview();
            }
            this.closeCoursePreviewPopUp = function(event){
                event.preventDefault();
                CpService.hidePreview();
                if(typeof jwplayer != 'undefined' && jwplayer != null){
                  jwplayer().remove();
                }
                $rootScope.showPreviewLeadStatus = false;
                document.getElementById("sem-free-course-preview-popup").classList.add("hide");
                document.body.classList.remove("popup_open_body");
                if($rootScope.goToVideoIndex !=='undefined' && $rootScope.goToVideoIndex !=='' && $rootScope.goToVideoIndex > 0 && $rootScope.singlePreviewVideoPlayed === false){
                    //console.log("Single Video Played");
                    $rootScope.singlePreviewVideoPlayed =true;
                    //$cookies.free_video_viewed = $rootScope.goToVideoIndex;
                    var cname = 'free_video_viewed';
                    var cvalue = $rootScope.goToVideoIndex;
                    var d = new Date();
                    d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                    var expires = "expires=" + d.toUTCString();
                    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                 }
            }
            this.submitCourseAgendaPopUp = function (agendaUrl, btnText) {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_module_initiated",
                    event_data: {
                      'sl_lead_button_text' : btnText || '',
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'course agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                var agendaCookie = getCookieByName('_cagnd54345');
                if(agendaCookie){
                    window.open(agendaUrl,'_blank');
                }else{
                    $scope.showCourseAgenda = true;
                }
            }
            this.downloadCurriculum=function($event){
               $event.preventDefault();
               var el =document.getElementsByClassName("sem-download-course-curriculum")[0];
               if(el){
                   $timeout(function () {
                        el.click();
                    }, 0);
               }
            }
        })
        .controller('CoursePageClassroomCtrl', function ($scope, $timeout) {
            $scope.cityFilter = false;
            $scope.version = new Date().getTime();
            $scope.filterBatch = [];

            // Object equal check
            var isEquivalent = function (a, b) {
                var aProps = Object.getOwnPropertyNames(a);
                var bProps = Object.getOwnPropertyNames(b);
                if (aProps.length != bProps.length) {
                    return false;
                }
                for (var i = 0; i < aProps.length; i++) {
                    var propName = aProps[i];
                    if (a[propName] !== b[propName]) {
                        return false;
                    }
                }
                return true;
            }

            $scope.initClass = function (cityPageId) {
                $scope.filterBatch = $scope.batches;
                $timeout(function () {
                    if (cityPageId) {
                        $scope.city = cityPageId;
                    } else {
                        // Set default city
                        var locatorCookie = getCookieByName('locatori9');
                        var locatorCookieObj = JSON.parse(locatorCookie);
                        var cityId = locatorCookieObj.default_city_id_new || null;
                        if (locatorCookie) {
                            var userCityId = locatorCookieObj.city_id;
                            if ($scope.cityList) {
                                for (ci in $scope.cityList) {
                                    if (userCityId == $scope.cityList[ci].id) {
                                        cityId = userCityId;
                                    }
                                }
                            }
                        }

                        var cityClassFlag = false;
                        if (cityId) {
                            if ($scope.cityList) {
                                for (ci in $scope.cityList) {
                                    if (cityId == $scope.cityList[ci].id) {
                                        cityClassFlag = true;
                                    }
                                }
                            }
                        }

                        if (cityClassFlag) {
                            $scope.city = cityId;
                        } else {
                            $scope.city = Object.keys($scope.cityList)[0];
                        }
                    }
                }, 100);
            }

            $scope.$watch('city', function (newValue, oldValue) {
                var filterBatch = [];
                if (newValue) {
                    for (i in $scope.batches) {
                        var batch = $scope.batches[i];
                        if (batch && batch.city_id == $scope.city) {
                            filterBatch.push(batch);
                        }
                    }
                } else {
                    filterBatch = $scope.batches;
                }

                // Re render carousal
                if (!isEquivalent(filterBatch, $scope.filterBatch)) {
                    angular.element(document.querySelectorAll('#classroom-carousal .c_list_item')).remove();
                    $timeout(function () {
                        $scope.filterBatch = filterBatch;
                        $scope.trigger = new Date().getTime();
                    }, 10);
                }
            });


        })

        .controller('NoWorkshopFoundController', function ($scope, $rootScope, PostReqService) {
            var PHONE_MAX_LENGTH = 15;
            $scope.formSubmittedStyle = {'display': 'none'};
            $scope.queryAgree = 1;
            $scope.helpers = new helpers();
            $scope.queryFormDivStyle = {'display': 'block'};
            $scope.querySuccessDivStyle = {'display': 'none'};
            $scope.queryAgree = 1;

            $scope.agreeQueryForm = function ($event) {
                //$event.preventDefault();
                $scope.agreeClicked = 1;
                if ($scope.queryAgree == 1)
                    $scope.queryAgree = 0;//@review should use null
                else
                    $scope.queryAgree = 1;
                //@review should use return statement
            }

            $scope.submitNoWorkshopForm = function (form, dataArr) {
                if (form.$invalid) {
                    $scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
                    $scope.queryStatusClass = "error_msg hidden";
                    if ($scope.queryAgree == 0 && $scope.agreeClicked == 1) {
                        return false;
                    }
                    return $scope.helpers.FormNotValid(form);
                } else if ($scope.queryAgree == 0 && $scope.agreeClicked == 1) {
                    return false;
                }

                var paramsArr = {name: $scope.queryName, email: $scope.queryEmail, phone: $rootScope.queryPhoneCode + $scope.queryPhone, queryTxt: $scope.queryTxt, query: $scope.queryTxt, agreeToContact: $scope.queryAgree, queryTyp: 'no_workshop_found', agreeToRcvUpdate: 0, batchDate: ''};

                var obj3 = {};
                for (var attrname in paramsArr) {
                    obj3[attrname] = paramsArr[attrname];
                }
                for (var attrname in dataArr) {
                    obj3[attrname] = dataArr[attrname];
                }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);
                obj3['countryId'] = locatorCookieObj.country_id;
                obj3['countryName'] = $scope.currentCountry.name;
                obj3['cityId'] = locatorCookieObj.city_id;
                obj3['cityName'] = locatorCookieObj.name;
                obj3['method'] = 'saveNoWorkshopFoundData';
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function (response) {
                            var data = response.data;
                            if (data.status == "Success") {
                                var gaEventObj = new gaEventsTracker();
                                gaEventObj.gaFireOnCoursePageNoWorkshopFormSubmit();
                                obj3['customerType'] = 'B2C';
                                obj3['leadTrainingType'] = 'classroom';
                                obj3['leadSourceString'] = document.URL;
                                obj3['tagName'] = 'WorkshopNotAvailable';
                                obj3['leadSource'] = fetchUTMSource();
                                obj3['type'] = 'no_workshop';
                                obj3['productTypeId'] = user_params.productTypeId;
                                obj3['billingTypeId'] = user_params.billingTypeId;
                                obj3['method'] = 'saveCallback';
                                obj3['GCLID'] = getGCLID();
                                PostReqService.sendPostRequest(baseApiUrlNocache, obj3).then(function (data) {
                                    if (data != null) {
                                        if (data.data.status == 'Success') {
                                            setUpDataLayer('leadCapture', 'noWorkshopFound', {'leadId': data.data.result.key});
                                            $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                                            $scope.queryFormDivStyle = {'display': 'none'};
                                            $scope.querySuccessDivStyle = {'display': 'block'};
                                            $scope.queryTxt = "";
                                            $scope.queryName = "";
                                            $scope.queryEmail = "";
                                            $scope.queryPhone = "";
                                        } else if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                            $scope.queryStatusMsg = data.data.msg;
                                        }
                                    } else {
                                        $scope.queryStatusMsg = data.data.msg;
                                    }
                                });
                            } else {
                                $scope.queryStatusMsg = "Some error occurred. Please try again later."
                                $scope.queryStatusClass = "error_msg";
                            }
                        });
            }
            $scope.$watch('queryPhone', function (newValue) {
                if (isNaN(newValue)) {
                    $scope.noWorkshopForm.queryPhone.$setValidity('required', false);
                } else if (newValue.length > PHONE_MAX_LENGTH) {
                    $scope.noWorkshopForm.queryPhone.$setValidity('required', false);
                }

            });



        })
        .controller('ConvenientScheduleController', function ($scope, LocService, $rootScope, PostReqService) {
            $scope.formSubmittedStyle = {'display': 'none'};

            $scope.helpers = new helpers();
            $scope.queryFormDivStyle = {'display': 'block'};
            $scope.querySuccessDivStyle = {'display': 'none'};
            $scope.agreeEmailClicked = 1;
            $scope.agreePhnClicked = 1;
            $scope.emailAgreeCheck = 1;
            $scope.phnAgreeCheck = 1;

            $scope.personName = '';
            $scope.personEmail = '';
            $scope.personPhone = '';
            $scope.batchDate = '';
            $scope.$watch(function () {
                return $rootScope.resetMsgs;
            }, function (newVal) {
                if (newVal == 1) {
                    $scope.queryStatusMsg = ""
                    $scope.queryStatusClass = "";
                }
            });

            var validateDate = function (testdate) {
                var date_regex = /^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(20)\d{2}$/;
                return date_regex.test(testdate);
            }


            $scope.setUpdatesAgreeCheck = function ($event) {
                //$event.preventDefault();
                $scope.agreeClicked = 1;
                if ($scope.emailAgreeCheck == 1)
                    $scope.emailAgreeCheck = 0;//@review should use null
                else
                    $scope.emailAgreeCheck = 1;
                //@review should use return statement
            }

            $scope.setPhnAgreeCheck = function ($event) {
                //$event.preventDefault();
                if ($scope.phnAgreeCheck == 1)
                    $scope.phnAgreeCheck = 0;//@review should use null
                else
                    $scope.phnAgreeCheck = 1;
                //@review should use return statement
            }

            $scope.$watch('batchDate', function (newVal) {
                if (validateDate($scope.batchDate) == false) {
                    $scope.convschedForm.batchDate.$invalid = true;
                } else {
                    $scope.convschedForm.batchDate.$invalid = false;
                }
            });

            $scope.$watch(
                    function () {
                        if (typeof $scope.cpg != 'undefined' && typeof $scope.cpg.setLetUsKnowTrigger != 'undefined') {
                            return $scope.cpg.setLetUsKnowTrigger;
                        } else {
                            return false;
                        }
                    }, function (newVal) {
                if (newVal) {
                    LocService.getCountryData().then(function (data) {
                        $scope.countryDataStatic = data;
                    });
                }
            });


            $scope.submitConvenientScheduleForm = function (form, dataArr) {
                if (form.$invalid) {
                    $scope.queryStatusMsg = "Oops! Please ensure all fields are valid."
                    $scope.queryStatusClass = "error hidden";
                    $rootScope.adjustDivHeight = {'height': '470px'};
                    return $scope.helpers.FormNotValid(form);
                } else if ($scope.emailAgreeCheck == 0 && $scope.agreeClicked == 1) {
                    return false;
                } else if (validateDate($scope.batchDate) == false) {
                    return false;
                }

                var paramsArr = {name: $scope.personName, email: $scope.personEmail, phone: $rootScope.queryPhoneCode + $scope.personPhone, batchDate: $scope.batchDate, agreeToContact: $scope.phnAgreeCheck, agreeToRcvUpdate: $scope.emailAgreeCheck, queryTyp: 'no_convenient_sch'};
                $scope.gCPCJ.gaFireOnCourseConvenientSubmit();
                var obj3 = {};
                for (var attrname in paramsArr) {
                    obj3[attrname] = paramsArr[attrname];
                }
                for (var attrname in dataArr) {
                    obj3[attrname] = dataArr[attrname];
                }
                var locatorCookie = getCookieByName('locatori9');
                var locatorCookieObj = JSON.parse(locatorCookie);

                obj3['countryId'] = locatorCookieObj.country_id;
                obj3['countryName'] = $scope.currentCountry.name;
                obj3['cityId'] = locatorCookieObj.city_id;
                obj3['cityName'] = locatorCookieObj.name;
                obj3['method'] = 'saveNoWorkshopFoundData';
                $rootScope.resetMsgs = 0;
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function (response) {
                            var data = response.data;
                            if (data.status == "Success") {
                                obj3['customerType'] = 'B2C';
                                obj3['leadTrainingType'] = 'classroom';
                                obj3['leadSourceString'] = document.URL;
                                obj3['tagName'] = 'schedule';
                                obj3['leadSource'] = fetchUTMSource();
                                obj3['type'] = 'schedule';
                                obj3['productTypeId'] = user_params.productTypeId;
                                obj3['billingTypeId'] = user_params.billingTypeId;
                                obj3['method'] = 'saveCallback';
                                obj3['GCLID'] = getGCLID();
                                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                                        .then(function (data) {
                                            if (data != null) {
                                                if (data.data.status == 'Success') {
                                                    setUpDataLayer('leadCapture', 'noWorkshopFound', {'leadId': data.data.result.key});
                                                    $rootScope.gaCommonLeadCaptures.gaFireLeadCapture('leadcaptureworkshopnotavail');
                                                    form.$setPristine();
                                                    $scope.queryStatusMsg = "Your details has been successfully submitted. Our customer support team will get in touch with you soon."
                                                    $scope.queryStatusClass = "success_text";
                                                    $rootScope.convSuccMsg = 1;
                                                    $scope.personName = "";
                                                    $scope.personEmail = "";
                                                    $scope.personPhone = "";
                                                    $scope.batchDate = "";
                                                    $rootScope.convSuccMsg = 1;
                                                    $rootScope.adjustDivHeight = {'height': '215px'};
                                                } else if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                                    $scope.queryStatusMsg = data.data.msg;
                                                }
                                            } else {
                                                if (typeof data.data.msg != 'undefined' && data.data.msg != '') {
                                                    $scope.queryStatusMsg = data.data.msg;
                                                }
                                            }
                                        });
                            } else {
                                $scope.queryStatusMsg = "Some error occurred. Please try again later."
                                $scope.queryStatusClass = "error";
                            }
                        });
            }


        })

        .controller('CourseAgendaCtrl', function (LocService, $scope, $rootScope, PostReqService, $cookies, $timeout, LeadService) {
            self = this;
            $rootScope.showCourseAgenda = false;
            $scope.isAagreeCheckDirty = false;
            $scope.cAgreeCheck = false;
            $scope.submitAgendaUrl = '';
            $scope.isEuro = user_params.isEuro;
            $scope.hasValidation = true;
            var PHONE_MAX_LENGTH = 15;
            $scope.submitCourseAgendaPopUp = function (agendaUrl, btnText) {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_module_initiated",
                    event_data: {
                      'sl_lead_button_text' : btnText || '',
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'course agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                agendaUrl = $rootScope.submitCourseAgendaPopUp;
                $scope.submitAgendaUrl = agendaUrl;
               // var agendaCookie = getCookieByName('_cpruid');
                
                var agendaCookie = getCookieByName('_user_ld_info');
                var agendaLeadCreated = false;
                if (typeof agendaCookie !== "undefined") {
                    var courseId = user_params.course_id;
                    courseId = 'c' + courseId;
                    var cookieCourseIds = agendaCookie.split(',');
                    if (cookieCourseIds.indexOf(courseId) !== -1) {
                        agendaLeadCreated = true;
                    }
                }
                
                
                
                if(!$scope.isEuro){
                  if(!$rootScope.isLoggedIn && ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')) {
                      if(agendaCookie){
                          $scope.submitAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,true);
                      }else{
                          $rootScope.showCourseAgenda = true;
                      }
                  }else{
                      if(agendaCookie){
                          $scope.submitAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,true);
                      }else{
                          if($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')
                              $scope.submitAgendaLead($scope.submitAgendaUrl,false,true);
                          else
                              window.open($scope.submitAgendaUrl,'_blank');
                      }
                  }
                }
                // if country is euro and not b2b portal
                if($scope.isEuro && ($cookies[user_params.enterpriseCountCookieName] == undefined || $cookies[user_params.enterpriseCountCookieName] == '')) {
                    var optinSet = typeof $cookies[user_params.OPTIN_COOKIE] != 'undefined' ? true:false;
                    var optin = $cookies[user_params.OPTIN_COOKIE] == 1 ? true : false;
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if(!agendaCookie && !optinSet){
                        $rootScope.showCourseAgenda = true;
                        //if course preview cookie is set and user has opted in to create lead
                        //then show course preview and create lead
                    } else if(optin == true && agendaCookie) {
                        $scope.submitAgendaLead($scope.submitAgendaUrl,agendaLeadCreated,true);
                        window.open($scope.submitAgendaUrl,'_blank');
                    } else {
                        window.open($scope.submitAgendaUrl,'_blank');
                    }
                  }
            }

            this.previewLeadForm = {
                phone: {error: 'Please enter a valid phone number'},
                email: {error: 'Please enter a valid email'},
                cAgreeCheck: {error: 'Please accept the agreement'}
            };
            $scope.submitAgendaLead = function (agendaUrl, fetchFromDwnAgenda, isValidate) {
                $scope.isAagreeCheckDirty = true;
                $scope.previewLeadForm.registerStatus = false;
                var userEmail = '';
                var userPhone = '';
                var userName = '';
                if (isValidate) {

                } else {
                    if ($scope.hasValidation) {
                        userEmail = $scope.previewLeadForm.email.$modelValue;
                        userPhone = $scope.queryPhoneCode + $scope.previewLeadForm.phone.$modelValue;
                        userName = $scope.previewLeadForm.email.$modelValue;
                        if ($scope.previewLeadForm.$invalid) {
                            if ($scope.previewLeadForm.email.$invalid) {
                                $scope.previewLeadForm.email.$setViewValue($scope.previewLeadForm.email.$viewValue);
                            }
                            if ($scope.previewLeadForm.phone.$invalid) {
                                $scope.previewLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                            }
                            return;
                        }
                        if (!$scope.cAgreeCheck) {
                            return;
                        }
                    }
                }
                if(user_params.isEuro) {
                    if ($scope.cAgreeCheck) {
                        setCookie(user_params.OPTIN_COOKIE, 1, 90);
                    } else if(getCookieByName(user_params.OPTIN_COOKIE) != 1) {
                        setCookie(user_params.OPTIN_COOKIE, 0, 90);
                    }
                }

                window.open($scope.submitAgendaUrl, '_blank');
                var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                if (user_params.isEuro && !optin) {
                     $rootScope.showCourseAgenda = false;
                     $scope.hideAgendLeadPopup()
                    return;
                }
                // if (!$scope.hasValidation) {
                //      $rootScope.showCourseAgenda = false;
                //      $scope.hideAgendLeadPopup();
                //     return;
                // }
                // if(!userEmail){
                //      return;
                // }
                /*
                 * 
                 * Old Params
                var obj3 = {
                    name: userName,
                    email: userEmail,
                    phone: userPhone,
                    queryTxt: "Downloaded Course Agenda",
                    query: "Downloaded Course Agenda",
                    agreeToContact: $scope.cAgreeCheck,
                    queryTyp: 'course-agenda-popup',
                    courseId: user_params.course_id,
                    courseName: user_params.course_name
                };
                obj3['customerType'] = 'B2C';
                obj3['leadTrainingType'] = 'Not Sure';
                obj3['leadSourceString'] = document.URL;
                obj3['tagName'] = 'course agenda';
                obj3['leadSource'] = fetchUTMSource();
                obj3['type'] = 'course agenda';
                obj3['productTypeId'] = user_params.productTypeId;
                obj3['billingTypeId'] = user_params.billingTypeId;
                obj3['method'] = 'saveCallback';
                obj3['GCLID'] = getGCLID();
                obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                obj3['fetch_from_cpr_uid'] = false;
                obj3['save_cpr'] = 1;
                obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));
                if (!$rootScope.isLoggedIn) {
                    if (fetchFromCpr)
                        obj3['fetch_from_cpr_uid'] = fetchFromCpr;
                }*/
                

                if (fetchFromDwnAgenda === false || fetchFromDwnAgenda === null) {
                    webengage.onReady(function () {
                        var nameDiv = userName.split(/ (.+)/);
                        var dwnAgendaCookieCIds = getCookieByName('_user_ld_info');
                        if ((typeof dwnAgendaCookieCIds !== "undefined" && dwnAgendaCookieCIds) || ($rootScope.isLoggedIn)) {
                            var userInfo = [];
                            if(typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined'){
                                userInfo = webengage.state.getForever().uattr;
                                userEmail = userInfo.we_email;
                                userPhone = userInfo.we_phone;
                            }
                        }
                        var webEngageLeadParams = [];
                        if (typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                            webEngageLeadParams = webengage.state.getForever().uattr;
                        }
                        var eventData = {
                            'sl_lead_type': 'b2c',
                            'sl_site_module': 'course agenda',
                            'sl_user_email': userEmail,
                            'sl_user_phone': userPhone || '',
                            'sl_email_opt_in': true,
                            'sl_sms_opt_in': true
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_first_name'] !== "undefined" && webEngageLeadParams['we_first_name']) {
                            eventData.sl_user_first_name = webEngageLeadParams['we_first_name'];
                        }
                        if (typeof webEngageLeadParams !== "undefined" && typeof webEngageLeadParams['we_last_name'] !== "undefined" && webEngageLeadParams['we_last_name']) {
                            eventData.sl_user_last_name = webEngageLeadParams['we_last_name'];
                        }
                        WebTracking.eventReq.triggerEvent({
                            event_id: "sl_lead_user_submitted_lead_form",
                            event_data: eventData,
                            common: "product",
                            user_attributes: ['sl_lead_type', 'sl_event_time', 'sl_user_email', 'sl_user_phone'],
                            // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                            // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                        });
                        var obj3 = {
                            sl_user_first_name: userName,
                            sl_user_last_name: userName,
                            queryTxt: "Downloaded Course Agenda",
                            sl_user_message: "Downloaded Course Agenda",
                            queryTyp: 'course-agenda-popup',
                            sl_product_id: user_params.course_id,
                            sl_product_name: user_params.course_name
                        };
                        obj3['sl_user_type'] = 'B2C';
                        obj3['leadTrainingType'] = 'Not Sure';
                        obj3['leadSourceString'] = document.URL;
                        obj3['sl_site_module'] = 'course agenda';
                        obj3['sl_utm_src'] = fetchUTMSource();
                        //   obj3['type'] = 'course agenda';
                        obj3['b2cQueryType'] = 'course agenda';
                        obj3['productTypeId'] = user_params.productTypeId;
                        obj3['billingTypeId'] = user_params.billingTypeId;
                        obj3['GCLID'] = getGCLID();
                        obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                        //obj3['save_cpr'] = 1;
                        obj3['lead_uid'] = generateLeadId(LeadService.getLeadEmail(userEmail));

                        var locatorCookie = getCookieByName('locatori9');
                        var locatorCookieObj = JSON.parse(locatorCookie);
                        obj3['countryId'] = locatorCookieObj.country_id;
                        obj3['countryName'] = locatorCookieObj.country_name.replace(/\+/g, ' ');
                        obj3['cityId'] = locatorCookieObj.city_id;
                        obj3['cityName'] = locatorCookieObj.name;

//                    if (!$rootScope.isLoggedIn) {
//                        if (fetchFromCpr)
//                            obj3['fetch_from_cpr_uid'] = fetchFromCpr;
//                    }

                        var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                        var finalB2CParamArr = PostReqService.prepareB2CLeadParameters(obj3, webEngageLeadFormParams);
                        $scope.gCPCJ.gaFireOnCoursePage('leadcapturequeryform', user_params.user_id + ' || ' + document.URL + ' || ' + user_params.course_name + ' || course agenda');
                        var applicationContentType = 'json';
                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr, applicationContentType)
                                .then(function (data) {
                                    if (data != null) {
                                        if (data.status == 200 && data.data.status == "success") {
                                            // Update user hash
                                            var user = $rootScope.userInfo || {};
                                            user.email = userEmail || user.email;
                                            user.phone = $scope.previewLeadForm.phone.$viewValue || user.phone;
                                            user.phoneCode = $scope.queryPhoneCode || user.phoneCode;
                                            PostReqService.setUserHash(user);
                                            //setCookie('_cpruid', data.data.cpr_uid, 90);
                                            setCookie('_semagenda', 1, 90);
                                            var dACId = 'c' + user_params.course_id;
                                            if (dwnAgendaCookieCIds) {
                                                var dwnAgendaCookieCIdArr = dwnAgendaCookieCIds.split(",");
                                                var courseId = 'c' + user_params.course_id;
                                                dwnAgendaCookieCIdArr.push(courseId);
                                                var dACId = dwnAgendaCookieCIdArr.join(",");
                                            }
                                            setCookie('_user_ld_info', dACId, 90);
                                            $rootScope.isPreviewLeadCreated = true;
                                            $rootScope.submitAgendaLead = true;
                                        } else {
                                            $scope.popupStatusMsg = "There was some problem, please try again.";
                                            $scope.gCPCJ.gaFireOnCoursePage('leadcapturefail', user_params.user_id + ' || ' + document.URL + ' || course agenda');
                                        }
                                    }
                                    $rootScope.showCourseAgenda = false;
                                });

                    });
                }                
            }

            this.init = function () {
                $scope.isAagreeCheckDirty = false;
                $timeout(function () {
                    LocService.getCountryData().then(function (data) {
                        $scope.countryData = data;
                        LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                        $scope.selected_country = LocService.getCurrentCountry();
                        $scope.cookie_country_name = $scope.selected_country.name;
                        $scope.countryDataHeaderDropDown = $scope.countryData;
                    });
                }, 2000);

                // Get user information
                var userWatch = $rootScope.$watch('userInfo', function (newValue, oldValue) {
                    var user = (newValue && newValue.email) ? newValue : oldValue;
                    if (user && user.email && typeof user == 'object') {
                        $scope.email = user.email || $scope.email;
                        $scope.phone = user.phone || $scope.phone;
                        userWatch(); // stop listen
                    }
                });
                // Only Template --- 3
                user_params.isPlayListVideo = false;
                if($rootScope.templateId === 3){
                    var sem_course_id =typeof user_params !=="undefined" ? parseInt(user_params.course_id) :0;
                    if(sem_course_id){
                        var currentSemCourseId = getCookieByName('sem_course_id');
                        if(typeof currentSemCourseId ==="undefined"){
                            var cname = 'sem_course_id';
                            var cvalue = sem_course_id;
                            var d = new Date();
                            d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                            var expires = "expires=" + d.toUTCString();
                            var subdomain= '.simplilearn.com';
                            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain="+subdomain;
                        }else{
                            if(parseInt(currentSemCourseId) !== sem_course_id){
                               // console.log("_cpwlead cookie set ");
                                var cname = 'sem_course_id';
                                var cvalue = sem_course_id;
                                var d = new Date();
                                d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                var expires = "expires=" + d.toUTCString();
                                var subdomain= '.simplilearn.com';
                                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain="+subdomain;
                                var cname = '_cpwlead';
                                var cvalue = 0;
                                var d = new Date();
                                d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                var expires = "expires=" + d.toUTCString();
                                var subdomain= '.simplilearn.com';
                                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain="+subdomain;
                            }
                        }
                    }

                     user_params.isPlayListVideo = true;
                     var freeVideoCookie = getCookieByName('free_video_viewed');
                            $timeout(function () {
                               if ($cookies.free_video_viewed !=="undefined" && parseInt($cookies.free_video_viewed)) {
                                   $rootScope.singlePreviewVideoPlayed =true;
                                 //   console.log("Single Preview Video Set To True")
                               }
                       }, 0);
                }
            };
            $scope.$watch('cAgreeCheck', function (newValue, oldValue) {
                $scope.hasValidation = !$scope.isEuro || ($scope.cAgreeCheck && $scope.isEuro);
            });
            /*$scope.$watch('email', function(newValue) {
             var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
             if( !email_rgx.test(newValue) ){
             $scope.previewLeadForm.email.$setValidity('email', false);
             }
             else {
             $scope.previewLeadForm.email.$setValidity('email', true);
             }
             });*/

            $scope.$watch('phone', function (newValue, oldValue) {
                // console.log($scope.hasValidation);
                if ($scope.hasValidation) {
                    if (isNaN(newValue)) {
                        $scope.previewLeadForm.phone.$setValidity('phone', false);
                    } else if (newValue.length > PHONE_MAX_LENGTH) {
                        $scope.previewLeadForm.phone.$setValidity('phone', false);
                    } else {
                        $scope.previewLeadForm.phone.$setValidity('phone', true);
                    }
                }
            });

            $scope.agreeCheck = function () {
                $scope.cAgreeCheck = !$scope.cAgreeCheck;
                $scope.isAagreeCheckDirty = true;
            }

            $scope.hideAgendLeadPopup = function () {
                WebTracking.eventReq.triggerEvent({
                    event_id : "sl_lead_form_closed",
                    event_data: {
                      'sl_lead_type' : 'b2c',
                      'sl_site_module' : 'course agenda',
                    },
                    common : "product",
                    user_attributes: ['sl_lead_type']
                });
                $rootScope.showCourseAgenda = false;
            }

            var setCookie = function (cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            }
            this.init();
        })

        .controller('ECCouncilNotifyMeCtrl', function (LocService, $scope, $rootScope, PostReqService, $cookies, $timeout) {
            var PHONE_MAX_LENGTH = 15;
            this.notifyLeadForm = {
                phone: {error: 'Please enter a valid phone number'},
                email: {error: 'Please enter a valid email'},
                cAgreeCheck: {error: 'Please accept the agreement'}
            };
            $scope.submitNotifyMeLead = function (fetchFromCpr, isValidate) {
                $scope.isAagreeCheckDirty = true;
                //$scope.notifyLeadForm.registerStatus = false;
                var userEmail = '';
                var userPhone = '';
                var userName = '';
                if (isValidate) {

                } else {
                    userEmail = $scope.notifyLeadForm.email.$modelValue;
                    userPhone = $scope.queryPhoneCode + $scope.notifyLeadForm.phone.$modelValue;
                    userName = $scope.notifyLeadForm.email.$modelValue;
                    if ($scope.notifyLeadForm.$invalid) {
                        if ($scope.notifyLeadForm.email.$invalid) {
                            $scope.notifyLeadForm.email.$setViewValue($scope.notifyLeadForm.email.$viewValue);
                        }
                        if ($scope.notifyLeadForm.phone.$invalid) {
                            $scope.notifyLeadForm.phone.$setViewValue($scope.previewLeadForm.phone.$viewValue);
                        }
                        return;
                    }
                    if (!$scope.cAgreeCheck) {
                        return;
                    }
                }
                var obj3 = {
                    name: userName,
                    email: userEmail,
                    phone: userPhone,
                    queryTxt: "User clicked Notify Me",
                    query: "User clicked Notify Me",
                    agreeToContact: $scope.cAgreeCheck,
                    queryTyp: 'notify-me-popup',
                    courseId: user_params.course_id,
                    courseName: user_params.course_name
                };
                obj3['customerType'] = 'B2C';
                obj3['leadTrainingType'] = 'Not Sure';
                obj3['leadSourceString'] = document.URL;
                obj3['tagName'] = 'Notify_me';
                obj3['leadSource'] = fetchUTMSource();
                obj3['type'] = 'Notify me';
                obj3['productTypeId'] = user_params.productTypeId;
                obj3['billingTypeId'] = user_params.billingTypeId;
                obj3['method'] = 'saveCallback';
                obj3['GCLID'] = getGCLID();
                obj3['fetchData'] = $rootScope.isLoggedIn ? 1 : 0;
                obj3['fetch_from_cpr_uid'] = false;
                obj3['save_cpr'] = 1;
                if (!$rootScope.isLoggedIn) {
                    if (fetchFromCpr)
                        obj3['fetch_from_cpr_uid'] = fetchFromCpr;
                }
                PostReqService.sendPostRequest(baseApiUrlNocache, obj3)
                        .then(function (data) {
                            $scope.notifyMeFormSubmitStatus = true;
                            if (data != null) {
                                if (data.data.status == 'Success') {

                                    // Update user hash
                                    var user = $rootScope.userInfo || {};
                                    user.email = userEmail || user.email;
                                    user.phone = $scope.notifyLeadForm.phone.$viewValue || user.phone;
                                    user.phoneCode = $scope.queryPhoneCode || user.phoneCode;
                                    PostReqService.setUserHash(user);

                                    $scope.notifyMepopupStatusMsg = "A Simplilearn representative will get back to you soon.";
                                } else {
                                    $scope.notifyMepopupStatusMsg = "There was some problem, please try again.";
                                }
                            }

                        });
            }

            this.init = function () {
                self = this;
                $rootScope.shownotifyMePopUP = false;
                $scope.isAagreeCheckDirty = false;
                $scope.cAgreeCheck = false;
                $scope.isAagreeCheckDirty = false;
                $scope.notifyMeFormSubmitStatus = false;
                LocService.getCountryData().then(function (data) {
                    $scope.countryData = data;
                    LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);
                    $scope.selected_country = LocService.getCurrentCountry();
                    $scope.cookie_country_name = $scope.selected_country.name;
                    $scope.countryDataHeaderDropDown = $scope.countryData;
                });

                // Get user information
                var userWatch = $rootScope.$watch('userInfo', function (newValue, oldValue) {
                    var user = (newValue && newValue.email) ? newValue : oldValue;
                    if (user && user.email && typeof user == 'object') {
                        $scope.email = user.email || $scope.email;
                        $scope.phone = user.phone || $scope.phone;
                        userWatch(); // stop listen
                    }
                });
            };

            /*$scope.$watch('email', function(newValue) {
             var email_rgx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
             if( !email_rgx.test(newValue) ){
             $scope.notifyLeadForm.email.$setValidity('email', false);
             }
             else {
             $scope.notifyLeadForm.email.$setValidity('email', true);
             }
             });*/

            $scope.$watch('phone', function (newValue, oldValue) {
                if (isNaN(newValue)) {
                    $scope.notifyLeadForm.phone.$setValidity('phone', false);
                } else if (newValue.length > PHONE_MAX_LENGTH) {
                    $scope.notifyLeadForm.phone.$setValidity('phone', false);
                } else {
                    $scope.notifyLeadForm.phone.$setValidity('phone', true);
                }
            });

            $scope.agreeCheck = function () {
                $scope.cAgreeCheck = !$scope.cAgreeCheck;
                $scope.isAagreeCheckDirty = true;
            }

            $scope.hidenotifyLeadPopup = function () {
                $rootScope.shownotifyMePopUP = false;
            }

            var setCookie = function (cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            }
        })
        .filter('floor', function () {
            return function (input) {
                return Math.floor(input);
            };
        });
 /*------------- End : SemLandingPageCtrl.js-----------*/ 

 /*------------- Begin : SemReviewsSectionController.js-----------*/ 

angular.module('Simplilearn')
        .controller('SemReviewsSectionController', function ($scope, $timeout) {

            this.currentReviewType = '0';
            this.showMoreRs = 0;

            this.reviewsLimit = 0;
            this.totalReviews = 0;
            this.reviewsVisible = 0;
            this.viewMoreFlag = 1;

            this.init = function (pReviewsLimit, pTotalReviews) {
                this.reviewsLimit = pReviewsLimit;
                this.totalReviews = pTotalReviews;
                this.reviewsVisible = pReviewsLimit;
            };
            this.setReviewType = function (rvwType) {
                this.currentReviewType = rvwType;//@review no return statement
            };

            this.isCurrentReviewType = function (rvwType) {
                if (this.currentReviewType === null) {
                    return false;
                }

                var rvw_types = rvwType.split('|');
                var validity = rvw_types.indexOf(this.currentReviewType);

                return validity !== -1;
            };

            this.showMoreReviews = function ($event, courseName) {
                $event.preventDefault()
                $scope.gaMReviewsCtrlJs.gaFireGeneral('SemCourseShowMoreReviews', user_params.user_id + ' || ' + document.URL + ' || ' + courseName);
                var action = $event.currentTarget.getAttribute('href');
                if (action) {
                    document.alumniReviews.action = action
                    document.alumniReviews.submit();
                }
            };

            this.showLessReviews = function ($event) {
                $event.preventDefault();
                this.reviewsVisible = this.reviewsLimit;
                this.viewMoreFlag = 1;
            };

            this.isReviewVisible = function (pIndex) {
                if (pIndex <= this.reviewsVisible) {
                    return 1;
                } else {
                    return 0;
                }
            };

            this.linkedinClick = function () {
                $scope.gaMReviewsCtrlJs.gaFireGeneral('reviewerprofileclick', user_params.user_id + ' || ' + document.URL + ' || linkedin');
            };
            var gaClassForReviews = function () {
                var ga = new gaEventsTracker();
                this.gaFireGeneral = function (cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                }
            }

            $scope.gaMReviewsCtrlJs = new gaClassForReviews();

        });
 /*------------- End : SemReviewsSectionController.js-----------*/ 

 /*------------- Begin : SocialSharingController.js-----------*/ 

angular.module('Simplilearn')
.controller('SocialSharingController', function(PostReqService, $rootScope){
    var self = this;
    self.totalShares = 0;
    $rootScope.shareTotalCount = 0;
    $rootScope.shareTotalCountString = '';
    $rootScope.displayShareCount = 'none';
    this.init = function(shareTotalCount){
        $rootScope.shareTotalCount = shareTotalCount;
        $rootScope.shareTotalCountString = 'Shares';
        $rootScope.displayShareCount = 'block';
    }
    var gaForSocialSharing = function() {
       var ga = new gaEventsTracker();
       
       this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
           ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
       };
    };
    
    self.ga = new gaForSocialSharing();
    
    this.shareCount = function(item_id,item_type){
        if(item_id){
            var sscParams = {'method':'shareCount','item_id':item_id,'item_type':item_type};
            PostReqService.sendPostRequest(baseApiUrlNocache,sscParams);
            $rootScope.shareTotalCount +=1;
        }
    }
    

}); /*------------- End : SocialSharingController.js-----------*/ 

 /*------------- Begin : StayUpdatedController.js-----------*/ 

angular.module('Simplilearn')
.controller('StayUpdatedCtrl', function($scope, $http){
    
    $scope.email = '';
    $scope.helpers = new helpers();

    $scope.submitForm = function(form) {
        
        if (!form.$valid) {
            return $scope.helpers.FormNotValid(form);
        }
                
        $http.get(baseApiUrl + "?method=newsLetterFormSubmit",
                {params:
                            {email: $scope.email}
                }
        ).success(function(data) {
            if (data.status == "Success") {
                $scope.email = "";
                $scope.stayUpdatedForm.$setPristine();
                $scope.stayUpdatedStatusMsg = "Your subscription has been confirmed. Happy learning!";
                $scope.stayUpdatedStatusClass = "success_text";
            } else {
                $scope.stayUpdatedStatusMsg = "Some error occurred. Please try again later.";
                $scope.stayUpdatedStatusClass = "error_text";
            }
        }).error(function() {
            $scope.stayUpdatedStatusMsg = "Some error occurred. Please try again later.";
            $scope.stayUpdatedStatusClass = "error_text";
        });
    };
    
}); /*------------- End : StayUpdatedController.js-----------*/ 

 /*------------- Begin : TeamController.js-----------*/ 

angular.module('Simplilearn')
.controller('TeamController', function($scope) {

	$scope.selected_tab = 1;

	$scope.slectedTeam = function(item){
		$scope.selected_tab = item;
	}
})
 /*------------- End : TeamController.js-----------*/ 

 /*------------- Begin : TermsAndConditionsController.js-----------*/ 

angular.module('Simplilearn')
.controller('TermsAndConditionsCtrl', function($location,$scope,$anchorScroll) {
    var self = this;
    var currCategory = 1;
    
    self.initialize = function() {
        if( !!$location.path() ) {
            var path = $location.path();
            path = path.substr(path.indexOf('/')+1);
            if( path == '' ) {
                currCategory = 1;
            }
            else if( path == 'terms-of-use' ) {
                currCategory = 2;                
            }
            else if( path == 'privacy-policy' ) {
                currCategory = 3;                
            }
            else if( path == 'refund-policy' ) {
                currCategory = 4;                
            }
            else if( path == 'rescheduling-policy' ) {
                currCategory = 5;                
            }
	    else if( path == 'ambassador-scholarship' ) {
                currCategory = 6;                
            }
            else if( path == 'free-trial' ) {
                currCategory = 7;                
            }
            else if( path == 'list-of-data-subprocessors' ) {
                currCategory = 8;                
            }
        }
    };

    self.setCurrentCategory = function(pCategory, pPath) {
        currCategory = pCategory;
        
        $location.path(pPath);
    };

    self.isCurrentCategory = function(pCategory) {
        return pCategory === currCategory;
    };
    
    $scope.scrollTo = function (id) {
    $location.hash(id);
    $anchorScroll();
  }
});

 /*------------- End : TermsAndConditionsController.js-----------*/ 

 /*------------- Begin : ThankYouController.js-----------*/ 

angular.module('Simplilearn')
.controller('ThankYouCtrl', function($http, PaymentEventService) {
    
    this.infoYesFlag = 1;
    this.issueYesFlag = 0;
    this.clickedRating = 0;
    this.rating = 0;
    this.remarks = '';
    this.showForm = 1;
    this.infoMsg = '';
    this.infoClass = '';
    this.rating_err_flag = 0;
    this.subsName = '';
    var email, orderId, authToken;
    
    this.helpers = new helpers();
    
    var self = this;

    document.cookie = "cart_items=0;path="+baseUrl;
    
    this.initVars = function(pEmail, pOrderId, pToken) {
        email = pEmail;
        orderId = pOrderId;
        authToken = pToken;
    };

    this.setInfoYesFlag = function( pVal ) {
        this.infoYesFlag = pVal;
    };
    
    this.setIssueYesFlag = function( pVal ) {
        this.issueYesFlag = pVal;
    };
    
    this.setRating = function( pVal, pEventName ) {
        if( pEventName === 'mouseover' ) {
            this.rating = pVal;
        }
        else if( pEventName === 'mouseout' ) {
            this.rating = this.clickedRating;
        }
        else if( pEventName === 'click' ) {
            this.rating = pVal;
            this.clickedRating = pVal;
            
            if( pVal === 0 ) {
                this.rating_err_flag = 0;
            }
        }
    };
    
    this.submitForm = function(form) {
        if (!form.$valid) {
            return self.helpers.FormNotValid(form);
        }
        
        if( this.rating === 0 ) {
            this.rating_err_flag = 1;
            return;
        }

        $http.get(baseApiUrl+'?method=saveCartFeedback',
                            { params: {
                                        'infoYesFlag':self.infoYesFlag,
                                        'issueYesFlag':self.issueYesFlag,
                                        'rating':self.rating,
                                        'remarks':self.remarks,
                                        'email':email,
                                        'orderId':orderId,
                                        'authToken':authToken
                                      }
                            }
                ).success(function(data) {
                    if (data.status === "Success") {
                        resetFormData();
                        form.$setPristine();
                        self.infoMsg = "Thank you for your feedback";
                        self.infoClass = "success_text";
                    } else {
                        if( !!data && !!data.msg ) {
                            self.infoMsg = data.msg;
                            self.infoClass = "error_text";
                        }
                        else {
                            self.infoMsg = "Some error occurred. Please try again later.";
                            self.infoClass = "error_text";
                        }
                    }
                }).error(function() {
                    self.infoMsg = "Some error occurred. Please try again later.";
                    self.infoClass = "error_text";
                });
    };
    
    var resetFormData = function() {
        self.infoYesFlag = 1;
        self.issueYesFlag = 0;
        self.rating = 0;
        self.remarks = '';
        self.showForm = 0;
    };
    
    this.redirectToNewPage = function(url){
        window.open(url,'_blank');
    };
    
    this.generateGA = function(countryName){
       self.ga.gaFireEventsGeneric('lvcpassPurchase',countryName);
    }
    
    var gaForLVCPass = function() {
        var ga = new gaEventsTracker();

        this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
            ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
        };
     };
    this.gaForPaymentConfirm = function (eventKey, index) {
        var eventData = PaymentEventService.getItemAttributeByIndex(index);
        var eventLabel=user_params.user_id + ' || ' + eventData.sl_product_type + ' || ' + eventData.sl_product_name;
        self.ga.gaFireEventsGeneric(eventKey, eventLabel);
        
        if(typeof webengage.state == 'undefined') {
            webengage.onReady(triggerEvent);
        } else {
            triggerEvent();
        }
        function triggerEvent() {
            var commonData = WebTracking.eventReq.getDataFromUserParams(['sl_page_type', 'sl_order_id', 'sl_currency', 'sl_cart_items', 'sl_final_cart_value', 'sl_product_price_symbol']);
            var eventData = PaymentEventService.getItemAttributeByIndex(index);
            for (var key in commonData) {
                eventData[key] = commonData[key];
            }
            var productsBought = [];
            var userAttributes = [];
            try { 
                if(typeof webengage != 'undefined' && typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined') {
                    productsBought = webengage.state.getForever().uattr.sl_user_products_bought || [];
                }
            } catch(e) {
                console.warn(e);
                productsBought = [];
            }
            var isNew = true;
            var sourceKey = [eventData.sl_order_id, eventData.sl_product_id, eventData.sl_product_type, eventData.sl_product_training_type].join('|');
            productsBought.forEach(function(item) {
                var targetKey = [item.order_id, item.product_id, item.product_type, item.training_type].join('|');
                if(sourceKey == targetKey) {
                    isNew = false;
                }
            });
            if(isNew) {
                productsBought.push({
                    'product_name': eventData.sl_product_name,
                    'product_id': eventData.sl_product_id,
                    'product_type': eventData.sl_product_type,
                    'training_type': eventData.sl_product_training_type,
                    'order_id': eventData.sl_order_id,
                });
                eventData.sl_user_products_bought = productsBought;
                userAttributes.push('sl_user_products_bought');
            }
            WebTracking.eventReq.triggerEvent({event_id: "sl_pay_user_makes_payment", event_data: eventData, user_attributes: userAttributes});
        }
     }

     self.ga = new gaForLVCPass();

}); /*------------- End : ThankYouController.js-----------*/ 

 /*------------- Begin : VideoResourceController.js-----------*/ 

angular.module('Simplilearn')
.controller('VidResourceCtrl', function(PostReqService) {
    
    this.updateViews = function(pVideoId) {
        if (pVideoId) {
            var vidParams = {'method':'updateVideoViewCount','videoId':pVideoId};
            PostReqService.sendPostRequest(baseApiUrlNocache, vidParams );
        }
    };
    
    this.constructVidPlayer = function(divId, vidUrl, vidImg) {
		jwplayer(divId).setup({
			file: vidUrl,
			image: vidImg,
			base: staticUrl + 'core/js/jwplayer/',
			width: 686,
			height: 384,
			startparam: 'start',
			//skin: staticUrl + 'core/js/jwplayer/skin_base64_new.xml',
			fallback: false,
			icons: true
		})

		return true;
    };
    
});


 /*------------- End : VideoResourceController.js-----------*/ 

 /*------------- Begin : WebengageController.js-----------*/ 

angular.module('Simplilearn')
.controller('WebengageController', function($scope,$rootScope,$http,$cookies, $timeout, PostReqService) {
    $scope.initData = function() {
        webengage.onReady(function (data) {
            PostReqService.getHashUser(function(user) {
                if(user != null && typeof user.email != 'undefined'){
                    if(user !== null && typeof user == 'object') {
                        if(typeof user.id != 'undefined'){
                            user_params.user_id = user.id;
                        }
                        if(typeof user.phone != 'undefined' && user.phone){
                            user_params.sl_user_phone = user.phone;
                            if(typeof user.phoneCode != 'undefined' && user.phoneCode){
                                user_params.sl_user_phone = "+"+user.phoneCode.replace(/\+|\-/g,'') + "-" + user_params.sl_user_phone;
                            }
                        }
                        if(typeof user['name'] != 'undefined'){
                            var nameDiv = user['name'].split(/ (.+)/);
                            if(typeof nameDiv[0] != 'undefined')
                                user_params.first_name = nameDiv[0];
                            if(typeof nameDiv[1] != 'undefined')
                                user_params.last_name = nameDiv[1];
                        }
                        if(typeof user['email'] != 'undefined'){
                            user_params.email = user['email'];
                            WebTracking.eventReq.eventParam = {
                                event_data: {
                                    'sl_user_email' : user_params.email,
                                    'sl_user_first_name' : user_params.first_name,
                                    'sl_user_last_name' : user_params.last_name
                                },
                                user_attributes : ['sl_user_email', 'sl_user_first_name', 'sl_user_last_name']
                            }
                            if (user_params.sl_user_phone) {
                                WebTracking.eventReq.eventParam.event_data.sl_user_phone = user_params.sl_user_phone;
                            }
                            WebTracking.eventReq.loginUser();
                            WebTracking.eventReq.userAttributesWE();
                        }
                    }
                }
            });
        });
    };
}) /*------------- End : WebengageController.js-----------*/ 

 /*------------- Begin : WebinarDetailsController.js-----------*/ 

angular.module('Simplilearn')
        .controller('WebinarDetailsCtrl', function($scope, $http, LocService, $cookies, LeadService, $rootScope,$timeout) {
            $scope.personEmail = '';
            $scope.personName = '';
            $scope.personPhone = '';
            $scope.phnAgreeCheck = 1;
            $scope.agreeClicked = 1;
            $scope.countryDropdownStatus = 0;
            $scope.countryData = null;
            $scope.selected_country = null;
            $scope.infoMsg = '';
            $scope.infoClass = '';
            $scope.webinarId = null;
            $scope.webinarKey = '';
            $scope.webinarCourseId = '';
            $scope.webinarCourseName = '';
            $scope.webinarName = '';
            $scope.helpers = new helpers();
            $scope.fieldFocus = '';
            $scope.requestSent = false;
            $scope.productTypeId = '';
            $scope.billingTypeId = '';
            
            $scope.initializeProductTypeIds = function(productTypeId,billingTypeId){
                $scope.productTypeId = productTypeId;
                $scope.billingTypeId = billingTypeId;
            }

            $scope.initialize = function( pWebinarId, wcourseId, wCourseName, webinarKey, webinarName ) {

                $scope.webinarId = pWebinarId;
                $scope.webinarCourseId = wcourseId;
                $scope.webinarCourseName = wCourseName;
                $scope.webinarKey = webinarKey;
                $scope.webinarName = webinarName;
                
                LocService.getCountryData().then(function(data) {
                    $scope.countryData = data;

                    //set current country using cookie
                    LocService.setCurrentCountry(null, JSON.parse($cookies.locatori9).country_id);

                    //get current country
                    $scope.selected_country = LocService.getCurrentCountry();

                    
                });
            };


            $scope.submitForm = function(form, pInvocation) {
               
                if (!form.$valid) {
                    return $scope.helpers.FormNotValid(form);
                }else if($scope.phnAgreeCheck == 0 && $scope.agreeClicked == 0){
					return false;
				}
                               
				var obj3 = {};
				var locatorCookie = getCookieByName('locatori9');
				var locatorCookieObj = JSON.parse(locatorCookie);
				obj3['countryId'] = locatorCookieObj.country_id;
				obj3['countryName'] = locatorCookieObj.country_name;
				obj3['cityId'] = locatorCookieObj.city_id;
				obj3['cityName'] = locatorCookieObj.name;
				var firstName = "";
                                var lastName = "";
                                var nameStr = $scope.personName;
                                var nameParts = $scope.personName.split(" ");
                                if(nameParts.length == 1){
                                    firstName = nameStr;
                                    lastName = "";
                                }else{
                                    firstName = nameParts[0];
                                    lastName = nameParts[1];
                                }
				var dataArr =   {
                                                    'name':$scope.personName, 'webinarId':$scope.webinarId, 'email':$scope.personEmail, 'phone':$rootScope.queryPhoneCode+$scope.personPhone, 
                                                    'agreeToContact':$scope.phnAgreeCheck, 'countryId':obj3['countryId'],
                                                    'firstName':firstName,'lastName':lastName,'query':"",'agreeToContact':1, 'courseId':$scope.webinarCourseId, 'courseName':$scope.webinarCourseName, 
                                                    'leadTrainingType':'online', 'leadSourceString':document.URL+' | '+$scope.webinarName, 'customerType':'B2C', 'tagName':'webinar', 'type':'webinar','leadSource':fetchUTMSource(),
                                                    'productTypeId':$scope.productTypeId,'billingTypeId':$scope.billingTypeId,
                                                    'webinarKey':$scope.webinarKey,'webinarId':$scope.webinarId,'GCLID':getGCLID()
                                                };

				//console.log(dataArr);return;
                                $scope.infoMsg = "";
                                $scope.infoClass = "";
                                $scope.requestSent = true;
                                
                                
                $http.get(baseApiUrlNocache+'?method=registerForWebinar',
                            { params: dataArr}
                ).success(function(data) {
                    $scope.requestSent = false;
                    if (data.status == "Success") {
                                var gaEvent = '';
                                var firstName = "";
                                var lastName = "";
                                var nameStr = $scope.personName;
                                var nameParts = $scope.personName.split(" ");
                                if(nameParts.length == 1){
                                    firstName = nameStr;
                                    lastName = "";
                                }else{
                                    firstName = nameParts[0];
                                    lastName = nameParts[1];
                                }
                                var paramsArr = {name:nameStr,firstName:firstName,lastName:lastName, email:$scope.personEmail,query:"", agreeToContact:1, courseId:$scope.webinarCourseId, courseName:$scope.webinarCourseName, leadTrainingType:'online',leadSourceString:document.URL, customerType:'B2C', tagName:'webinar', type:'webinar',leadSource:fetchUTMSource(),GCLID:getGCLID()};
                                if( pInvocation == 'listing' ) {
                                    gaEvent = 'frsWebinarListRegisterSuccess';
                                } else {
                                    gaEvent = 'frsWebinarDtlRegisterSuccess';                                                    
                                }

                                $scope.ga.gaFireEventsGeneric(gaEvent, $scope.webinarName);
                                if(user_params.pageCategory == 'resources_article-detail'){
                                    $scope.ga.gaFireEventsGeneric('frscoldleadformpopsubmit', $scope.webinarName);

                                }
                                setUpDataLayer('leadCapture', 'webinar', {'leadId': data.leadKey});	
                                createWebinarCookie($scope.webinarId);
                                //registerAndJoinWebinar(dataArr,$scope.webinarKey,$scope.webinarId);
                                $scope.ga.gaFireEventsGeneric('frsWebinarLeadCapture', $scope.webinarName);
						
                                $scope.successClass = "success_text";
                                resetFormData();
                                $scope.webinarForm.$setPristine();
                                $scope.infoMsg = "Congratulations, you have registered successfully. The details of the webinar will be mailed to you";
                                $scope.infoClass = "success_text";
                                $timeout(function(){
                                    $scope.$parent.popupStyle = {display:'none'};
                                },5000);
                                var msgTxt = data.msg;
                                var splitMsg = msgTxt.split('~~');
                                if( splitMsg['1'] && splitMsg['1'] == 'joinUrl' ) {
                                    window.open(splitMsg['2'], '_blank');
                                }
                                
                    } else {
                        if( !!data && !!data.msg ) {
                            $scope.infoMsg = data.msg;
                            $scope.infoClass = "error_text";
                        }
                        else {
                            $scope.infoMsg = "Some error occurred. Please try again later.";
                            $scope.infoClass = "error_text";
                        }
                    }
                }).error(function() {
                    $scope.requestSent = false;
                    $scope.infoMsg = "Some error occurred. Please try again later.";
                    $scope.infoClass = "error_text";
                });
             //}
            };
            
            var registerAndJoinWebinar = function(paramsArr,webinarKeyForApi,webinarId){                
                if(webinarKeyForApi !== 'undefined' && webinarKeyForApi != '') {                   
                    var arr =  {'firstName': paramsArr['firstName'],'lastName': paramsArr['lastName'],'email': paramsArr['email'],'webinarKey':webinarKeyForApi,'webinarId':webinarId};
                        $http.get(baseApiUrlNocache+'?method=registerAndJoinWebinar',
                                        {params : arr}
                        ).success(function(data) {
                            data = data.msg;
                            var splitMsg = data.split('~~');
                            if(splitMsg['0'] == 'failure') {
                                $scope.infoMsg = splitMsg['1'];
                                $scope.infoClass = "error_text";
                            }else if(splitMsg['0'] == 'success'){
                                            resetFormData();
					$scope.webinarForm.$setPristine();
                                         $scope.infoMsg = "Congratulations, you have registered successfully. The details of the webinar will be mailed to you";
                                        $scope.infoClass = "success_text";
                                        $timeout(function(){
                                            $scope.$parent.popupStyle = {display:'none'};
                                            $scope.clearForm();
                                        },3000);
                                        $scope.requestSent = false;
                                        if( splitMsg['1'] && splitMsg['1'] == 'joinUrl' ) {
                                            window.open(splitMsg['2'], '_blank');
                                        }
                            }
                        }).error(function() {
                            $scope.infoMsg = "Some error occurred. Please try again later.";
                            $scope.infoClass = "error_text";
                        });
                }
            }

            var resetFormData = function() {
                $scope.selected_country = LocService.getCurrentCountry();
                $scope.webinarForm.$setPristine();
                $scope.personEmail = '';
                $scope.personName = '';
                $scope.personPhone = '';
            };
			
            $scope.clearForm = function(){
		resetFormData();
		$scope.infoMsg = "";
                $scope.infoClass = "";
                $scope.successClass = "";
                $scope.ga.gaFireEventsGeneric('frsWebinarListRegisterTry', $scope.webinarName);
            }
			
			var createWebinarCookie = function(webinarId){
				if(typeof getCookieByName('webinar_ids') != 'undefined' && getCookieByName('webinar_ids') != '' && getCookieByName('webinar_ids') != null){
					var webinarIdString = getCookieByName('webinar_ids');
					var webinarIdArr = webinarIdString.split("|");
					if(webinarIdArr.indexOf(webinarId+"") == -1)
						document.cookie="webinar_ids="+getCookieByName('webinar_ids')+"|"+webinarId+";path=/";
				}else{
					document.cookie="webinar_ids="+webinarId+";path=/";
				}
			};
			
			$scope.toggleRegisterButton = function(webinarId){
				if(typeof getCookieByName('webinar_ids') != 'undefined' && getCookieByName('webinar_ids') != '' && getCookieByName('webinar_ids') != null){
					var webinarIdString = getCookieByName('webinar_ids');
					var webinarIdArr = webinarIdString.split("|");
					if(webinarIdArr.indexOf(webinarId+"") == -1){
						return true;
					}else{
						return false;
					}
					
				}else{
					return true;
				}
			}

            $scope.toggleCountryDrpDwn = function() {
                if ($scope.countryDropdownStatus === 0) {
                    $scope.countryDropdownStatus = 1;
                }
                else {
                    $scope.countryDropdownStatus = 0;
                }
            };

            $scope.getCountryDropdownStatus = function() {
                return $scope.countryDropdownStatus;
            };

            $scope.setCurrentCountry = function(pCountry) {
                $scope.selected_country = pCountry;

                $scope.personPhone = '+'+pCountry.phnCode+'-';

                document.getElementById('webinarPhone').focus();
            };

            $scope.setPhnAgreeCheck = function() {
				
                if( $scope.phnAgreeCheck === 1 ) {
                    $scope.phnAgreeCheck = 0;
                    $scope.agreeClicked = 0;
                }
                else {
                    $scope.phnAgreeCheck = 1;
                    $scope.agreeClicked = 1;
                }
            };

            $scope.FormNotValid = function(form) {
                for (i in form) {
                    if (typeof form[i].$dirty !== 'undefined' && typeof form[i].$invalid !== 'undefined') {
                        
                        form[i].$dirty = true;
                        form[i].$invalid = form[i].$invalid;
                    }
                }
                return false;
            }
            
            var gaForWebinars = function() {
                var ga = new gaEventsTracker();
       
                this.gaFireEventsGeneric = function(pGaKey, pGaLabel) {
                    ga.gaFireInteractiveEvents(pGaKey, pGaLabel); 
                };
            };
    
            $scope.ga = new gaForWebinars();
});

 /*------------- End : WebinarDetailsController.js-----------*/ 

 /*------------- Begin : AgencyService.js-----------*/ 

angular.module('Simplilearn')
        .service('ScopeService', function ($rootScope) {
            var mem = {};
            return {
                store: function (key, value) {
                    $rootScope.$emit('scope.stored', key);
                    mem[key] = value;
                },
                get: function (key) {
                    return mem[key];
                },
                delete: function (key) {

                    if (key instanceof Array) {
                        if (key.length) {
                            key.forEach(function (current_value) {
                                if (typeof mem[current_value] !== 'undefined') {
                                    delete mem[current_value];
                                }
                            });
                        }
                    }
                }
            };
        }); /*------------- End : AgencyService.js-----------*/ 

 /*------------- Begin : CaldonService.js-----------*/ 

angular.module('Simplilearn')
.service('engagementMatrix', ['$http', function ($http) {
    this.update = function (dataObj) {
        try {
            var url = baseApiUrlNocache + '?method=setEngagementMatrix';
            var res = $http.post(url, dataObj);
            // console.log(dataObj);
            res.success(function (data, status, headers, config) {
                // console.log(data);
            });
            res.error(function (data, status, headers, config) {
                // console.log(data);
                console.log("Error : " + JSON.stringify({data: data}));
            });
        } catch (e) {
            console.log(" ###### Error ####### ")
            console.log("Error Message : " + e.message);
            console.log("Error Code : " + e.number & 0xFFFF);
            console.log("Error Name : " + e.name);
        }
    }
}])
.service('contentInfo', function ($http, $cookies,PostReqService) {
     var paramsDetail = {
        filter: setUpDetails.data.filter,
        p: 1,
        content_id:setUpDetails.data.content_id,
        url:setUpDetails.data.url,
        load_condition: 3,
        type:setUpDetails.data.type,
        initialFocussedId:setUpDetails.data.content_id,
        method: 'getFrsDetailsApi'
    }
    var promise = PostReqService.sendPostRequest(siteBaseApiUrlNocache+'?method=getFrsDetailsApi', paramsDetail).
    then(function (output) {
        var contentInfo = output.data.data;

        return contentInfo;
    });
    return promise;
}) /*------------- End : CaldonService.js-----------*/ 

 /*------------- Begin : FilterCaldon.js-----------*/ 

angular.module('Simplilearn')
.filter('decodeURL', function() {
 return function(input){
   if(input !== undefined ){
     var test =  decodeURIComponent(input);
     return decodeURI(test);
   }
 }
})
.filter('decodeSeoURL', function() {
 return function(input){
   if(input !== undefined ){
     var test =  decodeURIComponent(input);
     var decodedValue =  decodeURI(test);
     var replaceSlash =  decodedValue.replace(/^\//, '');
     return replaceSlash;
   }
 }
})
.filter('rawHtml', ['$sce', function($sce){
  return function(val) {
    return $sce.trustAsHtml(val);
  };
}])
.filter('limitHtml', ['$sce','$filter' ,function($sce,$filter){
  return function(val) {
  	var content = $filter('limitTo')(val,200);
    if (content && content.length == 200) {
      content = content.concat('...');
    }
    return $sce.trustAsHtml(content);
  };
}])
.filter( 'domain', function () {
  return function ( input ) {
    var matches,
        output = "",
        urls = /\w+:\/\/([\w|\.]+)/;

    matches = urls.exec( input );

    if ( matches !== null ) output = matches[1];

    return output;
  };
})
.filter("trustUrl", ['$sce', function ($sce) {
 return function (recordingUrl) {
   return $sce.trustAsResourceUrl(recordingUrl);
 };
}])
.filter('getTweetShareUrl', function () {
            return function (seoUrl) {
                if (seoUrl !== undefined) {
                    // var shareUrl = "http://192.168.1.12/apachedev/git/ice9/frontend/public/" + seoUrl;
                     var shareUrl = frontendCanonicalUrl+ '/'+ seoUrl;
                    var tweetShareUrl = "https://twitter.com/intent/tweet?text=@simplilearn&url=" + shareUrl;
                    return decodeURI(tweetShareUrl);
                }
            }
        })
        .filter('getFbShareUrl', function () {
            return function (seoUrl) {
                if (seoUrl !== undefined) {
                //var shareUrl="http://www.simplilearn.com/how-to-validate-accelerated-mobile-pages-quickly-via-google-article";
                    // var shareUrl = "http://192.168.1.12/apachedev/git/ice9/frontend/public/" + seoUrl;
                     var shareUrl = frontendCanonicalUrl+ '/'+ seoUrl;
                    var fbShareUrl = "https://www.facebook.com/sharer/sharer.php?u=" + shareUrl;
                    return decodeURI(fbShareUrl);
                }
            }
        })
        .filter('getLinkedInShareUrl', function () {
            return function (seoUrl) {
                if (seoUrl !== undefined) {
                    // var shareUrl = "http://192.168.1.12/apachedev/git/ice9/frontend/public/" + seoUrl;
                     var shareUrl = frontendCanonicalUrl+ '/'+ seoUrl;
                    var linkedInShareUrl = "https://www.linkedin.com/shareArticle?mini=true&url=" + decodeURI(shareUrl);
                    return decodeURI(linkedInShareUrl);
                }
            }
        })
 /*------------- End : FilterCaldon.js-----------*/ 

 /*------------- Begin : FilterService.js-----------*/ 

angular.module('Simplilearn')
.service('FilterService', function(){
				this.filterValues = null;
				this.setFilterValues = function(params){
					this.filterValues = params;
				}
                                
                                this.getFilterValues = function(){
                                    return this.filterValues;
                                }
				
				this.updateFilter=function(filterName,filterValue,typeVal){
					this.filterArray = null;
					if(typeVal == 'course'){
						this.filterArray = this.filterValues.course;
					}else if(typeVal == 'ebooks'){
						this.filterArray = this.filterValues.ebooks;
					}else if(typeVal == 'tests'){
						this.filterArray = this.filterValues.tests;
					}
					if(filterName == 'category' && this.filterArray.category.indexOf(filterValue)==-1){
						this.filterArray.category.push(filterValue);
					}else if(filterName == 'category' && this.filterArray.category.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.category.indexOf(filterValue);
						this.filterArray.category.splice(indexVal, 1);
					}
					if(filterName == 'provider' && this.filterArray.provider.indexOf(filterValue)==-1){
						this.filterArray.provider.push(filterValue);
					}else if(filterName == 'provider' && this.filterArray.provider.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.provider.indexOf(filterValue);
						this.filterArray.provider.splice(indexVal, 1);
					}
					if(filterName == 'courseType' && this.filterArray.courseType.indexOf(filterValue)==-1){
						this.filterArray.courseType.push(filterValue);
					}else if(filterName == 'courseType' && this.filterArray.courseType.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.courseType.indexOf(filterValue);
						this.filterArray.courseType.splice(indexVal, 1);
					}
					if(filterName == 'courselevel' && this.filterArray.courselevel.indexOf(filterValue)==-1){
						this.filterArray.courselevel.push(filterValue);
					}else if(filterName == 'courselevel' && this.filterArray.courselevel.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.courselevel.indexOf(filterValue);
						this.filterArray.courselevel.splice(indexVal, 1);
					}
                                        if(filterName == 'learning_options' && this.filterArray.learningOption.indexOf(filterValue)==-1){
						this.filterArray.learningOption.push(filterValue);
					}else if(filterName == 'learning_options' && this.filterArray.learningOption.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.learningOption.indexOf(filterValue);
						this.filterArray.learningOption.splice(indexVal, 1);
					}
                                        if(filterName == 'offers' && this.filterArray.offer.indexOf(filterValue)==-1){
						this.filterArray.offer.push(filterValue);
					}else if(filterName == 'offers' && this.filterArray.offer.indexOf(filterValue)!=-1){
						var indexVal = this.filterArray.offer.indexOf(filterValue);
						this.filterArray.offer.splice(indexVal, 1);
					}
					if(typeVal == 'course'){
						this.filterValues.course = this.filterArray;
					}else if(typeVal == 'ebooks'){
						this.filterValues.ebooks = this.filterArray;
					}else if(typeVal == 'tests'){
						this.filterValues.tests = this.filterArray;
					}
					return this.filterArray;			
				}
				
				this.filterVisible = function(strobj){
					this.filterValArray = null;
					if(strobj.typeVar == 'course'){
						this.filterValArray = this.filterValues.course;
					}else if(strobj.typeVar == 'ebooks'){
						this.filterValArray = this.filterValues.ebooks;
					}else if(strobj.typeVar == 'tests'){
						this.filterValArray = this.filterValues.tests;
					}
					
					var categoryStatus = false;
					var providerStatus = false;
					var courseTypeStatus = false;
					var courselevelStatus = false;
                                        var learningOptionStatus = false;
                                        var offerStatus = false;
					
					if(this.filterValArray.category.length == 0 && this.filterValArray.provider.length == 0 && this.filterValArray.courseType.length == 0 && this.filterValArray.courselevel.length == 0 && this.filterValArray.learningOption.length == 0 && this.filterValArray.offer.length == 0){
						categoryStatus = true;
						providerStatus = true;
						courseTypeStatus = true;
						courselevelStatus = true;
                                                learningOptionStatus = true;
                                                offerStatus = true;
					}else{
						
						categoryStatus = false;
						providerStatus = false;
						courseTypeStatus = false;
						courselevelStatus = false;
                                                learningOptionStatus = false;
                                                offerStatus = false;
						if(this.filterValArray.category.length > 0){
						
							var categoryVals = this.filterValArray.category;
							for(var i=0;i<categoryVals.length;i++){
								if((strobj.category).indexOf(categoryVals[i])!=-1){
									categoryStatus = true;
									break;
								}
							}
						}else{
							categoryStatus = true;
						}
						
						if(this.filterValArray.provider.length > 0){
							
							var providerVals = this.filterValArray.provider;
							for(var i=0;i<providerVals.length;i++){
								if((strobj.provider).indexOf(providerVals[i])!=-1){
									providerStatus = true;
									break;
								}
							}
						}else{
							providerStatus = true;
						}
						
						if(this.filterValArray.courseType.length > 0){
							
							var courseTypeVals = this.filterValArray.courseType;
							for(var i=0;i<courseTypeVals.length;i++){
								if((strobj.course_type).indexOf(courseTypeVals[i])!=-1){
									courseTypeStatus = true;
									break;
								}
							}
						}else{
							courseTypeStatus = true;
						}
						
						if(this.filterValArray.courselevel.length > 0){
							
							var courselevelVals = this.filterValArray.courselevel;
							for(var i=0;i<courselevelVals.length;i++){
								if((strobj.level).indexOf(courselevelVals[i])!=-1){
									courselevelStatus = true;
									break;
								}
							}
						}else{
							courselevelStatus = true;
						}
                                                
                                                if(this.filterValArray.learningOption.length > 0){
							
							var learningOptionVals = this.filterValArray.learningOption;
							for(var i=0;i<learningOptionVals.length;i++){
								if((strobj.learning_options).indexOf(learningOptionVals[i])!=-1){
									learningOptionStatus = true;
									break;
								}
							}
						}else{
							learningOptionStatus = true;
						}
                                                
                                                if(this.filterValArray.offer.length > 0){
							
							var offerVals = this.filterValArray.offer;
							for(var i=0;i<offerVals.length;i++){
								if((strobj.offer).indexOf(offerVals[i])!=-1){
									offerStatus = true;
									break;
								}
							}
						}else{
							offerStatus = true;
						}
						
					}
					
					return (categoryStatus && providerStatus && courseTypeStatus && courselevelStatus && learningOptionStatus && offerStatus);
					
				}
			});
 /*------------- End : FilterService.js-----------*/ 

 /*------------- Begin : PaymentEventService.js-----------*/ 

angular.module('Simplilearn')
.service('PaymentEventService', function () {
    this.triggerPaymentEvent = function () {
        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_order_id', 'sl_final_cart_value', 'sl_currency', 'sl_payment_option_chosen', 'sl_cart_items']);
        WebTracking.eventReq.triggerEvent({event_id: "sl_pay_user_chooses_a_payment_option", event_data: eventData});
        var eventData = WebTracking.eventReq.getDataFromUserParams(['sl_order_id', 'sl_final_cart_value', 'sl_currency', 'sl_payment_option_chosen', 'sl_cart_items']);
        WebTracking.eventReq.triggerEvent({event_id: "sl_pay_user_initiates_payment", event_data: eventData});
    };

    this.getItemAttributeByIndex = function(index) {
        var data = {};
        var item = this.getItemDataByIndex(index)
        if(typeof item == 'undefined' || !item) {
            return data;
        }
        if(!Array.isArray(item.cateforyInfo)) {
            var cateforyInfo = []
            item.cateforyInfo = (item.cateforyInfo)?[item.cateforyInfo]:[];
            item.cateforyInfo.forEach(function(category){
                for(var id in category) {
                    cateforyInfo.push({ id: id, name: category[id],})
                };
            })
            item.cateforyInfo = cateforyInfo;
        }
        var mapperItemsToAttribute = {
            'sl_product_id' : 'course_id',
            'sl_product_name' : 'course_name',
            'sl_product_image' : 'image',
            'sl_product_category' : ['primary_label_name', 'category'],
            'sl_product_category_id' : 'primary_label_id',
            'sl_product_category_list' : 'cateforyInfo',
            'sl_product_training_type' : 'to_show_type',
            'sl_product_price_osl' : '',
            'sl_product_price_lvc' : '',
            'sl_product_price_classroom' : '',
            'sl_product_type' : 'productTypeName',
        }
        Object.keys(mapperItemsToAttribute).forEach(function(key) {
            var targetKeys = mapperItemsToAttribute[key];
            if(!Array.isArray(targetKeys)) {
                targetKeys = [targetKeys];
            }
            for(var i in targetKeys) {
                var targetKey = targetKeys[i];
                data[key] = (targetKey && item[targetKey])?item[targetKey]:'';
                if(data[key]) break;
            }
        });
        var key = 'sl_product_price_classroom';
        data['sl_product_training_type'] = 'classroom';
        if(item.trainingType_id == 2) {
            key = 'sl_product_price_osl';
            data['sl_product_training_type'] = 'osl';
        } else if((item.trainingType_id == 9)) {
            key = 'sl_product_price_lvc';
            data['sl_product_training_type'] = 'lvc';
        }
        var productId = data['sl_product_id'];
        if (!data['sl_product_type']) {
            data['sl_product_type'] = 'course';
            if (productId.indexOf('b') > -1) {
                data['sl_product_type'] = 'bundle';
            } else if (productId.indexOf('m') > -1) {
                data['sl_product_type'] = 'mom';
            }
        }
        data['sl_product_id'] = productId.replace('b', '').replace('m',  '');
        data[key] = item.display_total_price || 0;
        for (var key in data) {
            data[key] = WebTracking.eventReq.setType(data[key]);
        }
        return data;

    },
    this.getItemDataByIndex = function(index) {
        var items = user_params.sl_cart_items || [];
        return (typeof items[index] != 'undefined')?items[index]:{};
        /*for(var i in items) {
            var item = items[i];
            if(item.course_id == id) {
                return item;
            }
        }
        return {};*/
    }
    this.getAllItems = function() {
        return user_params.sl_cart_items || [];
    }
}); /*------------- End : PaymentEventService.js-----------*/ 

 /*------------- Begin : CorporateLeadService.js-----------*/ 

angular.module('Simplilearn')
.service('CorporateLeadService', function() {
    var self = this;
    var leadFormStatus = false;
    
    var gaPageTabName = '',
        gaPagePosition = '';
    
    self.setLeadFormStatus = function( pStatus ) {
        leadFormStatus = pStatus;
        if(pStatus) {
            angular.element(document.body).addClass('hide_scroll');
        }
        else {
            angular.element(document.body).removeClass('hide_scroll');            
        }
    };
    
    self.getLeadFormStatus = function() {
        return leadFormStatus;
    };
    
    self.setGaPositionData = function( pTabName, pPosition ) {
        gaPageTabName = pTabName;
        gaPagePosition = pPosition;
    };
    
    self.getGaPageTab = function() {
        return gaPageTabName;
    };
    
    self.getGaPagePosition = function() {
        return gaPagePosition;
    };
});


 /*------------- End : CorporateLeadService.js-----------*/ 

 /*------------- Begin : CoursePreviewModel.js-----------*/ 

angular.module('Simplilearn')
        .service('CpService', function($http, $rootScope, $timeout, $sce, LeadService, $location, $window,PostReqService,StorageService,$cookies ) {

            var coursePreviewData = null,
                    numOfLessons = null,
                    currSectionId = null,
                    currScoId = null,
                    currElearningId = null,
                    showPreviewVid = [],
                    sectionIframeSrc = [],
                    showIFrameStatus = [],
                    refresh_cache_param = $window.refresh_cache_param,
                    bundle_name='',tagNameStr='course preview',isMultipleVideoUrl = null,
                    semCurrElearningId=null,videoUrlStr=null,semVideoType='',videoPlayList = [],isSemTemplateThird=false;
            var jwPlayerObj,isFromELearning,url, videoFinished = [],goToVideoPlayStatus=false;
            var currentCourseId = 0,
                vidType = null;
            var self = this;
            this.lesson = '';
            this.chapter = '';
            var shortPreviewPopupFlag = true;
            this.exceedPopup = false;
            this.setExceedPopup = function(status) {
                this.exceedPopup = status;
            }

            this.getExceedPopup = function () {
                return this.exceedPopup;
            }

            this.listenerFlag = false;
            this.previewLeadPopup = 0;
            this.setPreviewLeadPopup = function(status){
                this.previewLeadPopup = status;
                if(isSemTemplateThird){
                    var coursePreviewDivId = "course_preview_vid-" + currentCourseId;
                    var index =jwplayer(coursePreviewDivId).getPlaylistIndex();
                    jwplayer(coursePreviewDivId).play()
                    jwplayer(coursePreviewDivId).playlistItem(index);
                }
            }
            this.getPreviewLeadPopup = function(){
                return this.previewLeadPopup;
            }

            this.getCurrScoId = function() {
                return currScoId;
            }


            this.setCurrentCourseId = function(courseId){
                currentCourseId = courseId;
            }

            this.getCurrentCourseId = function(){
                return this.currentCourseId;
            }

            this.setBundleName = function(bundleName){
                bundle_name = bundleName;
            }
            this.getCoursePreviewData = function(pCourseId) {
                var refresh_cache = '';
                if( typeof $location.search()[refresh_cache_param] !== 'undefined' && $location.search()[refresh_cache_param] ) {
                    refresh_cache = '&'+refresh_cache_param+'=1';
                }
                var promise = $http.get(baseApiUrl + "?method=getCoursePreviewData"+refresh_cache,
                        { params: {
                                    "course_id":pCourseId
                                  }
                        })
                        .then(function(response) {
                            if( typeof response.data.status !== 'undefined' && typeof response.data.content !== 'undefined' && response.data.status == 'success' ) {
                                coursePreviewData = response.data.content;
                            }
                            else {
                                coursePreviewData = null;
                            }

                            return coursePreviewData;
                        });

                return promise;
            };

            /// Preview click
            this.handleVideoLinkClick = function(elearningId, lessons, scoId, sectionId, fromELearning,vidurl,vidtype,entp,lesson,chapter,optin) {
                self.lesson = lesson;
                self.chapter = chapter;
                numOfLessons = lessons;
                currSectionId = sectionId;
                currScoId = scoId;
                currElearningId = elearningId;
                isFromELearning = fromELearning;
                url = vidurl;
                vidType = vidtype;
                if (numOfLessons !== 0 && numOfLessons !== null) {   //to allow the case of independent video i.e. a video not under any module.
                    return;
                }

                if (!currScoId || (!currScoId && isFromELearning) ) {
                    return;
                }

                $rootScope.isCpClicked = 1;
                if(!user_params.isEuro){
                    if(shortPreviewPopupFlag) {
                        if ((!LeadService.isSkipPopup('course preview')) && $rootScope.isPreviewLeadCreated != true && (entp == undefined || entp == '')) {
                            $timeout(function() {
                               self.showPreviewLead();
                                self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                            }, 0);
                        }
                        else {
                            self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                          //  console.log("handleVideoLinkClick");
                            this.showPreview();
                        }
                    } else {
                        if (!optin && $rootScope.isLoggedIn != true && (entp == undefined || entp == '')) {
                            $timeout(function() {
                                var loginBtnObj = document.getElementById('registerBtn');
                                if(!loginBtnObj) {
                                    var loginBtnObj = document.getElementById('loginBtnAlt');
                                }

                                angular.element(loginBtnObj).triggerHandler('click');
                            }, 0);
                        }
                        else {
                            this.showPreview();
                        }
                    }
                }
                // if country is euro and not b2b portal
                if(user_params.isEuro && (entp == undefined || entp == '')) {
                    var optinSet = typeof getCookieByName(user_params.OPTIN_COOKIE) != 'undefined' ? true : false;
                    var optin = getCookieByName(user_params.OPTIN_COOKIE) == 1 ? true : false;
                    //var cprCookie = getCookieByName('_cpruid');
                    var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if (!optinSet || (optin && !_cpLeadInfoExist)) {
                        $timeout(function() {
                            self.showPreviewLead();
                        }, 0);
                        //if course preview cookie is set and user has opted in to create lead
                        //then show course preview and create lead
                    } else if(optin == true && $rootScope.isPreviewLeadCreated){
                        this.showPreview();
                        self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                    } else {
                        this.showPreview();
                    }

                }

                if(!self.listenerFlag) {
                    $rootScope.$on('isPreviewLeadCreated', function(pEvt, pVal) {
                        if(pVal && $rootScope.isCpClicked === 1) {
                           // console.log("line 160 called");
                            self.showPreview();
                        }
                    });

                    $rootScope.$on('isLoggedIn', function(pEvt, pVal) {
                        if(pVal && $rootScope.isCpClicked === 1) {
                           // console.log("line 167 called");
                            self.showPreview();
                        }
                    });
                    self.listenerFlag = true;
                }

                return $rootScope.isCpClicked !== null && showPreviewVid[currentCourseId] === 1 && $rootScope.isCpClicked === 1;
            };
            // Preview click Sem Master
            this.handleVideoLinkClickSem = function (elearningId, lessons, scoId, sectionId, fromELearning, vidurl, vidtype, entp, lesson, chapter,optin) {
                self.lesson = lesson;
                self.chapter = chapter;
                numOfLessons = lessons;
                currSectionId = sectionId;
                currScoId = scoId;
                currElearningId = elearningId;
                isFromELearning = fromELearning;
                url = vidurl;
                vidType = vidtype;
                if (numOfLessons !== 0 && numOfLessons !== null) {   //to allow the case of independent video i.e. a video not under any module.
                    return;
                }
                if (!currScoId || (!currScoId && isFromELearning)) {
                    return;
                }
                $rootScope.isCpClicked = 1;
                if(!user_params.isEuro){
                    if (shortPreviewPopupFlag) {
                        var semFreeVideoFlag = false;
                        if($rootScope.isSemBundle && $rootScope.templateId == 2){
                            var semBundleId=user_params.bundle_id;
                            var sembFVCookie='_sembfv'+semBundleId+'_identifier';
                            var sembFreeVideo= getCookieByName(sembFVCookie);
                            var sembFVIDCookie='_sembfvId'+semBundleId+'_identifier';
                            var sembFreeVideoId = getCookieByName(sembFVIDCookie);
                            semFreeVideoFlag = (typeof sembFreeVideo === "undefined" || sembFreeVideo == "false" )? true : false;
                            if(semFreeVideoFlag != true && $rootScope.isPreviewLeadCreated != true){
                                entp='';
                            }
                            if(typeof sembFreeVideoId !=="undefined" && sembFreeVideoId == currScoId){
                                 semFreeVideoFlag=true;
                            }
                         }
                        if ($rootScope.isLoggedIn != true && $rootScope.isPreviewLeadCreated != true && (entp == undefined || entp == '') && semFreeVideoFlag != true) {
                            $rootScope.showPreviewLeadStatus = true;
                            self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                        }
                        else {
                            $rootScope.showPreviewLeadStatus = false;
                            //console.log("line 217 called");
                            this.showPreview();
                        }
                    } else {
                        if ($rootScope.isLoggedIn != true && (entp == undefined || entp == '')) {
                            $timeout(function () {
                                var loginBtnObj = document.getElementById('registerBtn');
                                if (!loginBtnObj) {
                                    var loginBtnObj = document.getElementById('loginBtnAlt');
                                }
                                angular.element(loginBtnObj).triggerHandler('click');
                            }, 0);
                        }
                        else {
                            //console.log("line 231 called");
                            this.showPreview();
                        }
                    }
                }
                // if country is euro and not b2b portal
                if(user_params.isEuro && (entp == undefined || entp == '')) {
                    var optinSet = typeof optin != 'undefined' ? true:false;
                    var optin = (optin == 1) ? true : false;
                    var semFreeVideoFlag = false;
                    if($rootScope.isSemBundle && $rootScope.templateId == 2){
                            var semBundleId=user_params.bundle_id;
                            var sembFVCookie='_sembfv'+semBundleId+'_identifier';
                            var sembFreeVideo= getCookieByName(sembFVCookie);
                            var sembFVIDCookie='_sembfvId'+semBundleId+'_identifier';
                            var sembFreeVideoId = getCookieByName(sembFVIDCookie);
                           semFreeVideoFlag = (typeof sembFreeVideo === "undefined" || sembFreeVideo == "false" )? true : false;
                           if(semFreeVideoFlag != true && $rootScope.isPreviewLeadCreated != true){
                               entp='';
                           }
                           if(typeof sembFreeVideoId !=="undefined" && sembFreeVideoId == currScoId){
                                semFreeVideoFlag=true;
                           }
                        }
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if($rootScope.isPreviewLeadCreated != true && !optinSet && semFreeVideoFlag != true){
                        $timeout(function() {
                            $rootScope.showPreviewLeadStatus = true;
                        }, 0);
                        //if course preview cookie is set and user has opted in to create lead
                        //then show course preview and create lead
                    } else if(optin == true && $rootScope.isPreviewLeadCreated){
                        $rootScope.showPreviewLeadStatus = false;
                        this.showPreview();
                        self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                    } else {
                        //console.log("line 269 called");
                        this.showPreview();
                    }

                }

                if (!self.listenerFlag) {
                    $rootScope.$on('isPreviewLeadCreated', function (pEvt, pVal) {
                        if (pVal && $rootScope.isCpClicked === 1) {
                            //console.log("line 277 called");
                            self.showPreview();
                        }
                    });

                    $rootScope.$on('isLoggedIn', function (pEvt, pVal) {
                        if (pVal && $rootScope.isCpClicked === 1) {
                            //console.log("line 285 called");
                            self.showPreview();
                        }
                    });
                    self.listenerFlag = true;
                }
                return $rootScope.isCpClicked !== null && showPreviewVid[currentCourseId] === 1 && $rootScope.isCpClicked === 1;
            };
             this.fhandleVideoLinkClickSem = function (elearningId, lessons, scoId, sectionId, fromELearning, vidurl, vidtype, entp, lesson, chapter,optin,isMultipleVideo,index) {
                self.lesson = lesson;
                self.chapter = chapter;
                numOfLessons = lessons;
                currSectionId = sectionId;
                currScoId = scoId;
                currElearningId = elearningId;
                isFromELearning = fromELearning;
                url = vidurl;
                vidType = vidtype;
                currentCourseId= parseInt(currentCourseId);
                isMultipleVideoUrl = typeof isMultipleVideo !=="undefined" ? isMultipleVideo : null;
                if (numOfLessons !== 0 && numOfLessons !== null) {   //to allow the case of independent video i.e. a video not under any module.
                    return;
                }

                if (!currScoId || (!currScoId && isFromELearning)) {
                    return;
                }
                $rootScope.isCpClicked = 1;
                $rootScope.goToVideoIndex=index;
                if(!user_params.isEuro){
                    if (shortPreviewPopupFlag) {
                        if ($rootScope.isLoggedIn != true && $rootScope.isPreviewLeadCreated != true && (entp == undefined || entp == '') && (index > 0)) {
                            $rootScope.showPreviewLeadStatus = true;
                            self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                            $rootScope.semVideoIndex=index;
                            this.fshowPreview(index);
                        }
                        else {
                            $timeout(function() {
                             $rootScope.showPreviewLeadStatus = false;
                             $rootScope.semVideoIndex=index;
                            self.fshowPreview(index);
                        }, 0);
                        }
                    } else {
                        if ($rootScope.isLoggedIn != true && (entp == undefined || entp == '')) {
                            $timeout(function () {
                                var loginBtnObj = document.getElementById('registerBtn');
                                if (!loginBtnObj) {
                                    var loginBtnObj = document.getElementById('loginBtnAlt');
                                }
                                angular.element(loginBtnObj).triggerHandler('click');
                            }, 0);
                        }
                        else {
                            $rootScope.semVideoIndex=index;
                            this.fshowPreview(index);
                        }
                    }
                }
                // if country is euro and not b2b portal
                if(user_params.isEuro && (entp == undefined || entp == '')) {
                    var optinSet = typeof optin != 'undefined' ? true:false;
                    var optin = (optin == 1) ? true : false;
                    //if course preview cookie is not created and optin cookie is not created
                    //show form
                    if($rootScope.isPreviewLeadCreated != true && !optinSet){
                        $timeout(function() {
                            if(parseInt(index)){
                                $rootScope.semVideoIndexEuro = index;
                                $rootScope.showPreviewLeadStatus = true;
                            }else{
                                $rootScope.semVideoIndexEuro = index;
                                $rootScope.showPreviewLeadStatus = false;
                            }
                            self.fshowPreview(index);
                        }, 0);
                        //if course preview cookie is set and user has opted in to create lead
                        //then show course preview and create lead
                    } else if(optin == true && $rootScope.isPreviewLeadCreated){
                        $rootScope.showPreviewLeadStatus = false;
                        $rootScope.semVideoIndexEuro = index;
                        this.fshowPreview(index);
                        self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                    } else {
                        $rootScope.semVideoIndexEuro = index;
                        this.fshowPreview(index);
                    }

                }

                if (!self.listenerFlag) {
                    $rootScope.$on('isPreviewLeadCreated', function (pEvt, pVal) {
                        if (pVal && $rootScope.isCpClicked === 1) {
                            if(typeof user_params.isEuro !=="undefined" && user_params.isEuro){
                                if($rootScope.semVideoIndexEuro){
                                    index = $rootScope.semVideoIndexEuro;
                                }
                            }
                            if(!user_params.isEuro){
                                if($rootScope.semVideoIndex){
                                    index = $rootScope.semVideoIndex;
                                }
                            }
                            self.fshowPreview(index);
                        }
                    });

                    $rootScope.$on('isLoggedIn', function (pEvt, pVal) {
                        if (pVal && $rootScope.isCpClicked === 1) {
                            self.fshowPreview(index);
                        }
                    });
                    self.listenerFlag = true;
                }
                return $rootScope.isCpClicked !== null && showPreviewVid[currentCourseId] === 1 && $rootScope.isCpClicked === 1;
            };

            this.showPreviewLead = function() {
                self.setPreviewLeadPopup(1);
            };

            this.coursePreviewWatch = function (type) {
                var optin = (getCookieByName(user_params.OPTIN_COOKIE) == 1) ? true : false;
                if (!optin && user_params.isEuro) {
                    return;
                }
                if(typeof $rootScope.hasValidationCoursePreview != 'undefined' && $rootScope.hasValidationCoursePreview === false) {
                    $rootScope.hasValidationCoursePreview = null;
                    return;
                }
            };

            this.showPreview = function(){
                var courseType = '';
                if(user_params.course_id) {
                    courseType = 'course';
                } else if(user_params.bundle_id) {
                    courseType = 'bundle';
                }
                videoFinished[currentCourseId] = 0;
                for(var key in showPreviewVid){
                    showPreviewVid[key] = 0;
                }
                if(typeof isFromELearning != 'undefined' && url!=null && url !=''){
                    var postParams = {'method':'getVideoUrl','video':url, 'isFromELearning': (isFromELearning)?1:0, 'type': courseType };
                    PostReqService.sendPostRequest(baseApiUrlNocache,postParams)
                            .then(function (response) {
                                if(typeof response.data !== 'undefined' && response.data == null){
                                }else if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == '200') {
                                    var resData = response.data;
                                    if(resData && resData.status == "success") {
                                        try{self.submitPreviewLead();}catch(err){}
                                        showPreviewVid[currentCourseId] = 1;
                                        if($rootScope.isLoggedIn) {
                                            self.coursePreviewWatch(0);
                                        } else {
                                            self.coursePreviewWatch(1);
                                        }

                                        if(!isFromELearning) {
                                            var videoUrl = response.data;
                                            var vUrl = videoUrl.url;
                                            videoFinished[currentCourseId] = 0;
                                            var coursePreviewDivId = "course_preview_vid-"+currentCourseId;
                                            jwPlayerObj = jwplayer(coursePreviewDivId).setup({
                                                    file: vUrl,
                                                    image: '',
                                                    base: staticUrl + 'core/js/jwplayer/',
                                                    width: "100%",
                                                    aspectratio:"2:1",
                                                    startparam: 'start',
                                                    //skin: staticUrl + 'core/js/jwplayer/skin_base64_new.xml',
                                                    fallback: false,
                                                    icons: true,
                                                    autostart: true
                                            }).onComplete(function(){
                                                $timeout(function() {
                                                    document.getElementById(coursePreviewDivId).innerHTML = '';
                                                }, 500);
                                                $rootScope.$apply(function(){
                                                    for(var key in showPreviewVid){
                                                        videoFinished[key] = 0;
                                                    }
                                                    videoFinished[currentCourseId] = 1;
                                                });
                                            }).onPlay(function(){
                                                $rootScope.$apply(function(){
                                                    videoFinished[currentCourseId] = 0;
                                                });
                                            });
                                            showIFrameStatus[currentCourseId] = 0;
                                        } else {
                                            var videoUrl = response.data;
                                            var vUrl = videoUrl.url;
                                            if (vidType == 'webcontent') {
                                                sectionIframeSrc[currentCourseId] = $sce.trustAsResourceUrl(vUrl);
                                                showIFrameStatus[currentCourseId] = 1;
                                            } else if (vidType == 'mp4') {
                                                videoFinished[currentCourseId] = 0;
                                                var coursePreviewDivId = "course_preview_vid-" + currentCourseId;
                                                jwPlayerObj = jwplayer(coursePreviewDivId).setup({
                                                    file: vUrl,
                                                    image: '',
                                                    base: staticUrl + 'core/js/jwplayer/',
                                                    width: "100%",
                                                    aspectratio: "2:1",
                                                    startparam: 'start',
                                                    fallback: false,
                                                    icons: true,
                                                    autostart: true
                                                }).onComplete(function () {
                                                    $timeout(function () {
                                                        document.getElementById(coursePreviewDivId).innerHTML = '';
                                                    }, 500);
                                                    $rootScope.$apply(function () {
                                                        for (var key in showPreviewVid) {
                                                            videoFinished[key] = 0;
                                                        }
                                                        videoFinished[currentCourseId] = 1;
                                                    });
                                                }).onPlay(function () {
                                                    if($rootScope.isSemBundle && $rootScope.templateId == 2){
                                                                var semBundleId=user_params.bundle_id;
                                                                var sembFVCookie='_sembfv'+semBundleId+'_identifier';
                                                                var sembFreeVideo= getCookieByName(sembFVCookie);
                                                                if(typeof sembFreeVideo ==="undefined" || sembFreeVideo != true){
                                                                    var exdays= 90;
                                                                    var d = new Date();
                                                                    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                                                                    var expires = "expires=" + d.toUTCString();
                                                                    var cname = sembFVCookie;
                                                                    var cvalue=1;
                                                                    var path ="/";
                                                                    document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
                                                                }
                                                                var sembFVIDCookie='_sembfvId'+semBundleId+'_identifier';
                                                                var sembFreeVideoId = getCookieByName(sembFVIDCookie);
                                                                if(typeof sembFreeVideoId === "undefined" || sembFreeVideoId == "false"){
                                                                    var exdays= 90;
                                                                    var d = new Date();
                                                                    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                                                                    var expires = "expires=" + d.toUTCString();
                                                                    var cname = sembFVIDCookie;
                                                                    var cvalue=currScoId;
                                                                    var path ="/";
                                                                    document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
                                                                }
                                                    }
                                                    $rootScope.$apply(function () {
                                                        videoFinished[currentCourseId] = 0;
                                                    });
                                                });
                                                showIFrameStatus[currentCourseId] = 0;
                                            }
                                        }

                                        self.gaCoursePreviewModelJs.gaFireOnCoursePreviewSuccess();
                                    } else {

                                        /*
                                        // Exceed Popup
                                        self.setExceedPopup(true);
                                        var exceedPopup = document.getElementById('course-preview-restrict');
                                        exceedPopup.style.display = 'block';
                                        */

                                        $timeout(function() {
                                            self.showPreviewLead();
                                        }, 0);
                                    }
                                }
                            });
                }else{
                    self.gaCoursePreviewModelJs.gaFireOnCoursePreviewSuccess();
                    sectionIframeSrc[currentCourseId] = $sce.trustAsResourceUrl(baseLmsUrl + "course/scorm/course-preview/elearningId/"+currElearningId+"/sectionId/" + currSectionId + "/scoId/" + currScoId);
                    showIFrameStatus[currentCourseId] = 1;
                }
                return true;
            };

            this.submitPreviewLead = function () {
                var siteModule = 'course preview';
                var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                var cprPID = '';
                if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "course") {
                    cprPID = 'cprc' + user_params.course_id;
                }
                else if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "bundle") {
                    cprPID = 'cprb' + user_params.bundle_id;
                }
                if ((typeof _cpLeadInfoExist !=="undefined" && _cpLeadInfoExist) || LeadService.isSkipPopup(siteModule)) {
                    $rootScope.isCpClicked=0;
                    var coursePreviewCookieCIdArr = [];
                    if(typeof _cpLeadInfoExist !=="undefined"){
                        coursePreviewCookieCIdArr=_cpLeadInfoExist.split(",")
                    }
                    if ((coursePreviewCookieCIdArr.length > 0 && coursePreviewCookieCIdArr.indexOf(cprPID) == -1 ) || (coursePreviewCookieCIdArr.length == 0)) {
                        webengage.onReady(function () {
                            var webEngageLeadParams = [];
                            if(typeof webengage.state != 'undefined' && typeof webengage.state.getForever != 'undefined'){
                                webEngageLeadParams = webengage.state.getForever().uattr;
                            }
                            if(typeof webEngageLeadParams !=="undefined" && webEngageLeadParams['we_email']){
                                    var locatorCookie = getCookieByName('locatori9');
                                    var locatorCookieObj = JSON.parse(locatorCookie);
                                    var leadSourceString = document.URL;
                                    var idVar = user_params.course_id != undefined || user_params.course_id != '' ? user_params.course_id : user_params.bundle_id;
                                    var pageCategory = typeof user_params.pageCategory !== "undefined" ? user_params.pageCategory : '';
                                    var firstName = webEngageLeadParams['we_first_name'];
                                    var lastName = webEngageLeadParams['we_last_name'];
                                    var phone= webEngageLeadParams['we_phone'];
                                    var email = webEngageLeadParams['we_email'];
                                    var cprPID=0;
                                    var cprPName="";
                                    if(typeof user_params.sl_product_type !=="undefined" && user_params.sl_product_type == "course"){
                                           cprPID = user_params.course_id;
                                           cprPName=user_params.course_name;
                                    }
                                    else if(typeof user_params.sl_product_type !=="undefined" && user_params.sl_product_type == "bundle"){
                                           cprPID =  user_params.bundle_id;
                                           cprPName=user_params.bundle_name;
                                    }
                                    var postParams = {
                                        'email': email,
                                        'phone': phone,
                                        'courseId': idVar,
                                        'topicId': self.getCurrScoId(),
                                        'courseName': user_params.course_name,
                                        'customerType': 'B2C',
                                        'agreeToContact': '',
                                        'leadSource': fetchUTMSource(),
                                        'leadTrainingType': 'Not Sure',
                                        'leadSourceString': leadSourceString,
                                        'tagName': siteModule,
                                        'b2cQueryType': 'course_preview',
                                        'productTypeId': user_params.productTypeId,
                                        'billingTypeId': user_params.billingTypeId,
                                        'query': '',
                                        'auth': '1',
                                        'GCLID': getGCLID(),
                                        'pageCategory': pageCategory,
                                        'countryId': locatorCookieObj.country_id,
                                        'countryName': locatorCookieObj.country_name.replace(/\+/g, ' '),
                                        'cityId': locatorCookieObj.city_id,
                                        'cityName': locatorCookieObj.name,
                                        'sl_product_id': cprPID,
                                        'sl_product_name': cprPName
                                    };
                                WebTracking.eventReq.triggerEvent({
                                    event_id : "sl_lead_user_submitted_lead_form",
                                    event_data: {
                                        'sl_lead_type' : 'b2c',
                                        'sl_site_module' : siteModule,
                                        'sl_user_email': email,
                                        'sl_user_phone' : phone || '',
                                        'sl_email_opt_in' : true,
                                        'sl_sms_opt_in': true,
                                        'sl_user_first_name' :  typeof   firstName  != 'undefined' && firstName  ? firstName : '',
                                        'sl_user_last_name' :   typeof   lastName   != 'undefined'   &&   lastName ?  lastName : '',
                                    },
                                    common : "product",
                                    user_attributes: ['sl_lead_type', 'sl_event_time','sl_user_email','sl_user_phone'],
                                    // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                                    // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                                });
                                var webEngageLeadFormParams = WebTracking.eventReq.eventParam.event_data;
                                var finalB2CParamArr=PostReqService.prepareB2CLeadParameters(postParams,webEngageLeadFormParams);
                                var applicationContentType='json';
                                try{
                                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, finalB2CParamArr,applicationContentType)
                                                .then(function (data, status, header, config){
                                                            if (typeof data !=="undefined" && data != null) {
                                                                if (data.status == 200 && data.data.status == "success") {
                                                                            // Update user hash
                                                                            var user = $rootScope.userInfo || {};
                                                                            user.email = postParams.email;
                                                                            user.phone = phone || user.phone;
                                                                            user.phoneCode = user.phoneCode || '';
                                                                            PostReqService.setUserHash(user);
                                                                            self.setPreviewLeadPopup(0)
                                                                            $rootScope.isPreviewLeadCreated = true;
                                                                            $rootScope.showPreviewLeadStatus = false;
                                                                            $rootScope.$emit('isPreviewLeadCreated', true);
                                                                            var coursePreviewWatch = 0;
                                                                            var cprPID = 0;
                                                                            var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                                                                            if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "course") {
                                                                                cprPID = 'cprc' + user_params.course_id;
                                                                            }
                                                                            else if (typeof user_params.sl_product_type !== "undefined" && user_params.sl_product_type == "bundle") {
                                                                                cprPID = 'cprb' + user_params.bundle_id;
                                                                            }

                                                                            if (_cpLeadInfoExist) {
                                                                                var coursePreviewCookieCIdArr = _cpLeadInfoExist.split(",");
                                                                                if (coursePreviewCookieCIdArr.indexOf(cprPID) == -1) {
                                                                                    coursePreviewCookieCIdArr.push(cprPID);
                                                                                    cprPID = coursePreviewCookieCIdArr.join(",");
                                                                                }
                                                                            }
                                                                            setCookie('_user_ld_info', cprPID, 90);
                                                                            if(typeof user_params.isPlayListVideo !=='undefined' && user_params.isPlayListVideo === true &&  typeof $rootScope.templateId !=="undefined" && parseInt($rootScope.templateId) ===3){
                                                                                $rootScope.semVideoPlayListLeadStatus = true;
                                                                                $timeout(function () {
                                                                                    //console.log("called");
                                                                                    if (typeof _cpLeadInfoExist !== 'undefined') {
                                                                                        if ($rootScope.isLoggedIn) {
                                                                                            self.coursePreviewWatch(0);
                                                                                        } else {
                                                                                            self.coursePreviewWatch(1);
                                                                                        }
                                                                                    }
                                                                                }, 1000);
                                                                            }
                                                                            if ($rootScope.isLoggedIn) {
                                                                                  var leadId= typeof data.data.data !=="undefiend" && typeof data.data.data.lead_id  !=="undefined" ? data.data.data.lead_id :'';
                                                                                  if(leadId){
                                                                                      setUpDataLayer('leadCapture', 'coursePreview', {'leadId': leadId});
                                                                                  }
                                                                            }
                                                                            var gaPreviewLead = new gaClassForPreviewLead();
                                                                            gaPreviewLead.gaFireOnPreviewLead('leadsubmittedpreview', user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + user_params.chapter + ' || ' + user_params.lesson);
                                                                }
                                                            }
                                            }).catch(function(err){});
                                }catch(err){}
                            }
                        });
                    }
                }
            }
           /** Sem Third Template VideoList Functionalities Starts Here **/
               this.fshowPreview = function(index){
                     // console.log("Video Form PlayList",index);
                      $rootScope.goToVideoIndex= index;
                      var coursePreviewDivId = "course_preview_vid-" + currentCourseId;
                      jwplayer(coursePreviewDivId).playlistItem(index);
              //        var _freeVideoViewed = getCookieByName('free_video_viewed');
                      if($rootScope.showPreviewLeadStatus && parseInt(index) > 0 ){
                                  $timeout(function() {
                                                jwplayer().stop()
                                              }, 1000);

                      }
               };
              this.setSemPlaylistParams =function(elearningId,urlStr,videoType,courseId){
                  isMultipleVideoUrl = 1;
                  semCurrElearningId=elearningId;
                  videoUrlStr=urlStr;
                  semVideoType=videoType;
                  currentCourseId = courseId;
                  isSemTemplateThird = true;
              }
            this.fshowPlalistPreview = function(jumpToVideoIndex){
                //console.log("Jump To Playing Video",jumpToVideoIndex);
                var courseType = '';
                var coursePreviewDivId = "course_preview_vid-" + currentCourseId;
                var goToVideoIndex = typeof jumpToVideoIndex !=='undefined' ? parseInt(jumpToVideoIndex) : '';
                $rootScope.goToVideoIndex= goToVideoIndex;
                goToVideoPlayStatus =false;
                var currentVideoIndex=0;
                var videoIndexCounter = 0 ;
                var stopVideoPlay = false;
                if(user_params.course_id) {
                    courseType = 'course';
                } else if(user_params.bundle_id) {
                    courseType = 'bundle';
                }
                videoFinished[currentCourseId] = 0;
                for(var key in showPreviewVid){
                    showPreviewVid[key] = 0;
                }
                var videoEncodedUrl = typeof videoUrlStr !=="undefined" ? videoUrlStr.split(",") :[];
                if(typeof semCurrElearningId != 'undefined' && videoUrlStr!=null && videoUrlStr !=''){
                    var postParams = {'method':'getMultipleVideoUrl','video':videoUrlStr, 'isFromELearning': (semCurrElearningId)?1:0, 'type': 'course','isMultipleVideoUrl': isMultipleVideoUrl };
                    PostReqService.sendPostRequest(baseApiUrlNocache,postParams)
                            .then(function (response) {
                                if(typeof response.data !== 'undefined' && response.data == null){
                                }else if (typeof response.status !== 'undefined' && typeof response.data !== 'undefined' && response.status == '200') {
                                    var resData = response.data;
                                    if(resData.url){
                                        var videoUrlList= resData.url;
                                        for(var key in videoUrlList){
                                            var vUrl = videoUrlList[key];
                                            videoPlayList[key]={"file":decodeURI(vUrl)}
                                        }
                                    }
                                    if(resData && resData.status == "success") {
                                    showPreviewVid[currentCourseId] = 1;
                                    var videoUrl = response.data;
                                    var vUrl = videoUrl.url;
                                    if (semVideoType == 'webcontent') {
                                        sectionIframeSrc[currentCourseId] = $sce.trustAsResourceUrl(vUrl);
                                        showIFrameStatus[currentCourseId] = 1;
                                    } else if (semVideoType == 'mp4') {
                                        videoFinished[currentCourseId] = 0;
                                        jwPlayerObj = jwplayer(coursePreviewDivId).setup({
                                            playlist: videoPlayList,
                                            image: '',
                                            base: staticUrl + 'core/js/jwplayer/',
                                            width: "100%",
                                            aspectratio: "2:1",
                                            startparam: 'start',
                                            fallback: false,
                                            icons: true,
                                            autostart: true,
                                        }).onComplete(function () {
                                               var nextListVideoIndex = jwplayer(coursePreviewDivId).getPlaylistIndex();
                                               if(typeof goToVideoIndex !=="undefined" && parseInt(goToVideoIndex) > 0 && goToVideoIndex < nextListVideoIndex){
                                                   goToVideoIndex= jwplayer(coursePreviewDivId).getPlaylistIndex();
                                               }
                                               if(typeof goToVideoIndex !=="undefined" && parseInt(goToVideoIndex) > 0){
                                                   goToVideoIndex = parseInt(goToVideoIndex) + 1 ;
                                                   if(goToVideoIndex < videoPlayList.length){
                                                       videoIndexCounter = parseInt(goToVideoIndex);
                                                   }else{
                                                       goToVideoIndex = 0;
                                                       videoIndexCounter = 0;
                                                   }
                                               }else{
                                                  var playListVideoIndex = jwplayer(coursePreviewDivId).getPlaylistIndex();
                                                  if(parseInt(playListVideoIndex) < videoPlayList.length){
                                                      videoIndexCounter = parseInt(playListVideoIndex)+1;
                                                  }else{
                                                       videoIndexCounter =0 ;
                                                  }
                                               }
                                                if(goToVideoIndex !=='undefined' && goToVideoIndex !=='' && $rootScope.singlePreviewVideoPlayed === false){
                                                    $rootScope.singlePreviewVideoPlayed =true;
                                                    if(goToVideoIndex){
                                                        var cname = 'free_video_viewed';
                                                        var cvalue = goToVideoIndex;
                                                        var d = new Date();
                                                        d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                                        var expires = "expires=" + d.toUTCString();
                                                        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                                                    }
                                                }
                                                if(parseInt(videoIndexCounter)=== 0){
                                                    goToVideoIndex=0;
                                                    $rootScope.goToVideoIndex=0;
                                                }
                                               // console.log("Playing Video",videoIndexCounter);
                                                jwplayer(coursePreviewDivId).playlistItem(videoIndexCounter);
                                        }).onBeforePlay(function(){
                                           //console.log("Current :",jwplayer(coursePreviewDivId).getPlaylistIndex(),goToVideoIndex,$rootScope.singlePreviewVideoPlayed,$rootScope.previewPopupVideoPlayed);
                                           if(goToVideoPlayStatus && $rootScope.goToVideoIndex && $rootScope.singlePreviewVideoPlayed === false){
                                               //console.log("Current Video Index",goToVideoIndex);
                                               if(typeof goToVideoIndex !=="undefined" && goToVideoIndex > 0){
                                                   goToVideoIndex = parseInt(jwplayer(coursePreviewDivId).getPlaylistIndex());
                                               }
                                           }else if(typeof $rootScope.goToVideoIndex !=="undefined"){
                                              goToVideoIndex= parseInt($rootScope.goToVideoIndex);
                                           }
                                           var currentVideoIndex = typeof goToVideoIndex !=="undefined" && parseInt(goToVideoIndex) > 0 ? parseInt(goToVideoIndex) : jwplayer(coursePreviewDivId).getPlaylistIndex();
                                           var semAgendaLeadSubmitted= getCookieByName('_semagenda');
                                           var coursePreviewWatchLead= getCookieByName('_cpwlead');
                                           /*
                                            * 
                                            * Need To Change Here Create Lead
                                            */
                                          // var _cpruidExist = getCookieByName('_cpruid');
                                           var _cpLeadInfoExist = getCookieByName('_user_ld_info');
                                            // console.log(_cpruidExist,coursePreviewWatchLead);
                                           if(typeof semAgendaLeadSubmitted !=="undefined" && parseInt(semAgendaLeadSubmitted) && (typeof coursePreviewWatchLead ==="undefined" || parseInt(coursePreviewWatchLead)===0) && $rootScope.previewPopupVideoPlayed === true && parseInt(currentVideoIndex)){
                                                    $timeout(function () {
                                                        var cname = '_cpwlead';
                                                        var cvalue = 1;
                                                        var d = new Date();
                                                        d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                                        var expires = "expires=" + d.toUTCString();
                                                        var subdomain= '.simplilearn.com';
                                                        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain="+subdomain;
                                                        if ($rootScope.isLoggedIn) {
                                                            self.coursePreviewWatch(0);
                                                        } else {
                                                            self.coursePreviewWatch(1);
                                                        }
                                                        //New Lead Function
                                                        self.submitPreviewLead();
                                                    }, 1000);
                                                    //console.log("Course Preview Lead Created From Top 1: ",$rootScope.isPreviewLeadCreated);
                                            }else if(typeof _cpLeadInfoExist !=="undefined" && (typeof coursePreviewWatchLead ==="undefined" || parseInt(coursePreviewWatchLead)===0)  && parseInt(currentVideoIndex)){
                                                    var cname = '_cpwlead';
                                                    var cvalue = 1;
                                                    var d = new Date();
                                                    d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                                    var expires = "expires=" + d.toUTCString();
                                                    var subdomain= '.simplilearn.com';
                                                    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain="+subdomain;
                                                    $timeout(function () {
                                                        if ($rootScope.isLoggedIn) {
                                                            self.coursePreviewWatch(0);
                                                        } else {
                                                            self.coursePreviewWatch(1);
                                                        }
                                                        //New Lead Function
                                                        self.submitPreviewLead();
                                                    }, 1000);
                                                //console.log("Course Preview Lead Created From Top 2: ",$rootScope.isPreviewLeadCreated);
                                            }
                                           if(parseInt(currentVideoIndex) >= videoPlayList.length){
                                               currentVideoIndex =0;
                                               jwplayer(coursePreviewDivId).playlistItem(0);
                                           }
                                            if(currentVideoIndex){
                                                 url = videoEncodedUrl[currentVideoIndex];
                                            }
                                           if(parseInt(currentVideoIndex) && parseInt(currentVideoIndex) < videoPlayList.length){
                                                    var el =document.getElementsByClassName("sem-playlist-video");
                                                    if(el.length){
                                                       for(var i=0;i<el.length;i++){
                                                           el[i].classList.remove("active");
                                                       }
                                                       var currentIndex= jwplayer(coursePreviewDivId).getPlaylistIndex();
                                                       var videoIndex = parseInt(currentIndex) > currentVideoIndex ? currentIndex : currentVideoIndex;
                                                       el[videoIndex].classList.add("active")
                                                       currentVideoIndex = videoIndex;
                                                       if($rootScope.initialFreeVideoUrl && currentVideoIndex){
                                                           var currentVideoUrl = videoEncodedUrl[currentVideoIndex];
                                                           if($rootScope.initialFreeVideoUrl !== currentVideoUrl){
                                                               stopVideoPlay = true;
                                                               if(_cpLeadInfoExist){
                                                                   stopVideoPlay=false;
                                                               }
                                                              // console.log("Not Same Url",$rootScope.initialFreeVideoUrl,currentVideoUrl);
                                                           }
                                                       }
                                                    }
                                            }else{
                                                if(parseInt(currentVideoIndex) === 0){
                                                    var el =document.getElementsByClassName("sem-playlist-video");
                                                    if(el.length){
                                                    for(var i=0;i<el.length;i++){
                                                        el[i].classList.remove("active");
                                                    }
                                                    var identifier = "playlist-elm-"+currentVideoIndex;

                                                      if(!$rootScope.isSemMobile && (!$rootScope.isSemIosDevice && !$rootScope.semTablet)) {
                                                        $timeout(function () {
                                                            document.getElementById(identifier).scrollIntoView(true);
                                                        }, 0);
                                                    }
                                                    el[currentVideoIndex].classList.add("active");

                                                    }
                                                }
                                            }
                                        if (currentVideoIndex > 0 && $rootScope.isLoggedIn != true && $rootScope.isPreviewLeadCreated != true && $rootScope.showPreviewLeadStatus == false && ($rootScope.previewPopupVideoPlayed === true || $rootScope.singlePreviewVideoPlayed === true )) {
                                               // console.log(user_params.isEuro,$cookies[user_params.OPTIN_COOKIE]);
                                                if(user_params.isEuro) {
                                                   var optin = $cookies[user_params.OPTIN_COOKIE];
                                                   var optinSet = typeof optin != 'undefined' ? true:false;
                                                  // console.log("optinSet",optinSet,$rootScope.isPreviewLeadCreated,optin);
                                                   if(!optinSet){
                                                        $timeout(function() {
                                                            jwplayer(coursePreviewDivId).playlistItem(currentVideoIndex);
                                                            $rootScope.showPreviewLeadStatus = true;
                                                            try{
                                                                jwplayer().stop();
                                                                }
                                                            catch(e){}
                                                        }, 1000);
                                                   }else if(optin == true && $rootScope.isPreviewLeadCreated){
                                                             $rootScope.showPreviewLeadStatus = false;
                                                             self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                                                             jwplayer(coursePreviewDivId).playlistItem(currentVideoIndex);
                                                    }else{
                                                        //console.log("currentVideoIndex",currentVideoIndex);
                                                        jwplayer(coursePreviewDivId).playlistItem(currentVideoIndex);
                                                    }
                                               }else{
                                                   if(currentVideoIndex){
                                                       $timeout(function() {
                                                           $rootScope.showPreviewLeadStatus = true;
                                                            try{
                                                                jwplayer().stop();
                                                                }
                                                            catch(e){}
                                                    }, 1000);
                                                   }
                                                   // self.gaCoursePreviewModelJs.evtFireOnCoursePreviewLead();
                                               }
                                          }else{
                                              if($rootScope.goToVideoIndex && !goToVideoPlayStatus){
                                                jwplayer(coursePreviewDivId).playlistItem(currentVideoIndex);
                                              }
                                          }

                                        }).onPlay(function () {
                                            if($rootScope.goToVideoIndex){
                                                 goToVideoPlayStatus=true;
                                             }
                                            var isFullScreen = jwplayer().getFullscreen();
                                            if($rootScope.showPreviewLeadStatus && (stopVideoPlay || isFullScreen)){
                                               // console.log("Stop Play 1");
                                                $rootScope.showPreviewLeadStatus = true;
                                                document.getElementById("sem-course-preview-lead-form").classList.add("bs-sem-course-preview-lead-form")
                                                $timeout(function() {
                                                            try{
                                                                jwplayer().stop();
                                                            }
                                                            catch(e){}
                                                                //jwplayer().getPlugin("display").hide();
                                                            //jwplayer().resize(500, 500)
                                                    }, 1000);
                                            }
                                            // console.log(goToVideoIndex,$rootScope.goToVideoIndex,$rootScope.initialFreeVideoUrl,videoEncodedUrl[currentVideoIndex],currentVideoIndex);
                                            if(goToVideoIndex !=='undefined' && goToVideoIndex !=='' && $rootScope.singlePreviewVideoPlayed === false && stopVideoPlay === true){
                                                    // console.log("Stop Play 2");
                                                     $timeout(function() {
                                                         $rootScope.singlePreviewVideoPlayed =true;
                                                         $rootScope.showPreviewLeadStatus = true;
                                                         if(goToVideoIndex){
                                                                    var cname = 'free_video_viewed';
                                                                    var cvalue = goToVideoIndex;
                                                                    var d = new Date();
                                                                    d.setTime(d.getTime() + (3600 * 1000 * 24 * 365));
                                                                    var expires = "expires=" + d.toUTCString();
                                                                    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                                                        }
                                                        try{
                                                            jwplayer().stop();
                                                        }
                                                        catch(e){}
                                                    }, 1000);
                                          }
                                        });
                                        showIFrameStatus[currentCourseId] = 0;
                                    }
                                        self.gaCoursePreviewModelJs.gaFireOnCoursePreviewSuccess();
                                    } else {

                                        /*
                                        // Exceed Popup
                                        self.setExceedPopup(true);
                                        var exceedPopup = document.getElementById('course-preview-restrict');
                                        exceedPopup.style.display = 'block';
                                        */

                                        $timeout(function() {
                                            self.showPreviewLead();
                                        }, 0);
                                    }
                                }
                            });
                }else{

                    self.gaCoursePreviewModelJs.gaFireOnCoursePreviewSuccess();

                    sectionIframeSrc[currentCourseId] = $sce.trustAsResourceUrl(baseLmsUrl + "course/scorm/course-preview/elearningId/"+currElearningId+"/sectionId/" + currSectionId + "/scoId/" + currScoId);
                    showIFrameStatus[currentCourseId] = 1;
                }
                if($rootScope.isLoggedIn) {
                     self.submitPreviewLead();
                }
                return true;
            };
            this.hidePreview = function(){
               showPreviewVid[currentCourseId] = 0;
               $rootScope.isCpClicked = 0;
               sectionIframeSrc[currentCourseId] = '';
               if(typeof jwPlayerObj != 'undefined' && jwPlayerObj != null){
                   jwPlayerObj.stop();
               }
               self.gaCoursePreviewModelJs.evtFireOnCoursePreviewClosed();
               return !(showPreviewVid[currentCourseId] === 0 && $rootScope.isCpClicked !== null && $rootScope.isCpClicked === 0);
            };

            this.getIframeSrc = function(courseId) {
                return sectionIframeSrc[courseId];
            };

            this.getShowPreviewStatus = function(courseId) {
                return showPreviewVid[courseId];
            };

            var gaClassForCoursePreview = function() {

                this.gaFireOnCoursePreviewSuccess = function() {
                    var ga = new gaEventsTracker();
                    var currentPageType = this.gaGetCurrentPageType();
                    ga.gaFireInteractiveEvents('coursepagewatchcoursepreview',user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + self.chapter + ' || ' + self.lesson);
                    // if(currentPageType == 'generic') {
                    //     ga.gaFireInteractiveEvents('coursepagegenericcoursepreviewsuccess');
                    // } else if(currentPageType == 'classroom') {
                    //         ga.gaFireInteractiveEvents('coursepageclassroomcoursepreviewsuccess');
                    // } else if(currentPageType == 'online') {
                    //     ga.gaFireInteractiveEvents('coursepageonlinecoursepreviewsuccess');
                    // }
                }

                this.gaFireOnCoursePreviewLoggedIn = function() {
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_user_submitted_lead_form",
                        event_data: {
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'course preview',
                          'sl_email_opt_in' : true,
                          'sl_sms_opt_in': true
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type', 'sl_event_time','sl_user_email','sl_user_first_name','sl_user_last_name','sl_user_phone'],
                        // userAttributesMap: {'sl_event_time' : 'sl_last_lead_creation_date'},
                        // sl_user_attr_no_update:{'sl_event_time' : 'sl_first_lead_creation_date'}
                    });
                    var ga = new gaEventsTracker();
                    var currentPageType = this.gaGetCurrentPageType();
                    ga.gaFireInteractiveEvents('leadcapturecoursepreview',user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + self.chapter + ' || ' + self.lesson);
                }

                this.evtFireOnCoursePreviewLead = function() {

                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_module_initiated",
                        event_data: {
                          'sl_lead_button_text' : 'Preview',
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'course preview',
                          // 'sl_preview_chapter' : self.chapter || '',
                          // 'sl_preview_lesson' : self.lesson || '',
                        },
                        common : "product",
                        user_attributes: ['sl_lead_type']
                    });
                    var ga = new gaEventsTracker();
                    ga.gaFireInteractiveEvents('leadformclicked',user_params.user_id + ' || ' + document.URL + ' || course preview || '+user_params.course_name + ' || ' + self.chapter + ' || '+ self.lesson);

                }

                this.evtFireOnCoursePreviewClosed = function() {
                    WebTracking.eventReq.triggerEvent({
                        event_id : "sl_lead_form_closed",
                        event_data: {
                          'sl_lead_button_text' : 'Preview',
                          'sl_lead_type' : 'b2c',
                          'sl_site_module' : 'course preview',
                          // 'sl_preview_chapter' : self.chapter || '',
                          // 'sl_preview_lesson' : self.lesson || '',
                        },
                        common : "product",
                        'user_attributes': ['sl_lead_type']
                    });
                    var ga = new gaEventsTracker();
                    ga.gaFireInteractiveEvents('coursepageclosecoursepreview',user_params.user_id + ' || ' + document.URL + ' || course preview || ' + user_params.course_name + ' || ' + self.chapter + ' || ' + self.lesson);

                }

                this.gaGetCurrentPageType = function() {
                    var path = $location.path();
                    path = path.substr(path.indexOf('/')+1);
                    var returnType = 'generic';
                    if(path == 'ilt') {
                        returnType = 'classroom';
                    } else if (path == 'osl') {
                        returnType = 'online';
                    }
                    return returnType;
                }


            };
            this.gaCoursePreviewModelJs = new gaClassForCoursePreview();

            this.getIFrameDisplayStatus = function(courseId){
                return showIFrameStatus[courseId];
            };

            this.isVideoFinished  = function(courseId){
                return videoFinished[courseId];
            };
            var setCookie = function (cname, cvalue, exdays, path) {
                path = path || "/";
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + ";path=" + path + ";";
            };
            var gaClassForPreviewLead = function () {
                var ga = new gaEventsTracker();
                this.gaFireOnPreviewLead = function (cat, label) {
                    if (typeof label !== 'undefined' && label) {
                        ga.gaFireInteractiveEvents(cat, label);
                    } else {
                        ga.gaFireInteractiveEvents(cat);
                    }
                }
            }
}); /*------------- End : CoursePreviewModel.js-----------*/ 

 /*------------- Begin : FormsAjax.js-----------*/ 

angular.module('Simplilearn')
.service('FormsAjax', function($http,PostReqService,$compile) {

   this.loadFormviaAjaxSL = function(form_to_load,scope){
      //console.log(user_params.forms_ajax_load)
   this.form_data = null;
   var obj3 = {data_forms : form_to_load}
   PostReqService.sendPostRequest(baseApiUrlNocache + '?method=getCoursePageFormsAjax', obj3)
            .then(function (data) {
                if (data != null && data.data.status == 'success') {
                   this.form_data = data.data.data;
                   angular.forEach(this.form_data,function(value,index){
                        var elem = document.getElementById(index);
                        if(elem !== undefined && elem !== null && elem.innerHTML === "") {
                           angular.element(elem).html(value);
                           $compile(angular.element(elem).contents())(scope);
                        }
                   })

                }
            });
   }

}); /*------------- End : FormsAjax.js-----------*/ 

 /*------------- Begin : HelperService.js-----------*/ 

angular.module('Simplilearn')                                                                                                                                                                        
.service("HelperService", function($swipe) { 
    var hfElem,
    commonStore = {};
    
    this.$ = function(elem) {
        hfElem = elem;
        return this;
    };
    
    this.closest = function(fn) {
        while (hfElem) {
            if ( fn.call(hfElem) ) {
                return this;
            }
            hfElem = hfElem.parentNode;
        }
        return false;
    };
    
    this.elem = function() {
        return hfElem;
    };
    
    this.hasClass = function(pClass) {
         return ( (" " + hfElem.className + " " ).indexOf( " "+pClass+" " ) > -1 );
    };
    
    this.onHybridClick = function(pCallback) {
        var elemClicked = false;
        angular.element(hfElem).on('touchstart', function() {
            elemClicked = true;
        });
        angular.element(hfElem).on('touchmove', function() {
            elemClicked = false;
        });
        angular.element(hfElem).on('click touchend', function(event) {
            if (event.type === "click") {
                elemClicked = true;
            }
            
            if (elemClicked){
                pCallback.call(hfElem, event);
            }
        });
    };
    
    var onSwipe = function(pDirection, pCallback) {
        var MAX_VERTICAL_DISTANCE = 75;
        var MAX_VERTICAL_RATIO = 0.3;       // Vertical distance should not be more than a fraction of the horizontal distance.
        var MIN_HORIZONTAL_DISTANCE = 30;
        var startCoords, valid;
        
        var validSwipe = function(coords) {
            if (!startCoords) return false;
            var deltaY = Math.abs(coords.y - startCoords.y);
            var deltaX = (coords.x - startCoords.x) * pDirection;           //Multiplying by direction makes detlaX always positive
            
            return valid &&                                                 //Check that swipe event is valid/not cancelled
                deltaY < MAX_VERTICAL_DISTANCE &&                           //Should not cross vertical threshold, otherwise it becomes a scroll
                deltaX > 0 &&                                               //deltaX should always be positive(because it is being multiplied by direction)
                deltaX > MIN_HORIZONTAL_DISTANCE &&                         //Swipe should be longer than x-coordinate threshold
                deltaY / deltaX < MAX_VERTICAL_RATIO;
        };
      
        $swipe.bind(angular.element(hfElem), {
            'start': function(coords) {
                startCoords = coords;
                valid = true;
            },
            'cancel': function() {
                valid = false;
            },
            'end': function(coords, event) {
                if (validSwipe(coords)) {
                    pCallback.call(hfElem, event);
                }
            }
        });
    };
    
    this.onSwipeLeft = function(pCallback) {
        onSwipe(-1, pCallback);              //negative X-coordinate direction for swipe left
    };
    
    this.onSwipeRight = function(pCallback) {
        onSwipe(1, pCallback);              //positive X-coordinate direction for swipe right
    };
    
    this.dataStorage = function(pKey, pVal) {
        if( typeof pKey !== 'undefined' && typeof pVal !== 'undefined' ) {
            commonStore[pKey] = pVal;
        } else {
            return commonStore;
        }
    };
});


 /*------------- End : HelperService.js-----------*/ 

 /*------------- Begin : LeadService.js-----------*/ 

angular.module('Simplilearn')
        .service('LeadService', function (PostReqService, $rootScope) {
            var self = this;
            var autoLeadDelay = 15; // min
            this.autoLeadSiteModule = 'auto repeat lead';
            this.latestAutoLeadCookie = user_params.LATEST_AUTO_LEAD_COOKIE_NAME;
            this.skipPopupCookie = user_params.SKIP_POPUP_COOKIE_NAME;
            this.cookieExpireTime = 168; // 7 days
            
            this.createLead = function (paramsArr) {
                paramsArr.method = 'saveCallback';
                var promise = PostReqService.sendPostRequest(baseApiUrlNocache, paramsArr)
                        .then(function (response) {
                            return {'response': response, 'status': true};
                        });

                return promise;
            };
            
            this.getLeadEmail = function(email) {
                if(typeof email != 'undefined' && email) {
                    return email;
                }
                if(typeof user_params != 'undefined' && typeof user_params.email != 'undefined' && user_params.email) {
                    return user_params.email;
                }
                if(typeof $rootScope.userInfo != 'undefined' && typeof $rootScope.userInfo.email != 'undefined' && $rootScope.userInfo.email) {
                    return $rootScope.userInfo.email;
                }
                return '';
            }
            
            this.initSkipCookie = function() {
                var skipStatus = true;
                var auh = getHashByKey('auh');
                try {
                    auh = atob(auh);
                } catch(e) {
                    console.warn("SL:Warn initSkipCookie - invalid auh", e);
                    auh = null;
                }
                if(user_params.isEuro || user_params.isB2b != 0 || getParameterByName("auto_lead") != 1) {
                    skipStatus = false;
                }
                if (skipStatus && ($rootScope.isLoggedIn || (typeof auh === "string" && auh.split(",").length > 1))) {
                    setCookieByName(self.skipPopupCookie, 1, self.cookieExpireTime);
                } else {
                    setCookieByName(self.skipPopupCookie, 0, 0);
                }
            }
                      
            this.isSkipPopup = function(siteModule) {
                try {
                    var validSiteModules = ['course preview','course agenda', 'bundle agenda'];
                    var user = getActiveWeUser() || {};
                    if (    user_params.isEuro || user_params.isB2b != 0 ||
                            typeof user.we_email !== "string" || user.we_email.trim().length === 0 ||
                            typeof user.we_phone !== "string" || user.we_phone.trim().length === 0
                    ) {
                        return false;
                    }
                    if(typeof $rootScope.userInfo === "object" && $rootScope.userInfo && $rootScope.userInfo.email_subscription_status == 0) {
                        return false;
                    };
                    if(validSiteModules.indexOf(siteModule) === -1) {
                        return false;
                    }
                    if($rootScope.isLoggedIn || getCookieByName(self.skipPopupCookie)) {
                        setCookieByName(self.skipPopupCookie, 1, self.cookieExpireTime);
                        return true;
                    }
                } catch(e) {
                    console.error("SL:Error isSkipPopup", e);
                }
                return false;
            }
            var isAutoLeadSource = function (lead) {
                var autoLeadId = '';
                var hash = getHashByKey("auh");
                var validateAutoLeadSource = function (leadData) {
                    try {
                        $rootScope.flag = true;
                        if (user_params.isEuro || getParameterByName("auto_lead") != 1 || typeof leadData !== "object" || !leadData.sl_product_id || user_params.isB2b != 0) {
                            return false;
                        }
                        if (typeof leadData.sl_user_email !== "string" || leadData.sl_user_email.trim().length === 0 || typeof leadData.sl_user_phone !== "string" || leadData.sl_user_phone.trim().length === 0) {
                            return false;
                        }
                        var hashData = null;
                        try {
                            hashData = hash?atob(hash):null;
                        } catch (e) {
                            console.warn("SL:Warn isAutoLeadSource - invalid auh", e);
                            hashData = null;
                        }
                        if (!$rootScope.isLoggedIn && (typeof hashData === "string" && hashData.split(",").length < 2)) {
                            return false;
                        }
                        autoLeadId = (leadData.sl_product_type || '') + "_" + leadData.sl_product_id;
                        if (getCookieByName(self.latestAutoLeadCookie) === autoLeadId) {
                            return false;
                        }
                        return true;
                    } catch (e) {
                        console.error("SL:Error isAutoLeadSource", e);
                    }
                    return false;
                }
                return new Promise(function(resolve) {
                    if(!validateAutoLeadSource(lead)) {
                        resolve(false)
                        return;
                    }
                    PostReqService.getUserInfo(hash).then(function(userInfo) {
                        var autoLeadStatus = (userInfo.email_subscription_status == 1 && getCookieByName(self.latestAutoLeadCookie) != autoLeadId);
                        if(autoLeadStatus) {
                            setCookieByName(self.latestAutoLeadCookie, autoLeadId, self.cookieExpireTime);
                        }
                        resolve(autoLeadStatus);
                    }).catch(function(e) {
                        console.error("SL:Error isAutoLeadSource", e);
                        resolve(false);
                    });
                });
            }

            this.createAutoLead = function (leadData) {
                return new Promise(function (resolve, reject) {
                    webengage.onReady(function () {
                        PostReqService.getHashUser(function() {
                            setTimeout(function() {
                                try {
                                    if(typeof $rootScope.userInfo == "object" && $rootScope.userInfo.email_subscription_status == 0) {
                                        return;
                                    }
                                    var user = getActiveWeUser() || {};
                                    var eventData = {};
                                    if(typeof leadData !== "object" || !leadData) {
                                        var locatorCookieObj = {};
                                        try {
                                            var locatorCookie = getCookieByName('locatori9');
                                            locatorCookieObj = JSON.parse(locatorCookie);
                                        } catch(e) {
                                            console.error("SL:Error createAutoLead", e);
                                            locatorCookieObj = {};
                                        }
                                        var lead = {
                                            sl_product_id: user_params.sl_product_id || '',
                                            sl_product_name: user_params.course_name || '',
                                            sl_user_type : 'B2C',
                                            leadTrainingType : 'Not Sure',
                                            leadSourceString : document.URL,
                                            sl_utm_src : fetchUTMSource(),
                                            b2cQueryType : self.autoLeadSiteModule,
                                            productTypeId : user_params.productTypeId || '',
                                            billingTypeId : user_params.billingTypeId || '',
                                            GCLID : getGCLID(),
                                            fetchData : $rootScope.isLoggedIn ? 1 : 0,
                                            countryId : locatorCookieObj.country_id || null,
                                            countryName : (locatorCookieObj.country_name || '').replace(/\+/g, ' '),
                                            cityId : locatorCookieObj.city_id || null,
                                            cityName : locatorCookieObj.name || null
                                        };
                                        eventData.sl_user_email = user.we_email || '';
                                        eventData.sl_user_first_name = user.we_first_name || '';
                                        eventData.sl_user_last_name = user.we_last_name || '';
                                        eventData.sl_user_phone = user.we_phone || '';
                                        eventData.sl_lead_type = 'b2c';
                                        eventData.sl_product_type = user_params.sl_product_type || '';
                                        eventData.sl_site_module = self.autoLeadSiteModule;
                                        eventData.sl_email_opt_in = true;
                                        eventData.sl_sms_opt_in = true;
                                        leadData =  lead;
                                        Object.keys(eventData).forEach(function(key) {
                                            leadData[key] = eventData[key];
                                        });
                                    }
                                    isAutoLeadSource(leadData).then(function (status) {
                                        if(!status) return;
                                        WebTracking.eventReq.triggerEvent({
                                            event_id: "sl_lead_user_lead_created_automatically",
                                            event_data: eventData,
                                            common: "product",
                                            user_attributes: ['sl_event_time'],
                                        });
                                        eventData = WebTracking.eventReq.eventParam.event_data;
                                        leadData = PostReqService.prepareB2CLeadParameters(leadData, eventData);
                                        leadData.lead_creation_time = new Date().getTime() + autoLeadDelay * 60000;
                                        var applicationContentType = "json";
                                        PostReqService.sendPostRequest(leadApiGatewayEndpoint, leadData, applicationContentType).then(function (res) {
                                            resolve(res);
                                        }).catch(function (e) {
                                            console.error("SL:Error createAutoLead", e);
                                            reject(e);
                                        });
                                    }).catch(function (e) {
                                        console.error("SL:Error createAutoLead", e);
                                        reject(e);
                                    });
                                } catch(e) {
                                    console.error("SL:Error createAutoLead", e);
                                    reject(e);
                                }
                            }, 100);
                        })
                    })
                })
            };
            
            // init
            (function() {
                self.initSkipCookie();
            })();
        });

 /*------------- End : LeadService.js-----------*/ 

 /*------------- Begin : LocationModel.js-----------*/ 

angular.module('Simplilearn')
.service('LocService', function($http,$q,$cookies){

    var currentCountry = null,
        countryData = null,
        self = this;
	this.showChangeCountryModalStatus = {'display':'none'};
	this.showCountryList = {'display':'none'};
	this.showCityList = {'display':'none'};

	this.getChangeCountryModalStatus = function(){
		return this.showChangeCountryModalStatus;
	}

	this.setChangeCountryModalStatus = function(statusVal){
		this.showChangeCountryModalStatus.display = statusVal;
	}

	this.changeLocCity = function(cityObj){
		deferred = $q.defer();
		$http({
			method: 'GET',
			url: baseApiUrl,
			params: {cityId:cityObj.id,method:'changeLocation'}
		}).success(function(data){
			if(data.status == "Success"){
				deferred.resolve();
				location.reload();
			}else{
				deferred.reject(error);
			}

		}).error(function(){
			deferred.reject(error);
		});
		return deferred.promise;
	}

    this.getCountryData = function() {
        if( countryData !== null ) {
            var promise = $q.when(countryData);

            return promise;
        }
        else if( typeof countryDataIe !== 'undefined' && countryDataIe !== null && !!countryDataIe ) {
            var promise = $q.when(countryDataIe);

            countryData = countryDataIe;
            //if cookie is available, set current country
            if( (typeof JSON.parse($cookies.locatori9).country_id !== undefined) && !!JSON.parse($cookies.locatori9).country_id ) {
                self.setCurrentCountry( null, JSON.parse($cookies.locatori9).country_id );
            }

            return promise;
        }
        else {
            var promise = $http.get(CountryDataJsonUrl)
            .then(function (response) {
                countryData = response.data;
                //if cookie is available, set current country
                if( (typeof JSON.parse($cookies.locatori9).country_id !== undefined) && !!JSON.parse($cookies.locatori9).country_id ) {
                    self.setCurrentCountry( null, JSON.parse($cookies.locatori9).country_id );
                }

                return response.data;
            });

            return promise;
        }
    };

    this.getAppCountryData = function() {
        return countryData;
    };

    this.setCurrentCountry = function(pCountry, pCountryId) {
        //if country object is null, set country from country data
        if( pCountry === null ) {
            for(var cntry_index=0;cntry_index<countryData.length;cntry_index++) {
                if( countryData[cntry_index].id == pCountryId ) {
                    self.setCurrentCountry(countryData[cntry_index], null);
                }
            }
        }
        else {
            currentCountry = pCountry;
        }

        return true;
    };

    this.getCurrentCountry = function() {
        return currentCountry;
    };
});

 /*------------- End : LocationModel.js-----------*/ 

 /*------------- Begin : LoginService.js-----------*/ 

angular.module('Simplilearn')
        .service('LoginService', function ($http, $rootScope,HashLogicService,PostReqService) {

            this.login = function (pUserName, pPwd) {

                var hash = HashLogicService.hashLogic(pPwd);
                var loginData = {method:'authenticateUser',email: pUserName, hash: hash, formSource: 0, pdpCoursePreview: 0};

                var promise = PostReqService.sendPostRequest(baseApiUrlNocache,loginData)
                        .then(
                                function(response) {        //success
                                    if (response == null) {
                                        $rootScope.gaHeaderControllerJs.gaFireOnLoginSignupFailure('email | error with connection');
                                        return {};
                                    }
                                    return response;
                                }
                        );

                return promise;
            };
        }).service('HashLogicService', function () {
                this.hashLogic = function (pPwd) {
                    var skey = "kqwcomnrAelIlpmIsplytxzojydfgh";
                    var uncoded = pPwd;
                    var cphr = [];
                    var chr;
                    for (var i = 0; i <= uncoded.length - 1; i++) {
                        chr = uncoded.charCodeAt(i);
                        cphr.push(chr ^ skey.charCodeAt(i));        //xor
                    }

                    return cphr.join(',');
                }
});




 /*------------- End : LoginService.js-----------*/ 

 /*------------- Begin : MenuModel.js-----------*/ 

angular.module('Simplilearn')
.service('MenuService', function(){

    var currentItemId = null,
        currentSubCatId = null,
        menuData = {};
    
    this.getCurrentItemId = function(){
        return currentItemId;
    };
    
    this.setCurrentItemId = function(itemId){
        currentItemId = itemId;
    };
    
    this.getSubCatId = function(){
        return currentSubCatId;
    };
    
    this.setSubCatId = function(subCatId){
        currentSubCatId = subCatId;
    };
   
});


 /*------------- End : MenuModel.js-----------*/ 

 /*------------- Begin : PostReqService.js-----------*/ 

angular.module('Simplilearn')
.service('PostReqService', function($http,AMBASSADORENABLE, $rootScope) {
   var self = this;
   this.sendPostRequest = function(url,params,contentType){
       var isQueryString=verifyIfQueryString(url);
       var result=appendMethodToUrl(url,params,isQueryString);
       if(result.methodExist===false && result.url){
           url=result.url;
       }
       if(AMBASSADORENABLE == 1){
           if(typeof mbsyshortCode !='undefined' && mbsyshortCode!='' && mbsyshortCode){
               params.mbsy_short_code = mbsyshortCode;
           }
        }
        if(typeof contentType !== "undefined" && contentType == "json"){
            var p = [];
            var config = {
                   headers: {
                       'Content-Type': 'application/json;'
                   },
               };
            for (var key in params) {
                p.push(key + '=' + encodeURIComponent(params[key]));
            }
            var data = JSON.stringify(params);
            if(url.indexOf("?") != -1)
                url += "&rnd=" + new Date().getTime()
            else
                url += "?rnd=" + new Date().getTime()

        }else{
            var p = [];
            var config = {
               headers: {
                   'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
               },
               withCredentials: true
            };
            for (var key in params) {
            p.push(key + '=' + encodeURIComponent(params[key]));
            }
            var data = p.join('&');
        }

       var promise = $http.post(url,data,config).then(function(response){
           return response;
       },function(){
           return null;
       });

       return promise;
   }

   this.sendGetRequest = function(url,params){

       if(AMBASSADORENABLE == 1){
           if(typeof mbsyshortCode !='undefined' && mbsyshortCode!='' && mbsyshortCode){
               params.mbsy_short_code = mbsyshortCode;
           }
        }
        var p = [];
        var config = {
               headers: {
                   'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
               }
           };
           var data = '';
        for (var key in params) {
            p.push(key + '=' + encodeURIComponent(params[key]));
            data += key + '/' + encodeURIComponent(params[key]) + '/';
        }
        // var data = p.join('&');
       var promise = $http.get(url+'/'+data,config).then(function(response){
           return response;
       },function(){
           return null;
       });

       return promise;
   }

    var setCookie = function(cname, cvalue, exdays, path) {
        path = path || "/";
        var d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        var expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + "; " + expires +";path="+path+";path=/;domain=.simplilearn.com";
    }

    function parseUser(userInfo, source) {
        userInfo.name = userInfo.name || userInfo.firstname || userInfo.username || '';
        if(userInfo.phone) {
            var phoneData = userInfo.phone.split('-');
            if(phoneData[1]) {
                userInfo.phoneCode = phoneData[0];
                userInfo.phone = phoneData[1];
            }
        }
        if($rootScope.isLoggedIn) {
            userInfo.source = 'logged_in_user';
        } else {
            if(typeof source != 'undefined') {
                userInfo.source = source;
            }
        }
        return userInfo;
    }

    this.getUserInfo = function (hash) {
        return new Promise(function (resolve, reject) {
            var paramsArr = {'method': 'getUserInfo'};
            if (typeof hash === "string" && hash.length !== 0) {
                paramsArr.auh = hash;
            }
            if (typeof paramsArr.auh === "undefined" && !$rootScope.isLoggedIn) {
                reject(new Error("invalid params"));
                return;
            }
            self.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (res) {
                var data = (typeof res == "object" && typeof res.data == "object" && typeof res.data.data !== "undefined") ? res.data.data : {};
                resolve(data)
            }).catch(reject);
        });
    }
            
    this.getHashUser = function(callback) {
        $rootScope.userInfo = {};
        var postAction = function (data) {
            if(data && typeof data.phoneCode !=="undefined" && data.phoneCode){
              data.phoneCode=self.formatUserPhoneCode(data.phoneCode);
            }
            self.updateSlGlobalData(data);
            callback(data);
            return;
        }
        
        var source = null;
        $rootScope.userInfo = null;
        var auh = getHashByKey('auh');
        if(typeof auh != 'undefined' && auh != null) {
            var data = atob(auh).split(',');
            var mail_add = data[0].trim();
            var phone = (typeof data[1] !== "undefined" && data[1])?data[1]:'';
            if(typeof mail_add != 'undefined' && mail_add != null) {
                var userInfo = {email : mail_add};
                if(phone) {
                    userInfo.phone = phone;
                }
                source = 'url_hash';
                $rootScope.userInfo = parseUser(userInfo, source);
                self.getUserInfo(auh).then(function(userInfo) {
                    if(typeof userInfo.email_subscription_status !== "undefined") {
                        $rootScope.userInfo.email_subscription_status = userInfo.email_subscription_status;
                    }
                    postAction($rootScope.userInfo);
                });
                return;
            } else {
                $rootScope.userInfo = {};
            }
        } else {
            $rootScope.userInfo = {};
        }

        if($rootScope.userInfo && $rootScope.userInfo.email) {
            postAction($rootScope.userInfo);
            return;
        }
        
        if($rootScope.isLoggedIn) {
            var paramsArr = {
                 'method': 'getUserInfo',
                 "courseUri": (typeof courseUri != 'undefined') ? courseUri : '',
                 "courseId": (typeof courseId != 'undefined') ? courseId : '',
                 "bundleId": (typeof bundleId != 'undefined') ? bundleId : '',
            };
            this.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (data) {
                if (typeof data.data != 'undefined'){
                    var resData = data && data.data;
                    if(resData && resData.status == 'success' && resData.data && resData.data.email) {
                        var userInfo = resData.data;
                        $rootScope.userInfo = parseUser(userInfo);
                        postAction($rootScope.userInfo);
                    } else {
                        $rootScope.userInfo = {};
                        postAction(null);
                    }
                }   else {
                        $rootScope.userInfo = {};
                        postAction(null);
                    }
            });
            return;
        }

        if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
            var weUserData = webengage.state.getForever();
            if (typeof weUserData != 'undefined' && typeof weUserData['cuid'] != 'undefined') {
                var userInfo = {email: weUserData['cuid']};
                var userAttrs = weUserData['uattr'];
                if (typeof userAttrs[WebTracking.userAttributesMap.sl_user_first_name] != 'undefined')
                    userInfo['name'] = userAttrs[WebTracking.userAttributesMap.sl_user_first_name];
                if (typeof userAttrs[WebTracking.userAttributesMap.sl_user_last_name] != 'undefined')
                    userInfo['name'] = userInfo['name'] + ' ' + userAttrs[WebTracking.userAttributesMap.sl_user_last_name];
                if (typeof userAttrs[WebTracking.userAttributesMap.sl_user_phone] != 'undefined') {
                    userInfo['phone'] = userAttrs[WebTracking.userAttributesMap.sl_user_phone];
                }
                source = 'webengage';
                $rootScope.userInfo = parseUser(userInfo, source);
                postAction($rootScope.userInfo);
                return;
            } else {
                $rootScope.userInfo = {};
                postAction(null);
            }
        } else {
            $rootScope.userInfo = {};
            postAction(null);
        }
    }

    this.getUserData = function(callback) {
        $rootScope.userInfo = {};

        if($rootScope.isLoggedIn) {
            var paramsArr = {
                 'method': 'getUserData',
            };
            this.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (data) {
                var resData = data && data.data;
                if(resData && resData.status == 'success' && resData.data && resData.data.email) {
                    var userInfo = resData.data;
                    $rootScope.userInfo = parseUser(userInfo);
                    callback($rootScope.userInfo);
                } else {
                    $rootScope.userInfo = {};
                    callback(null);
                }
            });
            return;
        }

        return;
    }
    
    /**
     * Generate hash for user
     */
    this.setUserHash = function(user) {
        if(user && user.email) {
            user.email = user.email;
            $rootScope.userInfo = user;
            self.updateSlGlobalData(user);
        }
    }

    this.updateSlGlobalData = function(user) {
        if(typeof user != 'undefined' && user) {
            var keys = ['name', 'email', 'phone', 'phoneCode'];
            keys.forEach(function(key) {
                if(typeof user[key] != 'undefined' && user[key]) {
                    setSlGlobalData(key, user[key]);
                }
            });
        }
    }

    /**
     * Has free trial check
     */
    this.initFreeTrialCookie = function() {
        try {
            if ($rootScope.isLoggedIn || getCookieByName(user_params.ssoCookieName)) {
                var paramsArr = {method: 'hasFreeTrial'};
                this.sendPostRequest(baseApiUrlNocache, paramsArr).then(function (data) {
                    var response = data.data;
                    if (response.status == 1 && response.data && response.data.hasFreeTrial == 1 && response.data.courses != '') {
                        var courses = response.data.courses;
                        setFreeTrialCookie(courses);
                    } else {
                        setFreeTrialCookie('');
                    }
                });
            }
        } catch(e) {
            console.error("Free trial check failed.");
        }
    }

    var setFreeTrialCookie = function(value) {
        var date = new Date();
        date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
        document.cookie = user_params.ftCookieName +'='+value+'; expires=' + date.toGMTString() + '; path=/;domain=.simplilearn.com';
    }

    var verifyIfQueryString = function (url) {
        var isQueryString = false;
        //Check If Url Is A Query String
        if (typeof url != 'undefined' && url.indexOf("?") !== -1) {
            isQueryString = true;
        }
        return isQueryString;
    }
    var appendMethodToUrl = function (url, params, isQueryString) {
        var methodExist = false;
        var response = {'methodExist': false, 'url': url};
        if (url && params) {
            //check if method exist in the url
            if (isQueryString) {
                if (url.indexOf("method") !== -1) {
                    methodExist = response['methodExist'] = true;
                }
            }
            if (methodExist === false) {
                if (params.method) {
                    var methodName = params.method;
                    var baseApiUrl = baseApiUrlNocache + '?method=' + methodName;
                    response['url'] = baseApiUrl;
                }
            }
        }
        return response;
    }
    this.prepareB2CLeadParameters =function(leadParams,webEngageLeadFormParams){
        var eventTime=webEngageLeadFormParams['sl_event_time'];
        var siteModule=webEngageLeadFormParams['sl_site_module'];
        var slLeadType=webEngageLeadFormParams['sl_lead_type'];
        var slProductTraining=webEngageLeadFormParams['sl_product_training_type'];
        var slTrainingTypeStr=getLeadTrainingType(slProductTraining);
        var slProductId=webEngageLeadFormParams['sl_product_id'];
        var personEmailId = typeof leadParams.personEmail !=="undefined" ? leadParams.personEmail : webEngageLeadFormParams['sl_user_email'];
        var personName= typeof leadParams.personName !=="undefined" ? leadParams.personName : '';
        var personPhone = typeof leadParams.personPhone !=="undefined" ? leadParams.personPhone : webEngageLeadFormParams['sl_user_phone'];
        var inputData = {
                    name:personName,
                    email: personEmailId,
                    phone: personPhone,
                    phoneCode: leadParams.queryPhoneCode
        };
        var prefilInfo = getPrefilledInfo(inputData, $rootScope.userInfo);
        var locatorInfo = getCookieByName('locatori9')
        var locatorData= JSON.parse(locatorInfo);
        var cdnCtry= (typeof locatorData.cdnCountry!=='undefined' && locatorData.cdnCountry)  ? locatorData.cdnCountry :'US';
        var leadSourceString=typeof leadParams.leadSourceString !=="undefined" ? leadParams.leadSourceString  : document.URL;
        var countryId=typeof leadParams.cookie_data !=="undefined" && typeof leadParams.cookie_data.country_id !=="undefined" ? leadParams.cookie_data.country_id :leadParams.countryId;
        var countryName =typeof leadParams.cookie_country_name !=="undefined" ? leadParams.cookie_country_name :leadParams.countryName;
        if(countryName){
             countryName=countryName.replace(/\+/g, ' ');
        }
        var cityId=typeof leadParams.cookie_data !=="undefined" && typeof leadParams.cookie_data.city_id  !=="undefined" ? leadParams.cookie_data.city_id : leadParams.cityId;
        var cityName=typeof leadParams.cookie_data!=="undefined" && typeof leadParams.cookie_data.name !=="undefined" ? leadParams.cookie_data.name :leadParams.cityName;
        if(cityName){
              cityName=cityName.replace(/\+/g, ' ');
        }
        var userMessage=typeof leadParams.sl_user_message !=="undefined" ?  leadParams.sl_user_message:'';
        var leadTrainingType=typeof leadParams.leadTrainingType !=="undefined" ? leadParams.leadTrainingType: 'Not Sure';
        var lastCookieSource=getCookieOrigin();
        var type=leadParams.b2cQueryType;
        var productTypeId=typeof leadParams.productTypeId !=="undefined" ? leadParams.productTypeId :'';
        var billingTypeId=typeof leadParams.billingTypeId !=="undefined" ? leadParams.billingTypeId : '';
        var billingTypeName='One time';
        if(parseInt(billingTypeId) === 2){
            billingTypeName='Subscription';
        }
        var entityId=typeof leadParams.selected_course !=="undefined" ? leadParams.selected_course.id:leadParams.sl_product_id;
        if(!entityId && webEngageLeadFormParams['sl_product_id']){
            entityId=webEngageLeadFormParams['sl_product_id'];
        }
        var regionName=typeof locatorData.region_name !=="undefined" ? locatorData.region_name : '';
        if(!entityId && slProductId){
            entityId=slProductId;
        }
        var regionName= typeof leadParams.region_name !=="undefined"  ? leadParams.region_name : (typeof locatorData.region_name !=="undefined" ? locatorData.region_name : '');
        if(regionName){
            regionName=regionName.replace(/\+/g, ' ');
        }
        var leadUID=typeof leadParams.lead_uid !=="undefined" ? leadParams.lead_uid : generateLeadId(personEmailId);
        var d = new Date();
        var isEuro=user_params.isEuro;
        if(!countryId){
            countryId=locatorData['country_id'];
        }
        var marketoTrackingCookie=getCookieByName('_mkto_trk');
        var microKey= (typeof eventTime != 'undefined') ? 'leadat'+eventTime : '';
        var leadCreatedTime=(typeof eventTime != 'undefined') ? eventTime : '';
        var firstCookieSource = getCookieByName('simplilearn_custom');
        var mbsyShortCode=getCookieByName('mbsy');
        var website = location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');
        var userAgentStr = navigator.userAgent;
        var deviceInfo=getDeviceInfo();
        var coldSiteModules=user_params.cold_site_modules;
        var isHotLead=true;
        var leadTeam =typeof leadTeamHot !=="undefined" && leadTeamHot ? leadTeamHot : 'hot';
        if(typeof coldSiteModules !=="undefined" && coldSiteModules){
            if(coldSiteModules.indexOf(siteModule)!=-1 ){
                isHotLead=false;
                leadTeam =typeof leadTeamCold !=="undefined" && leadTeamCold ? leadTeamCold : 'cold';
            }
        }
        if (typeof user_params.sl_override_site_module !== "undefined" && user_params.sl_override_site_module && siteModule == user_params.sl_override_site_module) {
            isHotLead=false;
            leadTeam =typeof leadTeamMql !=="undefined" && leadTeamMql ? leadTeamMql : 'mql';
        }else if (typeof leadParams.isFrs !== "undefined" && leadParams.isFrs && leadParams.actualSiteModule !=="undefined" && leadParams.actualSiteModule !== siteModule) {
            isHotLead=false;
            leadTeam =typeof leadTeamMql !=="undefined" && leadTeamMql ? leadTeamMql : 'mql';
        }
        var optInText="";
        if(isEuro){
            optInText=getGdprOptInText(countryId,siteModule);
        }
        var leadCreationMode='Online';
        if(siteModule == "Tollfree"){
            leadCreationMode='Offline';
        }
        var firstPageLandingTime=getCookieByName('simplilearn_landing_time');
        var formatedFirstPageLandingTime=formatTZDateTime(firstPageLandingTime);
        var paramsArr = {
                            'sl_user_country': countryName,
                            'countryId': countryId,
                            'city_id': cityId,
                            'city': cityName,
                            'sl_user_message': userMessage,
                            'lead_training_type': leadTrainingType,
                            'lead_source_string': leadSourceString,
                            'last_cookie_source':lastCookieSource,
                            'type': type,
                            'product_type_id': productTypeId,
                            'billing_type_id': billingTypeId,
                            'billing_type_name':billingTypeName,
                            'first_cookie_source':typeof firstCookieSource !=="undefined" ? firstCookieSource : "",
                            'user_agent':userAgentStr,
                            'Browser':typeof userAgentStr !=="undefined" ? userAgentStr : "",
                            'crt_lead_time':leadCreatedTime,
                            'cookie':typeof marketoTrackingCookie !=="undefined" ? marketoTrackingCookie :"",
                            'first_page':getCookieByName('simplilearn_first_page'),
                            'first_page_time':formatedFirstPageLandingTime,
                            "optInText" : optInText,
                            "mbsy_short_code" : typeof mbsyShortCode !=="undefined" ? mbsyShortCode : "",
                            'GCLID': getGCLID(),
                            'lead_uid' :leadUID ,
                            'microKey':microKey,
                            'entity_id':entityId,
                            'sl_user_state':regionName,
                            'prefilled_source':prefilInfo.prefilled_source,
                            'prefillled_data': prefilInfo.prefillled_data,
                            'prefilled_modified':prefilInfo.prefilled_modified,
                            'Website':website,
                            'device_type':deviceInfo.deviceType,
                            'device_os':deviceInfo.browserOs,
                            'device_name':deviceInfo.deviceName,
                            'Operating_System':deviceInfo.browserOs,
                            'isHotLead':isHotLead,
                            'lead_creation_mode':leadCreationMode,
                            'cdnCountry':cdnCtry,
                            'Entry_Page':leadSourceString,
                            'queryType':typeof slLeadType !=="undefined" ? slLeadType : 'b2c',
                            'recordType':'B2C',
                            'bu_type':'B2C',
                            'team':'marketing',
                            'lead_stage':'New',
                            'lead_status':'Sales Rep Needs To Call/Email',
                            'leadsource' : "SL-Website",
                            'Created_By_Email':'marketinglead@simplilearn.com',
                            'trainingType':slTrainingTypeStr,
                            'lead_team':leadTeam
                            };
            if(leadParams.lead_creation_time){
                paramsArr['lead_creation_time']=leadParams.lead_creation_time;
            }
            var finalListOfParam={};
            if(webEngageLeadFormParams['sl_user_last_name']){
                var slUserLastName=webEngageLeadFormParams['sl_user_last_name'];
                webEngageLeadFormParams['sl_user_last_name']=slUserLastName.trim();
            }
            if(webEngageLeadFormParams['sl_user_first_name']){
                var slUserFirstName=webEngageLeadFormParams['sl_user_first_name'];
                webEngageLeadFormParams['sl_user_first_name']=slUserFirstName.trim();
            }
            if(!webEngageLeadFormParams['sl_product_id']) {
                paramsArr['sl_product_id'] = leadParams['sl_product_id'] ? leadParams['sl_product_id'] : '';
            }
            if(!webEngageLeadFormParams['sl_product_name']) {
                paramsArr['sl_product_name'] = leadParams['sl_product_name'] ? leadParams['sl_product_name'] : '';
            }
            var undefinedCheckVars = ['createdByEmail','chatOwnerEmail','alternatePhone','alternateEmail','hiddenTokenChat','cl_assign_flag',
                'sl_utm_src'];
            for (i = 0; i < undefinedCheckVars.length; i++) {
                if (leadParams[undefinedCheckVars[i]]) {
                    paramsArr[undefinedCheckVars[i]] = leadParams[undefinedCheckVars[i]] ? leadParams[undefinedCheckVars[i]] : '';
                }
            }
            if(leadParams['leadsource']) {
                paramsArr['leadsource'] = leadParams['leadsource'] ? leadParams['leadsource'] : paramsArr['leadsource'];
            }
            if(leadParams['address']) {
                paramsArr['address'] = leadParams['address'] ? leadParams['address'] : paramsArr['address'];
            }
            /**
             * If in-case sl user phone is not fetchable from webengage/weUserData is undefined/weUserData wephone is not available
             * then fetch it from logged  rootScope userInfo.
             */
            if (!webEngageLeadFormParams['sl_user_phone']) {
                if (typeof webengage != 'undefined' && typeof webengage.state != 'undefined') {
                    var weUserData = webengage.state.getForever();
                    if (typeof weUserData != 'undefined') {
                        var userAttrs = weUserData['uattr'];
                        if (typeof userAttrs != 'undefined' && userAttrs.we_phone !== 'undefined' && userAttrs.we_phone) {
                            paramsArr['sl_user_phone'] = userAttrs.we_phone;
                        } else {
                            if ($rootScope.userInfo && $rootScope.userInfo.phone && $rootScope.userInfo.source == "logged_in_user") {
                                paramsArr['sl_user_phone'] = $rootScope.userInfo.phone;
                            }
                        }
                    } else {
                        if ($rootScope.userInfo && $rootScope.userInfo.phone && $rootScope.userInfo.source == "logged_in_user") {
                            paramsArr['sl_user_phone'] = $rootScope.userInfo.phone;
                        }
                    }
                }
            }
            for(key in webEngageLeadFormParams){
            if (typeof webEngageLeadFormParams[key] == "object")
                finalListOfParam[key] = JSON.stringify(webEngageLeadFormParams[key]);
            else
                finalListOfParam[key] = webEngageLeadFormParams[key];
            }
            for (var attrname in paramsArr) {
                finalListOfParam[attrname] = paramsArr[attrname];
            }
            finalListOfParam['event_id']="sl_lead_created";
            finalListOfParam['event_name']="Lead created";
            if(sessionStorage) {
              finalListOfParam['we_attr_data'] = JSON.parse(sessionStorage.getItem('we_attr_data'));
              finalListOfParam['we_event_data'] = JSON.parse(sessionStorage.getItem('we_event_data'));
              sessionStorage.setItem('we_attr_data',JSON.stringify([]));
              sessionStorage.setItem('we_event_data',JSON.stringify([]));
            }
            return finalListOfParam;
    };
    this.formatUserPhoneCode = function (phoneCode) {
        var defaultPhoneCode = $rootScope.defaultQueryPhoneCode;
        var formattedPhoneCode = defaultPhoneCode;
        if (phoneCode) {
            var phoneCodePrefix = "+";
            var phoneCodeSuffix = "-";
            try {
                var userPhoneCode = phoneCode.replace(/\D/g, '');
                formattedPhoneCode = phoneCodePrefix + userPhoneCode + phoneCodeSuffix;
            } catch (e) {}
        }
        return formattedPhoneCode;
    };
    this.getSelectedCourseDetailById = function (courseId) {
        var locatorCookie = getCookieByName('locatori9');
        var locatorCookieObj = JSON.parse(locatorCookie);
        var countryId = locatorCookieObj.country_id;
        var paramsArr = {method: 'getCourseDetailsById', courseId: courseId, countryId: countryId};
        var courseDetailsInfo = this.sendPostRequest(baseApiUrlNocache, paramsArr)
                .then(function (data) {
                    var response = data.data;
                    if (response.status == 200 && response.message == 'Success' && response.data) {
                        return response.data;
                    }
                });
        return courseDetailsInfo;
    };
    this.getSelectedCourseDetailByIdChatLead = function (courseId,countryId,productTypeId) {
        if(typeof productTypeId != 'undefined'&& productTypeId == '1') {
            var paramsArr = {method: 'getCourseDetailsById', courseId: courseId, countryId: countryId};
        }else if(typeof productTypeId != 'undefined'&& productTypeId == '2'){
            var paramsArr = {method: 'getBundleDetailsById', courseId: courseId, countryId: countryId};
        }
        var courseDetailsInfo = this.sendPostRequest(baseApiUrlNocache, paramsArr)
                .then(function (data) {
                    var response = data.data;
                    if (response.status == 200 && response.message == 'Success' && response.data) {
                        return response.data;
                    }
                });
        return courseDetailsInfo;
    };
});
 /*------------- End : PostReqService.js-----------*/ 

 /*------------- Begin : StorageService.js-----------*/ 

angular.module('Simplilearn')
        .service('StorageService', function($window) {

            var falseState = false;
            var trueState = true;
            var self = this;

            this.isSupported = function() {
                if (!$window.localStorage) {
                    return falseState;
                }
                return trueState;
            };

            this.setItem = function(key, item) {
                if (self.isSupported()) {
                    if (typeof key !== 'undefined' && key && item) {
                        $window.localStorage.setItem(key, item);
                        return trueState;
                    }

                }
                return falseState;
            };

            this.getItem = function(key) {
                if (self.isSupported()) {
                    if (typeof key !== 'undefined' && key) {
                        var item = $window.localStorage.getItem(key);
                        if (item) {
                            return item;
                        }
                    }
                }

                return falseState;
            };

            this.removeItem = function(key) {
                if (self.getItem(key)) {
                    $window.localStorage.removeItem(key);
                    return trueState;
                }
                return falseState;
            };


        }); /*------------- End : StorageService.js-----------*/ 

 /*------------- Begin : SwipeFactory.js-----------*/ 

//using only the $swipe factory of angular's ngtouch module. Including entire ngTouch is causing problems(anchor tags with ng-click attributes are not redirecting on tapping on touch devices)
angular.module('Simplilearn')  
.factory('$swipe', [function() {
  // The total distance in any direction before we make the call on swipe vs. scroll.
  var MOVE_BUFFER_RADIUS = 10;

  function getCoordinates(event) {
    var touches = event.touches && event.touches.length ? event.touches : [event];
    var e = (event.changedTouches && event.changedTouches[0]) ||
        (event.originalEvent && event.originalEvent.changedTouches &&
            event.originalEvent.changedTouches[0]) ||
        touches[0].originalEvent || touches[0];

    return {
      x: e.clientX,
      y: e.clientY
    };
  }

  return {
    bind: function(element, eventHandlers) {
      // Absolute total movement, used to control swipe vs. scroll.
      var totalX, totalY;
      // Coordinates of the start position.
      var startCoords;
      // Last event's position.
      var lastPos;
      // Whether a swipe is active.
      var active = false;

      element.on('touchstart mousedown', function(event) {
        startCoords = getCoordinates(event);
        active = true;
        totalX = 0;
        totalY = 0;
        lastPos = startCoords;
        eventHandlers['start'] && eventHandlers['start'](startCoords, event);
      });

      element.on('touchcancel', function(event) {
        active = false;
        eventHandlers['cancel'] && eventHandlers['cancel'](event);
      });

      element.on('touchmove mousemove', function(event) {
        if (!active) return;

        // Android will send a touchcancel if it thinks we're starting to scroll.
        // So when the total distance (+ or - or both) exceeds 10px in either direction,
        // we either:
        // - On totalX > totalY, we send preventDefault() and treat this as a swipe.
        // - On totalY > totalX, we let the browser handle it as a scroll.

        if (!startCoords) return;
        var coords = getCoordinates(event);

        totalX += Math.abs(coords.x - lastPos.x);
        totalY += Math.abs(coords.y - lastPos.y);

        lastPos = coords;

        if (totalX < MOVE_BUFFER_RADIUS && totalY < MOVE_BUFFER_RADIUS) {
          return;
        }

        // One of totalX or totalY has exceeded the buffer, so decide on swipe vs. scroll.
        if (totalY > totalX) {
          // Allow native scrolling to take over.
          active = false;
          eventHandlers['cancel'] && eventHandlers['cancel'](event);
          return;
        } else {
          // Prevent the browser from scrolling.
          event.preventDefault();
          eventHandlers['move'] && eventHandlers['move'](coords, event);
        }
      });

      element.on('touchend mouseup', function(event) {
        if (!active) return;
        active = false;
        eventHandlers['end'] && eventHandlers['end'](getCoordinates(event), event);
      });
    }
  };
}]); /*------------- End : SwipeFactory.js-----------*/ 

 /*------------- Begin : YoutubeApiService.js-----------*/ 

angular.module('Simplilearn')
.factory('YoutubeApiService', function($q, $window) {
    var deferred = $q.defer();
    var apiReady = deferred.promise;

    $window.onYouTubeIframeAPIReady = function() {
        deferred.resolve();
    };

    return {
        onReady: function(callback) {
            apiReady.then(callback);
        }
    };
});

 /*------------- End : YoutubeApiService.js-----------*/ 

 /*------------- Begin : jwplayer.js-----------*/ 

"undefined"==typeof jwplayer&&(jwplayer=function(d){if(jwplayer.api)return jwplayer.api.selectPlayer(d)},jwplayer.version="6.6.3896",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(d){function a(b){return function(){return c(b)}}function k(b){return function(){b("Error loading file")}}function f(m,a,e,g){return function(){try{var c=m.responseXML;if(c&&c.firstChild)return e(m)}catch(j){}(c=b.parseXML(m.responseText))&&
c.firstChild?(m=b.extend({},m,{responseXML:c}),e(m)):g&&g(m.responseText?"Invalid XML":a)}}var h=document,e=window,j=navigator,b=d.utils=function(){};b.exists=function(b){switch(typeof b){case "string":return 0<b.length;case "object":return null!==b;case "undefined":return!1}return!0};b.styleDimension=function(b){return b+(0<b.toString().indexOf("%")?"":"px")};b.getAbsolutePath=function(a,e){b.exists(e)||(e=h.location.href);if(b.exists(a)){var c;if(b.exists(a)){c=a.indexOf("://");var g=a.indexOf("?");
c=0<c&&(0>g||g>c)}else c=void 0;if(c)return a;c=e.substring(0,e.indexOf("://")+3);var g=e.substring(c.length,e.indexOf("/",c.length+1)),j;0===a.indexOf("/")?j=a.split("/"):(j=e.split("?")[0],j=j.substring(c.length+g.length+1,j.lastIndexOf("/")),j=j.split("/").concat(a.split("/")));for(var f=[],t=0;t<j.length;t++)j[t]&&(b.exists(j[t])&&"."!=j[t])&&(".."==j[t]?f.pop():f.push(j[t]));return c+g+"/"+f.join("/")}};b.extend=function(){var a=b.extend.arguments;if(1<a.length){for(var e=1;e<a.length;e++)b.foreach(a[e],
function(e,g){try{b.exists(g)&&(a[0][e]=g)}catch(c){}});return a[0]}return null};b.log=function(b,a){"undefined"!=typeof console&&"undefined"!=typeof console.log&&(a?console.log(b,a):console.log(b))};var c=b.userAgentMatch=function(b){return null!==j.userAgent.toLowerCase().match(b)};b.isIE=a(/msie/i);b.isFF=a(/firefox/i);b.isChrome=a(/chrome/i);b.isIOS=a(/iP(hone|ad|od)/i);b.isIPod=a(/iP(hone|od)/i);b.isIPad=a(/iPad/i);b.isSafari602=a(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i);b.isSafari=function(){return c(/safari/i)&&
!c(/chrome/i)&&!c(/chromium/i)&&!c(/android/i)};b.isAndroid=function(b){return b?c(RegExp("android.*"+b,"i")):c(/android/i)};b.isMobile=function(){return b.isIOS()||b.isAndroid()};b.saveCookie=function(b,a){h.cookie="jwplayer."+b+"\x3d"+a+"; path\x3d/"};b.getCookies=function(){for(var b={},a=h.cookie.split("; "),e=0;e<a.length;e++){var g=a[e].split("\x3d");0==g[0].indexOf("jwplayer.")&&(b[g[0].substring(9,g[0].length)]=g[1])}return b};b.typeOf=function(b){var a=typeof b;return"object"===a?!b?"null":
b instanceof Array?"array":a:a};b.translateEventResponse=function(a,e){var c=b.extend({},e);a==d.events.JWPLAYER_FULLSCREEN&&!c.fullscreen?(c.fullscreen="true"==c.message?!0:!1,delete c.message):"object"==typeof c.data?(c=b.extend(c,c.data),delete c.data):"object"==typeof c.metadata&&b.deepReplaceKeyName(c.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);b.foreach(["position","duration","offset"],function(b,a){c[a]&&(c[a]=Math.round(1E3*c[a])/1E3)});return c};b.flashVersion=
function(){if(b.isAndroid())return 0;var a=j.plugins,c;try{if("undefined"!==a&&(c=a["Shockwave Flash"]))return parseInt(c.description.replace(/\D+(\d+)\..*/,"$1"))}catch(f){}if("undefined"!=typeof e.ActiveXObject)try{if(c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(c.GetVariable("$version").split(" ")[1].split(",")[0])}catch(g){}return 0};b.getScriptPath=function(b){for(var a=h.getElementsByTagName("script"),c=0;c<a.length;c++){var g=a[c].src;if(g&&0<=g.indexOf(b))return g.substr(0,
g.indexOf(b))}return""};b.deepReplaceKeyName=function(a,c,e){switch(d.utils.typeOf(a)){case "array":for(var g=0;g<a.length;g++)a[g]=d.utils.deepReplaceKeyName(a[g],c,e);break;case "object":b.foreach(a,function(b,g){var j;if(c instanceof Array&&e instanceof Array){if(c.length!=e.length)return;j=c}else j=[c];for(var f=b,h=0;h<j.length;h++)f=f.replace(RegExp(c[h],"g"),e[h]);a[f]=d.utils.deepReplaceKeyName(g,c,e);b!=f&&delete a[b]})}return a};var n=b.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};b.getPluginPathType=
function(a){if("string"==typeof a){a=a.split("?")[0];var c=a.indexOf("://");if(0<c)return n.ABSOLUTE;var e=a.indexOf("/");a=b.extension(a);return 0>c&&0>e&&(!a||!isNaN(a))?n.CDN:n.RELATIVE}};b.getPluginName=function(b){return b.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")};b.getPluginVersion=function(b){return b.replace(/[^-]*-?([^\.]*).*$/,"$1")};b.isYouTube=function(b){return/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(b)};b.youTubeID=function(b){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(b).slice(1).join("").replace("?",
"")}catch(a){return""}};b.isRtmp=function(b,a){return 0==b.indexOf("rtmp")||"rtmp"==a};b.foreach=function(a,c){var e,g;for(e in a)"function"==b.typeOf(a.hasOwnProperty)?a.hasOwnProperty(e)&&(g=a[e],c(e,g)):(g=a[e],c(e,g))};b.isHTTPS=function(){return 0==e.location.href.indexOf("https")};b.repo=function(){var a="http://p.jwpcdn.com/"+d.version.split(/\W/).splice(0,2).join("/")+"/";try{b.isHTTPS()&&(a=a.replace("http://","https://ssl."))}catch(c){}return a};b.ajax=function(a,c,j){var g;0<a.indexOf("#")&&
(a=a.replace(/#.*$/,""));var h;h=(h=a)&&0<=h.indexOf("://")&&h.split("/")[2]!=e.location.href.split("/")[2]?!0:!1;if(h&&b.exists(e.XDomainRequest))g=new XDomainRequest,g.onload=f(g,a,c,j),g.onerror=k(j,a,g);else if(b.exists(e.XMLHttpRequest)){var d=g=new XMLHttpRequest,t=a;g.onreadystatechange=function(){if(4===d.readyState)switch(d.status){case 200:f(d,t,c,j)();break;case 404:j("File not found")}};g.onerror=k(j,a)}else j&&j();try{g.open("GET",a,!0),g.send(null)}catch(n){j&&j(a)}return g};b.parseXML=
function(b){try{var a;if(e.DOMParser){a=(new DOMParser).parseFromString(b,"text/xml");try{if("parsererror"==a.childNodes[0].firstChild.nodeName)return}catch(c){}}else a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b);return a}catch(g){}};b.filterPlaylist=function(a,c){for(var e=[],g=0;g<a.length;g++){var j=b.extend({},a[g]);j.sources=b.filterSources(j.sources);if(0<j.sources.length){for(var f=0;f<j.sources.length;f++){var h=j.sources[f];h.label||(h.label=f.toString())}e.push(j)}}if(c&&
0==e.length)for(g=0;g<a.length;g++)if(j=b.extend({},a[g]),j.sources=b.filterSources(j.sources,!0),0<j.sources.length){for(f=0;f<j.sources.length;f++)h=j.sources[f],h.label||(h.label=f.toString());e.push(j)}return e};b.filterSources=function(a,c){var e,g,j=b.extensionmap;if(a){g=[];for(var f=0;f<a.length;f++){var h=a[f].type,n=a[f].file;n&&n.trim&&(n=n.trim());h||(h=j.extType(b.extension(n)),a[f].type=h);c?d.embed.flashCanPlay(n,h)&&(e||(e=h),h==e&&g.push(b.extend({},a[f]))):b.canPlayHTML5(h)&&(e||
(e=h),h==e&&g.push(b.extend({},a[f])))}}return g};b.canPlayHTML5=function(a){if(b.isAndroid()&&("hls"==a||"m3u"==a||"m3u8"==a))return!1;a=b.extensionmap.types[a];return!!a&&!!d.vid.canPlayType&&d.vid.canPlayType(a)};b.seconds=function(a){a=a.replace(",",".");var b=a.split(":"),c=0;"s"==a.substr(-1)?c=Number(a.substr(0,a.length-1)):"m"==a.substr(-1)?c=60*Number(a.substr(0,a.length-1)):"h"==a.substr(-1)?c=3600*Number(a.substr(0,a.length-1)):1<b.length?(c=Number(b[b.length-1]),c+=60*Number(b[b.length-
2]),3==b.length&&(c+=3600*Number(b[b.length-3]))):c=Number(a);return c};b.serialize=function(a){return null==a?null:"true"==a.toString().toLowerCase()?!0:"false"==a.toString().toLowerCase()?!1:isNaN(Number(a))||5<a.length||0==a.length?a:Number(a)}}(jwplayer),function(d){var a="video/",k=d.foreach,f={mp4:a+"mp4",vorbis:"audio/ogg",ogg:a+"ogg",webm:a+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},h={mp4:f.mp4,f4v:f.mp4,m4v:f.mp4,mov:f.mp4,m4a:f.aac,f4a:f.aac,aac:f.aac,
mp3:f.mp3,ogv:f.ogg,ogg:f.vorbis,oga:f.vorbis,webm:f.webm,m3u8:f.hls,hls:f.hls},a="video",a={flv:a,f4v:a,mov:a,m4a:a,m4v:a,mp4:a,aac:a,f4a:a,mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},e=d.extensionmap={};k(h,function(a,b){e[a]={html5:b}});k(a,function(a,b){e[a]||(e[a]={});e[a].flash=b});e.types=f;e.mimeType=function(a){var b;k(f,function(c,e){!b&&e==a&&(b=c)});return b};e.extType=function(a){return e.mimeType(h[a])}}(jwplayer.utils),function(d){var a=d.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},
k=document;d.scriptloader=function(f){function h(){j=a.ERROR;c.sendEvent(b.ERROR)}function e(){j=a.COMPLETE;c.sendEvent(b.COMPLETE)}var j=a.NEW,b=jwplayer.events,c=new b.eventdispatcher;d.extend(this,c);this.load=function(){var c=d.scriptloader.loaders[f];if(c&&(c.getStatus()==a.NEW||c.getStatus()==a.LOADING))c.addEventListener(b.ERROR,h),c.addEventListener(b.COMPLETE,e);else if(d.scriptloader.loaders[f]=this,j==a.NEW){j=a.LOADING;var m=k.createElement("script");m.addEventListener?(m.onload=e,m.onerror=
h):m.readyState&&(m.onreadystatechange=function(){("loaded"==m.readyState||"complete"==m.readyState)&&e()});k.getElementsByTagName("head")[0].appendChild(m);m.src=f}};this.getStatus=function(){return j}};d.scriptloader.loaders={}}(jwplayer.utils),function(d){d.trim=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")};d.pad=function(a,d,f){for(f||(f="0");a.length<d;)a=f+a;return a};d.xmlAttribute=function(a,d){for(var f=0;f<a.attributes.length;f++)if(a.attributes[f].name&&a.attributes[f].name.toLowerCase()==
d.toLowerCase())return a.attributes[f].value.toString();return""};d.extension=function(a){if(!a||"rtmp"==a.substr(0,4))return"";a=a.substring(a.lastIndexOf("/")+1,a.length).split("?")[0].split("#")[0];if(-1<a.lastIndexOf("."))return a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase()};d.stringToColor=function(a){a=a.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2");3==a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2));return parseInt(a,16)}}(jwplayer.utils),function(d){var a=
"touchmove",k="touchstart";d.touch=function(f){function h(b){b.type==k?(c=!0,m=j(l.DRAG_START,b)):b.type==a?c&&(p||(e(l.DRAG_START,b,m),p=!0),e(l.DRAG,b)):(c&&(p?e(l.DRAG_END,b):(b.cancelBubble=!0,e(l.TAP,b))),c=p=!1,m=null)}function e(a,b,c){if(n[a]&&(b.preventManipulation&&b.preventManipulation(),b.preventDefault&&b.preventDefault(),b=c?c:j(a,b)))n[a](b)}function j(a,c){var e=null;c.touches&&c.touches.length?e=c.touches[0]:c.changedTouches&&c.changedTouches.length&&(e=c.changedTouches[0]);if(!e)return null;
var j=b.getBoundingClientRect(),e={type:a,target:b,x:e.pageX-window.pageXOffset-j.left,y:e.pageY,deltaX:0,deltaY:0};a!=l.TAP&&m&&(e.deltaX=e.x-m.x,e.deltaY=e.y-m.y);return e}var b=f,c=!1,n={},m=null,p=!1,l=d.touchEvents;document.addEventListener(a,h);document.addEventListener("touchend",function(a){c&&p&&e(l.DRAG_END,a);c=p=!1;m=null});document.addEventListener("touchcancel",h);f.addEventListener(k,h);f.addEventListener("touchend",h);this.addEventListener=function(a,b){n[a]=b};this.removeEventListener=
function(a){delete n[a]};return this}}(jwplayer.utils),function(d){d.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(d){d.key=function(a){var k,f,h;this.edition=function(){return h&&h.getTime()<(new Date).getTime()?"invalid":k};this.token=function(){return f};d.exists(a)||(a="");try{a=d.tea.decrypt(a,"36QXq4W@GSBV^teR");var e=a.split("/");(k=e[0])?/^(free|pro|premium|ads)$/i.test(k)?(f=e[1],e[2]&&0<parseInt(e[2])&&
(h=new Date,h.setTime(String(e[2])))):k="invalid":k="free"}catch(j){k="invalid"}}}(jwplayer.utils),function(d){var a=d.tea={};a.encrypt=function(h,e){if(0==h.length)return"";var j=a.strToLongs(f.encode(h));1>=j.length&&(j[1]=0);for(var b=a.strToLongs(f.encode(e).slice(0,16)),c=j.length,d=j[c-1],m=j[0],p,l=Math.floor(6+52/c),g=0;0<l--;){g+=2654435769;p=g>>>2&3;for(var q=0;q<c;q++)m=j[(q+1)%c],d=(d>>>5^m<<2)+(m>>>3^d<<4)^(g^m)+(b[q&3^p]^d),d=j[q]+=d}j=a.longsToStr(j);return k.encode(j)};a.decrypt=function(h,
e){if(0==h.length)return"";for(var j=a.strToLongs(k.decode(h)),b=a.strToLongs(f.encode(e).slice(0,16)),c=j.length,d=j[c-1],m=j[0],p,l=2654435769*Math.floor(6+52/c);0!=l;){p=l>>>2&3;for(var g=c-1;0<=g;g--)d=j[0<g?g-1:c-1],d=(d>>>5^m<<2)+(m>>>3^d<<4)^(l^m)+(b[g&3^p]^d),m=j[g]-=d;l-=2654435769}j=a.longsToStr(j);j=j.replace(/\0+$/,"");return f.decode(j)};a.strToLongs=function(a){for(var e=Array(Math.ceil(a.length/4)),j=0;j<e.length;j++)e[j]=a.charCodeAt(4*j)+(a.charCodeAt(4*j+1)<<8)+(a.charCodeAt(4*j+
2)<<16)+(a.charCodeAt(4*j+3)<<24);return e};a.longsToStr=function(a){for(var e=Array(a.length),j=0;j<a.length;j++)e[j]=String.fromCharCode(a[j]&255,a[j]>>>8&255,a[j]>>>16&255,a[j]>>>24&255);return e.join("")};var k={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode:function(a,e){var j,b,c,d,m=[],p="",l,g,q=k.code;g=("undefined"==typeof e?0:e)?f.encode(a):a;l=g.length%3;if(0<l)for(;3>l++;)p+="\x3d",g+="\x00";for(l=0;l<g.length;l+=3)j=g.charCodeAt(l),b=g.charCodeAt(l+
1),c=g.charCodeAt(l+2),d=j<<16|b<<8|c,j=d>>18&63,b=d>>12&63,c=d>>6&63,d&=63,m[l/3]=q.charAt(j)+q.charAt(b)+q.charAt(c)+q.charAt(d);m=m.join("");return m=m.slice(0,m.length-p.length)+p},decode:function(a,e){e="undefined"==typeof e?!1:e;var j,b,c,d,m,p=[],l,g=k.code;l=e?f.decode(a):a;for(var q=0;q<l.length;q+=4)j=g.indexOf(l.charAt(q)),b=g.indexOf(l.charAt(q+1)),d=g.indexOf(l.charAt(q+2)),m=g.indexOf(l.charAt(q+3)),c=j<<18|b<<12|d<<6|m,j=c>>>16&255,b=c>>>8&255,c&=255,p[q/4]=String.fromCharCode(j,b,
c),64==m&&(p[q/4]=String.fromCharCode(j,b)),64==d&&(p[q/4]=String.fromCharCode(j));d=p.join("");return e?f.decode(d):d}},f={encode:function(a){a=a.replace(/[\u0080-\u07ff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(192|a>>6,128|a&63)});return a=a.replace(/[\u0800-\uffff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&63,128|a&63)})},decode:function(a){a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&15)<<12|
(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(a)});return a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(a)})}}}(jwplayer.utils),function(d){d.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",
JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",
JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",
JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions"}}(jwplayer),function(d){var a=
jwplayer.utils;d.eventdispatcher=function(d,f){var h,e;this.resetEventListeners=function(){h={};e=[]};this.resetEventListeners();this.addEventListener=function(e,b,c){try{a.exists(h[e])||(h[e]=[]),"string"==a.typeOf(b)&&(b=(new Function("return "+b))()),h[e].push({listener:b,count:c})}catch(f){a.log("error",f)}return!1};this.removeEventListener=function(e,b){if(h[e]){try{for(var c=0;c<h[e].length;c++)if(h[e][c].listener.toString()==b.toString()){h[e].splice(c,1);break}}catch(f){a.log("error",f)}return!1}};
this.addGlobalListener=function(f,b){try{"string"==a.typeOf(f)&&(f=(new Function("return "+f))()),e.push({listener:f,count:b})}catch(c){a.log("error",c)}return!1};this.removeGlobalListener=function(f){if(f){try{for(var b=0;b<e.length;b++)if(e[b].listener.toString()==f.toString()){e.splice(b,1);break}}catch(c){a.log("error",c)}return!1}};this.sendEvent=function(j,b){a.exists(b)||(b={});a.extend(b,{id:d,version:jwplayer.version,type:j});f&&a.log(j,b);if("undefined"!=a.typeOf(h[j]))for(var c=0;c<h[j].length;c++){try{h[j][c].listener(b)}catch(n){a.log("There was an error while handling a listener: "+
n.toString(),h[j][c].listener)}h[j][c]&&(1===h[j][c].count?delete h[j][c]:0<h[j][c].count&&(h[j][c].count-=1))}for(c=0;c<e.length;c++){try{e[c].listener(b)}catch(m){a.log("There was an error while handling a listener: "+m.toString(),e[c].listener)}e[c]&&(1===e[c].count?delete e[c]:0<e[c].count&&(e[c].count-=1))}}}}(jwplayer.events),function(d){var a={},k={};d.plugins=function(){};d.plugins.loadPlugins=function(f,h){k[f]=new d.plugins.pluginloader(new d.plugins.model(a),h);return k[f]};d.plugins.registerPlugin=
function(f,h,e,j){var b=d.utils.getPluginName(f);a[b]||(a[b]=new d.plugins.plugin(f));a[b].registerPlugin(f,h,e,j)}}(jwplayer),function(d){d.plugins.model=function(a){this.addPlugin=function(k){var f=d.utils.getPluginName(k);a[f]||(a[f]=new d.plugins.plugin(k));return a[f]};this.getPlugins=function(){return a}}}(jwplayer),function(d){var a=jwplayer.utils,k=jwplayer.events;d.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2};d.plugin=function(f){function h(){switch(a.getPluginPathType(f)){case a.pluginPathType.ABSOLUTE:return f;
case a.pluginPathType.RELATIVE:return a.getAbsolutePath(f,window.location.href)}}function e(){p=setTimeout(function(){b=a.loaderstatus.COMPLETE;l.sendEvent(k.COMPLETE)},1E3)}function j(){b=a.loaderstatus.ERROR;l.sendEvent(k.ERROR)}var b=a.loaderstatus.NEW,c,n,m,p,l=new k.eventdispatcher;a.extend(this,l);this.load=function(){if(b==a.loaderstatus.NEW)if(0<f.lastIndexOf(".swf"))c=f,b=a.loaderstatus.COMPLETE,l.sendEvent(k.COMPLETE);else if(a.getPluginPathType(f)==a.pluginPathType.CDN)b=a.loaderstatus.COMPLETE,
l.sendEvent(k.COMPLETE);else{b=a.loaderstatus.LOADING;var g=new a.scriptloader(h());g.addEventListener(k.COMPLETE,e);g.addEventListener(k.ERROR,j);g.load()}};this.registerPlugin=function(e,f,j,d){p&&(clearTimeout(p),p=void 0);m=f;j&&d?(c=d,n=j):"string"==typeof j?c=j:"function"==typeof j?n=j:!j&&!d&&(c=e);b=a.loaderstatus.COMPLETE;l.sendEvent(k.COMPLETE)};this.getStatus=function(){return b};this.getPluginName=function(){return a.getPluginName(f)};this.getFlashPath=function(){if(c)switch(a.getPluginPathType(c)){case a.pluginPathType.ABSOLUTE:return c;
case a.pluginPathType.RELATIVE:return 0<f.lastIndexOf(".swf")?a.getAbsolutePath(c,window.location.href):a.getAbsolutePath(c,h())}return null};this.getJS=function(){return n};this.getTarget=function(){return m};this.getPluginmode=function(){if("undefined"!=typeof c&&"undefined"!=typeof n)return d.pluginmodes.HYBRID;if("undefined"!=typeof c)return d.pluginmodes.FLASH;if("undefined"!=typeof n)return d.pluginmodes.JAVASCRIPT};this.getNewInstance=function(a,b,c){return new n(a,b,c)};this.getURL=function(){return f}}}(jwplayer.plugins),
function(d){var a=d.utils,k=d.events,f=a.foreach;d.plugins.pluginloader=function(h,e){function j(){m?g.sendEvent(k.ERROR,{message:p}):n||(n=!0,c=a.loaderstatus.COMPLETE,g.sendEvent(k.COMPLETE))}function b(){l||j();if(!n&&!m){var b=0,c=h.getPlugins();a.foreach(l,function(e){e=a.getPluginName(e);var f=c[e];e=f.getJS();var g=f.getTarget(),f=f.getStatus();if(f==a.loaderstatus.LOADING||f==a.loaderstatus.NEW)b++;else if(e&&(!g||parseFloat(g)>parseFloat(d.version)))m=!0,p="Incompatible player version",j()});
0==b&&j()}}var c=a.loaderstatus.NEW,n=!1,m=!1,p,l=e,g=new k.eventdispatcher;a.extend(this,g);this.setupPlugins=function(b,c,e){var g={length:0,plugins:{}},j=0,d={},n=h.getPlugins();f(c.plugins,function(f,h){var k=a.getPluginName(f),l=n[k],m=l.getFlashPath(),q=l.getJS(),p=l.getURL();m&&(g.plugins[m]=a.extend({},h),g.plugins[m].pluginmode=l.getPluginmode(),g.length++);try{if(q&&c.plugins&&c.plugins[p]){var A=document.createElement("div");A.id=b.id+"_"+k;A.style.position="absolute";A.style.top=0;A.style.zIndex=
j+10;d[k]=l.getNewInstance(b,a.extend({},c.plugins[p]),A);j++;b.onReady(e(d[k],A,!0));b.onResize(e(d[k],A))}}catch(D){a.log("ERROR: Failed to load "+k+".")}});b.plugins=d;return g};this.load=function(){if(!(a.exists(e)&&"object"!=a.typeOf(e))){c=a.loaderstatus.LOADING;f(e,function(c){a.exists(c)&&(c=h.addPlugin(c),c.addEventListener(k.COMPLETE,b),c.addEventListener(k.ERROR,q))});var g=h.getPlugins();f(g,function(a,b){b.load()})}b()};var q=this.pluginFailed=function(){m||(m=!0,p="File not found",j())};
this.getStatus=function(){return c}}}(jwplayer),function(){jwplayer.parsers={localName:function(d){return d?d.localName?d.localName:d.baseName?d.baseName:"":""},textContent:function(d){return d?d.textContent?d.textContent:d.text?d.text:"":""},getChildNode:function(d,a){return d.childNodes[a]},numChildren:function(d){return d.childNodes?d.childNodes.length:0}}}(jwplayer),function(d){var a=d.parsers;(a.jwparser=function(){}).parseEntry=function(k,f){for(var h=[],e=[],j=d.utils.xmlAttribute,b=0;b<k.childNodes.length;b++){var c=
k.childNodes[b];if("jwplayer"==c.prefix){var n=a.localName(c);"source"==n?(delete f.sources,h.push({file:j(c,"file"),"default":j(c,"default"),label:j(c,"label"),type:j(c,"type")})):"track"==n?(delete f.tracks,e.push({file:j(c,"file"),"default":j(c,"default"),kind:j(c,"kind"),label:j(c,"label")})):(f[n]=d.utils.serialize(a.textContent(c)),"file"==n&&f.sources&&delete f.sources)}f.file||(f.file=f.link)}if(h.length){f.sources=[];for(b=0;b<h.length;b++)0<h[b].file.length&&(h[b]["default"]="true"==h[b]["default"]?
!0:!1,h[b].label.length||delete h[b].label,f.sources.push(h[b]))}if(e.length){f.tracks=[];for(b=0;b<e.length;b++)0<e[b].file.length&&(e[b]["default"]="true"==e[b]["default"]?!0:!1,e[b].kind=!e[b].kind.length?"captions":e[b].kind,e[b].label.length||delete e[b].label,f.tracks.push(e[b]))}return f}}(jwplayer),function(d){var a=jwplayer.utils,k=a.xmlAttribute,f=d.localName,h=d.textContent,e=d.numChildren,j=d.mediaparser=function(){};j.parseGroup=function(b,c){var d,m,p=[];for(m=0;m<e(b);m++)if(d=b.childNodes[m],
"media"==d.prefix&&f(d))switch(f(d).toLowerCase()){case "content":k(d,"duration")&&(c.duration=a.seconds(k(d,"duration")));0<e(d)&&(c=j.parseGroup(d,c));k(d,"url")&&(c.sources||(c.sources=[]),c.sources.push({file:k(d,"url"),type:k(d,"type"),width:k(d,"width"),label:k(d,"label")}));break;case "title":c.title=h(d);break;case "description":c.description=h(d);break;case "guid":c.mediaid=h(d);break;case "thumbnail":c.image||(c.image=k(d,"url"));break;case "group":j.parseGroup(d,c);break;case "subtitle":var l=
{};l.file=k(d,"url");l.kind="captions";if(0<k(d,"lang").length){var g=l;d=k(d,"lang");var q={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};d=q[d]?q[d]:d;g.label=d}p.push(l)}c.hasOwnProperty("tracks")||(c.tracks=[]);for(m=0;m<p.length;m++)c.tracks.push(p[m]);return c}}(jwplayer.parsers),function(d){function a(a){for(var c={},e=0;e<a.childNodes.length;e++){var h=a.childNodes[e],p=j(h);if(p)switch(p.toLowerCase()){case "enclosure":c.file=
k.xmlAttribute(h,"url");break;case "title":c.title=f(h);break;case "guid":c.mediaid=f(h);break;case "pubdate":c.date=f(h);break;case "description":c.description=f(h);break;case "link":c.link=f(h);break;case "category":c.tags=c.tags?c.tags+f(h):f(h)}}c=d.mediaparser.parseGroup(a,c);c=d.jwparser.parseEntry(a,c);return new jwplayer.playlist.item(c)}var k=jwplayer.utils,f=d.textContent,h=d.getChildNode,e=d.numChildren,j=d.localName;d.rssparser={};d.rssparser.parse=function(b){for(var c=[],f=0;f<e(b);f++){var d=
h(b,f);if("channel"==j(d).toLowerCase())for(var k=0;k<e(d);k++){var l=h(d,k);"item"==j(l).toLowerCase()&&c.push(a(l))}}return c}}(jwplayer.parsers),function(d){d.playlist=function(a){var k=[];if("array"==d.utils.typeOf(a))for(var f=0;f<a.length;f++)k.push(new d.playlist.item(a[f]));else k.push(new d.playlist.item(a));return k}}(jwplayer),function(d){var a=d.item=function(k){var f=jwplayer.utils,h=f.extend({},a.defaults,k);h.tracks=k&&f.exists(k.tracks)?k.tracks:[];0==h.sources.length&&(h.sources=
[new d.source(h)]);for(var e=0;e<h.sources.length;e++){var j=h.sources[e]["default"];h.sources[e]["default"]=j?"true"==j.toString():!1;h.sources[e]=new d.source(h.sources[e])}if(h.captions&&!f.exists(k.tracks)){for(k=0;k<h.captions.length;k++)h.tracks.push(h.captions[k]);delete h.captions}for(e=0;e<h.tracks.length;e++)h.tracks[e]=new d.track(h.tracks[e]);return h};a.defaults={description:"",image:"",mediaid:"",title:"",sources:[],tracks:[]}}(jwplayer.playlist),function(d){var a=jwplayer,k=a.utils,
f=a.events,h=a.parsers;d.loader=function(){function a(e){try{var j=e.responseXML.childNodes;e="";for(var k=0;k<j.length&&!(e=j[k],8!=e.nodeType);k++);"xml"==h.localName(e)&&(e=e.nextSibling);if("rss"!=h.localName(e))b("Not a valid RSS feed");else{var l=new d(h.rssparser.parse(e));c.sendEvent(f.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(g){b()}}function j(a){b(a.match(/invalid/i)?"Not a valid RSS feed":"")}function b(a){c.sendEvent(f.JWPLAYER_ERROR,{message:a?a:"Error loading file"})}var c=new f.eventdispatcher;
k.extend(this,c);this.load=function(b){k.ajax(b,a,j)}}}(jwplayer.playlist),function(d){var a=jwplayer.utils,k={file:void 0,label:void 0,type:void 0,"default":void 0};d.source=function(f){var d=a.extend({},k);a.foreach(k,function(e){a.exists(f[e])&&(d[e]=f[e],delete f[e])});d.type&&0<d.type.indexOf("/")&&(d.type=a.extensionmap.mimeType(d.type));"m3u8"==d.type&&(d.type="hls");"smil"==d.type&&(d.type="rtmp");return d}}(jwplayer.playlist),function(d){var a=jwplayer.utils,k={file:void 0,label:void 0,kind:"captions",
"default":!1};d.track=function(d){var h=a.extend({},k);d||(d={});a.foreach(k,function(e){a.exists(d[e])&&(h[e]=d[e],delete d[e])});return h}}(jwplayer.playlist),function(d){var a=d.utils,k=d.events,f=!0,h=!1,e=document,j=d.embed=function(b){function c(b,c){a.foreach(c,function(a,c){"function"==typeof b[a]&&b[a].call(b,c)})}function n(){if(r.sitecatalyst)try{null!=s&&s.hasOwnProperty("Media")||l()}catch(e){l();return}if("array"==a.typeOf(r.playlist)&&2>r.playlist.length&&(0==r.playlist.length||!r.playlist[0].sources||
0==r.playlist[0].sources.length))p();else if(!z)if("string"==a.typeOf(r.playlist)){var g=new d.playlist.loader;g.addEventListener(k.JWPLAYER_PLAYLIST_LOADED,function(a){r.playlist=a.playlist;z=h;n()});g.addEventListener(k.JWPLAYER_ERROR,function(a){z=h;p(a)});z=f;g.load(r.playlist)}else if(y.getStatus()==a.loaderstatus.COMPLETE){for(g=0;g<r.modes.length;g++)if(r.modes[g].type&&j[r.modes[g].type]){var u=a.extend({},r),w=new j[r.modes[g].type](t,r.modes[g],u,y,b);if(w.supportsConfig())return w.addEventListener(k.ERROR,
m),w.embed(),c(b,u.events),b}if(r.fallback){var x="No suitable players found and fallback enabled";C=setTimeout(function(){q(x,f)},10);a.log(x);new j.download(t,r,p)}else x="No suitable players found and fallback disabled",q(x,h),a.log(x),t.parentNode.replaceChild(v,t)}}function m(a){g(t,B+a.message)}function p(a){a&&a.message?g(t,"Error loading playlist: "+a.message):g(t,B+"No playable sources found")}function l(){g(t,"Adobe SiteCatalyst Error: Could not find Media Module")}function g(b,c){if(r.fallback){var e=
b.style;e.backgroundColor="#000";e.color="#FFF";e.width=a.styleDimension(r.width);e.height=a.styleDimension(r.height);e.display="table";e.opacity=1;var e=document.createElement("p"),d=e.style;d.verticalAlign="middle";d.textAlign="center";d.display="table-cell";d.font="15px/20px Arial, Helvetica, sans-serif";e.innerHTML=c.replace(":",":\x3cbr\x3e");b.innerHTML="";b.appendChild(e);q(c,f)}else q(c,h)}function q(a,c){C&&(clearTimeout(C),C=null);b.dispatchEvent(k.JWPLAYER_SETUP_ERROR,{message:a,fallback:c})}
var r=new j.config(b.config),t,u,v,w=r.width,x=r.height,B="Error loading player: ",y=d.plugins.loadPlugins(b.id,r.plugins),z=h,C=null;r.fallbackDiv&&(v=r.fallbackDiv,delete r.fallbackDiv);r.id=b.id;u=e.getElementById(b.id);r.aspectratio?b.config.aspectratio=r.aspectratio:delete b.config.aspectratio;t=e.createElement("div");t.id=u.id;t.style.width=0<w.toString().indexOf("%")?w:w+"px";t.style.height=0<x.toString().indexOf("%")?x:x+"px";u.parentNode.replaceChild(t,u);d.embed.errorScreen=g;y.addEventListener(k.COMPLETE,
n);y.addEventListener(k.ERROR,function(a){g(t,"Could not load plugins: "+a.message)});y.load();return b}}(jwplayer),function(d){function a(a){if(a.playlist)for(var d=0;d<a.playlist.length;d++)a.playlist[d]=new h(a.playlist[d]);else{var b={};f.foreach(h.defaults,function(c){k(a,b,c)});b.sources||(a.levels?(b.sources=a.levels,delete a.levels):(d={},k(a,d,"file"),k(a,d,"type"),b.sources=d.file?[d]:[]));a.playlist=[new h(b)]}}function k(a,d,b){f.exists(a[b])&&(d[b]=a[b],delete a[b])}var f=d.utils,h=d.playlist.item;
(d.embed.config=function(e){var j={fallback:!0,height:270,primary:"html5",width:480,base:e.base?e.base:f.getScriptPath("jwplayer.js"),aspectratio:""};e=f.extend(j,d.defaults,e);var j={type:"html5",src:e.base+"jwplayer.html5.js"},b={type:"flash",src:e.base+"jwplayer.flash.swf"};e.modes="flash"==e.primary?[b,j]:[j,b];e.listbar&&(e.playlistsize=e.listbar.size,e.playlistposition=e.listbar.position,e.playlistlayout=e.listbar.layout);e.flashplayer&&(b.src=e.flashplayer);e.html5player&&(j.src=e.html5player);
a(e);b=e.aspectratio;if("string"!=typeof b||!f.exists(b))j=0;else{var c=b.indexOf(":");-1==c?j=0:(j=parseFloat(b.substr(0,c)),b=parseFloat(b.substr(c+1)),j=0>=j||0>=b?0:100*(b/j)+"%")}-1==e.width.toString().indexOf("%")?delete e.aspectratio:j?e.aspectratio=j:delete e.aspectratio;return e}).addConfig=function(e,d){a(d);return f.extend(e,d)}}(jwplayer),function(d){var a=d.utils,k=document;d.embed.download=function(d,h,e){function j(b,c){for(var e=k.querySelectorAll(b),d=0;d<e.length;d++)a.foreach(c,
function(a,b){e[d].style[a]=b})}function b(a,b,c){a=k.createElement(a);b&&(a.className="jwdownload"+b);c&&c.appendChild(a);return a}var c=a.extend({},h),n=c.width?c.width:480,m=c.height?c.height:320,p;h=h.logo?h.logo:{prefix:a.repo(),file:"logo.png",margin:10};var l,g,q,c=c.playlist,r,t=["mp4","aac","mp3"];if(c&&c.length){r=c[0];p=r.sources;for(c=0;c<p.length;c++){var u=p[c],v=u.type?u.type:a.extensionmap.extType(a.extension(u.file));u.file&&a.foreach(t,function(b){v==t[b]?(l=u.file,g=r.image):a.isYouTube(u.file)&&
(q=u.file)})}l?(p=l,e=g,d&&(c=b("a","display",d),b("div","icon",c),b("div","logo",c),p&&c.setAttribute("href",a.getAbsolutePath(p))),c="#"+d.id+" .jwdownload",d.style.width="",d.style.height="",j(c+"display",{width:a.styleDimension(Math.max(320,n)),height:a.styleDimension(Math.max(180,m)),background:"black center no-repeat "+(e?"url("+e+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),j(c+"display div",{position:"absolute",width:"100%",height:"100%"}),j(c+"logo",
{top:h.margin+"px",right:h.margin+"px",background:"top right no-repeat url("+h.prefix+h.file+")"}),j(c+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):
q?(h=q,d=b("embed","",d),d.src="http://www.youtube.com/v/"+a.youTubeID(h),d.type="application/x-shockwave-flash",d.width=n,d.height=m):e()}}}(jwplayer),function(d){var a=d.utils,k=d.events,f={};(d.embed.flash=function(e,j,b,c,n){function m(a,b,c){var e=document.createElement("param");e.setAttribute("name",b);e.setAttribute("value",c);a.appendChild(e)}function p(a,b,c){return function(){try{c&&document.getElementById(n.id+"_wrapper").appendChild(b);var e=document.getElementById(n.id).getPluginConfig("display");
"function"==typeof a.resize&&a.resize(e.width,e.height);b.style.left=e.x;b.style.top=e.h}catch(d){}}}function l(b){if(!b)return{};var c={},e=[];a.foreach(b,function(b,d){var g=a.getPluginName(b);e.push(b);a.foreach(d,function(a,b){c[g+"."+a]=b})});c.plugins=e.join(",");return c}var g=new d.events.eventdispatcher,q=a.flashVersion();a.extend(this,g);this.embed=function(){b.id=n.id;if(10>q)return g.sendEvent(k.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var d,h,u=n.config.listbar,v=a.extend({},
b);if(e.id+"_wrapper"==e.parentNode.id)d=document.getElementById(e.id+"_wrapper");else{d=document.createElement("div");h=document.createElement("div");h.style.display="none";h.id=e.id+"_aspect";d.id=e.id+"_wrapper";d.style.position="relative";d.style.display="block";d.style.width=a.styleDimension(v.width);d.style.height=a.styleDimension(v.height);if(n.config.aspectratio){var w=parseFloat(n.config.aspectratio);h.style.display="block";h.style.marginTop=n.config.aspectratio;d.style.height="auto";d.style.display=
"inline-block";u&&("bottom"==u.position?h.style.paddingBottom=u.size+"px":"right"==u.position&&(h.style.marginBottom=-1*u.size*(w/100)+"px"))}e.parentNode.replaceChild(d,e);d.appendChild(e);d.appendChild(h)}d=c.setupPlugins(n,v,p);0<d.length?a.extend(v,l(d.plugins)):delete v.plugins;"undefined"!=typeof v["dock.position"]&&"false"==v["dock.position"].toString().toLowerCase()&&(v.dock=v["dock.position"],delete v["dock.position"]);d=v.wmode?v.wmode:v.height&&40>=v.height?"transparent":"opaque";h="height width modes events primary base fallback volume".split(" ");
for(u=0;u<h.length;u++)delete v[h[u]];h=a.getCookies();a.foreach(h,function(a,b){"undefined"==typeof v[a]&&(v[a]=b)});h=window.location.href.split("/");h.splice(h.length-1,1);h=h.join("/");v.base=h+"/";f[e.id]=v;a.isIE()?(h='\x3cobject classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width\x3d"100%" height\x3d"100%"id\x3d"'+e.id+'" name\x3d"'+e.id+'" tabindex\x3d0""\x3e',h+='\x3cparam name\x3d"movie" value\x3d"'+j.src+'"\x3e',h+='\x3cparam name\x3d"allowfullscreen" value\x3d"true"\x3e\x3cparam name\x3d"allowscriptaccess" value\x3d"always"\x3e',
h+='\x3cparam name\x3d"seamlesstabbing" value\x3d"true"\x3e',h+='\x3cparam name\x3d"wmode" value\x3d"'+d+'"\x3e',h+='\x3cparam name\x3d"bgcolor" value\x3d"#000000"\x3e',h+="\x3c/object\x3e",e.outerHTML=h,d=document.getElementById(e.id)):(h=document.createElement("object"),h.setAttribute("type","application/x-shockwave-flash"),h.setAttribute("data",j.src),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("bgcolor","#000000"),h.setAttribute("id",e.id),h.setAttribute("name",
e.id),h.setAttribute("tabindex",0),m(h,"allowfullscreen","true"),m(h,"allowscriptaccess","always"),m(h,"seamlesstabbing","true"),m(h,"wmode",d),e.parentNode.replaceChild(h,e),d=h);n.config.aspectratio&&(d.style.position="absolute");n.container=d;n.setPlayer(d,"flash")};this.supportsConfig=function(){if(q)if(b){if("string"==a.typeOf(b.playlist))return!0;try{var c=b.playlist[0].sources;if("undefined"==typeof c)return!0;for(var d=0;d<c.length;d++)if(c[d].file&&h(c[d].file,c[d].type))return!0}catch(e){}}else return!0;
return!1}}).getVars=function(a){return f[a]};var h=d.embed.flashCanPlay=function(d,f){if(a.isYouTube(d)||a.isRtmp(d,f)||"hls"==f)return!0;var b=a.extensionmap[f?f:a.extension(d)];return!b?!1:!!b.flash}}(jwplayer),function(d){var a=d.utils,k=a.extensionmap,f=d.events;d.embed.html5=function(h,e,j,b,c){function n(a,b,c){return function(){try{var d=document.querySelector("#"+h.id+" .jwmain");c&&d.appendChild(b);"function"==typeof a.resize&&(a.resize(d.clientWidth,d.clientHeight),setTimeout(function(){a.resize(d.clientWidth,
d.clientHeight)},400));b.left=d.style.left;b.top=d.style.top}catch(e){}}}function m(a){p.sendEvent(a.type,{message:"HTML5 player not found"})}var p=this,l=new f.eventdispatcher;a.extend(p,l);p.embed=function(){if(d.html5){b.setupPlugins(c,j,n);h.innerHTML="";var g=d.utils.extend({},j);delete g.volume;g=new d.html5.player(g);c.container=document.getElementById(c.id);c.setPlayer(g,"html5")}else g=new a.scriptloader(e.src),g.addEventListener(f.ERROR,m),g.addEventListener(f.COMPLETE,p.embed),g.load()};
p.supportsConfig=function(){if(d.vid.canPlayType)try{if("string"==a.typeOf(j.playlist))return!0;for(var b=j.playlist[0].sources,c=0;c<b.length;c++){var e;var f=b[c].file,h=b[c].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||a.isAndroid()&&("m3u"==a.extension(f)||"m3u8"==a.extension(f))||a.isRtmp(f,h))e=!1;else{var l=k[h?h:a.extension(f)],m;if(!l||l.flash&&!l.html5)m=!1;else{var n=l.html5,p=d.vid;if(n)try{m=p.canPlayType(n)?!0:!1}catch(y){m=!1}else m=!0}e=m}if(e)return!0}}catch(z){}return!1}}}(jwplayer),
function(d){var a=d.embed,k=d.utils,f=k.extend(function(f){var e=k.repo(),j=k.extend({},d.defaults),b=k.extend({},j,f.config),c=f.config,n=b.plugins,m=b.analytics,p=e+"jwpsrv.js",l=e+"sharing.js",g=e+"related.js",q=e+"gapro.js",j=d.key?d.key:j.key,r=(new d.utils.key(j)).edition(),n=n?n:{};"ads"==r&&b.advertising&&(b.advertising.client.match(".js$|.swf$")?n[b.advertising.client]=b.advertising:n[e+b.advertising.client+".js"]=b.advertising);delete c.advertising;c.key=j;b.analytics&&(b.analytics.client&&
b.analytics.client.match(".js$|.swf$"))&&(p=b.analytics.client);delete c.analytics;if("free"==r||!m||!1!==m.enabled)n[p]=m?m:{};delete n.sharing;delete n.related;switch(r){case "premium":case "ads":b.related&&(b.related.client&&b.related.client.match(".js$|.swf$")&&(g=b.related.client),n[g]=b.related),b.ga&&(b.ga.client&&b.ga.client.match(".js$|.swf$")&&(q=b.ga.client),n[q]=b.ga),c.sitecatalyst&&new d.embed.sitecatalyst(f);case "pro":b.sharing&&(b.sharing.client&&b.sharing.client.match(".js$|.swf$")&&
(l=b.sharing.client),n[l]=b.sharing),b.skin&&(c.skin=b.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,k.repo()+"skins/$1.xml"))}c.plugins=n;return new a(f)},a);d.embed=f}(jwplayer),function(d){var a=jwplayer.utils;d.sitecatalyst=function(d){function f(b){c.debug&&a.log(b)}function h(a){a=a.split("/");a=a[a.length-1];a=a.split("?");return a[0]}function e(){if(!g){g=!0;var a=b.getPosition();f("stop: "+m+" : "+a);s.Media.stop(m,a)}}function j(){q||(e(),q=!0,f("close: "+
m),s.Media.close(m),r=!0,l=0)}var b=d,c=a.extend({},b.config.sitecatalyst),n={onPlay:function(){if(!r){var a=b.getPosition();g=!1;f("play: "+m+" : "+a);s.Media.play(m,a)}},onPause:e,onBuffer:e,onIdle:j,onPlaylistItem:function(d){try{r=!0;j();l=0;var e;if(c.mediaName)e=c.mediaName;else{var g=b.getPlaylistItem(d.index);e=g.title?g.title:g.file?h(g.file):g.sources&&g.sources.length?h(g.sources[0].file):""}m=e;p=c.playerName?c.playerName:b.id}catch(f){a.log(f)}},onTime:function(){if(r){var a=b.getDuration();
if(-1==a)return;q=g=r=!1;f("open: "+m+" : "+a+" : "+p);s.Media.open(m,a,p);f("play: "+m+" : 0");s.Media.play(m,0)}a=b.getPosition();if(3<=Math.abs(a-l)){var c=l;f("seek: "+c+" to "+a);f("stop: "+m+" : "+c);s.Media.stop(m,c);f("play: "+m+" : "+a);s.Media.play(m,a)}l=a},onComplete:j},m,p,l,g=!0,q=!0,r;a.foreach(n,function(a){b[a](n[a])})}}(jwplayer.embed),function(d){var a=[],k=d.utils,f=d.events,h=f.state,e=document,j=d.api=function(a){function c(a,b){return function(c){return b(a,c)}}function n(a,
b){r[a]||(r[a]=[],p(f.JWPLAYER_PLAYER_STATE,function(b){var c=b.newstate;b=b.oldstate;if(c==a){var d=r[c];if(d)for(var e=0;e<d.length;e++)"function"==typeof d[e]&&d[e].call(this,{oldstate:b,newstate:c})}}));r[a].push(b);return g}function m(a,b){try{a.jwAddEventListener(b,'function(dat) { jwplayer("'+g.id+'").dispatchEvent("'+b+'", dat); }')}catch(c){k.log("Could not add internal listener")}}function p(a,b){q[a]||(q[a]=[],t&&u&&m(t,a));q[a].push(b);return g}function l(){if(u){for(var a=arguments[0],
b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);if("undefined"!=typeof t&&"function"==typeof t[a])switch(b.length){case 4:return t[a](b[0],b[1],b[2],b[3]);case 3:return t[a](b[0],b[1],b[2]);case 2:return t[a](b[0],b[1]);case 1:return t[a](b[0]);default:return t[a]()}return null}v.push(arguments)}var g=this,q={},r={},t=void 0,u=!1,v=[],w=void 0,x={},B={};g.container=a;g.id=a.id;g.getBuffer=function(){return l("jwGetBuffer")};g.getContainer=function(){return g.container};g.addButton=function(a,
b,c,d){try{B[d]=c,l("jwDockAddButton",a,b,"jwplayer('"+g.id+"').callback('"+d+"')",d)}catch(e){k.log("Could not add dock button"+e.message)}};g.removeButton=function(a){l("jwDockRemoveButton",a)};g.callback=function(a){if(B[a])B[a]()};g.forceState=function(a){l("jwForceState",a);return g};g.releaseState=function(){return l("jwReleaseState")};g.getDuration=function(){return l("jwGetDuration")};g.getFullscreen=function(){return l("jwGetFullscreen")};g.getHeight=function(){return l("jwGetHeight")};g.getLockState=
function(){return l("jwGetLockState")};g.getMeta=function(){return g.getItemMeta()};g.getMute=function(){return l("jwGetMute")};g.getPlaylist=function(){var a=l("jwGetPlaylist");"flash"==g.renderingMode&&k.deepReplaceKeyName(a,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);return a};g.getPlaylistItem=function(a){k.exists(a)||(a=g.getPlaylistIndex());return g.getPlaylist()[a]};g.getPlaylistIndex=function(){return l("jwGetPlaylistIndex")};g.getPosition=function(){return l("jwGetPosition")};
g.getRenderingMode=function(){return g.renderingMode};g.getState=function(){return l("jwGetState")};g.getVolume=function(){return l("jwGetVolume")};g.getWidth=function(){return l("jwGetWidth")};g.setFullscreen=function(a){k.exists(a)?l("jwSetFullscreen",a):l("jwSetFullscreen",!l("jwGetFullscreen"));return g};g.setMute=function(a){k.exists(a)?l("jwSetMute",a):l("jwSetMute",!l("jwGetMute"));return g};g.lock=function(){return g};g.unlock=function(){return g};g.load=function(a){l("jwLoad",a);return g};
g.playlistItem=function(a){l("jwPlaylistItem",parseInt(a));return g};g.playlistPrev=function(){l("jwPlaylistPrev");return g};g.playlistNext=function(){l("jwPlaylistNext");return g};g.resize=function(a,b){if("flash"!=g.renderingMode){var c=document.getElementById(g.id);c.className=c.className.replace(/\s+aspectMode/,"");c.style.display="block";l("jwResize",a,b)}else{var c=e.getElementById(g.id+"_wrapper"),d=e.getElementById(g.id+"_aspect");d&&(d.style.display="none");c&&(c.style.display="block",c.style.width=
k.styleDimension(a),c.style.height=k.styleDimension(b))}return g};g.play=function(a){"undefined"==typeof a?(a=g.getState(),a==h.PLAYING||a==h.BUFFERING?l("jwPause"):l("jwPlay")):l("jwPlay",a);return g};g.pause=function(a){"undefined"==typeof a?(a=g.getState(),a==h.PLAYING||a==h.BUFFERING?l("jwPause"):l("jwPlay")):l("jwPause",a);return g};g.stop=function(){l("jwStop");return g};g.seek=function(a){l("jwSeek",a);return g};g.setVolume=function(a){l("jwSetVolume",a);return g};g.loadInstream=function(a,
b){return w=new j.instream(this,t,a,b)};g.getQualityLevels=function(){return l("jwGetQualityLevels")};g.getCurrentQuality=function(){return l("jwGetCurrentQuality")};g.setCurrentQuality=function(a){l("jwSetCurrentQuality",a)};g.getCaptionsList=function(){return l("jwGetCaptionsList")};g.getCurrentCaptions=function(){return l("jwGetCurrentCaptions")};g.setCurrentCaptions=function(a){l("jwSetCurrentCaptions",a)};g.getControls=function(){return l("jwGetControls")};g.getSafeRegion=function(){return l("jwGetSafeRegion")};
g.setControls=function(a){l("jwSetControls",a)};g.destroyPlayer=function(){l("jwPlayerDestroy")};g.playAd=function(a){l("jwPlayAd",a)};var y={onBufferChange:f.JWPLAYER_MEDIA_BUFFER,onBufferFull:f.JWPLAYER_MEDIA_BUFFER_FULL,onError:f.JWPLAYER_ERROR,onSetupError:f.JWPLAYER_SETUP_ERROR,onFullscreen:f.JWPLAYER_FULLSCREEN,onMeta:f.JWPLAYER_MEDIA_META,onMute:f.JWPLAYER_MEDIA_MUTE,onPlaylist:f.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:f.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:f.JWPLAYER_PLAYLIST_COMPLETE,
onReady:f.API_READY,onResize:f.JWPLAYER_RESIZE,onComplete:f.JWPLAYER_MEDIA_COMPLETE,onSeek:f.JWPLAYER_MEDIA_SEEK,onTime:f.JWPLAYER_MEDIA_TIME,onVolume:f.JWPLAYER_MEDIA_VOLUME,onBeforePlay:f.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:f.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:f.JWPLAYER_DISPLAY_CLICK,onControls:f.JWPLAYER_CONTROLS,onQualityLevels:f.JWPLAYER_MEDIA_LEVELS,onQualityChange:f.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:f.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:f.JWPLAYER_CAPTIONS_CHANGED,
onAdError:f.JWPLAYER_AD_ERROR,onAdClick:f.JWPLAYER_AD_CLICK,onAdImpression:f.JWPLAYER_AD_IMPRESSION,onAdTime:f.JWPLAYER_AD_TIME,onAdComplete:f.JWPLAYER_AD_COMPLETE,onAdCompanions:f.JWPLAYER_AD_COMPANIONS};k.foreach(y,function(a){g[a]=c(y[a],p)});var z={onBuffer:h.BUFFERING,onPause:h.PAUSED,onPlay:h.PLAYING,onIdle:h.IDLE};k.foreach(z,function(a){g[a]=c(z[a],n)});g.remove=function(){if(!u)throw"Cannot call remove() before player is ready";v=[];j.destroyPlayer(this.id)};g.setup=function(a){if(d.embed){var b=
e.getElementById(g.id);b&&(a.fallbackDiv=b);b=g;v=[];j.destroyPlayer(b.id);b=d(g.id);b.config=a;return new d.embed(b)}return g};g.registerPlugin=function(a,b,c,e){d.plugins.registerPlugin(a,b,c,e)};g.setPlayer=function(a,b){t=a;g.renderingMode=b};g.detachMedia=function(){if("html5"==g.renderingMode)return l("jwDetachMedia")};g.attachMedia=function(a){if("html5"==g.renderingMode)return l("jwAttachMedia",a)};g.dispatchEvent=function(a,b){if(q[a])for(var c=k.translateEventResponse(a,b),d=0;d<q[a].length;d++)if("function"==
typeof q[a][d])try{a==f.JWPLAYER_PLAYLIST_LOADED&&k.deepReplaceKeyName(c.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),q[a][d].call(this,c)}catch(e){k.log("There was an error calling back an event handler")}};g.dispatchInstreamEvent=function(a){w&&w.dispatchEvent(a,arguments)};g.callInternal=l;g.playerReady=function(a){u=!0;t||g.setPlayer(e.getElementById(a.id));g.container=e.getElementById(g.id);k.foreach(q,function(a){m(t,a)});p(f.JWPLAYER_PLAYLIST_ITEM,function(){x=
{}});p(f.JWPLAYER_MEDIA_META,function(a){k.extend(x,a.metadata)});for(g.dispatchEvent(f.API_READY);0<v.length;)l.apply(this,v.shift())};g.getItemMeta=function(){return x};g.isBeforePlay=function(){return t.jwIsBeforePlay()};g.isBeforeComplete=function(){return t.jwIsBeforeComplete()};return g};j.selectPlayer=function(b){var c;k.exists(b)||(b=0);b.nodeType?c=b:"string"==typeof b&&(c=e.getElementById(b));return c?(b=j.playerById(c.id))?b:j.addPlayer(new j(c)):"number"==typeof b?a[b]:null};j.playerById=
function(b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c];return null};j.addPlayer=function(b){for(var c=0;c<a.length;c++)if(a[c]==b)return b;a.push(b);return b};j.destroyPlayer=function(b){for(var c=-1,d,f=0;f<a.length;f++)a[f].id==b&&(c=f,d=a[f]);0<=c&&(b=d.id,f=e.getElementById(b+("flash"==d.renderingMode?"_wrapper":"")),k.clearCss&&k.clearCss("#"+b),f&&("html5"==d.renderingMode&&d.destroyPlayer(),d=e.createElement("div"),d.id=b,f.parentNode.replaceChild(d,f)),a.splice(c,1));return null};
d.playerReady=function(a){var c=d.api.playerById(a.id);c?c.playerReady(a):d.api.selectPlayer(a.id).playerReady(a)}}(jwplayer),function(d){var a=d.events,k=d.utils,f=a.state;d.api.instream=function(d,e,j,b){function c(a,b){l[a]||(l[a]=[],p.jwInstreamAddEventListener(a,'function(dat) { jwplayer("'+m.id+'").dispatchInstreamEvent("'+a+'", dat); }'));l[a].push(b);return this}function n(b,d){g[b]||(g[b]=[],c(a.JWPLAYER_PLAYER_STATE,function(a){var c=a.newstate,d=a.oldstate;if(c==b){var e=g[c];if(e)for(var f=
0;f<e.length;f++)"function"==typeof e[f]&&e[f].call(this,{oldstate:d,newstate:c,type:a.type})}}));g[b].push(d);return this}var m=d,p=e,l={},g={};this.dispatchEvent=function(a,b){if(l[a])for(var c=k.translateEventResponse(a,b[1]),d=0;d<l[a].length;d++)"function"==typeof l[a][d]&&l[a][d].call(this,c)};this.onError=function(b){return c(a.JWPLAYER_ERROR,b)};this.onFullscreen=function(b){return c(a.JWPLAYER_FULLSCREEN,b)};this.onMeta=function(b){return c(a.JWPLAYER_MEDIA_META,b)};this.onMute=function(b){return c(a.JWPLAYER_MEDIA_MUTE,
b)};this.onComplete=function(b){return c(a.JWPLAYER_MEDIA_COMPLETE,b)};this.onTime=function(b){return c(a.JWPLAYER_MEDIA_TIME,b)};this.onBuffer=function(a){return n(f.BUFFERING,a)};this.onPause=function(a){return n(f.PAUSED,a)};this.onPlay=function(a){return n(f.PLAYING,a)};this.onIdle=function(a){return n(f.IDLE,a)};this.onClick=function(b){return c(a.JWPLAYER_INSTREAM_CLICK,b)};this.onInstreamDestroyed=function(b){return c(a.JWPLAYER_INSTREAM_DESTROYED,b)};this.play=function(a){p.jwInstreamPlay(a)};
this.pause=function(a){p.jwInstreamPause(a)};this.destroy=function(){p.jwInstreamDestroy()};this.setText=function(a){p.jwInstreamSetText(a?a:"")};m.callInternal("jwLoadInstream",j,b?b:{})}}(jwplayer),function(d){var a=d.api,k=a.selectPlayer;a.selectPlayer=function(a){return(a=k(a))?a:{registerPlugin:function(a,e,f){d.plugins.registerPlugin(a,e,f)}}}}(jwplayer)); /*------------- End : jwplayer.js-----------*/ 

